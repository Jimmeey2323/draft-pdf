{"version":3,"file":"SourceDataModal-bAltj-zl.js","sources":["../../src/components/ui/SourceDataModal.tsx"],"sourcesContent":["\nimport React from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { designTokens } from '@/utils/designTokens';\nimport { cn } from '@/lib/utils';\n\ninterface SourceDefinition {\n  name: string;              // Human-friendly name e.g. \"Sales\"\n  sheetName?: string;        // Sheet/tab name inside spreadsheet e.g. \"Sales\"\n  spreadsheetId?: string;    // Google Spreadsheet ID\n  data: any[];               // Raw rows already loaded by the page/section\n}\n\ninterface SourceDataModalProps {\n  open: boolean;\n  onOpenChange: (open: boolean) => void;\n  sources: SourceDefinition[];\n}\n\nexport const SourceDataModal: React.FC<SourceDataModalProps> = ({ open, onOpenChange, sources = [] }) => {\n  // Build columns from first row keys, fallback to empty\n  const buildColumns = (rows: any[]) => {\n    if (!rows || !Array.isArray(rows) || rows.length === 0) return [];\n    const sample = rows[0];\n    if (!sample || typeof sample !== 'object') return [];\n    const keys = Object.keys(sample);\n    return keys;\n  };\n\n  const safeSources = sources || [];\n\n  return (\n    <Dialog open={open} onOpenChange={onOpenChange}>\n      <DialogContent className=\"max-w-5xl w-[95vw]\">\n        <DialogHeader>\n          <DialogTitle className=\"text-slate-900\">Source Data Viewer</DialogTitle>\n        </DialogHeader>\n\n        {safeSources.length === 0 ? (\n          <div className=\"text-sm text-slate-600\">No sources provided.</div>\n        ) : (\n          <Tabs defaultValue={safeSources[0]?.name} className=\"w-full\">\n            <TabsList className=\"mb-4\">\n              {safeSources.map((s) => (\n                <TabsTrigger key={s.name} value={s.name}>\n                  {s.name}\n                </TabsTrigger>\n              ))}\n            </TabsList>\n\n            {safeSources.map((s) => {\n              const cols = buildColumns(s.data);\n              const limitedRows = (s.data || []).slice(0, 500);\n              return (\n                <TabsContent key={s.name} value={s.name} className=\"space-y-3\">\n                  <div className=\"flex items-center gap-2 text-sm\">\n                    {s.spreadsheetId && (\n                      <Badge variant=\"outline\" className=\"border-slate-200 text-slate-700\">{s.spreadsheetId}</Badge>\n                    )}\n                    {s.sheetName && (\n                      <Badge variant=\"secondary\" className=\"text-slate-700\">Sheet: {s.sheetName}</Badge>\n                    )}\n                    <Badge className=\"bg-slate-900 text-white\">Rows shown: {limitedRows.length}</Badge>\n                  </div>\n\n                  <div className={cn(\n                    designTokens.card.background,\n                    designTokens.card.shadow,\n                    designTokens.card.border,\n                    designTokens.card.radius,\n                    'overflow-hidden'\n                  )}>\n                    <div className=\"overflow-auto\" style={{ maxHeight: '60vh' }}>\n                      <Table>\n                        <TableHeader className={designTokens.table.header + ' sticky top-0 z-10'}>\n                          <TableRow>\n                            {cols.map((col) => (\n                              <TableHead key={col} className={cn(designTokens.table.headerText, 'px-4 py-3')}>\n                                {col}\n                              </TableHead>\n                            ))}\n                          </TableRow>\n                        </TableHeader>\n                        <TableBody>\n                          {limitedRows.map((row, idx) => (\n                            <TableRow key={idx} className={designTokens.table.row}>\n                              {cols.map((col) => (\n                                <TableCell key={col} className={cn(designTokens.table.cell)}>\n                                  {row[col] !== undefined && row[col] !== null ? String(row[col]) : ''}\n                                </TableCell>\n                              ))}\n                            </TableRow>\n                          ))}\n                        </TableBody>\n                      </Table>\n                    </div>\n                  </div>\n                </TabsContent>\n              );\n            })}\n          </Tabs>\n        )}\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default SourceDataModal;\n"],"names":["SourceDataModal","open","onOpenChange","sources","buildColumns","rows","sample","safeSources","Dialog","jsxs","DialogContent","jsx","DialogHeader","DialogTitle","Tabs","TabsList","s","TabsTrigger","cols","limitedRows","TabsContent","Badge","cn","designTokens","Table","TableHeader","TableRow","col","TableHead","TableBody","row","idx","TableCell"],"mappings":"ySAsBO,MAAMA,EAAkD,CAAC,CAAE,KAAAC,EAAM,aAAAC,EAAc,QAAAC,EAAU,CAAA,KAAS,CAEvG,MAAMC,EAAgBC,GAAgB,CACpC,GAAI,CAACA,GAAQ,CAAC,MAAM,QAAQA,CAAI,GAAKA,EAAK,SAAW,EAAG,MAAO,CAAA,EAC/D,MAAMC,EAASD,EAAK,CAAC,EACrB,MAAI,CAACC,GAAU,OAAOA,GAAW,SAAiB,CAAA,EACrC,OAAO,KAAKA,CAAM,CAEjC,EAEMC,EAAcJ,GAAW,CAAA,EAE/B,aACGK,EAAA,CAAO,KAAAP,EAAY,aAAAC,EAClB,SAAAO,EAAAA,KAACC,EAAA,CAAc,UAAU,qBACvB,SAAA,CAAAC,EAAAA,IAACC,GACC,SAAAD,EAAAA,IAACE,EAAA,CAAY,UAAU,iBAAiB,8BAAkB,CAAA,CAC5D,EAECN,EAAY,SAAW,EACtBI,MAAC,MAAA,CAAI,UAAU,yBAAyB,SAAA,sBAAA,CAAoB,EAE5DF,EAAAA,KAACK,GAAK,aAAcP,EAAY,CAAC,GAAG,KAAM,UAAU,SAClD,SAAA,CAAAI,MAACI,GAAS,UAAU,OACjB,SAAAR,EAAY,IAAKS,GAChBL,MAACM,EAAA,CAAyB,MAAOD,EAAE,KAChC,SAAAA,EAAE,MADaA,EAAE,IAEpB,CACD,EACH,EAECT,EAAY,IAAKS,GAAM,CACtB,MAAME,EAAOd,EAAaY,EAAE,IAAI,EAC1BG,GAAeH,EAAE,MAAQ,CAAA,GAAI,MAAM,EAAG,GAAG,EAC/C,cACGI,EAAA,CAAyB,MAAOJ,EAAE,KAAM,UAAU,YACjD,SAAA,CAAAP,EAAAA,KAAC,MAAA,CAAI,UAAU,kCACZ,SAAA,CAAAO,EAAE,qBACAK,EAAA,CAAM,QAAQ,UAAU,UAAU,kCAAmC,WAAE,aAAA,CAAc,EAEvFL,EAAE,WACDP,EAAAA,KAACY,GAAM,QAAQ,YAAY,UAAU,iBAAiB,SAAA,CAAA,UAAQL,EAAE,SAAA,EAAU,EAE5EP,EAAAA,KAACY,EAAA,CAAM,UAAU,0BAA0B,SAAA,CAAA,eAAaF,EAAY,MAAA,CAAA,CAAO,CAAA,EAC7E,EAEAR,MAAC,OAAI,UAAWW,EACdC,EAAa,KAAK,WAClBA,EAAa,KAAK,OAClBA,EAAa,KAAK,OAClBA,EAAa,KAAK,OAClB,iBAAA,EAEA,SAAAZ,EAAAA,IAAC,MAAA,CAAI,UAAU,gBAAgB,MAAO,CAAE,UAAW,MAAA,EACjD,SAAAF,EAAAA,KAACe,EAAA,CACC,SAAA,CAAAb,EAAAA,IAACc,EAAA,CAAY,UAAWF,EAAa,MAAM,OAAS,qBAClD,SAAAZ,EAAAA,IAACe,EAAA,CACE,SAAAR,EAAK,IAAKS,SACRC,EAAA,CAAoB,UAAWN,EAAGC,EAAa,MAAM,WAAY,WAAW,EAC1E,SAAAI,CAAA,EADaA,CAEhB,CACD,CAAA,CACH,CAAA,CACF,EACAhB,MAACkB,GACE,SAAAV,EAAY,IAAI,CAACW,EAAKC,UACpBL,EAAA,CAAmB,UAAWH,EAAa,MAAM,IAC/C,WAAK,IAAKI,GACThB,MAACqB,EAAA,CAAoB,UAAWV,EAAGC,EAAa,MAAM,IAAI,EACvD,WAAII,CAAG,IAAM,QAAaG,EAAIH,CAAG,IAAM,KAAO,OAAOG,EAAIH,CAAG,CAAC,EAAI,IADpDA,CAEhB,CACD,CAAA,EALYI,CAMf,CACD,CAAA,CACH,CAAA,CAAA,CACF,EACF,CAAA,CACF,CAAA,CAAA,EA1CgBf,EAAE,IA2CpB,CAEJ,CAAC,CAAA,CAAA,CACH,CAAA,CAAA,CAEJ,CAAA,CACF,CAEJ"}