import{h as N,j as e,D as y,n as C,o as L,q as D,B as M,X as k,C as i,c as l,a as T,b as V}from"./index-Bm67KBkU.js";import{a as o,f as p,B as m}from"./index-DkD_C-d1.js";import{M as R}from"./ModernDataTable-Qj0casC7.js";import{U as v}from"./users-7Ku-1TDB.js";import{T as A,C as S}from"./googleAuth-BGo8ElRc.js";import{A as U}from"./award-D0x2LQSI.js";import"./table-DhXofKdS.js";import"./tableStyles-BJWvDwDQ.js";import"./CopyTableButton-Blm2CDq4.js";import"./dropdown-menu-B9zQ9u84.js";import"./chevron-right-CbIMR3DA.js";import"./SalesMotionHero-sGphstF2.js";import"./dollar-sign-CKqx8kbC.js";import"./file-text-DChZNHsM.js";import"./select-CM-Birqk.js";import"./index-BdQq_4o_.js";const Z=({isOpen:f,onClose:x,title:u,data:a,type:d})=>{const t=N.useMemo(()=>a?(d==="month"||d==="year")&&a.clients?a.clients:Array.isArray(a)?a:[]:[],[a,d]),w=[{key:"firstName",header:"First Name",className:"min-w-[120px]",render:(s,n)=>e.jsxs("div",{className:"font-medium text-gray-900",children:[s," ",n.lastName]})},{key:"email",header:"Email",className:"min-w-[200px]",render:s=>e.jsx("div",{className:"text-sm text-gray-600 truncate",title:s,children:s})},{key:"firstVisitDate",header:"First Visit",align:"center",render:s=>e.jsx("div",{className:"text-sm text-gray-700",children:new Date(s).toLocaleDateString()})},{key:"isNew",header:"Status",align:"center",render:s=>e.jsx(m,{variant:s?.toLowerCase().includes("new")?"default":"secondary",children:s||"Unknown"})},{key:"conversionStatus",header:"Conversion",align:"center",render:s=>e.jsx(m,{variant:s?.toLowerCase().includes("converted")?"default":"secondary",className:s?.toLowerCase().includes("converted")?"bg-green-100 text-green-800":"",children:s||"Pending"})},{key:"retentionStatus",header:"Retention",align:"center",render:s=>e.jsx(m,{variant:s?.toLowerCase().includes("retained")?"default":"secondary",className:s?.toLowerCase().includes("retained")?"bg-purple-100 text-purple-800":"",children:s||"Pending"})},{key:"ltv",header:"LTV",align:"right",render:s=>e.jsx("span",{className:"font-semibold text-emerald-600",children:p(s||0)})},{key:"firstVisitLocation",header:"Location",className:"min-w-[150px]",render:s=>e.jsx("div",{className:"text-sm text-gray-600 truncate",title:s,children:s||"Unknown"})}],c=N.useMemo(()=>{const s=t.length,n=t.filter(r=>(r.isNew||"").toLowerCase().includes("new")).length,h=t.filter(r=>(r.conversionStatus||"").toLowerCase().includes("converted")).length,g=t.filter(r=>(r.retentionStatus||"").toLowerCase().includes("retained")).length,j=t.reduce((r,b)=>r+(b.ltv||0),0);return{totalMembers:s,newMembers:n,convertedMembers:h,retainedMembers:g,conversionRate:n>0?h/n*100:0,retentionRate:s>0?g/s*100:0,avgLTV:s>0?j/s:0,totalLTV:j}},[t]);return e.jsx(y,{open:f,onOpenChange:x,children:e.jsxs(C,{className:"max-w-7xl max-h-[90vh] overflow-y-auto",children:[e.jsx(L,{className:"pb-4 border-b",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(D,{className:"text-xl font-bold text-gray-900 flex items-center gap-2",children:[e.jsx(v,{className:"w-5 h-5"}),u," - Detailed Analysis"]}),e.jsx(M,{variant:"ghost",size:"sm",onClick:x,className:"hover:bg-gray-100",children:e.jsx(k,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[e.jsx(i,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(v,{className:"w-4 h-4 text-blue-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:o(c.totalMembers)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Total Members"})]})]})})}),e.jsx(i,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(A,{className:"w-4 h-4 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:o(c.newMembers)}),e.jsx("div",{className:"text-xs text-gray-500",children:"New Members"})]})]})})}),e.jsx(i,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(U,{className:"w-4 h-4 text-purple-500"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-600",children:[c.conversionRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-gray-500",children:"Conversion Rate"})]})]})})}),e.jsx(i,{children:e.jsx(l,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{className:"w-4 h-4 text-emerald-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-600",children:p(c.avgLTV)}),e.jsx("div",{className:"text-xs text-gray-500",children:"Avg LTV"})]})]})})})]}),e.jsxs(i,{children:[e.jsx(T,{children:e.jsxs(V,{className:"text-lg",children:["Client Details (",o(t.length)," members)"]})}),e.jsx(l,{className:"p-0",children:e.jsx(R,{data:t,columns:w,headerGradient:"from-slate-800 via-slate-900 to-slate-800",maxHeight:"400px"})})]})]})})};export{Z as ClientConversionDrillDownModalV2};
//# sourceMappingURL=ClientConversionDrillDownModalV2-JQJJUc24.js.map
