import{h as y,j as e,D as C,n as k,o as L,q as T,B as D,X as V,C as i,c as d}from"./index-Bm67KBkU.js";import{a as n,f as g,B as m}from"./index-DkD_C-d1.js";import{M as U}from"./ModernDataTable-Qj0casC7.js";import{U as b}from"./users-7Ku-1TDB.js";import{T as p}from"./target-BmxdxojS.js";import{U as M}from"./user-check-CLHYCjic.js";import{C as P,T as R}from"./googleAuth-BGo8ElRc.js";import{A}from"./award-D0x2LQSI.js";import{P as S}from"./phone-Eid_XCcT.js";import{M as B}from"./StudioLocationTabs-BSKYatd_.js";import"./table-DhXofKdS.js";import"./tableStyles-BJWvDwDQ.js";import"./CopyTableButton-Blm2CDq4.js";import"./dropdown-menu-B9zQ9u84.js";import"./chevron-right-CbIMR3DA.js";import"./SalesMotionHero-sGphstF2.js";import"./dollar-sign-CKqx8kbC.js";import"./file-text-DChZNHsM.js";import"./select-CM-Birqk.js";import"./index-BdQq_4o_.js";const ae=({isOpen:j,onClose:x,title:v,data:r,type:H})=>{const N=[{key:"fullName",header:"Name",className:"min-w-[150px]",render:(s,l)=>e.jsxs("div",{className:"font-medium text-gray-900",children:[e.jsx("div",{className:"text-sm font-semibold",children:s}),e.jsxs("div",{className:"text-xs text-gray-500 flex items-center gap-1",children:[e.jsx(S,{className:"w-3 h-3"}),l.phone]})]})},{key:"email",header:"Email",className:"min-w-[200px]",render:s=>e.jsx("div",{className:"text-sm text-gray-600 truncate",title:s,children:s})},{key:"source",header:"Source",align:"center",render:s=>e.jsx(m,{variant:"outline",className:"text-blue-600 border-blue-200 bg-blue-50",children:s||"Unknown"})},{key:"stage",header:"Stage",align:"center",render:s=>e.jsx(m,{variant:"outline",className:`${s?.includes("Trial")?"text-purple-600 border-purple-200 bg-purple-50":s?.includes("Proximity")?"text-red-600 border-red-200 bg-red-50":"text-gray-600 border-gray-200 bg-gray-50"}`,children:s||"Unknown"})},{key:"conversionStatus",header:"Conversion",align:"center",render:s=>e.jsx(m,{variant:s?.toLowerCase().includes("converted")?"default":"secondary",className:s?.toLowerCase().includes("converted")?"bg-green-100 text-green-800":"",children:s||"Pending"})},{key:"ltv",header:"LTV",align:"right",render:s=>e.jsx("span",{className:"font-semibold text-emerald-600",children:g(s||0)})},{key:"visits",header:"Visits",align:"center",render:s=>e.jsx("div",{className:"text-sm font-medium text-gray-700",children:n(s||0)})},{key:"center",header:"Location",className:"min-w-[150px]",render:s=>e.jsxs("div",{className:"text-sm text-gray-600 truncate flex items-center gap-1",title:s,children:[e.jsx(B,{className:"w-3 h-3 text-gray-400"}),s||"Unknown"]})}],a=y.useMemo(()=>{const s=r.length,l=r.filter(t=>t.stage==="Trial Completed").length,u=r.filter(t=>t.stage?.includes("Trial")).length,o=r.filter(t=>t.conversionStatus==="Converted").length,w=r.filter(t=>t.stage?.includes("Proximity")||t.remarks?.toLowerCase().includes("proximity")).length,h=r.reduce((t,c)=>t+(c.ltv||0),0),f=r.reduce((t,c)=>t+(c.visits||0),0);return{totalLeads:s,trialsCompleted:l,trialsScheduled:u,convertedLeads:o,proximityIssues:w,conversionRate:s>0?o/s*100:0,trialConversionRate:l>0?o/l*100:0,avgLTV:s>0?h/s:0,avgVisits:s>0?f/s:0,totalLTV:h}},[r]);return e.jsx(C,{open:j,onOpenChange:x,children:e.jsxs(k,{className:"w-[90vw] max-w-[1400px] max-h-[90vh] overflow-hidden p-0 bg-white border-slate-200 shadow-2xl",children:[e.jsx(L,{className:"pb-6 border-b border-slate-700 bg-gradient-to-r from-slate-900 via-blue-950 to-slate-900 text-white -m-6 mb-6 p-6 shadow-xl",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(T,{className:"text-2xl font-bold text-white flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-white/10 rounded-lg backdrop-blur-sm",children:e.jsx(b,{className:"w-5 h-5 text-white"})}),v," - Detailed Analysis"]}),e.jsx(D,{variant:"ghost",size:"sm",onClick:x,className:"text-white hover:bg-white/20",children:e.jsx(V,{className:"w-4 h-4"})})]})}),e.jsxs("div",{className:"overflow-y-auto px-8 py-6 space-y-8",style:{maxHeight:"calc(90vh - 140px)"},children:[e.jsxs("div",{className:"p-6 bg-white border-2 border-blue-400 rounded-xl shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-blue-700 mb-6 flex items-center gap-2 pb-4 border-b border-blue-200",children:[e.jsx(p,{className:"w-5 h-5 text-blue-600"}),"Key Performance Metrics"]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-4",children:[e.jsx(i,{className:"bg-white border-2 border-blue-500 shadow-md hover:shadow-xl transition-all duration-300",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(b,{className:"w-5 h-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-blue-700",children:n(a.totalLeads)}),e.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Total Leads"})]})]})})}),e.jsx(i,{className:"bg-white border-2 border-emerald-500 shadow-md hover:shadow-xl transition-all duration-300",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(M,{className:"w-5 h-5 text-emerald-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-emerald-700",children:n(a.convertedLeads)}),e.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Converted"})]})]})})}),e.jsx(i,{className:"bg-white border-2 border-purple-500 shadow-md hover:shadow-xl transition-all duration-300",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(p,{className:"w-5 h-5 text-purple-600"}),e.jsxs("div",{children:[e.jsxs("div",{className:"text-2xl font-bold text-purple-700",children:[a.conversionRate.toFixed(1),"%"]}),e.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Conv. Rate"})]})]})})}),e.jsx(i,{className:"bg-white border-2 border-rose-500 shadow-md hover:shadow-xl transition-all duration-300",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(P,{className:"w-5 h-5 text-rose-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-rose-700",children:g(a.avgLTV)}),e.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Avg LTV"})]})]})})}),e.jsx(i,{className:"bg-white border-2 border-amber-500 shadow-md hover:shadow-xl transition-all duration-300",children:e.jsx(d,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(R,{className:"w-5 h-5 text-amber-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"text-2xl font-bold text-amber-700",children:a.avgVisits.toFixed(1)}),e.jsx("div",{className:"text-xs text-slate-600 font-medium",children:"Avg Visits"})]})]})})})]})]}),e.jsxs("div",{className:"p-6 bg-white border-2 border-emerald-400 rounded-xl shadow-lg",children:[e.jsxs("h3",{className:"text-lg font-semibold text-emerald-700 mb-6 flex items-center gap-2 pb-4 border-b border-emerald-200",children:[e.jsx(A,{className:"w-5 h-5 text-emerald-600"}),"Lead Details (",n(r.length)," leads)"]}),e.jsx(U,{data:r,columns:N,headerGradient:"from-slate-900 via-blue-950 to-slate-900",maxHeight:"450px",stickyHeader:!0})]})]})]})})};export{ae as FunnelDrillDownModal};
//# sourceMappingURL=FunnelDrillDownModal-ZygOoCxj.js.map
