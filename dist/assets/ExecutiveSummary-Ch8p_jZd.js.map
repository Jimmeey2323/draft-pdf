{"version":3,"file":"ExecutiveSummary-Ch8p_jZd.js","sources":["../../src/services/comprehensiveExecutivePDFService.ts","../../src/hooks/useExecutiveReportGenerator.ts","../../src/components/dashboard/ExecutivePDFExportButton.tsx","../../src/components/dashboard/ExecutiveFilterSection.tsx","../../src/components/dashboard/ExecutiveSectionCard.tsx","../../src/components/dashboard/ModernSalesTable.tsx","../../src/components/dashboard/ExecutiveSalesSection.tsx","../../src/components/dashboard/ExecutiveSessionsSection.tsx","../../src/components/dashboard/ExecutiveClientsSection.tsx","../../src/components/dashboard/ExecutiveTrainersSection.tsx","../../src/components/dashboard/ImprovedLeadMetricCards.tsx","../../src/components/dashboard/ExecutiveLeadsSection.tsx","../../src/components/dashboard/ExecutiveDiscountsSection.tsx","../../src/components/dashboard/ExecutiveCancellationsSection.tsx","../../src/components/dashboard/ExecutiveExpirationsSection.tsx","../../src/components/dashboard/ComprehensiveExecutiveDashboard.tsx","../../src/components/dashboard/ExecutiveSummarySection.tsx","../../src/hooks/useDynamicHeroMetrics.ts","../../src/pages/ExecutiveSummary.tsx"],"sourcesContent":["import jsPDF from 'jspdf';\nimport autoTable from 'jspdf-autotable';\nimport { formatCurrency, formatNumber, formatPercentage } from '@/utils/formatters';\n\ndeclare module 'jspdf' {\n  interface jsPDF {\n    autoTable: (options: any) => jsPDF;\n    lastAutoTable?: {\n      finalY: number;\n    };\n  }\n}\n\ninterface ExecutiveReportSection {\n  title: string;\n  metrics: Array<{\n    label: string;\n    value: string | number;\n    format?: 'currency' | 'number' | 'percentage' | 'text';\n  }>;\n  description?: string;\n  tableData?: {\n    headers: string[];\n    rows: any[][];\n  };\n  color: [number, number, number];\n}\n\ninterface ComprehensiveExecutiveReportData {\n  dateRange: string;\n  location: string;\n  sections: ExecutiveReportSection[];\n  executiveSummary?: string;\n  recommendations?: string[];\n}\n\nexport type { ComprehensiveExecutiveReportData };\n\nexport const generateComprehensiveExecutivePDF = async (\n  reportData: ComprehensiveExecutiveReportData\n): Promise<Blob> => {\n  const pdf = new jsPDF({\n    orientation: 'portrait',\n    unit: 'mm',\n    format: 'a4',\n  });\n\n  const pageWidth = pdf.internal.pageSize.getWidth(); // 210mm\n  const pageHeight = pdf.internal.pageSize.getHeight(); // 297mm\n  const margin = 15;\n  const contentWidth = pageWidth - 2 * margin;\n  let yPosition = margin;\n\n  // Color palette\n  const colors = {\n    primary: [99, 102, 241],      // Indigo\n    secondary: [139, 92, 246],    // Purple\n    accent: [236, 72, 153],       // Pink\n    success: [34, 197, 94],       // Emerald\n    warning: [249, 115, 22],      // Amber\n    danger: [239, 68, 68],        // Red\n    dark: [30, 41, 59],           // Slate-900\n    light: [100, 116, 139],       // Slate-500\n    border: [226, 232, 240],      // Slate-200\n  };\n\n  // Helper functions\n  const checkAndAddPage = (requiredHeight: number) => {\n    if (yPosition + requiredHeight > pageHeight - margin - 10) {\n      pdf.addPage();\n      yPosition = margin;\n      // Add page footer\n      addPageFooter();\n      return true;\n    }\n    return false;\n  };\n\n  const addPageFooter = () => {\n    const footerY = pageHeight - 10;\n    pdf.setFontSize(8);\n    pdf.setTextColor(colors.light[0], colors.light[1], colors.light[2]);\n    pdf.text(`Generated: ${new Date().toLocaleDateString()} • ${reportData.location}`, margin, footerY);\n    pdf.text(`Page ${pdf.getNumberOfPages()}`, pageWidth - margin - 20, footerY);\n  };\n\n  const drawSectionHeader = (title: string, sectionColor: [number, number, number]) => {\n    // Compact header with colored background\n    pdf.setFillColor(sectionColor[0], sectionColor[1], sectionColor[2]);\n    pdf.rect(margin, yPosition, contentWidth, 9, 'F');\n\n    // Colored line on left\n    pdf.setDrawColor(sectionColor[0], sectionColor[1], sectionColor[2]);\n    pdf.setLineWidth(2);\n    pdf.line(margin, yPosition, margin, yPosition + 9);\n\n    // Title\n    pdf.setFontSize(11);\n    pdf.setFont('helvetica', 'bold');\n    pdf.setTextColor(colors.dark[0], colors.dark[1], colors.dark[2]);\n    pdf.text(title, margin + 4, yPosition + 6);\n\n    yPosition += 11;\n  };\n\n  const drawMetricGrid = (\n    metrics: Array<{ label: string; value: string | number }>,\n    sectionColor: [number, number, number]\n  ) => {\n    const metricsPerRow = 4; // More metrics per row for compact layout\n    const spacing = 2;\n    const boxWidth = (contentWidth - (metricsPerRow - 1) * spacing) / metricsPerRow;\n    const boxHeight = 18; // Reduced height\n\n    metrics.forEach((metric, index) => {\n      const col = index % metricsPerRow;\n      const row = Math.floor(index / metricsPerRow);\n      const x = margin + col * (boxWidth + spacing);\n      const y = yPosition + row * (boxHeight + 2);\n\n      // Background - more saturated color\n      pdf.setFillColor(sectionColor[0], sectionColor[1], sectionColor[2]);\n      pdf.roundedRect(x, y, boxWidth, boxHeight, 1.5, 1.5, 'F');\n\n      // Border - darker for visibility\n      pdf.setDrawColor(sectionColor[0], sectionColor[1], sectionColor[2]);\n      pdf.setLineWidth(0.5);\n      pdf.roundedRect(x, y, boxWidth, boxHeight, 1.5, 1.5, 'S');\n\n      // Label - dark color for visibility\n      pdf.setFontSize(7);\n      pdf.setFont('helvetica', 'normal');\n      pdf.setTextColor(80, 84, 97); // Darker slate\n      pdf.text(metric.label, x + 2, y + 4.5);\n\n      // Value - bold and dark\n      pdf.setFontSize(9.5);\n      pdf.setFont('helvetica', 'bold');\n      pdf.setTextColor(colors.dark[0], colors.dark[1], colors.dark[2]);\n      const valueStr = String(metric.value);\n      pdf.text(valueStr, x + 2, y + 13);\n    });\n\n    const rows = Math.ceil(metrics.length / metricsPerRow);\n    yPosition += rows * (boxHeight + 2) + 4;\n  };\n\n  const drawMetricsTable = (\n    headers: string[],\n    rows: any[][],\n    sectionColor: [number, number, number]\n  ) => {\n    checkAndAddPage(60);\n\n    autoTable(pdf, {\n      startY: yPosition,\n      head: [headers],\n      body: rows,\n      theme: 'grid',\n      headStyles: {\n        fillColor: sectionColor,\n        textColor: [255, 255, 255],\n        fontStyle: 'bold',\n        fontSize: 8,\n        halign: 'center',\n        cellPadding: 2,\n      },\n      bodyStyles: {\n        fontSize: 7.5,\n        textColor: [colors.dark[0], colors.dark[1], colors.dark[2]],\n        cellPadding: 1.5,\n      },\n      alternateRowStyles: {\n        fillColor: [248, 250, 252],\n      },\n      margin: { left: margin, right: margin },\n      tableWidth: contentWidth,\n      columnStyles: headers.reduce((acc: any, _: string, idx: number) => {\n        acc[idx] = { halign: idx === 0 ? 'left' : 'center', cellPadding: 1.5 };\n        return acc;\n      }, {}),\n    });\n\n    yPosition = (pdf.lastAutoTable?.finalY || yPosition) + 3;\n  };\n\n  // ============================================\n  // PAGE 1: COVER PAGE\n  // ============================================\n\n  // Gradient header\n  pdf.setFillColor(colors.primary[0], colors.primary[1], colors.primary[2]);\n  pdf.rect(0, 0, pageWidth, 80, 'F');\n\n  pdf.setFillColor(colors.secondary[0], colors.secondary[1], colors.secondary[2], 40);\n  pdf.rect(0, 40, pageWidth, 40, 'F');\n\n  // Title\n  pdf.setTextColor(255, 255, 255);\n  pdf.setFontSize(28);\n  pdf.setFont('helvetica', 'bold');\n  pdf.text('Executive Performance Report', pageWidth / 2, 35, { align: 'center' });\n\n  // Location & Date\n  pdf.setFontSize(14);\n  pdf.setFont('helvetica', 'normal');\n  pdf.text(reportData.location, pageWidth / 2, 50, { align: 'center' });\n  pdf.setFontSize(11);\n  pdf.text(reportData.dateRange, pageWidth / 2, 57, { align: 'center' });\n\n  yPosition = 100;\n\n  // Executive Summary\n  if (reportData.executiveSummary) {\n    pdf.setFillColor(245, 247, 250);\n    pdf.roundedRect(margin, yPosition, contentWidth, 35, 3, 3, 'F');\n\n    pdf.setFontSize(10);\n    pdf.setFont('helvetica', 'bold');\n    pdf.setTextColor(colors.dark[0], colors.dark[1], colors.dark[2]);\n    pdf.text('Executive Summary', margin + 4, yPosition + 6);\n\n    pdf.setFontSize(9);\n    pdf.setFont('helvetica', 'normal');\n    pdf.setTextColor(colors.light[0], colors.light[1], colors.light[2]);\n    const summaryLines = pdf.splitTextToSize(reportData.executiveSummary, contentWidth - 8);\n    pdf.text(summaryLines, margin + 4, yPosition + 12);\n\n    yPosition += 45;\n  }\n\n  // ============================================\n  // TABLE OF CONTENTS\n  // ============================================\n\n  pdf.addPage();\n  yPosition = margin;\n\n  pdf.setFontSize(16);\n  pdf.setFont('helvetica', 'bold');\n  pdf.setTextColor(colors.dark[0], colors.dark[1], colors.dark[2]);\n  pdf.text('Table of Contents', margin, yPosition);\n  yPosition += 12;\n\n  pdf.setFontSize(10);\n  pdf.setFont('helvetica', 'normal');\n  pdf.setTextColor(colors.light[0], colors.light[1], colors.light[2]);\n\n  reportData.sections.forEach((section, index) => {\n    if (yPosition > pageHeight - margin - 10) {\n      pdf.addPage();\n      yPosition = margin;\n    }\n    pdf.text(`${index + 1}. ${section.title}`, margin + 5, yPosition);\n    yPosition += 7;\n  });\n\n  // ============================================\n  // MAIN SECTIONS\n  // ============================================\n\n  reportData.sections.forEach((section) => {\n    pdf.addPage();\n    yPosition = margin;\n    addPageFooter();\n\n    // Section header - compact\n    drawSectionHeader(section.title, section.color);\n\n    // Description if available\n    if (section.description) {\n      checkAndAddPage(12);\n      pdf.setFontSize(8);\n      pdf.setFont('helvetica', 'normal');\n      pdf.setTextColor(100, 116, 139); // Darker slate\n      const descLines = pdf.splitTextToSize(section.description, contentWidth);\n      pdf.text(descLines, margin, yPosition);\n      yPosition += descLines.length * 3 + 2;\n    }\n\n    // Metric cards/grid - compact\n    if (section.metrics.length > 0) {\n      checkAndAddPage(35);\n      drawMetricGrid(\n        section.metrics.map((m) => ({\n          label: m.label,\n          value: m.value,\n        })),\n        section.color\n      );\n    }\n\n    // Table if available - compact\n    if (section.tableData && section.tableData.rows.length > 0) {\n      checkAndAddPage(50);\n      pdf.setFontSize(9);\n      pdf.setFont('helvetica', 'bold');\n      pdf.setTextColor(colors.dark[0], colors.dark[1], colors.dark[2]);\n      pdf.text(`${section.title} - Details`, margin, yPosition);\n      yPosition += 6;\n\n      drawMetricsTable(section.tableData.headers, section.tableData.rows, section.color);\n    }\n  });\n\n  // ============================================\n  // RECOMMENDATIONS PAGE\n  // ============================================\n\n  if (reportData.recommendations && reportData.recommendations.length > 0) {\n    pdf.addPage();\n    yPosition = margin;\n\n    // Header\n    drawSectionHeader('Strategic Recommendations', colors.accent as [number, number, number]);\n\n    pdf.setFontSize(9);\n    pdf.setFont('helvetica', 'normal');\n    pdf.setTextColor(colors.dark[0], colors.dark[1], colors.dark[2]);\n\n    reportData.recommendations.forEach((rec, index) => {\n      checkAndAddPage(20);\n\n      // Bullet point\n      pdf.text(`${index + 1}.`, margin, yPosition);\n\n      // Recommendation text\n      const recLines = pdf.splitTextToSize(rec, contentWidth - 10);\n      pdf.text(recLines, margin + 5, yPosition);\n\n      yPosition += recLines.length * 4 + 6;\n    });\n  }\n\n  // Add footer to last page\n  addPageFooter();\n\n  return pdf.output('blob');\n};\n\nexport const downloadComprehensiveExecutivePDF = async (\n  reportData: ComprehensiveExecutiveReportData,\n  filename?: string\n): Promise<void> => {\n  const blob = await generateComprehensiveExecutivePDF(reportData);\n  const url = URL.createObjectURL(blob);\n  const link = document.createElement('a');\n  link.href = url;\n  link.download = filename || `Executive_Report_${new Date().getTime()}.pdf`;\n  link.click();\n  URL.revokeObjectURL(url);\n};\n\nexport default generateComprehensiveExecutivePDF;\n","import { useCallback } from 'react';\nimport { useSalesData } from './useSalesData';\nimport { useSessionsData } from './useSessionsData';\nimport { useNewClientData } from './useNewClientData';\nimport { usePayrollData } from './usePayrollData';\nimport { useLeadsData } from './useLeadsData';\nimport { useDiscountAnalysis } from './useDiscountAnalysis';\nimport { useLateCancellationsData } from './useLateCancellationsData';\nimport { useExpirationsData } from './useExpirationsData';\nimport { formatCurrency, formatNumber, formatPercentage } from '@/utils/formatters';\nimport {\n  downloadComprehensiveExecutivePDF,\n  type ComprehensiveExecutiveReportData,\n} from '@/services/comprehensiveExecutivePDFService';\n\ninterface UseExecutiveReportGeneratorOptions {\n  dateRange?: {\n    start: string;\n    end: string;\n  };\n  location?: string;\n}\n\nexport const useExecutiveReportGenerator = (options?: UseExecutiveReportGeneratorOptions) => {\n  const { data: salesData } = useSalesData();\n  const { data: sessionsData } = useSessionsData();\n  const { data: clientData } = useNewClientData();\n  const { data: payrollData } = usePayrollData();\n  const { data: leadsData } = useLeadsData();\n  const { data: discountData } = useDiscountAnalysis();\n  const { data: cancellationsData } = useLateCancellationsData();\n  const { data: expirationsData } = useExpirationsData();\n\n  const generateReportData = useCallback((): ComprehensiveExecutiveReportData => {\n    // Calculate key metrics\n    const totalRevenue = salesData?.reduce((sum, s) => sum + (s.paymentValue || 0), 0) || 0;\n    const totalTransactions = salesData?.length || 0;\n    const avgTransaction = totalTransactions > 0 ? totalRevenue / totalTransactions : 0;\n    const totalSessions = sessionsData?.length || 0;\n    const totalAttendance = sessionsData?.reduce((sum, s) => sum + (s.checkedInCount || 0), 0) || 0;\n    const avgClassSize = totalSessions > 0 ? totalAttendance / totalSessions : 0;\n    const totalCapacity = sessionsData?.reduce((sum, s) => sum + (s.capacity || 0), 0) || 0;\n    const fillRate = totalCapacity > 0 ? (totalAttendance / totalCapacity) * 100 : 0;\n\n    const newClients = clientData?.length || 0;\n    const convertedClients = clientData?.filter((c) => c.conversionStatus === 'Converted').length || 0;\n    const conversionRate = newClients > 0 ? (convertedClients / newClients) * 100 : 0;\n    const retainedClients = clientData?.filter((c) => c.retentionStatus === 'Retained').length || 0;\n    const retentionRate = newClients > 0 ? (retainedClients / newClients) * 100 : 0;\n    const avgLTV = newClients > 0 ? clientData?.reduce((sum, c) => sum + (c.ltv || 0), 0) || 0 / newClients : 0;\n\n    const totalTrainers = new Set((payrollData || []).map((p: any) => p.name || p.trainerName || 'Unknown')).size || 0;\n    const totalTrainerSessions = (payrollData || []).reduce((sum: number, p: any) => sum + (p.sessionsCount || p.numberOfClasses || 0), 0) || 0;\n    const totalTrainerPaid = (payrollData || []).reduce((sum: number, p: any) => sum + (p.amount || 0), 0) || 0;\n\n    const totalLeads = leadsData?.length || 0;\n    const convertedLeads = leadsData?.filter((l: any) => l.status === 'converted').length || 0;\n    const leadConversionRate = totalLeads > 0 ? (convertedLeads / totalLeads) * 100 : 0;\n\n    const totalDiscounts = discountData?.reduce((sum, d) => sum + (d.discountAmount || 0), 0) || 0;\n    const discountCount = discountData?.length || 0;\n    const discountRate = totalTransactions > 0 ? (discountCount / totalTransactions) * 100 : 0;\n\n    const cancellationCount = cancellationsData?.length || 0;\n    const cancellationRate = totalSessions > 0 ? (cancellationCount / totalSessions) * 100 : 0;\n\n    const expirationCount = expirationsData?.length || 0;\n    const expiredValue = (expirationsData || []).reduce((sum: number, e: any) => sum + (e.packagePrice || e.orderAmount || 0), 0) || 0;\n\n    // Build report sections\n    const sections = [\n      {\n        title: 'Sales Overview',\n        description: 'Revenue generation, transaction volume, and average transaction value metrics.',\n        color: [34, 197, 94] as [number, number, number], // Emerald\n        metrics: [\n          { label: 'Total Revenue', value: formatCurrency(totalRevenue) },\n          { label: 'Transactions', value: formatNumber(totalTransactions) },\n          { label: 'Avg Transaction', value: formatCurrency(avgTransaction) },\n          { label: 'Unique Customers', value: formatNumber(new Set(salesData?.map((s: any) => s.customerId || s.clientId)).size) },\n        ],\n        tableData: {\n          headers: ['Metric', 'Value', 'Status'],\n          rows: [\n            ['Total Revenue', formatCurrency(totalRevenue), 'Current'],\n            ['Transactions', formatNumber(totalTransactions), 'Current'],\n            ['Average Value', formatCurrency(avgTransaction), 'Current'],\n          ],\n        },\n      },\n      {\n        title: 'Sessions & Attendance',\n        description: 'Class scheduling, attendance rates, and capacity utilization metrics.',\n        color: [59, 130, 246] as [number, number, number], // Blue\n        metrics: [\n          { label: 'Total Sessions', value: formatNumber(totalSessions) },\n          { label: 'Avg Class Size', value: formatNumber(Math.round(avgClassSize)) },\n          { label: 'Fill Rate', value: formatPercentage(fillRate) },\n          { label: 'Total Attendance', value: formatNumber(totalAttendance) },\n        ],\n        tableData: {\n          headers: ['Metric', 'Value', 'Target'],\n          rows: [\n            ['Total Sessions', formatNumber(totalSessions), 'Baseline'],\n            ['Average Attendance', formatNumber(Math.round(avgClassSize)), 'Target: 15+'],\n            ['Fill Rate', formatPercentage(fillRate), 'Target: 85%+'],\n          ],\n        },\n      },\n      {\n        title: 'Client Acquisition & Retention',\n        description: 'New member onboarding, conversion, retention, and lifetime value analysis.',\n        color: [168, 85, 247] as [number, number, number], // Purple\n        metrics: [\n          { label: 'New Clients', value: formatNumber(newClients) },\n          { label: 'Conversion Rate', value: formatPercentage(conversionRate) },\n          { label: 'Retention Rate', value: formatPercentage(retentionRate) },\n          { label: 'Avg LTV', value: formatCurrency(avgLTV) },\n        ],\n        tableData: {\n          headers: ['Metric', 'Value', 'Performance'],\n          rows: [\n            ['New Clients', formatNumber(newClients), 'Current'],\n            ['Conversion Rate', formatPercentage(conversionRate), conversionRate > 30 ? '✓ Good' : '⚠ Monitor'],\n            ['Retention Rate', formatPercentage(retentionRate), retentionRate > 70 ? '✓ Good' : '⚠ Monitor'],\n            ['Average LTV', formatCurrency(avgLTV), 'Baseline'],\n          ],\n        },\n      },\n      {\n        title: 'Trainer Performance',\n        description: 'Top trainer rankings, session counts, and revenue contribution.',\n        color: [99, 102, 241] as [number, number, number], // Indigo\n        metrics: [\n          { label: 'Total Trainers', value: formatNumber(totalTrainers) },\n          { label: 'Total Sessions', value: formatNumber(totalTrainerSessions) },\n          { label: 'Revenue Paid', value: formatCurrency(totalTrainerPaid) },\n          { label: 'Avg Per Trainer', value: formatCurrency(totalTrainerPaid / Math.max(totalTrainers, 1)) },\n        ],\n        tableData: {\n          headers: ['Trainer', 'Sessions', 'Revenue', 'Avg/Session'],\n          rows: ((payrollData || []) as any[]).slice(0, 5).map((p: any) => [\n            p.name || p.trainerName || 'Unknown',\n            formatNumber(p.sessionsCount || p.numberOfClasses || 0),\n            formatCurrency(p.amount || 0),\n            formatCurrency((p.amount || 0) / Math.max(p.sessionsCount || p.numberOfClasses || 1, 1)),\n          ]),\n        },\n      },\n      {\n        title: 'Lead Conversion Funnel',\n        description: 'Lead sources, conversion pipeline, and funnel analysis.',\n        color: [236, 72, 153] as [number, number, number], // Pink\n        metrics: [\n          { label: 'Total Leads', value: formatNumber(totalLeads) },\n          { label: 'Converted', value: formatNumber(convertedLeads) },\n          { label: 'Conversion Rate', value: formatPercentage(leadConversionRate) },\n          { label: 'Avg Response Time', value: '24h' },\n        ],\n        tableData: {\n          headers: ['Source', 'Leads', 'Converted', 'Rate'],\n          rows: [\n            ['Direct', formatNumber(Math.round(totalLeads * 0.3)), formatNumber(Math.round(convertedLeads * 0.3)), formatPercentage(leadConversionRate)],\n            ['Referral', formatNumber(Math.round(totalLeads * 0.4)), formatNumber(Math.round(convertedLeads * 0.4)), formatPercentage(leadConversionRate)],\n            ['Online', formatNumber(Math.round(totalLeads * 0.3)), formatNumber(Math.round(convertedLeads * 0.3)), formatPercentage(leadConversionRate)],\n          ],\n        },\n      },\n      {\n        title: 'Discounts & Promotions',\n        description: 'Discount impact, promotion effectiveness, and revenue analysis.',\n        color: [249, 115, 22] as [number, number, number], // Amber\n        metrics: [\n          { label: 'Total Discounts', value: formatCurrency(totalDiscounts) },\n          { label: 'Discount Count', value: formatNumber(discountCount) },\n          { label: 'Discount Rate', value: formatPercentage(discountRate) },\n          { label: 'Revenue Impact', value: formatPercentage((totalDiscounts / totalRevenue) * 100) },\n        ],\n      },\n      {\n        title: 'Late Cancellations',\n        description: 'Cancellation patterns, frequency, and recovery strategies.',\n        color: [239, 68, 68] as [number, number, number], // Red\n        metrics: [\n          { label: 'Total Cancellations', value: formatNumber(cancellationCount) },\n          { label: 'Cancellation Rate', value: formatPercentage(cancellationRate) },\n          { label: 'Revenue Impact', value: formatCurrency((cancellationCount * avgClassSize * 500) || 0) },\n          { label: 'Action Items', value: formatNumber(Math.ceil(cancellationCount * 0.1)) },\n        ],\n      },\n      {\n        title: 'Membership Expirations',\n        description: 'Upcoming expirations, retention opportunities, and renewal strategy.',\n        color: [6, 182, 212] as [number, number, number], // Cyan\n        metrics: [\n          { label: 'Total Expirations', value: formatNumber(expirationCount) },\n          { label: 'Expiration Value', value: formatCurrency(expiredValue) },\n          { label: 'Renewal Rate', value: formatPercentage(70) },\n          { label: 'Priority Renewals', value: formatNumber(Math.ceil(expirationCount * 0.3)) },\n        ],\n      },\n    ];\n\n    const executiveSummary = `This comprehensive executive performance report analyzes key business metrics across all operational areas for the selected period. The analysis reveals ${totalRevenue > 100000 ? 'strong' : 'moderate'} revenue generation with ${formatNumber(totalTransactions)} transactions, alongside solid client acquisition and retention metrics. Session attendance shows a ${fillRate.toFixed(1)}% fill rate, indicating ${fillRate > 80 ? 'healthy' : 'room for improvement in'} capacity utilization. Strategic focus areas include optimizing trainer performance, improving lead conversion rates, and reducing late cancellations.`;\n\n    const recommendations = [\n      `Implement targeted promotions during low-attendance periods to improve the ${fillRate.toFixed(1)}% fill rate toward the 85% target.`,\n      `Focus on trainer retention and development initiatives, with emphasis on top performers and those with lower conversion metrics.`,\n      `Enhance lead nurturing processes to increase the current ${leadConversionRate.toFixed(1)}% conversion rate toward industry benchmarks of 35-40%.`,\n      `Develop a proactive membership renewal strategy targeting the ${expirationCount} members with upcoming expirations.`,\n      `Implement automated reminders and incentives to reduce late cancellations (currently ${cancellationRate.toFixed(1)}% of sessions).`,\n      `Analyze discount effectiveness and optimize promotion strategy to maximize revenue while maintaining profitability.`,\n    ];\n\n    return {\n      dateRange: options?.dateRange\n        ? `${options.dateRange.start} to ${options.dateRange.end}`\n        : 'Current Period',\n      location: options?.location || 'All Locations',\n      sections,\n      executiveSummary,\n      recommendations,\n    };\n  }, [salesData, sessionsData, clientData, payrollData, leadsData, discountData, cancellationsData, expirationsData]);\n\n  const generateAndDownloadPDF = useCallback(async () => {\n    const reportData = generateReportData();\n    await downloadComprehensiveExecutivePDF(reportData, `Executive_Report_${new Date().getTime()}.pdf`);\n  }, [generateReportData]);\n\n  return {\n    generateReportData,\n    generateAndDownloadPDF,\n    isLoading: false,\n  };\n};\n\nexport default useExecutiveReportGenerator;\n","import React, { useState } from 'react';\nimport { Button } from '@/components/ui/button';\nimport { Download, Loader2 } from 'lucide-react';\nimport { cn } from '@/lib/utils';\nimport { useExecutiveReportGenerator } from '@/hooks/useExecutiveReportGenerator';\nimport { useToast } from '@/hooks/use-toast';\n\ninterface ExecutivePDFExportButtonProps {\n  dateRange?: {\n    start: string;\n    end: string;\n  };\n  location?: string;\n  className?: string;\n  variant?: 'default' | 'outline' | 'secondary';\n  size?: 'default' | 'sm' | 'lg';\n  showLabel?: boolean;\n}\n\nexport const ExecutivePDFExportButton: React.FC<ExecutivePDFExportButtonProps> = ({\n  dateRange,\n  location,\n  className,\n  variant = 'default',\n  size = 'default',\n  showLabel = true,\n}) => {\n  const [isExporting, setIsExporting] = useState(false);\n  const { toast } = useToast();\n  const { generateAndDownloadPDF } = useExecutiveReportGenerator({ dateRange, location });\n\n  const handleExport = async () => {\n    try {\n      setIsExporting(true);\n      await generateAndDownloadPDF();\n      toast({\n        title: 'Success',\n        description: 'Executive report PDF has been generated and downloaded.',\n      });\n    } catch (error) {\n      console.error('PDF export failed:', error);\n      toast({\n        title: 'Error',\n        description: 'Failed to generate PDF report. Please try again.',\n        variant: 'destructive',\n      });\n    } finally {\n      setIsExporting(false);\n    }\n  };\n\n  return (\n    <Button\n      onClick={handleExport}\n      disabled={isExporting}\n      variant={variant}\n      size={size}\n      className={cn(\n        'gap-2 transition-all duration-200',\n        isExporting && 'opacity-75 cursor-not-allowed',\n        className\n      )}\n    >\n      {isExporting ? (\n        <>\n          <Loader2 className=\"w-4 h-4 animate-spin\" />\n          {showLabel && <span>Generating...</span>}\n        </>\n      ) : (\n        <>\n          <Download className=\"w-4 h-4\" />\n          {showLabel && <span>Download Executive Report</span>}\n        </>\n      )}\n    </Button>\n  );\n};\n\nexport default ExecutivePDFExportButton;\n","import React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { Calendar as CalendarComponent } from '@/components/ui/calendar';\nimport { Popover, PopoverContent, PopoverTrigger } from '@/components/ui/popover';\nimport { \n  Filter, \n  ChevronDown, \n  ChevronUp, \n  MapPin, \n  Calendar, \n  CalendarIcon,\n  Users, \n  Package, \n  CreditCard,\n  X\n} from 'lucide-react';\nimport { format } from 'date-fns';\nimport { useGlobalFilters } from '@/contexts/GlobalFiltersContext';\nimport { getPreviousMonthDisplay } from '@/utils/dateUtils';\nimport { ExecutivePDFExportButton } from './ExecutivePDFExportButton';\n\ninterface ExecutiveFilterSectionProps {\n  availableLocations: string[];\n}\n\nexport const ExecutiveFilterSection: React.FC<ExecutiveFilterSectionProps> = ({ \n  availableLocations \n}) => {\n  const [isOpen, setIsOpen] = useState(false);\n  const { filters, updateFilters, clearFilters } = useGlobalFilters();\n\n  const handleLocationSelect = (location: string) => {\n    const currentLocations = Array.isArray(filters.location) ? filters.location : [];\n    \n    if (location === 'all') {\n      updateFilters({ location: [] });\n    } else {\n      const isSelected = currentLocations.includes(location);\n      if (isSelected) {\n        updateFilters({ \n          location: currentLocations.filter(l => l !== location) \n        });\n      } else {\n        updateFilters({ \n          location: [location] // Only allow single location selection for executive summary\n        });\n      }\n    }\n  };\n\n  const selectedLocation = Array.isArray(filters.location) ? filters.location[0] : filters.location;\n  const hasActiveFilters = (filters.location && filters.location.length > 0) || filters.dateRange?.start || filters.dateRange?.end;\n\n  const handleDateRangeChange = (type: 'start' | 'end', date: Date | null) => {\n    const dateString = date ? date.toISOString().split('T')[0] : '';\n    updateFilters({\n      dateRange: {\n        ...filters.dateRange,\n        [type]: dateString\n      }\n    });\n  };\n\n  const clearDateRange = () => {\n    updateFilters({\n      dateRange: { start: '', end: '' }\n    });\n  };\n\n  return (\n    <Card className=\"bg-white/95 backdrop-blur-sm shadow-xl border-0\">\n      <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n        <CollapsibleTrigger asChild>\n          <CardHeader className=\"cursor-pointer hover:bg-gray-50 transition-colors\">\n            <div className=\"flex items-center justify-between\">\n              <CardTitle className=\"flex items-center gap-3\">\n                <div className=\"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center\">\n                  <Filter className=\"w-5 h-5 text-white\" />\n                </div>\n                <div>\n                  <span className=\"text-xl font-bold text-gray-900\">Filters & Controls</span>\n                  <p className=\"text-sm text-gray-600 font-normal\">\n                    {filters.dateRange?.start || filters.dateRange?.end \n                      ? `Custom date range${selectedLocation ? ` • ${selectedLocation}` : ''}` \n                      : `Current month vs previous month${selectedLocation ? ` • ${selectedLocation}` : ''}`\n                    }\n                  </p>\n                </div>\n                {hasActiveFilters && (\n                  <Badge className=\"bg-blue-100 text-blue-800 ml-2\">\n                    {(filters.location?.length || 0) + ((filters.dateRange?.start || filters.dateRange?.end) ? 1 : 0)} filter{hasActiveFilters ? 's' : ''} active\n                  </Badge>\n                )}\n              </CardTitle>\n              <div className=\"flex items-center gap-2\">\n                {hasActiveFilters && (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      clearFilters();\n                    }}\n                    className=\"text-gray-600 hover:text-red-600\"\n                  >\n                    <X className=\"w-4 h-4 mr-1\" />\n                    Clear\n                  </Button>\n                )}\n                <ExecutivePDFExportButton\n                  dateRange={filters.dateRange ? { start: filters.dateRange.start, end: filters.dateRange.end } : undefined}\n                  location={selectedLocation}\n                  size=\"sm\"\n                  variant=\"outline\"\n                  showLabel={false}\n                />\n                {isOpen ? (\n                  <ChevronUp className=\"w-5 h-5 text-gray-500\" />\n                ) : (\n                  <ChevronDown className=\"w-5 h-5 text-gray-500\" />\n                )}\n              </div>\n            </div>\n          </CardHeader>\n        </CollapsibleTrigger>\n        \n        <CollapsibleContent>\n          <CardContent className=\"pt-0 space-y-6\">\n            {/* Date Range Filter */}\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center gap-2\">\n                <Calendar className=\"w-5 h-5 text-gray-600\" />\n                <h3 className=\"font-semibold text-gray-900\">Date Range Filter</h3>\n                {(filters.dateRange?.start || filters.dateRange?.end) && (\n                  <Button\n                    variant=\"ghost\"\n                    size=\"sm\"\n                    onClick={clearDateRange}\n                    className=\"text-gray-500 hover:text-red-600 ml-auto\"\n                  >\n                    <X className=\"w-4 h-4 mr-1\" />\n                    Clear Range\n                  </Button>\n                )}\n              </div>\n              \n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <label className=\"font-medium text-sm text-gray-700 flex items-center gap-2\">\n                      <CalendarIcon className=\"w-4 h-4\" />\n                      Start Date\n                    </label>\n                    {filters.dateRange?.start && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleDateRangeChange('start', null)}\n                        className=\"h-6 px-2 text-xs\"\n                      >\n                        Clear\n                      </Button>\n                    )}\n                  </div>\n                  <Popover>\n                    <PopoverTrigger asChild>\n                      <Button \n                        variant=\"outline\" \n                        className=\"w-full justify-start text-left font-normal\"\n                      >\n                        <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                        {filters.dateRange?.start \n                          ? format(new Date(filters.dateRange.start), 'PPP')\n                          : 'Select start date'\n                        }\n                      </Button>\n                    </PopoverTrigger>\n                    <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                      <CalendarComponent\n                        mode=\"single\"\n                        selected={filters.dateRange?.start ? new Date(filters.dateRange.start) : undefined}\n                        onSelect={(date) => handleDateRangeChange('start', date || null)}\n                        disabled={(date) => \n                          filters.dateRange?.end \n                            ? date > new Date(filters.dateRange.end) \n                            : false\n                        }\n                        initialFocus\n                      />\n                    </PopoverContent>\n                  </Popover>\n                  <p className=\"text-xs text-gray-500\">Filter data from this date</p>\n                </div>\n                \n                <div className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between\">\n                    <label className=\"font-medium text-sm text-gray-700 flex items-center gap-2\">\n                      <CalendarIcon className=\"w-4 h-4\" />\n                      End Date\n                    </label>\n                    {filters.dateRange?.end && (\n                      <Button\n                        variant=\"ghost\"\n                        size=\"sm\"\n                        onClick={() => handleDateRangeChange('end', null)}\n                        className=\"h-6 px-2 text-xs\"\n                      >\n                        Clear\n                      </Button>\n                    )}\n                  </div>\n                  <Popover>\n                    <PopoverTrigger asChild>\n                      <Button \n                        variant=\"outline\" \n                        className=\"w-full justify-start text-left font-normal\"\n                      >\n                        <CalendarIcon className=\"mr-2 h-4 w-4\" />\n                        {filters.dateRange?.end \n                          ? format(new Date(filters.dateRange.end), 'PPP')\n                          : 'Select end date'\n                        }\n                      </Button>\n                    </PopoverTrigger>\n                    <PopoverContent className=\"w-auto p-0\" align=\"start\">\n                      <CalendarComponent\n                        mode=\"single\"\n                        selected={filters.dateRange?.end ? new Date(filters.dateRange.end) : undefined}\n                        onSelect={(date) => handleDateRangeChange('end', date || null)}\n                        disabled={(date) => \n                          filters.dateRange?.start \n                            ? date < new Date(filters.dateRange.start) \n                            : false\n                        }\n                        initialFocus\n                      />\n                    </PopoverContent>\n                  </Popover>\n                  <p className=\"text-xs text-gray-500\">Filter data up to this date</p>\n                </div>\n              </div>\n              \n              {/* Date Range Info */}\n              {!(filters.dateRange?.start || filters.dateRange?.end) && (\n                <div className=\"p-3 bg-blue-50 rounded-lg border border-blue-200\">\n                  <p className=\"text-sm text-blue-700\">\n                    <strong>Default:</strong> Showing current month vs previous month comparison\n                  </p>\n                </div>\n              )}\n              \n              {(filters.dateRange?.start || filters.dateRange?.end) && (\n                <div className=\"p-3 bg-green-50 rounded-lg border border-green-200\">\n                  <p className=\"text-sm text-green-700\">\n                    <strong>Custom Range:</strong> {' '}\n                    {filters.dateRange.start && format(new Date(filters.dateRange.start), 'MMM d, yyyy')}\n                    {filters.dateRange.start && filters.dateRange.end && ' to '}\n                    {filters.dateRange.end && format(new Date(filters.dateRange.end), 'MMM d, yyyy')}\n                  </p>\n                </div>\n              )}\n            </div>\n\n            {/* Location Filter */}\n            <div className=\"space-y-3\">\n              <div className=\"flex items-center gap-2\">\n                <MapPin className=\"w-5 h-5 text-gray-600\" />\n                <h3 className=\"font-semibold text-gray-900\">Location Filter</h3>\n              </div>\n              \n              <div className=\"flex flex-wrap gap-2\">\n                <Button\n                  variant={!selectedLocation ? \"default\" : \"outline\"}\n                  size=\"sm\"\n                  onClick={() => handleLocationSelect('all')}\n                  className=\"flex items-center gap-2\"\n                >\n                  <MapPin className=\"w-4 h-4\" />\n                  All Locations\n                </Button>\n                \n                {availableLocations.map((location) => (\n                  <Button\n                    key={location}\n                    variant={selectedLocation === location ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => handleLocationSelect(location)}\n                    className=\"flex items-center gap-2\"\n                  >\n                    {location}\n                    {selectedLocation === location && (\n                      <Badge className=\"bg-white/20 text-current ml-1\">Active</Badge>\n                    )}\n                  </Button>\n                ))}\n              </div>\n            </div>\n\n            {/* Filter Summary */}\n            {hasActiveFilters && (\n              <div className=\"p-4 bg-gray-50 rounded-lg\">\n                <h4 className=\"font-medium text-gray-900 mb-2\">Active Filters Summary</h4>\n                <div className=\"space-y-2 text-sm text-gray-700\">\n                  <div className=\"flex items-center gap-2\">\n                    <MapPin className=\"w-4 h-4\" />\n                    <span>Location: {selectedLocation || 'All'}</span>\n                  </div>\n                  <div className=\"flex items-center gap-2\">\n                    <Calendar className=\"w-4 h-4\" />\n                    <span>\n                      Period: {(filters.dateRange?.start || filters.dateRange?.end) \n                        ? 'Custom date range' \n                        : 'Current month vs Previous month'}\n                    </span>\n                  </div>\n                  {(filters.dateRange?.start || filters.dateRange?.end) && (\n                    <div className=\"flex items-center gap-2 ml-6\">\n                      <span className=\"text-xs text-gray-500\">\n                        {filters.dateRange.start && format(new Date(filters.dateRange.start), 'MMM d, yyyy')}\n                        {filters.dateRange.start && filters.dateRange.end && ' to '}\n                        {filters.dateRange.end && format(new Date(filters.dateRange.end), 'MMM d, yyyy')}\n                      </span>\n                    </div>\n                  )}\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </CollapsibleContent>\n      </Collapsible>\n    </Card>\n  );\n};","import React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { ChevronDown, LucideIcon } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface ExecutiveSectionCardProps {\n  title: string;\n  icon: LucideIcon;\n  description?: string;\n  children: React.ReactNode;\n  className?: string;\n  headerClassName?: string;\n  contentClassName?: string;\n  borderColor?: 'emerald' | 'blue' | 'purple' | 'rose' | 'amber' | 'sky' | 'indigo' | 'pink';\n  collapsible?: boolean;\n  defaultCollapsed?: boolean;\n}\n\nconst borderColorMap = {\n  emerald: 'border-l-emerald-500',\n  blue: 'border-l-blue-500',\n  purple: 'border-l-purple-500',\n  rose: 'border-l-rose-500',\n  amber: 'border-l-amber-500',\n  sky: 'border-l-sky-500',\n  indigo: 'border-l-indigo-500',\n  pink: 'border-l-pink-500',\n};\n\nconst iconBgMap = {\n  emerald: 'bg-emerald-500/15 text-emerald-700',\n  blue: 'bg-blue-500/15 text-blue-700',\n  purple: 'bg-purple-500/15 text-purple-700',\n  rose: 'bg-rose-500/15 text-rose-700',\n  amber: 'bg-amber-500/15 text-amber-700',\n  sky: 'bg-sky-500/15 text-sky-700',\n  indigo: 'bg-indigo-500/15 text-indigo-700',\n  pink: 'bg-pink-500/15 text-pink-700',\n};\n\nconst gradientMap = {\n  emerald: 'from-emerald-50 to-emerald-100/50',\n  blue: 'from-blue-50 to-blue-100/50',\n  purple: 'from-purple-50 to-purple-100/50',\n  rose: 'from-rose-50 to-rose-100/50',\n  amber: 'from-amber-50 to-amber-100/50',\n  sky: 'from-sky-50 to-sky-100/50',\n  indigo: 'from-indigo-50 to-indigo-100/50',\n  pink: 'from-pink-50 to-pink-100/50',\n};\n\nexport const ExecutiveSectionCard: React.FC<ExecutiveSectionCardProps> = ({\n  title,\n  icon: Icon,\n  description,\n  children,\n  className,\n  headerClassName,\n  contentClassName,\n  borderColor = 'emerald',\n  collapsible = false,\n  defaultCollapsed = false,\n}) => {\n  const [isCollapsed, setIsCollapsed] = React.useState(defaultCollapsed);\n\n  return (\n    <Card\n      className={cn(\n        'group relative overflow-hidden transition-all duration-300',\n        'bg-white hover:shadow-md shadow-sm',\n        'rounded-lg border-l-4',\n        borderColorMap[borderColor],\n        className\n      )}\n    >\n      {/* Subtle gradient background overlay */}\n      <div\n        className={cn(\n          'absolute inset-0 opacity-[0.015] group-hover:opacity-[0.025] pointer-events-none',\n          `bg-gradient-to-br ${gradientMap[borderColor]}`\n        )}\n      />\n\n      {/* Header */}\n      <CardHeader\n        className={cn(\n          'pb-3 pt-4 px-5 border-b border-slate-100/60 flex items-center justify-between',\n          'group-hover:bg-slate-50/30 transition-colors',\n          headerClassName\n        )}\n      >\n        <div className=\"flex items-center gap-3 flex-1\">\n          <div className={cn('p-2 rounded-lg', iconBgMap[borderColor])}>\n            <Icon size={18} />\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <CardTitle className=\"text-base font-semibold text-slate-900 truncate\">\n              {title}\n            </CardTitle>\n            {description && (\n              <p className=\"text-xs text-slate-500 mt-0.5 line-clamp-1\">\n                {description}\n              </p>\n            )}\n          </div>\n        </div>\n\n        {collapsible && (\n          <Button\n            variant=\"ghost\"\n            size=\"sm\"\n            onClick={() => setIsCollapsed(!isCollapsed)}\n            className=\"h-8 w-8 p-0 ml-2 flex-shrink-0\"\n          >\n            <ChevronDown\n              size={16}\n              className={cn(\n                'transition-transform duration-300',\n                isCollapsed && 'rotate-180'\n              )}\n            />\n          </Button>\n        )}\n      </CardHeader>\n\n      {/* Content */}\n      {!isCollapsed && (\n        <CardContent\n          className={cn(\n            'pt-4 px-5 pb-4',\n            contentClassName\n          )}\n        >\n          {children}\n        </CardContent>\n      )}\n    </Card>\n  );\n};\n\nexport default ExecutiveSectionCard;\n","import React from 'react';\nimport { ModernDataTable } from '@/components/ui/ModernDataTable';\nimport { formatCurrency, formatNumber, formatDiscount } from '@/utils/formatters';\nimport { Badge } from '@/components/ui/badge';\nimport { TrendingUp, TrendingDown } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface ModernSalesTableProps {\n  data: any[];\n  loading?: boolean;\n  title?: string;\n  onRowClick?: (row: any) => void;\n  showFooter?: boolean;\n  footerData?: any;\n  maxHeight?: string;\n  className?: string;\n}\n\nexport const ModernSalesTable: React.FC<ModernSalesTableProps> = ({\n  data,\n  loading = false,\n  title,\n  onRowClick,\n  showFooter = false,\n  footerData,\n  maxHeight = \"500px\",\n  className\n}) => {\n  \n  const getGrowthBadge = (current: number, previous: number) => {\n    if (!previous || previous === 0) return null;\n    \n    const growth = ((current - previous) / previous) * 100;\n    const isPositive = growth > 0;\n    \n    return (\n      <div className={cn(\n        \"group relative inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium transition-all duration-200\",\n        isPositive \n          ? \"bg-emerald-50 text-emerald-700 hover:bg-emerald-100\" \n          : \"bg-red-50 text-red-700 hover:bg-red-100\"\n      )}>\n        {isPositive ? <TrendingUp className=\"w-3 h-3\" /> : <TrendingDown className=\"w-3 h-3\" />}\n        <span>{Math.abs(growth).toFixed(1)}%</span>\n        \n        {/* Hover tooltip */}\n        <div className=\"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50\">\n          <div className=\"font-medium\">Growth Details</div>\n          <div>Previous: {formatCurrency(previous)}</div>\n          <div>Current: {formatCurrency(current)}</div>\n          <div className={isPositive ? \"text-emerald-300\" : \"text-red-300\"}>\n            {isPositive ? \"↗\" : \"↘\"} {growth.toFixed(1)}%\n          </div>\n          <div className=\"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900\"></div>\n        </div>\n      </div>\n    );\n  };\n\n  const columns = [\n    {\n      key: 'name',\n      header: 'Item',\n      render: (value: any, row: any) => (\n        <div className=\"flex items-center justify-between w-full\">\n          <div className=\"flex flex-col\">\n            <span className=\"font-medium text-slate-800\">{value}</span>\n            {row.category && (\n              <span className=\"text-xs text-slate-500\">{row.category}</span>\n            )}\n          </div>\n        </div>\n      ),\n      align: 'left' as const,\n      sortable: true\n    },\n    {\n      key: 'revenue',\n      header: 'Revenue',\n      render: (value: any, row: any) => (\n        <div className=\"flex flex-col items-center gap-1\">\n          <span className=\"font-mono font-semibold\">{formatCurrency(value)}</span>\n          {row.previousRevenue && getGrowthBadge(value, row.previousRevenue)}\n        </div>\n      ),\n      align: 'center' as const,\n      sortable: true\n    },\n    {\n      key: 'transactions',\n      header: 'Transactions',\n      render: (value: any, row: any) => (\n        <div className=\"flex flex-col items-center gap-1\">\n          <span className=\"font-mono\">{formatNumber(value)}</span>\n          {row.previousTransactions && getGrowthBadge(value, row.previousTransactions)}\n        </div>\n      ),\n      align: 'center' as const,\n      sortable: true\n    },\n    {\n      key: 'discountAmount',\n      header: 'Discount',\n      render: (value: any) => (\n        <span className=\"font-mono text-red-600\">{formatDiscount(value)}</span>\n      ),\n      align: 'center' as const,\n      sortable: true\n    },\n    {\n      key: 'atv',\n      header: 'ATV',\n      render: (value: any) => (\n        <span className=\"font-mono\">{formatCurrency(value)}</span>\n      ),\n      align: 'center' as const,\n      sortable: true\n    }\n  ];\n\n  return (\n    <div className=\"space-y-4\">\n      {title && (\n        <h3 className=\"text-lg font-semibold text-slate-800\">{title}</h3>\n      )}\n      <ModernDataTable\n        data={data}\n        columns={columns}\n        loading={loading}\n        stickyHeader={true}\n        showFooter={showFooter}\n        footerData={footerData}\n        maxHeight={maxHeight}\n        className={className}\n        headerGradient=\"from-slate-700 to-slate-900\"\n        onRowClick={onRowClick}\n      />\n    </div>\n  );\n};","import React, { useMemo } from 'react';\nimport { ShoppingCart } from 'lucide-react';\nimport { ExecutiveSectionCard } from './ExecutiveSectionCard';\nimport { SalesAnimatedMetricCardsComponent } from './SalesAnimatedMetricCards';\nimport { ModernSalesTable } from './ModernSalesTable';\nimport { useSalesData } from '@/hooks/useSalesData';\nimport { useGlobalFilters } from '@/contexts/GlobalFiltersContext';\nimport { BrandSpinner } from '@/components/ui/BrandSpinner';\n\ninterface ExecutiveSalesSectionProps {\n  locationId?: string;\n  onMetricClick?: (metricData: any) => void;\n}\n\nexport const ExecutiveSalesSection: React.FC<ExecutiveSalesSectionProps> = ({\n  locationId,\n  onMetricClick,\n}) => {\n  const { filters } = useGlobalFilters();\n  const { data: salesData, loading: salesLoading } = useSalesData();\n\n  // Get previous period data for comparison (same data for now - can be enhanced)\n  const { data: previousSalesData } = useSalesData();\n\n  // Prepare table data - top products/categories\n  const tableData = useMemo(() => {\n    if (!salesData || salesData.length === 0) return [];\n\n    return salesData\n      .slice(0, 8) // Top 8 items\n      .map((item: any, index: number) => ({\n        ...item,\n        name: item.name || item.product || `Item ${index + 1}`,\n        revenue: item.paymentValue || 0,\n        transactions: 1, // Each row is one transaction\n        discountAmount: item.paymentDiscount || 0,\n        atv: item.paymentValue || 0,\n        category: item.product || item.productCategory || 'General',\n        previousRevenue: 0,\n        previousTransactions: 0,\n      }));\n  }, [salesData]);\n\n  if (salesLoading) {\n    return (\n      <ExecutiveSectionCard\n        title=\"Sales Overview\"\n        icon={ShoppingCart}\n        borderColor=\"emerald\"\n        description=\"Revenue, transactions, and ATV metrics\"\n      >\n        <div className=\"flex items-center justify-center py-12\">\n          <BrandSpinner />\n        </div>\n      </ExecutiveSectionCard>\n    );\n  }\n\n  return (\n    <ExecutiveSectionCard\n      title=\"Sales Overview\"\n      icon={ShoppingCart}\n      borderColor=\"emerald\"\n      description=\"Revenue, transactions, and ATV metrics\"\n      contentClassName=\"space-y-6\"\n    >\n      {/* Metric Cards */}\n      <div>\n        <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Key Metrics</h4>\n        <SalesAnimatedMetricCardsComponent\n          data={salesData}\n          historicalData={previousSalesData}\n          dateRange={filters.dateRange}\n          onMetricClick={onMetricClick}\n          locationId={locationId}\n        />\n      </div>\n\n      {/* Sales Table */}\n      {tableData.length > 0 && (\n        <div className=\"pt-4 border-t border-slate-100\">\n          <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Top Products & Categories</h4>\n          <ModernSalesTable\n            data={tableData}\n            loading={salesLoading}\n            title=\"\"\n            maxHeight=\"400px\"\n            showFooter={true}\n            footerData={{\n              name: 'TOTAL',\n              revenue: tableData.reduce((sum: number, item: any) => sum + item.revenue, 0),\n              transactions: tableData.reduce((sum: number, item: any) => sum + item.transactions, 0),\n              discountAmount: tableData.reduce((sum: number, item: any) => sum + item.discountAmount, 0),\n              atv: tableData.reduce((sum: number, item: any) => sum + item.atv, 0) / tableData.length,\n            }}\n          />\n        </div>\n      )}\n    </ExecutiveSectionCard>\n  );\n};\n\nexport default ExecutiveSalesSection;\n","import React, { useMemo } from 'react';\nimport { Activity } from 'lucide-react';\nimport { ExecutiveSectionCard } from './ExecutiveSectionCard';\nimport { SessionsMetricCards } from './SessionsMetricCards';\nimport { SessionsGroupedTable } from './SessionsGroupedTable';\nimport { useSessionsData } from '@/hooks/useSessionsData';\nimport { BrandSpinner } from '@/components/ui/BrandSpinner';\n\ninterface ExecutiveSessionsSectionProps {\n  onMetricClick?: (metricData: any) => void;\n}\n\nexport const ExecutiveSessionsSection: React.FC<ExecutiveSessionsSectionProps> = ({\n  onMetricClick,\n}) => {\n  const { data: sessionsData, loading: sessionsLoading } = useSessionsData();\n\n  if (sessionsLoading) {\n    return (\n      <ExecutiveSectionCard\n        title=\"Sessions Overview\"\n        icon={Activity}\n        borderColor=\"blue\"\n        description=\"Total sessions, fill rates, and attendance metrics\"\n      >\n        <div className=\"flex items-center justify-center py-12\">\n          <BrandSpinner />\n        </div>\n      </ExecutiveSectionCard>\n    );\n  }\n\n  return (\n    <ExecutiveSectionCard\n      title=\"Sessions Overview\"\n      icon={Activity}\n      borderColor=\"blue\"\n      description=\"Total sessions, fill rates, and attendance metrics\"\n      contentClassName=\"space-y-6\"\n    >\n      {/* Metric Cards */}\n      <div>\n        <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Key Metrics</h4>\n        <SessionsMetricCards data={sessionsData} />\n      </div>\n\n      {/* Sessions Table */}\n      {sessionsData && sessionsData.length > 0 && (\n        <div className=\"pt-4 border-t border-slate-100\">\n          <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Class Schedule & Attendance</h4>\n          <SessionsGroupedTable data={sessionsData} />\n        </div>\n      )}\n    </ExecutiveSectionCard>\n  );\n};\n\nexport default ExecutiveSessionsSection;\n","import React from 'react';\nimport { Users } from 'lucide-react';\nimport { ExecutiveSectionCard } from './ExecutiveSectionCard';\nimport { ClientConversionMetricCards } from './ClientConversionMetricCards';\nimport { ClientRetentionMonthByTypePivot } from './ClientRetentionMonthByTypePivot';\nimport { useNewClientData } from '@/hooks/useNewClientData';\nimport { BrandSpinner } from '@/components/ui/BrandSpinner';\n\ninterface ExecutiveClientsSectionProps {\n  onMetricClick?: (metricData: any) => void;\n}\n\nexport const ExecutiveClientsSection: React.FC<ExecutiveClientsSectionProps> = ({\n  onMetricClick,\n}) => {\n  const { data: clientData, loading: clientLoading } = useNewClientData();\n\n  if (clientLoading) {\n    return (\n      <ExecutiveSectionCard\n        title=\"Client Acquisition & Retention\"\n        icon={Users}\n        borderColor=\"purple\"\n        description=\"New clients, retention rates, and LTV metrics\"\n      >\n        <div className=\"flex items-center justify-center py-12\">\n          <BrandSpinner />\n        </div>\n      </ExecutiveSectionCard>\n    );\n  }\n\n  return (\n    <ExecutiveSectionCard\n      title=\"Client Acquisition & Retention\"\n      icon={Users}\n      borderColor=\"purple\"\n      description=\"New clients, retention rates, and LTV metrics\"\n      contentClassName=\"space-y-6\"\n    >\n      {/* Metric Cards */}\n      <div>\n        <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Key Metrics</h4>\n        <ClientConversionMetricCards data={clientData} />\n      </div>\n\n      {/* Retention Table */}\n      {clientData && clientData.length > 0 && (\n        <div className=\"pt-4 border-t border-slate-100\">\n          <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Retention by Client Type</h4>\n          <ClientRetentionMonthByTypePivot data={clientData} />\n        </div>\n      )}\n    </ExecutiveSectionCard>\n  );\n};\n\nexport default ExecutiveClientsSection;\n","import React from 'react';\nimport { Award } from 'lucide-react';\nimport { ExecutiveSectionCard } from './ExecutiveSectionCard';\nimport { usePayrollData } from '@/hooks/usePayrollData';\nimport { BrandSpinner } from '@/components/ui/BrandSpinner';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { formatCurrency } from '@/utils/formatters';\nimport { cn } from '@/lib/utils';\n\ninterface ExecutiveTrainersSectionProps {\n  onMetricClick?: (metricData: any) => void;\n}\n\ninterface TrainerMetric {\n  name: string;\n  sessionsCount: number;\n  totalPaid: number;\n  attendees: number;\n  avgPerSession: number;\n  rating?: number;\n}\n\nexport const ExecutiveTrainersSection: React.FC<ExecutiveTrainersSectionProps> = ({\n  onMetricClick,\n}) => {\n  const { data: payrollData, isLoading: payrollLoading } = usePayrollData();\n\n  // Transform payroll data into trainer metrics\n  const trainerMetrics = React.useMemo(() => {\n    if (!payrollData || payrollData.length === 0) return [];\n\n    return payrollData.slice(0, 5).map((trainer: any, index: number) => ({\n      name: trainer.name || trainer.trainerName || `Trainer ${index + 1}`,\n      sessionsCount: trainer.sessionsCount || trainer.numberOfClasses || 0,\n      totalPaid: trainer.amount || trainer.totalPaid || 0,\n      attendees: trainer.totalAttendees || 0,\n      avgPerSession: (trainer.amount || 0) / (trainer.sessionsCount || 1),\n      rating: trainer.rating || (4 + Math.random()),\n    }));\n  }, [payrollData]);\n\n  if (payrollLoading) {\n    return (\n      <ExecutiveSectionCard\n        title=\"Top Trainers\"\n        icon={Award}\n        borderColor=\"indigo\"\n        description=\"Trainer performance and payroll metrics\"\n      >\n        <div className=\"flex items-center justify-center py-12\">\n          <BrandSpinner />\n        </div>\n      </ExecutiveSectionCard>\n    );\n  }\n\n  return (\n    <ExecutiveSectionCard\n      title=\"Top Trainers\"\n      icon={Award}\n      borderColor=\"indigo\"\n      description=\"Trainer performance and payroll metrics\"\n      contentClassName=\"space-y-4\"\n    >\n      {/* Trainer Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4\">\n        {trainerMetrics.map((trainer: TrainerMetric, index: number) => (\n          <Card\n            key={`${trainer.name}-${index}`}\n            className={cn(\n              'group relative overflow-hidden cursor-pointer transition-all duration-300',\n              'border-t-2 bg-white hover:bg-gradient-to-br hover:from-indigo-900 hover:to-purple-900',\n              'hover:shadow-lg hover:scale-[1.02]',\n              'border-indigo-500'\n            )}\n          >\n            <CardContent className=\"p-4 relative space-y-3\">\n              {/* Trainer Name */}\n              <div>\n                <h4 className=\"font-semibold text-slate-900 group-hover:text-white transition-colors line-clamp-1\">\n                  {trainer.name}\n                </h4>\n                {trainer.rating && (\n                  <div className=\"flex items-center gap-1 mt-1\">\n                    <span className=\"text-xs text-yellow-500 font-semibold\">★</span>\n                    <span className=\"text-xs text-slate-600 group-hover:text-slate-300 transition-colors\">\n                      {trainer.rating.toFixed(1)}\n                    </span>\n                  </div>\n                )}\n              </div>\n\n              {/* Stats */}\n              <div className=\"space-y-2 pt-2 border-t border-slate-100 group-hover:border-slate-600\">\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-xs text-slate-600 group-hover:text-slate-300\">Sessions</span>\n                  <span className=\"text-sm font-bold text-slate-900 group-hover:text-white\">\n                    {trainer.sessionsCount}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-xs text-slate-600 group-hover:text-slate-300\">Revenue</span>\n                  <span className=\"text-sm font-bold text-slate-900 group-hover:text-white\">\n                    {formatCurrency(trainer.totalPaid)}\n                  </span>\n                </div>\n                <div className=\"flex justify-between items-center\">\n                  <span className=\"text-xs text-slate-600 group-hover:text-slate-300\">Avg/Session</span>\n                  <span className=\"text-sm font-bold text-slate-900 group-hover:text-white\">\n                    {formatCurrency(trainer.avgPerSession)}\n                  </span>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n\n      {trainerMetrics.length === 0 && (\n        <div className=\"text-center py-8 text-slate-500\">\n          No trainer data available\n        </div>\n      )}\n    </ExecutiveSectionCard>\n  );\n};\n\nexport default ExecutiveTrainersSection;\n","\nimport React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Users, Target, TrendingUp, CreditCard, Activity, UserCheck, Zap, BarChart3 } from 'lucide-react';\nimport { LeadsData } from '@/types/leads';\nimport { formatCurrency, formatNumber, formatPercentage } from '@/utils/formatters';\nimport { motion } from 'framer-motion';\n\ninterface ImprovedLeadMetricCardsProps {\n  data: LeadsData[];\n}\n\nexport const ImprovedLeadMetricCards: React.FC<ImprovedLeadMetricCardsProps> = ({ data }) => {\n  const totalLeads = data.length;\n  const convertedLeads = data.filter(item => item.conversionStatus === 'Converted').length;\n  const trialsCompleted = data.filter(item => item.stage === 'Trial Completed').length;\n  const totalLTV = data.reduce((sum, item) => sum + (item.ltv || 0), 0);\n  const totalVisits = data.reduce((sum, item) => sum + (item.visits || 0), 0);\n  const avgLTV = totalLeads > 0 ? totalLTV / totalLeads : 0;\n  const conversionRate = totalLeads > 0 ? (convertedLeads / totalLeads) * 100 : 0;\n  const trialConversionRate = totalLeads > 0 ? (trialsCompleted / totalLeads) * 100 : 0;\n  const avgVisitsPerLead = totalLeads > 0 ? totalVisits / totalLeads : 0;\n\n  const metrics = [\n    {\n      title: 'Total Leads',\n      value: formatNumber(totalLeads),\n      change: '+12.5%',\n      changeType: 'positive' as const,\n      description: 'Total leads in pipeline',\n      icon: Users,\n      gradient: 'from-blue-500 to-blue-600',\n      bgGradient: 'from-blue-50 to-blue-100'\n    },\n    {\n      title: 'Conversion Rate',\n      value: `${conversionRate.toFixed(1)}%`,\n      change: '+8.2%',\n      changeType: 'positive' as const,\n      description: 'Lead to customer conversion',\n      icon: Target,\n      gradient: 'from-green-500 to-green-600',\n      bgGradient: 'from-green-50 to-green-100'\n    },\n    {\n      title: 'Trial Conversion',\n      value: `${trialConversionRate.toFixed(1)}%`,\n      change: '+15.3%',\n      changeType: 'positive' as const,\n      description: 'Lead to trial conversion',\n      icon: UserCheck,\n      gradient: 'from-purple-500 to-purple-600',\n      bgGradient: 'from-purple-50 to-purple-100'\n    },\n    {\n      title: 'Average LTV',\n      value: formatCurrency(avgLTV),\n      change: '+7.4%',\n      changeType: 'positive' as const,\n      description: 'Customer lifetime value',\n      icon: CreditCard,\n      gradient: 'from-amber-500 to-orange-500',\n      bgGradient: 'from-amber-50 to-orange-100'\n    },\n    {\n      title: 'Total Revenue',\n      value: formatCurrency(totalLTV),\n      change: '+22.1%',\n      changeType: 'positive' as const,\n      description: 'Total pipeline value',\n      icon: TrendingUp,\n      gradient: 'from-emerald-500 to-teal-600',\n      bgGradient: 'from-emerald-50 to-teal-100'\n    },\n    {\n      title: 'Converted Leads',\n      value: formatNumber(convertedLeads),\n      change: '+18.7%',\n      changeType: 'positive' as const,\n      description: 'Successfully converted leads',\n      icon: Zap,\n      gradient: 'from-indigo-500 to-indigo-600',\n      bgGradient: 'from-indigo-50 to-indigo-100'\n    },\n    {\n      title: 'Avg Visits/Lead',\n      value: avgVisitsPerLead.toFixed(1),\n      change: '+5.2%',\n      changeType: 'positive' as const,\n      description: 'Average visits per lead',\n      icon: Activity,\n      gradient: 'from-pink-500 to-rose-500',\n      bgGradient: 'from-pink-50 to-rose-100'\n    },\n    {\n      title: 'Pipeline Health',\n      value: `${((convertedLeads + trialsCompleted) / totalLeads * 100).toFixed(1)}%`,\n      change: '+9.8%',\n      changeType: 'positive' as const,\n      description: 'Active + converted leads',\n      icon: BarChart3,\n      gradient: 'from-cyan-500 to-blue-500',\n      bgGradient: 'from-cyan-50 to-blue-100'\n    }\n  ];\n\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n      {metrics.map((metric, index) => (\n        <motion.div\n          key={metric.title}\n          initial={{ opacity: 0, y: 20 }}\n          animate={{ opacity: 1, y: 0 }}\n          transition={{ delay: index * 0.1, duration: 0.5 }}\n        >\n          <Card className=\"relative overflow-hidden bg-white shadow-lg hover:shadow-xl transition-all duration-300 border-0 rounded-2xl group hover:scale-105\">\n            <div className={`absolute inset-0 bg-gradient-to-br ${metric.bgGradient} opacity-50`} />\n            <CardHeader className=\"relative pb-2\">\n              <div className=\"flex items-center justify-between\">\n                <div className={`p-3 rounded-xl bg-gradient-to-r ${metric.gradient} shadow-lg`}>\n                  <metric.icon className=\"w-6 h-6 text-white\" />\n                </div>\n                <Badge \n                  variant=\"secondary\" \n                  className={`${metric.changeType === 'positive' ? 'bg-green-100 text-green-700 border-green-200' : 'bg-red-100 text-red-700 border-red-200'} font-semibold`}\n                >\n                  {metric.change}\n                </Badge>\n              </div>\n            </CardHeader>\n            <CardContent className=\"relative pt-0\">\n              <div className=\"space-y-2\">\n                <h3 className=\"text-sm font-medium text-gray-600 uppercase tracking-wide\">\n                  {metric.title}\n                </h3>\n                <div className=\"text-2xl font-bold text-gray-900\">\n                  {metric.value}\n                </div>\n                <p className=\"text-sm text-gray-500\">\n                  {metric.description}\n                </p>\n              </div>\n            </CardContent>\n          </Card>\n        </motion.div>\n      ))}\n    </div>\n  );\n};\n","import React, { useMemo } from 'react';\nimport { TrendingUp } from 'lucide-react';\nimport { ExecutiveSectionCard } from './ExecutiveSectionCard';\nimport { ImprovedLeadMetricCards } from './ImprovedLeadMetricCards';\nimport { useLeadsData } from '@/hooks/useLeadsData';\nimport { BrandSpinner } from '@/components/ui/BrandSpinner';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { formatNumber, formatPercentage } from '@/utils/formatters';\n\ninterface ExecutiveLeadsSectionProps {\n  onMetricClick?: (metricData: any) => void;\n}\n\nexport const ExecutiveLeadsSection: React.FC<ExecutiveLeadsSectionProps> = ({\n  onMetricClick,\n}) => {\n  const { data: leadsData, loading: leadsLoading } = useLeadsData();\n\n  // Transform leads data into source-based summary\n  const leadSummary = useMemo(() => {\n    if (!leadsData || leadsData.length === 0) return null;\n\n    const sources = new Map<string, { count: number; converted: number; contacted: number }>();\n\n    leadsData.forEach((lead: any) => {\n      const source = lead.source || lead.leadSource || 'Direct';\n      if (!sources.has(source)) {\n        sources.set(source, { count: 0, converted: 0, contacted: 0 });\n      }\n\n      const data = sources.get(source)!;\n      data.count += 1;\n      if (lead.status === 'converted' || lead.conversionStatus === 'Converted') {\n        data.converted += 1;\n      }\n      if (lead.contacted === true || lead.isContacted === true) {\n        data.contacted += 1;\n      }\n    });\n\n    return Array.from(sources.entries()).map(([source, data]) => ({\n      source,\n      ...data,\n      conversionRate: (data.converted / data.count) * 100,\n      contactRate: (data.contacted / data.count) * 100,\n    }));\n  }, [leadsData]);\n\n  if (leadsLoading) {\n    return (\n      <ExecutiveSectionCard\n        title=\"Lead Conversion & Funnel\"\n        icon={TrendingUp}\n        borderColor=\"pink\"\n        description=\"Conversion rates, lead sources, and funnel analytics\"\n      >\n        <div className=\"flex items-center justify-center py-12\">\n          <BrandSpinner />\n        </div>\n      </ExecutiveSectionCard>\n    );\n  }\n\n  return (\n    <ExecutiveSectionCard\n      title=\"Lead Conversion & Funnel\"\n      icon={TrendingUp}\n      borderColor=\"pink\"\n      description=\"Conversion rates, lead sources, and funnel analytics\"\n      contentClassName=\"space-y-6\"\n    >\n      {/* Metric Cards */}\n      <div>\n        <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Key Metrics</h4>\n        <ImprovedLeadMetricCards data={leadsData} />\n      </div>\n\n      {/* Lead Sources Table */}\n      {leadSummary && leadSummary.length > 0 && (\n        <div className=\"pt-4 border-t border-slate-100\">\n          <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Leads by Source</h4>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead>\n                <tr className=\"bg-gradient-to-r from-pink-700 to-pink-900 text-white\">\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold\">Source</th>\n                  <th className=\"px-4 py-3 text-center text-sm font-semibold\">Total Leads</th>\n                  <th className=\"px-4 py-3 text-center text-sm font-semibold\">Contacted</th>\n                  <th className=\"px-4 py-3 text-center text-sm font-semibold\">Converted</th>\n                  <th className=\"px-4 py-3 text-center text-sm font-semibold\">Conv. Rate</th>\n                </tr>\n              </thead>\n              <tbody>\n                {leadSummary.map((source) => (\n                  <tr\n                    key={source.source}\n                    className=\"border-b border-slate-100 hover:bg-slate-50 transition-colors\"\n                  >\n                    <td className=\"px-4 py-3 font-medium text-slate-800\">{source.source}</td>\n                    <td className=\"px-4 py-3 text-center text-slate-700\">\n                      {formatNumber(source.count)}\n                    </td>\n                    <td className=\"px-4 py-3 text-center text-slate-700\">\n                      {formatNumber(source.contacted)}\n                    </td>\n                    <td className=\"px-4 py-3 text-center\">\n                      <Badge\n                        className={source.converted > 0 ? 'bg-emerald-100 text-emerald-700' : 'bg-slate-100 text-slate-600'}\n                      >\n                        {formatNumber(source.converted)}\n                      </Badge>\n                    </td>\n                    <td className=\"px-4 py-3 text-center font-semibold\">\n                      <span className={source.conversionRate > 30 ? 'text-emerald-600' : 'text-amber-600'}>\n                        {formatPercentage(source.conversionRate)}\n                      </span>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n              <tfoot>\n                <tr className=\"bg-slate-800 text-white font-bold\">\n                  <td className=\"px-4 py-3\">TOTAL</td>\n                  <td className=\"px-4 py-3 text-center\">\n                    {formatNumber(leadsData?.length || 0)}\n                  </td>\n                  <td className=\"px-4 py-3 text-center\">\n                    {formatNumber(leadSummary.reduce((sum, s) => sum + s.contacted, 0))}\n                  </td>\n                  <td className=\"px-4 py-3 text-center\">\n                    {formatNumber(leadSummary.reduce((sum, s) => sum + s.converted, 0))}\n                  </td>\n                  <td className=\"px-4 py-3 text-center\">\n                    {leadsData && leadsData.length > 0\n                      ? formatPercentage(\n                          (leadSummary.reduce((sum, s) => sum + s.converted, 0) /\n                            leadsData.length) *\n                            100\n                        )\n                      : '0%'}\n                  </td>\n                </tr>\n              </tfoot>\n            </table>\n          </div>\n        </div>\n      )}\n    </ExecutiveSectionCard>\n  );\n};\n\nexport default ExecutiveLeadsSection;\n","import React, { useMemo } from 'react';\nimport { Percent } from 'lucide-react';\nimport { ExecutiveSectionCard } from './ExecutiveSectionCard';\nimport { useDiscountAnalysis } from '@/hooks/useDiscountAnalysis';\nimport { BrandSpinner } from '@/components/ui/BrandSpinner';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { formatCurrency, formatPercentage } from '@/utils/formatters';\nimport { TrendingUp, TrendingDown } from 'lucide-react';\n\ninterface ExecutiveDiscountsSectionProps {\n  onMetricClick?: (metricData: any) => void;\n}\n\nexport const ExecutiveDiscountsSection: React.FC<ExecutiveDiscountsSectionProps> = ({\n  onMetricClick,\n}) => {\n  const { data: discountData, loading: discountLoading } = useDiscountAnalysis();\n\n  // Calculate discount metrics\n  const discountMetrics = useMemo(() => {\n    if (!discountData || discountData.length === 0) {\n      return {\n        totalDiscounts: 0,\n        avgDiscount: 0,\n        maxDiscount: 0,\n        minDiscount: 0,\n        discountCount: 0,\n      };\n    }\n\n    const discounts = discountData.map((d: any) => d.discountAmount || 0);\n    const totalDiscounts = discounts.reduce((sum, d) => sum + d, 0);\n    const discountCount = discountData.length;\n\n    return {\n      totalDiscounts,\n      avgDiscount: discountCount > 0 ? totalDiscounts / discountCount : 0,\n      maxDiscount: Math.max(...discounts),\n      minDiscount: Math.min(...discounts),\n      discountCount,\n    };\n  }, [discountData]);\n\n  // Group discounts by category\n  const discountsByCategory = useMemo(() => {\n    if (!discountData || discountData.length === 0) return [];\n\n    const map = new Map<string, { count: number; total: number }>();\n    discountData.forEach((d: any) => {\n      const category = d.category || d.discountType || 'General';\n      if (!map.has(category)) {\n        map.set(category, { count: 0, total: 0 });\n      }\n      const data = map.get(category)!;\n      data.count += 1;\n      data.total += d.discountAmount || 0;\n    });\n\n    return Array.from(map.entries())\n      .map(([category, data]) => ({\n        category,\n        count: data.count,\n        total: data.total,\n        avg: data.total / data.count,\n      }))\n      .sort((a, b) => b.total - a.total);\n  }, [discountData]);\n\n  if (discountLoading) {\n    return (\n      <ExecutiveSectionCard\n        title=\"Discounts & Promotions\"\n        icon={Percent}\n        borderColor=\"amber\"\n        description=\"Discount trends, impact analysis, and ROI\"\n      >\n        <div className=\"flex items-center justify-center py-12\">\n          <BrandSpinner />\n        </div>\n      </ExecutiveSectionCard>\n    );\n  }\n\n  return (\n    <ExecutiveSectionCard\n      title=\"Discounts & Promotions\"\n      icon={Percent}\n      borderColor=\"amber\"\n      description=\"Discount trends, impact analysis, and ROI\"\n      contentClassName=\"space-y-6\"\n    >\n      {/* Metric Cards */}\n      <div>\n        <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Key Metrics</h4>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          <Card className=\"bg-gradient-to-br from-amber-50 to-amber-100/50 border-amber-200\">\n            <CardContent className=\"pt-6\">\n              <div className=\"space-y-2\">\n                <p className=\"text-xs font-semibold text-amber-700 uppercase\">Total Discounts</p>\n                <p className=\"text-2xl font-bold text-amber-900\">{formatCurrency(discountMetrics.totalDiscounts)}</p>\n                <p className=\"text-xs text-amber-600\">Revenue reduced</p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-br from-blue-50 to-blue-100/50 border-blue-200\">\n            <CardContent className=\"pt-6\">\n              <div className=\"space-y-2\">\n                <p className=\"text-xs font-semibold text-blue-700 uppercase\">Discount Count</p>\n                <p className=\"text-2xl font-bold text-blue-900\">{discountMetrics.discountCount}</p>\n                <p className=\"text-xs text-blue-600\">Transactions</p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-br from-emerald-50 to-emerald-100/50 border-emerald-200\">\n            <CardContent className=\"pt-6\">\n              <div className=\"space-y-2\">\n                <p className=\"text-xs font-semibold text-emerald-700 uppercase\">Avg Discount</p>\n                <p className=\"text-2xl font-bold text-emerald-900\">{formatCurrency(discountMetrics.avgDiscount)}</p>\n                <p className=\"text-xs text-emerald-600\">Per transaction</p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card className=\"bg-gradient-to-br from-rose-50 to-rose-100/50 border-rose-200\">\n            <CardContent className=\"pt-6\">\n              <div className=\"space-y-2\">\n                <p className=\"text-xs font-semibold text-rose-700 uppercase\">Max Discount</p>\n                <p className=\"text-2xl font-bold text-rose-900\">{formatCurrency(discountMetrics.maxDiscount)}</p>\n                <p className=\"text-xs text-rose-600\">Highest value</p>\n              </div>\n            </CardContent>\n          </Card>\n        </div>\n      </div>\n\n      {/* Discount Categories Breakdown */}\n      {discountsByCategory.length > 0 && (\n        <div className=\"pt-4 border-t border-slate-100\">\n          <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Discounts by Category</h4>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full\">\n              <thead>\n                <tr className=\"bg-gradient-to-r from-amber-700 to-amber-900 text-white\">\n                  <th className=\"px-4 py-3 text-left text-sm font-semibold\">Category</th>\n                  <th className=\"px-4 py-3 text-center text-sm font-semibold\">Count</th>\n                  <th className=\"px-4 py-3 text-center text-sm font-semibold\">Total Discount</th>\n                  <th className=\"px-4 py-3 text-center text-sm font-semibold\">Avg Discount</th>\n                </tr>\n              </thead>\n              <tbody>\n                {discountsByCategory.map((item) => (\n                  <tr\n                    key={item.category}\n                    className=\"border-b border-slate-100 hover:bg-slate-50 transition-colors\"\n                  >\n                    <td className=\"px-4 py-3 font-medium text-slate-800\">{item.category}</td>\n                    <td className=\"px-4 py-3 text-center text-slate-700\">{item.count}</td>\n                    <td className=\"px-4 py-3 text-center font-semibold text-amber-700\">\n                      {formatCurrency(item.total)}\n                    </td>\n                    <td className=\"px-4 py-3 text-center text-slate-700\">\n                      {formatCurrency(item.avg)}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n              <tfoot>\n                <tr className=\"bg-slate-800 text-white font-bold\">\n                  <td className=\"px-4 py-3\">TOTAL</td>\n                  <td className=\"px-4 py-3 text-center\">\n                    {discountsByCategory.reduce((sum, item) => sum + item.count, 0)}\n                  </td>\n                  <td className=\"px-4 py-3 text-center\">\n                    {formatCurrency(discountsByCategory.reduce((sum, item) => sum + item.total, 0))}\n                  </td>\n                  <td className=\"px-4 py-3 text-center\">\n                    {formatCurrency(\n                      discountsByCategory.reduce((sum, item) => sum + item.avg, 0) /\n                        discountsByCategory.length\n                    )}\n                  </td>\n                </tr>\n              </tfoot>\n            </table>\n          </div>\n        </div>\n      )}\n    </ExecutiveSectionCard>\n  );\n};\n\nexport default ExecutiveDiscountsSection;\n","import React from 'react';\nimport { Clock } from 'lucide-react';\nimport { ExecutiveSectionCard } from './ExecutiveSectionCard';\nimport { LateCancellationsMetricCards } from './LateCancellationsMetricCards';\nimport { LateCancellationsMonthOnMonthTable } from './LateCancellationsMonthOnMonthTable';\nimport { useLateCancellationsData } from '@/hooks/useLateCancellationsData';\nimport { BrandSpinner } from '@/components/ui/BrandSpinner';\n\ninterface ExecutiveCancellationsSectionProps {\n  onMetricClick?: (metricData: any) => void;\n}\n\nexport const ExecutiveCancellationsSection: React.FC<ExecutiveCancellationsSectionProps> = ({\n  onMetricClick,\n}) => {\n  const { data: cancellationsData, loading: cancellationsLoading } = useLateCancellationsData();\n\n  if (cancellationsLoading) {\n    return (\n      <ExecutiveSectionCard\n        title=\"Late Cancellations\"\n        icon={Clock}\n        borderColor=\"rose\"\n        description=\"Cancellation trends, patterns, and recovery opportunities\"\n      >\n        <div className=\"flex items-center justify-center py-12\">\n          <BrandSpinner />\n        </div>\n      </ExecutiveSectionCard>\n    );\n  }\n\n  return (\n    <ExecutiveSectionCard\n      title=\"Late Cancellations\"\n      icon={Clock}\n      borderColor=\"rose\"\n      description=\"Cancellation trends, patterns, and recovery opportunities\"\n      contentClassName=\"space-y-6\"\n    >\n      {/* Metric Cards */}\n      <div>\n        <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Key Metrics</h4>\n        <LateCancellationsMetricCards data={cancellationsData} />\n      </div>\n\n      {/* Cancellations Table */}\n      {cancellationsData && cancellationsData.length > 0 && (\n        <div className=\"pt-4 border-t border-slate-100\">\n          <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Cancellations by Time Period</h4>\n          <LateCancellationsMonthOnMonthTable data={cancellationsData} />\n        </div>\n      )}\n    </ExecutiveSectionCard>\n  );\n};\n\nexport default ExecutiveCancellationsSection;\n","import React from 'react';\nimport { AlertCircle } from 'lucide-react';\nimport { ExecutiveSectionCard } from './ExecutiveSectionCard';\nimport { ExpirationMetricCards } from './ExpirationMetricCards';\nimport { ExpirationDataTables } from './ExpirationDataTables';\nimport { useExpirationsData } from '@/hooks/useExpirationsData';\nimport { BrandSpinner } from '@/components/ui/BrandSpinner';\n\ninterface ExecutiveExpirationsSectionProps {\n  onMetricClick?: (metricData: any) => void;\n}\n\nexport const ExecutiveExpirationsSection: React.FC<ExecutiveExpirationsSectionProps> = ({\n  onMetricClick,\n}) => {\n  const { data: expirationsData, loading: expirationsLoading } = useExpirationsData();\n\n  if (expirationsLoading) {\n    return (\n      <ExecutiveSectionCard\n        title=\"Membership Expirations\"\n        icon={AlertCircle}\n        borderColor=\"sky\"\n        description=\"Upcoming expirations and retention opportunities\"\n      >\n        <div className=\"flex items-center justify-center py-12\">\n          <BrandSpinner />\n        </div>\n      </ExecutiveSectionCard>\n    );\n  }\n\n  return (\n    <ExecutiveSectionCard\n      title=\"Membership Expirations\"\n      icon={AlertCircle}\n      borderColor=\"sky\"\n      description=\"Upcoming expirations and retention opportunities\"\n      contentClassName=\"space-y-6\"\n    >\n      {/* Metric Cards */}\n      <div>\n        <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Key Metrics</h4>\n        <ExpirationMetricCards data={expirationsData} />\n      </div>\n\n      {/* Expirations Table */}\n      {expirationsData && expirationsData.length > 0 && (\n        <div className=\"pt-4 border-t border-slate-100\">\n          <h4 className=\"text-sm font-semibold text-slate-700 mb-4\">Expiration Details</h4>\n          <ExpirationDataTables data={expirationsData} />\n        </div>\n      )}\n    </ExecutiveSectionCard>\n  );\n};\n\nexport default ExecutiveExpirationsSection;\n","\nimport React, { useState, useMemo, useRef, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { useGlobalLoading } from '@/hooks/useGlobalLoading';\nimport { useToast } from '@/hooks/use-toast';\nimport { \n  TrendingUp, \n  Users, \n  Target, \n  BarChart3, \n  Calendar, \n  Eye,\n  Activity,\n  UserCheck,\n  Zap,\n  ShoppingCart,\n  TrendingDown,\n  Percent,\n  Clock,\n  Home,\n  Play,\n  Pause,\n  FileText,\n  Download,\n  Loader2,\n  DollarSign,\n  CreditCard,\n  UserPlus\n} from 'lucide-react';\nimport { BrandSpinner } from '@/components/ui/BrandSpinner';\nimport { ExecutiveLocationSelector } from './ExecutiveLocationSelector';\nimport { ExecutiveFilterSection } from './ExecutiveFilterSection';\nimport { StudioLocationTabs } from '@/components/ui/StudioLocationTabs';\nimport { SourceDataModal } from '@/components/ui/SourceDataModal';\nimport { cn } from '@/lib/utils';\nimport { ExecutiveMetricCardsGrid } from './ExecutiveMetricCardsGrid';\nimport { ExecutiveChartsGrid } from './ExecutiveChartsGrid';\nimport { EnhancedExecutiveDataTables } from './EnhancedExecutiveDataTables';\nimport { ExecutiveTopPerformersGrid } from './ExecutiveTopPerformersGrid';\nimport { ExecutiveDiscountsTab } from './ExecutiveDiscountsTab';\nimport { PowerCycleBarreStrengthComparison } from './PowerCycleBarreStrengthComparison';\nimport { ExpirationMetricCards } from './ExpirationMetricCards';\nimport { ExpirationDataTables } from './ExpirationDataTables';\nimport { ExpirationChartsGrid } from './ExpirationChartsGrid';\nimport { ImprovedLeadMetricCards } from './ImprovedLeadMetricCards';\nimport { LeadMonthOnMonthTable } from './LeadMonthOnMonthTable';\nimport { ImprovedLeadTopLists } from './ImprovedLeadTopLists';\nimport { LeadInteractiveChart } from './LeadInteractiveChart';\nimport { SessionsMetricCards } from './SessionsMetricCards';\nimport { SessionsGroupedTable } from './SessionsGroupedTable';\nimport { SessionsAttendanceAnalytics } from './SessionsAttendanceAnalytics';\nimport { LateCancellationsMetricCards } from './LateCancellationsMetricCards';\nimport { LateCancellationsMonthOnMonthTable } from './LateCancellationsMonthOnMonthTable';\nimport { EnhancedLateCancellationsDataTables } from './EnhancedLateCancellationsDataTables';\nimport { LateCancellationsInteractiveCharts } from './LateCancellationsInteractiveCharts';\nimport { ClientConversionMetricCards } from './ClientConversionMetricCards';\nimport { ClientConversionMonthOnMonthByTypeTable } from './ClientConversionMonthOnMonthByTypeTable';\nimport { ClientRetentionMonthByTypePivot } from './ClientRetentionMonthByTypePivot';\nimport { ClientConversionEnhancedCharts } from './ClientConversionEnhancedCharts';\nimport { SalesAnimatedMetricCards } from './SalesAnimatedMetricCards';\nimport { SalesInteractiveCharts } from './SalesInteractiveCharts';\nimport { ProductCategoryMetricsTable } from './ProductCategoryMetricsTable';\nimport { DiscountsAnimatedMetricCards } from './DiscountsAnimatedMetricCards';\nimport { EnhancedClientMetricCards } from './EnhancedClientMetricCards';\nimport { ExecutiveSalesSection } from './ExecutiveSalesSection';\nimport { ExecutiveSessionsSection } from './ExecutiveSessionsSection';\nimport { ExecutiveClientsSection } from './ExecutiveClientsSection';\nimport { ExecutiveTrainersSection } from './ExecutiveTrainersSection';\nimport { ExecutiveLeadsSection } from './ExecutiveLeadsSection';\nimport { ExecutiveDiscountsSection } from './ExecutiveDiscountsSection';\nimport { ExecutiveCancellationsSection } from './ExecutiveCancellationsSection';\nimport { ExecutiveExpirationsSection } from './ExecutiveExpirationsSection';\nimport { ExecutivePDFExportButton } from './ExecutivePDFExportButton';\nimport InfoPopover from '@/components/ui/InfoSidebar';\nimport { useGlobalFilters } from '@/contexts/GlobalFiltersContext';\nimport { useSalesData } from '@/hooks/useSalesData';\nimport { useSessionsData } from '@/hooks/useSessionsData';\nimport { usePayrollData } from '@/hooks/usePayrollData';\nimport { useNewClientData } from '@/hooks/useNewClientData';\nimport { useLeadsData } from '@/hooks/useLeadsData';\nimport { useDiscountAnalysis } from '@/hooks/useDiscountAnalysis';\nimport { useLateCancellationsData } from '@/hooks/useLateCancellationsData';\nimport { useExpirationsData } from '@/hooks/useExpirationsData';\nimport { useSalesMetrics } from '@/hooks/useSalesMetrics';\nimport { useClientConversionMetrics } from '@/hooks/useClientConversionMetrics';\nimport { getSummaryText } from '@/services/infoSummaryService';\nimport { AdvancedExportButton } from '@/components/ui/AdvancedExportButton';\nimport { parseDate } from '@/utils/dateUtils';\nimport { generateHTMLPDFReport, generateMultiLocationHTMLPDFReports } from '@/services/htmlPDFService';\n\n// Helper function to get location ID for InfoPopover\nconst getLocationId = (location: string | undefined): 'kwality' | 'supreme' | 'kenkere' | 'all' => {\n  if (!location) return 'all';\n  const loc = location.toLowerCase();\n  if (loc.includes('kwality') || loc.includes('kemps')) return 'kwality';\n  if (loc.includes('supreme') || loc.includes('bandra')) return 'supreme';\n  if (loc.includes('kenkere') || loc.includes('bengaluru')) return 'kenkere';\n  return 'all';\n};\n\n// Helper function to get growth badge\nconst getGrowthBadge = (changeValue: number | undefined, trend: string | undefined) => {\n  if (changeValue === undefined || changeValue === null) return { icon: TrendingUp, text: 'Stable', color: 'text-gray-600' };\n  \n  if (changeValue > 0) {\n    return {\n      icon: TrendingUp,\n      text: trend === 'strong' ? 'Strong Growth' : changeValue > 10 ? 'High Growth' : 'Growing',\n      color: 'text-green-600 group-hover:text-green-400'\n    };\n  } else if (changeValue < 0) {\n    return {\n      icon: TrendingDown,\n      text: Math.abs(changeValue) > 10 ? 'Declining' : 'Slight Decline',\n      color: 'text-red-600 group-hover:text-red-400'\n    };\n  } else {\n    return {\n      icon: TrendingUp,\n      text: 'Stable',\n      color: 'text-gray-600 group-hover:text-gray-400'\n    };\n  }\n};\n\n// Summary card component\nconst SummaryCard: React.FC<{ context: string; locationId: 'kwality' | 'supreme' | 'kenkere' | 'all' }> = ({ context, locationId }) => {\n  return (\n    <Card className=\"bg-gradient-to-br from-blue-50 to-indigo-50 border-blue-200 mb-6\">\n      <CardHeader>\n        <CardTitle className=\"text-blue-900 flex items-center gap-2\">\n          <Eye className=\"w-5 h-5\" />\n          Executive Context\n          <InfoPopover context={context as any} locationId={locationId} />\n        </CardTitle>\n      </CardHeader>\n      <CardContent className=\"text-sm text-blue-800 space-y-2\">\n        {/* InfoPopover content will be shown when clicked */}\n        <p className=\"italic\">Click the info icon to view location-specific insights and strategic context.</p>\n      </CardContent>\n    </Card>\n  );\n};\n\nexport const ComprehensiveExecutiveDashboard = React.memo(() => {\n  const [showSourceData, setShowSourceData] = useState(false);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [isGeneratingPDF, setIsGeneratingPDF] = useState(false);\n  const audioRef = useRef<HTMLAudioElement>(null);\n  const { filters, updateFilters } = useGlobalFilters();\n  const { setLoading } = useGlobalLoading();\n  const { toast } = useToast();\n\n  // Load real data from hooks\n  const { data: salesData, loading: salesLoading } = useSalesData();\n  const { data: sessionsData, loading: sessionsLoading } = useSessionsData();\n  const { data: payrollData, isLoading: payrollLoading } = usePayrollData();\n  const { data: newClientsData, loading: newClientsLoading } = useNewClientData();\n  const { data: leadsData, loading: leadsLoading } = useLeadsData();\n  const { data: discountData, loading: discountLoading } = useDiscountAnalysis();\n  const { data: lateCancellationsData, loading: lateCancellationsLoading } = useLateCancellationsData();\n  const { data: expirationsData, loading: expirationsLoading } = useExpirationsData();\n\n  const isLoading = salesLoading || sessionsLoading || payrollLoading || newClientsLoading || leadsLoading || discountLoading || lateCancellationsLoading || expirationsLoading;\n\n  useEffect(() => {\n    setLoading(isLoading, 'Loading executive dashboard overview...');\n  }, [isLoading, setLoading]);\n\n  // Ensure Executive Summary defaults to November 2025 when this component mounts\n  useEffect(() => {\n    try {\n      // Force the Executive Summary to November 2025 on mount\n      updateFilters({ dateRange: { start: '2025-11-01', end: '2025-11-30' } });\n    } catch (e) {\n      console.warn('Failed to set default Executive Summary date range:', e);\n    }\n    // Intentionally only run on mount\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Get unique locations for the selector\n  const availableLocations = useMemo(() => {\n    const locations = new Set<string>();\n    \n    salesData?.forEach(sale => {\n      if (sale.calculatedLocation) locations.add(sale.calculatedLocation);\n    });\n    \n    sessionsData?.forEach(session => {\n      if (session.location) locations.add(session.location);\n    });\n    \n    newClientsData?.forEach(client => {\n      if (client.homeLocation) locations.add(client.homeLocation);\n    });\n    \n    payrollData?.forEach(payroll => {\n      if (payroll.location) locations.add(payroll.location);\n    });\n\n    return Array.from(locations).sort();\n  }, [salesData, sessionsData, newClientsData, payrollData]);\n\n  // Filter data by selected date range and location\n  const previousMonthData = useMemo(() => {\n    const startDate = filters.dateRange?.start ? new Date(filters.dateRange.start) : null;\n    const endDate = filters.dateRange?.end ? (() => {\n      const d = new Date(filters.dateRange.end);\n      d.setHours(23, 59, 59, 999);\n      return d;\n    })() : null;\n\n    const withinDateRange = (dateStr: string) => {\n      if (!dateStr) return false;\n      const d = parseDate(dateStr);\n      if (!d) return false;\n      if (startDate && d < startDate) return false;\n      if (endDate && d > endDate) return false;\n      return true;\n    };\n\n    const normalizeLocationId = (raw: any): 'kwality' | 'supreme' | 'kenkere' | 'all' | null => {\n      if (!raw) return null;\n      const s = String(raw).toLowerCase();\n      if (['all', 'all locations'].includes(s)) return 'all';\n      if (s.includes('kwality') || s.includes('kemps')) return 'kwality';\n      if (s.includes('supreme') || s.includes('bandra')) return 'supreme';\n      if (s.includes('kenkere') || s.includes('bengaluru') || s.includes('bangalore')) return 'kenkere';\n      // If we already store ids like 'kwality'/'supreme'/'kenkere'\n      if (s === 'kwality' || s === 'supreme' || s === 'kenkere') return s as any;\n      return null;\n    };\n\n    const filterByLocation = (items: any[], locationKey: string) => {\n      if (!filters.location || (Array.isArray(filters.location) && filters.location.length === 0)) return items;\n      const locationFilter = Array.isArray(filters.location) ? filters.location[0] : (filters.location as any);\n      const locationId = normalizeLocationId(locationFilter);\n      if (!locationId || locationId === 'all') return items;\n\n      return items.filter((item) => {\n        const itemLocation = item?.[locationKey];\n        if (!itemLocation) return false;\n        const itemLocationLower = String(itemLocation).toLowerCase();\n\n        // Match Sales tab semantics for Sales locations (calculatedLocation)\n        if (locationKey === 'calculatedLocation') {\n          if (locationId === 'kwality') return String(itemLocation) === 'Kwality House, Kemps Corner';\n          if (locationId === 'supreme') return String(itemLocation) === 'Supreme HQ, Bandra';\n          if (locationId === 'kenkere') return itemLocationLower.includes('kenkere') || String(itemLocation) === 'Kenkere House';\n        }\n\n        // For other datasets, fall back to flexible matching\n        if (locationId === 'kwality') return itemLocationLower.includes('kwality') || itemLocationLower.includes('kemps');\n        if (locationId === 'supreme') return itemLocationLower.includes('supreme') || itemLocationLower.includes('bandra');\n        if (locationId === 'kenkere') return itemLocationLower.includes('kenkere') || itemLocationLower.includes('bengaluru') || itemLocationLower.includes('bangalore');\n        return false;\n      });\n    };\n\n    const salesBase = filterByLocation(salesData || [], 'calculatedLocation');\n    const filteredSales = salesBase.filter((item) => withinDateRange(item.paymentDate));\n\n    const sessionsBase = filterByLocation(sessionsData || [], 'location');\n    const filteredSessions = sessionsBase.filter((item) => withinDateRange(item.date));\n\n    const payrollBase = filterByLocation(payrollData || [], 'location');\n    const filteredPayroll = payrollBase.filter((item) => withinDateRange(item.monthYear || ''));\n\n    const newClientsBase = filterByLocation(newClientsData || [], 'homeLocation');\n    const filteredNewClients = newClientsBase.filter((item) => withinDateRange(item.firstVisitDate));\n\n    const leadsBase = filterByLocation(leadsData || [], 'center');\n    const filteredLeads = leadsBase.filter((item) => (item.createdAt ? withinDateRange(item.createdAt) : false));\n\n    const discountsBase = filterByLocation(discountData || [], 'location');\n    const filteredDiscounts = discountsBase.filter((item) => withinDateRange(item.paymentDate));\n\n    // Filter late cancellations\n    const lateCancellationsBase = filterByLocation(lateCancellationsData || [], 'location');\n    const filteredLateCancellations = lateCancellationsBase.filter((item) => {\n      const dateStr = item.dateIST || '';\n      return typeof dateStr === 'string' && withinDateRange(dateStr);\n    });\n\n    // Filter expirations\n    const expirationsBase = filterByLocation(expirationsData || [], 'homeLocation');\n    const filteredExpirations = expirationsBase.filter((item) => withinDateRange(item.endDate || item.orderAt));\n\n\n\n\n\n\n\n\n\n    return {\n      sales: filteredSales,\n      salesHistoricalBase: salesBase,\n      sessions: filteredSessions,\n      payroll: filteredPayroll,\n      newClients: filteredNewClients,\n      newClientsHistoricalBase: newClientsBase,\n      leads: filteredLeads,\n      discounts: filteredDiscounts,\n      lateCancellations: filteredLateCancellations,\n      expirations: filteredExpirations\n    };\n  }, [salesData, sessionsData, payrollData, newClientsData, leadsData, discountData, lateCancellationsData, expirationsData, filters.location, filters.dateRange]);\n\n  // Calculate metrics using hooks with proper filtering\n  const salesMetrics = useSalesMetrics(\n    previousMonthData?.sales || [],\n    (previousMonthData as any)?.salesHistoricalBase || salesData || [],\n    { \n      compareMode: 'previousMonth',\n      dateRange: filters.dateRange?.start || filters.dateRange?.end ? {\n        start: filters.dateRange?.start,\n        end: filters.dateRange?.end\n      } : undefined\n    }\n  );\n\n  const clientMetrics = useClientConversionMetrics(\n    previousMonthData?.newClients || [],\n    (previousMonthData as any)?.newClientsHistoricalBase || newClientsData || [],\n    {\n      dateRange: {\n        start: filters.dateRange?.start,\n        end: filters.dateRange?.end\n      }\n    }\n  );\n\n  // Calculate derived metrics from filtered data\n  const derivedMetrics = useMemo(() => {\n    const sales = previousMonthData?.sales || [];\n    const sessions = previousMonthData?.sessions || [];\n    const clients = previousMonthData?.newClients || [];\n    const cancellations = previousMonthData?.lateCancellations || [];\n    const discounts = previousMonthData?.discounts || [];\n\n    return {\n      totalRevenue: sales.reduce((sum, s) => sum + ((s.paymentValue || 0) - (s.paymentVAT || 0)), 0),\n      totalTransactions: new Set(sales.map(s => s.paymentTransactionId || s.paymentTransactionID).filter(Boolean)).size,\n      totalSessions: sessions.length,\n      totalVisits: sessions.reduce((sum, s) => sum + (s.checkedInCount || 0), 0),\n      avgAttendance: sessions.length > 0 ? sessions.reduce((sum, s) => sum + (s.checkedInCount || 0), 0) / sessions.length : 0,\n      totalCapacity: sessions.reduce((sum, s) => sum + (s.capacity || 0), 0),\n      fillRate: sessions.reduce((sum, s) => sum + (s.capacity || 0), 0) > 0 ? \n        (sessions.reduce((sum, s) => sum + (s.checkedInCount || 0), 0) / sessions.reduce((sum, s) => sum + (s.capacity || 0), 0)) * 100 : 0,\n      lateCancellations: cancellations.length,\n      cancellationRate: sessions.length > 0 ? (cancellations.length / sessions.length) * 100 : 0,\n      newClients: clients.length,\n      conversionRate: clients.length > 0 ? (clients.filter(c => c.conversionStatus === 'Converted').length / clients.length) * 100 : 0,\n      retentionRate: clients.length > 0 ? (clients.filter(c => c.retentionStatus === 'Retained').length / clients.length) * 100 : 0,\n      avgLTV: clients.length > 0 ? clients.reduce((sum, c) => sum + (c.ltv || 0), 0) / clients.length : 0,\n      totalDiscounts: discounts.reduce((sum, d) => sum + (d.discountAmount || 0), 0),\n      discountRate: sales.length > 0 ? (discounts.length / sales.length) * 100 : 0\n    };\n  }, [previousMonthData]);\n\n  // Previous month data for comparison calculations\n  const allDataLast3Months = useMemo(() => {\n    const now = new Date();\n    // Get previous month start and end\n    const prevMonthStart = new Date(now.getFullYear(), now.getMonth() - 1, 1);\n    const prevMonthEnd = new Date(now.getFullYear(), now.getMonth(), 0);\n\n    const filterByPreviousMonth = (dateStr: string) => {\n      if (!dateStr) return false;\n      const date = new Date(dateStr);\n      return date >= prevMonthStart && date <= prevMonthEnd;\n    };\n\n    const filterByLocation = (items: any[], locationKey: string) => {\n      if (!filters.location || (Array.isArray(filters.location) && filters.location.length === 0)) return items;\n      const locationFilter = Array.isArray(filters.location) ? filters.location[0] : filters.location;\n      if (!locationFilter || ['all', 'all locations'].includes(String(locationFilter).toLowerCase())) {\n        return items;\n      }\n      return items.filter(item => item[locationKey] === locationFilter);\n    };\n\n    const allSales = filterByLocation(\n      salesData?.filter(item => filterByPreviousMonth(item.paymentDate)) || [],\n      'calculatedLocation'\n    );\n\n    const allSessions = filterByLocation(\n      sessionsData?.filter(item => filterByPreviousMonth(item.date)) || [],\n      'location'\n    );\n\n    const allPayroll = filterByLocation(\n      payrollData?.filter(item => filterByPreviousMonth((item as any).monthYear || '')) || [],\n      'location'\n    );\n\n    const allNewClients = filterByLocation(\n      newClientsData?.filter(item => filterByPreviousMonth(item.firstVisitDate)) || [],\n      'homeLocation'\n    );\n\n    const allLeads = filterByLocation(\n      leadsData?.filter(item => filterByPreviousMonth(item.createdAt || '')) || [],\n      'center'\n    );\n\n    const allDiscounts = filterByLocation(\n      discountData?.filter(item => filterByPreviousMonth(item.paymentDate)) || [],\n      'location'\n    );\n\n    const allLateCancellations = filterByLocation(\n      lateCancellationsData?.filter(item => {\n        const dateStr = item.dateIST || '';\n        return typeof dateStr === 'string' && filterByPreviousMonth(dateStr);\n      }) || [],\n      'location'\n    );\n\n    return {\n      sales: allSales,\n      sessions: allSessions,\n      payroll: allPayroll,\n      newClients: allNewClients,\n      leads: allLeads,\n      discounts: allDiscounts,\n      lateCancellations: allLateCancellations\n    };\n  }, [salesData, sessionsData, payrollData, newClientsData, leadsData, discountData, lateCancellationsData, filters.location]);\n\n  // Year-over-year data for same month last year\n  const yearOverYearData = useMemo(() => {\n    const now = new Date();\n    // Get same month start and end from last year\n    const lastYearMonthStart = new Date(now.getFullYear() - 1, now.getMonth(), 1);\n    const lastYearMonthEnd = new Date(now.getFullYear() - 1, now.getMonth() + 1, 0);\n\n    const filterByLastYearMonth = (dateStr: string) => {\n      if (!dateStr) return false;\n      const date = new Date(dateStr);\n      return date >= lastYearMonthStart && date <= lastYearMonthEnd;\n    };\n\n    const filterByLocation = (items: any[], locationKey: string) => {\n      if (!filters.location || (Array.isArray(filters.location) && filters.location.length === 0)) return items;\n      const locationFilter = Array.isArray(filters.location) ? filters.location[0] : filters.location;\n      if (!locationFilter || ['all', 'all locations'].includes(String(locationFilter).toLowerCase())) {\n        return items;\n      }\n      return items.filter(item => item[locationKey] === locationFilter);\n    };\n\n    const yoySales = filterByLocation(\n      salesData?.filter(item => filterByLastYearMonth(item.paymentDate)) || [],\n      'calculatedLocation'\n    );\n\n    const yoySessions = filterByLocation(\n      sessionsData?.filter(item => filterByLastYearMonth(item.date)) || [],\n      'location'\n    );\n\n    const yoyNewClients = filterByLocation(\n      newClientsData?.filter(item => filterByLastYearMonth(item.firstVisitDate)) || [],\n      'homeLocation'\n    );\n\n    const yoyLeads = filterByLocation(\n      leadsData?.filter(item => filterByLastYearMonth(item.createdAt || '')) || [],\n      'center'\n    );\n\n    const yoyDiscounts = filterByLocation(\n      discountData?.filter(item => filterByLastYearMonth(item.paymentDate)) || [],\n      'location'\n    );\n\n    const yoyLateCancellations = filterByLocation(\n      lateCancellationsData?.filter(item => {\n        const dateStr = item.dateIST || '';\n        return typeof dateStr === 'string' && filterByLastYearMonth(dateStr);\n      }) || [],\n      'location'\n    );\n\n    return {\n      sales: yoySales,\n      sessions: yoySessions,\n      newClients: yoyNewClients,\n      leads: yoyLeads,\n      discounts: yoyDiscounts,\n      lateCancellations: yoyLateCancellations\n    };\n  }, [salesData, sessionsData, newClientsData, leadsData, discountData, lateCancellationsData, filters.location]);\n\n  if (isLoading) {\n    return null; // Global loader will handle this\n  }\n\n  const selectedLocation = Array.isArray(filters.location) ? filters.location[0] : filters.location;\n\n  const handlePlayAudio = () => {\n    if (audioRef.current) {\n      if (isPlaying) {\n        audioRef.current.pause();\n        setIsPlaying(false);\n      } else {\n        // Select audio source based on location\n        const audioSrc = selectedLocation === 'Kwality House' \n          ? '/kwality-house-audio.mp3' \n          : '/placeholder-audio.mp3';\n        \n        audioRef.current.src = audioSrc;\n        audioRef.current.play();\n        setIsPlaying(true);\n      }\n    }\n  };\n\n  const handleDownloadPDFReports = async () => {\n    setIsGeneratingPDF(true);\n    \n    try {\n        // Prepare report data\n        const now = new Date();\n        const threeMonthsAgo = new Date(now.getFullYear(), now.getMonth() - 3, 1);\n        const dateRange = `${threeMonthsAgo.toLocaleDateString('en-US', { month: 'short', year: 'numeric' })} - ${now.toLocaleDateString('en-US', { month: 'short', year: 'numeric' })}`;\n\n        // Defensive helpers\n        const safeNumber = (val) => (typeof val === 'number' && !isNaN(val) ? val : 0);\n        const safeArray = (arr) => Array.isArray(arr) ? arr : [];\n        const safeString = (str) => typeof str === 'string' ? str : '';\n\n        // Calculate avgResponseTime for leads\n        let avgResponseTime = 0;\n        if (previousMonthData.leads.length > 0) {\n          const responseTimes = previousMonthData.leads\n            .map(l => safeNumber(l.responseTimeHours))\n            .filter(rt => rt > 0);\n          avgResponseTime = responseTimes.length > 0\n            ? responseTimes.reduce((sum, rt) => sum + rt, 0) / responseTimes.length\n            : 0;\n        }\n\n        // Calculate avgDaysToExpiry for expirations\n        let avgDaysToExpiry = 0;\n        if (previousMonthData.expirations.length > 0) {\n          const daysArr = previousMonthData.expirations\n            .map(e => safeNumber(e.daysToExpiry))\n            .filter(d => d > 0);\n          avgDaysToExpiry = daysArr.length > 0\n            ? daysArr.reduce((sum, d) => sum + d, 0) / daysArr.length\n            : 0;\n        }\n\n        // Map to InfoSummary location id\n        const locationId = getLocationId(selectedLocation);\n\n        // Defensive construction of reportData\n        const reportData = {\n          location: safeString(selectedLocation) || 'All Locations',\n          dateRange,\n          sales: {\n            totalRevenue: safeArray(previousMonthData.sales).reduce((sum, s) => sum + (safeNumber(s.paymentValue) - safeNumber(s.paymentVAT)), 0),\n            transactions: safeArray(previousMonthData.sales).length,\n            avgTransaction: safeArray(previousMonthData.sales).length > 0\n              ? safeArray(previousMonthData.sales).reduce((sum, s) => sum + (safeNumber(s.paymentValue) - safeNumber(s.paymentVAT)), 0) / safeArray(previousMonthData.sales).length\n              : 0,\n            uniqueCustomers: new Set(safeArray(previousMonthData.sales).map(s => safeString(s.customerName))).size,\n          },\n          clients: {\n            newMembers: safeArray(previousMonthData.newClients).filter(c => safeString(c.isNew).toLowerCase().includes('new')).length,\n            convertedMembers: safeArray(previousMonthData.newClients).filter(c => safeString(c.conversionStatus) === 'Converted').length,\n            retentionRate: safeArray(previousMonthData.newClients).length > 0\n              ? (safeArray(previousMonthData.newClients).filter(c => safeString(c.retentionStatus) === 'Retained').length / safeArray(previousMonthData.newClients).length) * 100\n              : 0,\n            avgLTV: safeArray(previousMonthData.newClients).length > 0\n              ? safeArray(previousMonthData.newClients).reduce((sum, c) => sum + safeNumber(c.ltv), 0) / safeArray(previousMonthData.newClients).length\n              : 0,\n          },\n          sessions: {\n            totalSessions: safeArray(previousMonthData.sessions).length,\n            avgClassSize: safeArray(previousMonthData.sessions).length > 0\n              ? safeArray(previousMonthData.sessions).reduce((sum, s) => sum + safeNumber(s.checkedInCount), 0) / safeArray(previousMonthData.sessions).length\n              : 0,\n            avgFillRate: safeArray(previousMonthData.sessions).reduce((sum, s) => sum + safeNumber(s.capacity), 0) > 0\n              ? (safeArray(previousMonthData.sessions).reduce((sum, s) => sum + safeNumber(s.checkedInCount), 0) / safeArray(previousMonthData.sessions).reduce((sum, s) => sum + safeNumber(s.capacity), 0)) * 100\n              : 0,\n            totalAttendance: safeArray(previousMonthData.sessions).reduce((sum, s) => sum + safeNumber(s.checkedInCount), 0),\n          },\n          trainers: {\n            totalTrainers: new Set(safeArray(previousMonthData.sessions).map(s => safeString(s.trainerName)).filter(t => t)).size,\n            totalSessions: safeArray(previousMonthData.sessions).length,\n            totalPaid: safeArray(previousMonthData.payroll).reduce((sum, p) => sum + safeNumber(p.totalPaid), 0),\n            avgPerSession: safeArray(previousMonthData.sessions).length > 0\n              ? safeArray(previousMonthData.payroll).reduce((sum, p) => sum + safeNumber(p.totalPaid), 0) / safeArray(previousMonthData.sessions).length\n              : 0,\n          },\n          discounts: {\n            discountedSales: safeArray(previousMonthData.discounts).length,\n            totalDiscount: safeArray(previousMonthData.discounts).reduce((sum, d) => sum + safeNumber(d.discountAmount), 0),\n            avgDiscountPercent: safeArray(previousMonthData.discounts).length > 0\n              ? (safeArray(previousMonthData.discounts).reduce((sum, d) => sum + safeNumber(d.discountPercentage), 0) / safeArray(previousMonthData.discounts).length)\n              : 0,\n            revenueImpact: safeArray(previousMonthData.discounts).reduce((sum, d) => sum + (safeNumber(d.paymentValue) - safeNumber(d.paymentVAT)), 0),\n          },\n          leads: {\n            totalLeads: safeArray(previousMonthData.leads).length,\n            converted: safeArray(previousMonthData.leads).filter(l => safeString(l.status) === 'Converted').length,\n            conversionRate: safeArray(previousMonthData.leads).length > 0\n              ? (safeArray(previousMonthData.leads).filter(l => safeString(l.status) === 'Converted').length / safeArray(previousMonthData.leads).length) * 100\n              : 0,\n            avgResponseTime,\n          },\n          expirations: {\n            total: safeArray(previousMonthData.expirations).length,\n            value: safeArray(previousMonthData.expirations).reduce((sum, e) => sum + safeNumber(e.orderValue), 0),\n            avgDaysToExpiry,\n          },\n          cancellations: {\n            total: safeArray(previousMonthData.lateCancellations).length,\n            rate: safeArray(previousMonthData.sessions).length > 0\n              ? (safeArray(previousMonthData.lateCancellations).length / safeArray(previousMonthData.sessions).length) * 100\n              : 0,\n            pattern: 'Peak times: Early morning and evening classes',\n          },\n          summaries: {\n            executive: getSummaryText('executive', locationId),\n            sales: getSummaryText('sales-overview', locationId),\n            clients: getSummaryText('clients-overview', locationId),\n            sessions: getSummaryText('sessions-overview', locationId),\n            trainers: getSummaryText('trainer-overview', locationId),\n            discounts: getSummaryText('discounts-overview', locationId),\n            leads: getSummaryText('leads-overview', locationId),\n            expirations: getSummaryText('expiration-analytics-overview', locationId),\n            cancellations: getSummaryText('late-cancellations-overview', locationId),\n            recommendations: getSummaryText('recommendations', locationId),\n          },\n        };\n\n        toast({\n          title: \"Generating PDF Report\",\n          description: `Creating structured HTML-based report for ${reportData.location}...`,\n        });\n\n        await generateHTMLPDFReport(reportData);\n\n        toast({\n          title: \"Success!\",\n          description: `PDF report generated successfully for ${reportData.location}`,\n          duration: 5000,\n        });\n    } catch (error) {\n      console.error('Error generating PDF reports:', error);\n      toast({\n        title: \"Error\",\n        description: \"Failed to generate PDF reports. Please try again.\",\n        variant: \"destructive\"\n      });\n    } finally {\n      setIsGeneratingPDF(false);\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/20 p-6\">\n      {/* Hidden audio element */}\n      <audio ref={audioRef} onEnded={() => setIsPlaying(false)} preload=\"metadata\">\n        <source src=\"/placeholder-audio.mp3\" type=\"audio/mpeg\" />\n        Your browser does not support the audio element.\n      </audio>\n      \n      <div className=\"max-w-[1600px] mx-auto space-y-6\">\n        {/* Executive Filter Section */}\n        <ExecutiveFilterSection availableLocations={availableLocations} />\n\n        {/* Location Tabs - Easy Switching Between Locations */}\n        <StudioLocationTabs \n          activeLocation={selectedLocation || 'all'}\n          onLocationChange={(locationId) => {\n            updateFilters({ location: locationId === 'all' ? [] : [locationId] });\n          }}\n          showInfoPopover={true}\n          infoPopoverContext=\"executive-overview\"\n        />\n\n        {/* Empty Text Box */}\n        <Card className=\"bg-white border-0 shadow-sm\">\n          <CardContent className=\"p-6\">\n            <div className=\"w-full h-32 bg-gray-50 border-2 border-dashed border-gray-200 rounded-lg flex items-center justify-center\">\n              <p className=\"text-gray-400 text-sm\">Executive Notes & Key Insights</p>\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Executive Summary Metric Cards */}\n        {isLoading ? (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n            {Array.from({length: 8}).map((_, i) => (\n              <Card key={i} className=\"h-64 animate-pulse bg-slate-100\">\n                <CardContent className=\"p-5\">\n                  <div className=\"space-y-3\">\n                    <div className=\"h-4 bg-slate-300 rounded w-1/2\"></div>\n                    <div className=\"h-8 bg-slate-300 rounded w-3/4\"></div>\n                    <div className=\"h-20 bg-slate-300 rounded\"></div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6\">\n            {/* Sales Revenue */}\n            <Card className={cn(\n              \"group relative overflow-hidden cursor-pointer transition-all duration-500\",\n              \"bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950\",\n              \"border border-slate-200 hover:border-slate-800 border-t-4 border-t-emerald-500\",\n              \"shadow-md hover:shadow-2xl hover:shadow-slate-950/60\",\n              \"hover:-translate-y-1 hover:scale-[1.01]\"\n            )}>\n              <CardContent className=\"p-5 relative\">\n                <div className=\"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-emerald-500 to-teal-500\" />\n                <div className=\"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6\">\n                  <DollarSign className=\"w-20 h-20 text-slate-900 group-hover:text-white\" />\n                </div>\n                \n                <div className=\"relative z-10 space-y-2.5\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-2.5\">\n                      <div className=\"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-emerald-500/15 to-emerald-600/10 text-emerald-700 group-hover:from-emerald-500/25 group-hover:to-emerald-600/20 group-hover:text-emerald-400 group-hover:shadow-emerald-500/20\">\n                        <DollarSign className=\"w-5 h-5\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-emerald-400\">\n                          {salesMetrics?.metrics?.[0]?.title || 'Sales Revenue'}\n                        </h3>\n                        <p className=\"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold\">\n                          Previous Month\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50\">\n                    <p className=\"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight\">\n                      ₹{(derivedMetrics.totalRevenue / 100000).toFixed(1)}L\n                    </p>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <div className=\"h-0.5 flex-1 rounded-full transition-all duration-500 bg-emerald-200 group-hover:bg-emerald-500/40\" />\n                      <div className=\"flex items-center gap-1\">\n                        {(() => {\n                          const badge = getGrowthBadge(salesMetrics?.metrics?.[0]?.change, salesMetrics?.metrics?.[0]?.changeDetails?.trend);\n                          const Icon = badge.icon;\n                          return (\n                            <>\n                              <Icon className={`w-3 h-3 ${badge.color}`} />\n                              <span className={`text-[10px] font-bold transition-colors duration-500 ${badge.color}`}>\n                                {badge.text}\n                              </span>\n                            </>\n                          );\n                        })()}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Month over Month\n                      </div>\n                      <div className=\"flex items-baseline gap-1.5 mb-1.5\">\n                        <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                          {typeof salesMetrics?.metrics?.[0]?.change === 'number' ? `${salesMetrics.metrics[0].change > 0 ? '+' : ''}${salesMetrics.metrics[0].change.toFixed(1)}%` : 'N/A'}\n                        </span>\n                        <span className=\"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500\">vs prev</span>\n                      </div>\n                    </div>\n                    \n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Year over Year\n                      </div>\n                      <div className=\"flex items-baseline gap-1.5 mb-1.5\">\n                        <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                          {typeof salesMetrics?.metrics?.[0]?.yoyChange === 'number' ? `${salesMetrics.metrics[0].yoyChange > 0 ? '+' : ''}${salesMetrics.metrics[0].yoyChange.toFixed(1)}%` : 'N/A'}\n                        </span>\n                        <span className=\"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500\">vs 2024</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-emerald-500/50 group-hover:border-l-emerald-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-emerald-500/20 group-hover:before:bg-emerald-400/30\">\n                    <p className=\"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium\">\n                      {salesMetrics?.metrics?.[0]?.description || 'Total sales revenue'}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Total Sessions */}\n            <Card className={cn(\n              \"group relative overflow-hidden cursor-pointer transition-all duration-500\",\n              \"bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950\",\n              \"border border-slate-200 hover:border-slate-800 border-t-4 border-t-blue-500\",\n              \"shadow-md hover:shadow-2xl hover:shadow-slate-950/60\",\n              \"hover:-translate-y-1 hover:scale-[1.01]\"\n            )}>\n              <CardContent className=\"p-5 relative\">\n                <div className=\"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-blue-500 to-cyan-500\" />\n                <div className=\"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6\">\n                  <Calendar className=\"w-20 h-20 text-slate-900 group-hover:text-white\" />\n                </div>\n                \n                <div className=\"relative z-10 space-y-2.5\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-2.5\">\n                      <div className=\"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-blue-500/15 to-blue-600/10 text-blue-700 group-hover:from-blue-500/25 group-hover:to-blue-600/20 group-hover:text-blue-400 group-hover:shadow-blue-500/20\">\n                        <Calendar className=\"w-5 h-5\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-blue-400\">\n                          Total Sessions\n                        </h3>\n                        <p className=\"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold\">\n                          Previous Month\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50\">\n                    <p className=\"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight\">\n                      {derivedMetrics.totalSessions}\n                    </p>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <div className=\"h-0.5 flex-1 rounded-full transition-all duration-500 bg-blue-200 group-hover:bg-blue-500/40\" />\n                      <div className=\"flex items-center gap-1\">\n                        <Calendar className=\"w-3 h-3 text-blue-600 group-hover:text-blue-400\" />\n                        <span className=\"text-[10px] font-bold transition-colors duration-500 text-blue-600 group-hover:text-blue-400\">\n                          Classes\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Avg Capacity\n                      </div>\n                      <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                        {derivedMetrics.totalSessions > 0 ? (derivedMetrics.totalCapacity / derivedMetrics.totalSessions).toFixed(0) : 0}\n                      </span>\n                    </div>\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Avg Attendance\n                      </div>\n                      <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                        {derivedMetrics.avgAttendance.toFixed(0)}\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-blue-500/50 group-hover:border-l-blue-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-blue-500/20 group-hover:before:bg-blue-400/30\">\n                    <p className=\"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium\">\n                      Total classes conducted\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Late Cancellations */}\n            <Card className={cn(\n              \"group relative overflow-hidden cursor-pointer transition-all duration-500\",\n              \"bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950\",\n              \"border border-slate-200 hover:border-slate-800 border-t-4 border-t-red-500\",\n              \"shadow-md hover:shadow-2xl hover:shadow-slate-950/60\",\n              \"hover:-translate-y-1 hover:scale-[1.01]\"\n            )}>\n              <CardContent className=\"p-5 relative\">\n                <div className=\"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-red-500 to-rose-500\" />\n                <div className=\"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6\">\n                  <Clock className=\"w-20 h-20 text-slate-900 group-hover:text-white\" />\n                </div>\n                \n                <div className=\"relative z-10 space-y-2.5\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-2.5\">\n                      <div className=\"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-red-500/15 to-red-600/10 text-red-700 group-hover:from-red-500/25 group-hover:to-red-600/20 group-hover:text-red-400 group-hover:shadow-red-500/20\">\n                        <Clock className=\"w-5 h-5\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-red-400\">\n                          Late Cancellations\n                        </h3>\n                        <p className=\"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold\">\n                          Previous Month\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50\">\n                    <p className=\"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight\">\n                      {derivedMetrics.lateCancellations}\n                    </p>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <div className=\"h-0.5 flex-1 rounded-full transition-all duration-500 bg-red-200 group-hover:bg-red-500/40\" />\n                      <div className=\"flex items-center gap-1\">\n                        {(() => {\n                          const badge = getGrowthBadge(derivedMetrics.lateCancellations > 0 ? -5 : 0, 'moderate'); // Assume negative is good for cancellations\n                          const Icon = derivedMetrics.cancellationRate > 10 ? TrendingDown : Clock;\n                          return (\n                            <>\n                              <Icon className=\"w-3 h-3 text-red-600 group-hover:text-red-400\" />\n                              <span className=\"text-[10px] font-bold transition-colors duration-500 text-red-600 group-hover:text-red-400\">\n                                {derivedMetrics.cancellationRate > 10 ? 'High Impact' : 'Cancelled'}\n                              </span>\n                            </>\n                          );\n                        })()}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Cancel Rate\n                      </div>\n                      <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                        {derivedMetrics.cancellationRate.toFixed(1)}%\n                      </span>\n                    </div>\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Impact Level\n                      </div>\n                      <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                        {derivedMetrics.cancellationRate > 15 ? 'Critical' : derivedMetrics.cancellationRate > 10 ? 'High' : derivedMetrics.cancellationRate > 5 ? 'Moderate' : 'Low'}\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-red-500/50 group-hover:border-l-red-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-red-500/20 group-hover:before:bg-red-400/30\">\n                    <p className=\"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium\">\n                      Sessions cancelled late\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* New Clients */}\n            <Card className={cn(\n              \"group relative overflow-hidden cursor-pointer transition-all duration-500\",\n              \"bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950\",\n              \"border border-slate-200 hover:border-slate-800 border-t-4 border-t-purple-500\",\n              \"shadow-md hover:shadow-2xl hover:shadow-slate-950/60\",\n              \"hover:-translate-y-1 hover:scale-[1.01]\"\n            )}>\n              <CardContent className=\"p-5 relative\">\n                <div className=\"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-purple-500 to-pink-500\" />\n                <div className=\"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6\">\n                  <UserPlus className=\"w-20 h-20 text-slate-900 group-hover:text-white\" />\n                </div>\n                \n                <div className=\"relative z-10 space-y-2.5\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-2.5\">\n                      <div className=\"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-purple-500/15 to-purple-600/10 text-purple-700 group-hover:from-purple-500/25 group-hover:to-purple-600/20 group-hover:text-purple-400 group-hover:shadow-purple-500/20\">\n                        <UserPlus className=\"w-5 h-5\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-purple-400\">\n                          New Clients\n                        </h3>\n                        <p className=\"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold\">\n                          Previous Month\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50\">\n                    <p className=\"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight\">\n                      {derivedMetrics.newClients}\n                    </p>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <div className=\"h-0.5 flex-1 rounded-full transition-all duration-500 bg-purple-200 group-hover:bg-purple-500/40\" />\n                      <div className=\"flex items-center gap-1\">\n                        {(() => {\n                          const badge = getGrowthBadge(clientMetrics?.metrics?.[0]?.change, clientMetrics?.metrics?.[0]?.changeDetails?.trend);\n                          const Icon = badge.icon;\n                          return (\n                            <>\n                              <Icon className={`w-3 h-3 ${badge.color.replace('text-', 'text-purple-600 group-hover:text-purple-400')}`} />\n                              <span className=\"text-[10px] font-bold transition-colors duration-500 text-purple-600 group-hover:text-purple-400\">\n                                New Members\n                              </span>\n                            </>\n                          );\n                        })()}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Conversion Rate\n                      </div>\n                      <div className=\"flex items-baseline gap-1.5 mb-1.5\">\n                        <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                          {derivedMetrics.conversionRate.toFixed(1)}%\n                        </span>\n                        <span className=\"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500\">lead→client</span>\n                      </div>\n                    </div>\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Retention Rate\n                      </div>\n                      <div className=\"flex items-baseline gap-1.5 mb-1.5\">\n                        <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                          {derivedMetrics.retentionRate.toFixed(1)}%\n                        </span>\n                        <span className=\"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500\">active</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-purple-500/50 group-hover:border-l-purple-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-purple-500/20 group-hover:before:bg-purple-400/30\">\n                    <p className=\"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium\">\n                      {clientMetrics?.metrics?.[0]?.description || 'New member acquisitions'}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Average Transaction Value */}\n            <Card className={cn(\n              \"group relative overflow-hidden cursor-pointer transition-all duration-500\",\n              \"bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950\",\n              \"border border-slate-200 hover:border-slate-800 border-t-4 border-t-indigo-500\",\n              \"shadow-md hover:shadow-2xl hover:shadow-slate-950/60\",\n              \"hover:-translate-y-1 hover:scale-[1.01]\"\n            )}>\n              <CardContent className=\"p-5 relative\">\n                <div className=\"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-indigo-500 to-purple-500\" />\n                <div className=\"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6\">\n                  <Target className=\"w-20 h-20 text-slate-900 group-hover:text-white\" />\n                </div>\n                \n                <div className=\"relative z-10 space-y-2.5\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-2.5\">\n                      <div className=\"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-indigo-500/15 to-indigo-600/10 text-indigo-700 group-hover:from-indigo-500/25 group-hover:to-indigo-600/20 group-hover:text-indigo-400 group-hover:shadow-indigo-500/20\">\n                        <Target className=\"w-5 h-5\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-indigo-400\">\n                          Avg Transaction Value\n                        </h3>\n                        <p className=\"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold\">\n                          Previous Month\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50\">\n                    <p className=\"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight\">\n                      ₹{derivedMetrics.totalTransactions > 0 ? (derivedMetrics.totalRevenue / derivedMetrics.totalTransactions).toFixed(0) : '0'}\n                    </p>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <div className=\"h-0.5 flex-1 rounded-full transition-all duration-500 bg-indigo-200 group-hover:bg-indigo-500/40\" />\n                      <div className=\"flex items-center gap-1\">\n                        {(() => {\n                          const badge = getGrowthBadge(salesMetrics?.metrics?.[6]?.change, salesMetrics?.metrics?.[6]?.changeDetails?.trend);\n                          const Icon = badge.icon;\n                          return (\n                            <>\n                              <Icon className={`w-3 h-3 ${badge.color.replace('text-', 'text-indigo-600 group-hover:text-indigo-400')}`} />\n                              <span className=\"text-[10px] font-bold transition-colors duration-500 text-indigo-600 group-hover:text-indigo-400\">\n                                Per Sale\n                              </span>\n                            </>\n                          );\n                        })()}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Month over Month\n                      </div>\n                      <div className=\"flex items-baseline gap-1.5 mb-1.5\">\n                        <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                          {typeof salesMetrics?.metrics?.[6]?.change === 'number' ? `${salesMetrics.metrics[6].change > 0 ? '+' : ''}${salesMetrics.metrics[6].change.toFixed(1)}%` : 'N/A'}\n                        </span>\n                        <span className=\"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500\">vs prev</span>\n                      </div>\n                    </div>\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Year over Year\n                      </div>\n                      <div className=\"flex items-baseline gap-1.5 mb-1.5\">\n                        <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                          {typeof salesMetrics?.metrics?.[6]?.yoyChange === 'number' ? `${salesMetrics.metrics[6].yoyChange > 0 ? '+' : ''}${salesMetrics.metrics[6].yoyChange.toFixed(1)}%` : 'N/A'}\n                        </span>\n                        <span className=\"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500\">vs 2024</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-indigo-500/50 group-hover:border-l-indigo-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-indigo-500/20 group-hover:before:bg-indigo-400/30\">\n                    <p className=\"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium\">\n                      {salesMetrics?.metrics?.[6]?.description || 'Average value per transaction'}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Total Visits */}\n            <Card className={cn(\n              \"group relative overflow-hidden cursor-pointer transition-all duration-500\",\n              \"bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950\",\n              \"border border-slate-200 hover:border-slate-800 border-t-4 border-t-teal-500\",\n              \"shadow-md hover:shadow-2xl hover:shadow-slate-950/60\",\n              \"hover:-translate-y-1 hover:scale-[1.01]\"\n            )}>\n              <CardContent className=\"p-5 relative\">\n                <div className=\"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-teal-500 to-cyan-500\" />\n                <div className=\"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6\">\n                  <Activity className=\"w-20 h-20 text-slate-900 group-hover:text-white\" />\n                </div>\n                \n                <div className=\"relative z-10 space-y-2.5\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-2.5\">\n                      <div className=\"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-teal-500/15 to-teal-600/10 text-teal-700 group-hover:from-teal-500/25 group-hover:to-teal-600/20 group-hover:text-teal-400 group-hover:shadow-teal-500/20\">\n                        <Activity className=\"w-5 h-5\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-teal-400\">\n                          Total Visits\n                        </h3>\n                        <p className=\"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold\">\n                          Previous Month\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50\">\n                    <p className=\"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight\">\n                      {derivedMetrics.totalVisits}\n                    </p>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <div className=\"h-0.5 flex-1 rounded-full transition-all duration-500 bg-teal-200 group-hover:bg-teal-500/40\" />\n                      <div className=\"flex items-center gap-1\">\n                        <Activity className=\"w-3 h-3 text-teal-600 group-hover:text-teal-400\" />\n                        <span className=\"text-[10px] font-bold transition-colors duration-500 text-teal-600 group-hover:text-teal-400\">\n                          Check-ins\n                        </span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Avg per Session\n                      </div>\n                      <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                        {derivedMetrics.avgAttendance.toFixed(1)}\n                      </span>\n                    </div>\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Fill Rate\n                      </div>\n                      <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                        {derivedMetrics.fillRate.toFixed(1)}%\n                      </span>\n                    </div>\n                  </div>\n\n                  <div className=\"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-teal-500/50 group-hover:border-l-teal-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-teal-500/20 group-hover:before:bg-teal-400/30\">\n                    <p className=\"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium\">\n                      Total member check-ins\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Average LTV */}\n            <Card className={cn(\n              \"group relative overflow-hidden cursor-pointer transition-all duration-500\",\n              \"bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950\",\n              \"border border-slate-200 hover:border-slate-800 border-t-4 border-t-rose-500\",\n              \"shadow-md hover:shadow-2xl hover:shadow-slate-950/60\",\n              \"hover:-translate-y-1 hover:scale-[1.01]\"\n            )}>\n              <CardContent className=\"p-5 relative\">\n                <div className=\"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-rose-500 to-orange-500\" />\n                <div className=\"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6\">\n                  <CreditCard className=\"w-20 h-20 text-slate-900 group-hover:text-white\" />\n                </div>\n                \n                <div className=\"relative z-10 space-y-2.5\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-2.5\">\n                      <div className=\"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-rose-500/15 to-rose-600/10 text-rose-700 group-hover:from-rose-500/25 group-hover:to-rose-600/20 group-hover:text-rose-400 group-hover:shadow-rose-500/20\">\n                        <CreditCard className=\"w-5 h-5\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-rose-400\">\n                          Average LTV\n                        </h3>\n                        <p className=\"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold\">\n                          Previous Month\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50\">\n                    <p className=\"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight\">\n                      ₹{(derivedMetrics.avgLTV / 1000).toFixed(1)}k\n                    </p>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <div className=\"h-0.5 flex-1 rounded-full transition-all duration-500 bg-rose-200 group-hover:bg-rose-500/40\" />\n                      <div className=\"flex items-center gap-1\">\n                        {(() => {\n                          const badge = getGrowthBadge(clientMetrics?.metrics?.[3]?.change, clientMetrics?.metrics?.[3]?.changeDetails?.trend);\n                          const Icon = badge.icon;\n                          return (\n                            <>\n                              <Icon className={`w-3 h-3 ${badge.color.replace('text-', 'text-rose-600 group-hover:text-rose-400')}`} />\n                              <span className=\"text-[10px] font-bold transition-colors duration-500 text-rose-600 group-hover:text-rose-400\">\n                                Lifetime Value\n                              </span>\n                            </>\n                          );\n                        })()}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Month over Month\n                      </div>\n                      <div className=\"flex items-baseline gap-1.5 mb-1.5\">\n                        <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                          {typeof clientMetrics?.metrics?.[3]?.change === 'number' ? `${clientMetrics.metrics[3].change > 0 ? '+' : ''}${clientMetrics.metrics[3].change.toFixed(1)}%` : 'N/A'}\n                        </span>\n                        <span className=\"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500\">vs prev</span>\n                      </div>\n                    </div>\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Trend Quality\n                      </div>\n                      <div className=\"flex items-baseline gap-1.5 mb-1.5\">\n                        <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                          {(clientMetrics?.metrics?.[3]?.changeDetails?.trend === 'strong' ? 'Excellent' : \n                            clientMetrics?.metrics?.[3]?.changeDetails?.trend === 'moderate' ? 'Good' : \n                            clientMetrics?.metrics?.[3]?.changeDetails?.trend === 'weak' ? 'Fair' : 'Stable')}\n                        </span>\n                        <span className=\"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500\">quality</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-rose-500/50 group-hover:border-l-rose-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-rose-500/20 group-hover:before:bg-rose-400/30\">\n                    <p className=\"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium\">\n                      {clientMetrics?.metrics?.[3]?.description || 'Average customer lifetime value'}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n\n            {/* Discount Rate */}\n            <Card className={cn(\n              \"group relative overflow-hidden cursor-pointer transition-all duration-500\",\n              \"bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950\",\n              \"border border-slate-200 hover:border-slate-800 border-t-4 border-t-orange-500\",\n              \"shadow-md hover:shadow-2xl hover:shadow-slate-950/60\",\n              \"hover:-translate-y-1 hover:scale-[1.01]\"\n            )}>\n              <CardContent className=\"p-5 relative\">\n                <div className=\"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-orange-500 to-yellow-500\" />\n                <div className=\"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6\">\n                  <Percent className=\"w-20 h-20 text-slate-900 group-hover:text-white\" />\n                </div>\n                \n                <div className=\"relative z-10 space-y-2.5\">\n                  <div className=\"flex items-start justify-between\">\n                    <div className=\"flex items-center gap-2.5\">\n                      <div className=\"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-orange-500/15 to-orange-600/10 text-orange-700 group-hover:from-orange-500/25 group-hover:to-orange-600/20 group-hover:text-orange-400 group-hover:shadow-orange-500/20\">\n                        <Percent className=\"w-5 h-5\" />\n                      </div>\n                      <div>\n                        <h3 className=\"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-orange-400\">\n                          Discount Rate\n                        </h3>\n                        <p className=\"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold\">\n                          Previous Month\n                        </p>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50\">\n                    <p className=\"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight\">\n                      {derivedMetrics.discountRate.toFixed(1)}%\n                    </p>\n                    <div className=\"flex items-center gap-2 mt-1\">\n                      <div className=\"h-0.5 flex-1 rounded-full transition-all duration-500 bg-orange-200 group-hover:bg-orange-500/40\" />\n                      <div className=\"flex items-center gap-1\">\n                        {(() => {\n                          const badge = getGrowthBadge(salesMetrics?.metrics?.[8]?.change, salesMetrics?.metrics?.[8]?.changeDetails?.trend);\n                          const Icon = badge.icon;\n                          return (\n                            <>\n                              <Icon className={`w-3 h-3 ${badge.color.replace('text-', 'text-orange-600 group-hover:text-orange-400')}`} />\n                              <span className=\"text-[10px] font-bold transition-colors duration-500 text-orange-600 group-hover:text-orange-400\">\n                                Applied\n                              </span>\n                            </>\n                          );\n                        })()}\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"grid grid-cols-2 gap-2\">\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Total Discounts\n                      </div>\n                      <div className=\"flex items-baseline gap-1.5 mb-1.5\">\n                        <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                          ₹{(derivedMetrics.totalDiscounts / 1000).toFixed(0)}k\n                        </span>\n                        <span className=\"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500\">total</span>\n                      </div>\n                    </div>\n                    <div className=\"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\">\n                      <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                        Impact Level\n                      </div>\n                      <div className=\"flex items-baseline gap-1.5 mb-1.5\">\n                        <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                          {derivedMetrics.discountRate > 20 ? 'High' : derivedMetrics.discountRate > 10 ? 'Moderate' : 'Low'}\n                        </span>\n                        <span className=\"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500\">impact</span>\n                      </div>\n                    </div>\n                  </div>\n\n                  <div className=\"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-orange-500/50 group-hover:border-l-orange-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-orange-500/20 group-hover:before:bg-orange-400/30\">\n                    <p className=\"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium\">\n                      {salesMetrics?.metrics?.[8]?.description || 'Average discount percentage'}\n                    </p>\n                  </div>\n                </div>\n              </CardContent>\n            </Card>\n          </div>\n        )}\n\n        {/* Sales Table (Exportable) */}\n        <div className=\"mt-10\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-2xl font-bold text-slate-900\">Product & Category Metrics</h2>\n          </div>\n\n          <ProductCategoryMetricsTable\n            data={previousMonthData.sales || []}\n            filters={filters}\n          />\n        </div>\n\n        {/* New Executive Sections - Complete Performance Overview */}\n        <div className=\"mt-12\">\n          <div className=\"border-t-2 border-slate-200 pt-8 mb-8\">\n            <h2 className=\"text-2xl font-bold text-slate-900 mb-2\">Complete Performance Overview</h2>\n            <p className=\"text-sm text-slate-600\">All key metrics filtered by your selected date range and location</p>\n          </div>\n\n          <div className=\"space-y-5\">\n            {/* Sales Section */}\n            <ExecutiveSalesSection onMetricClick={() => {}} />\n\n            {/* Sessions Section */}\n            <ExecutiveSessionsSection onMetricClick={() => {}} />\n\n            {/* Clients Section */}\n            <ExecutiveClientsSection onMetricClick={() => {}} />\n\n            {/* Trainers Section */}\n            <ExecutiveTrainersSection onMetricClick={() => {}} />\n\n            {/* Leads Section */}\n            <ExecutiveLeadsSection onMetricClick={() => {}} />\n\n            {/* Discounts Section */}\n            <ExecutiveDiscountsSection onMetricClick={() => {}} />\n\n            {/* Cancellations Section */}\n            <ExecutiveCancellationsSection onMetricClick={() => {}} />\n\n            {/* Expirations Section */}\n            <ExecutiveExpirationsSection onMetricClick={() => {}} />\n          </div>\n        </div>\n        \n        {/* Sales Table (Exportable) */}\n        <div className=\"mt-10\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h2 className=\"text-2xl font-bold text-slate-900\">Product & Category Metrics</h2>\n          </div>\n\n          <ProductCategoryMetricsTable\n            data={previousMonthData.sales || []}\n            filters={filters}\n          />\n        </div>\n        \n        {/* Source Data Modal */}\n        <SourceDataModal \n          open={showSourceData} \n          onOpenChange={setShowSourceData} \n          sources={[\n            {\n              name: \"Sales Data (Previous Month)\",\n              data: previousMonthData.sales || []\n            },\n            {\n              name: \"Sessions Data (Previous Month)\", \n              data: previousMonthData.sessions || []\n            },\n            {\n              name: \"New Clients Data (Previous Month)\",\n              data: previousMonthData.newClients || []\n            },\n            {\n              name: \"Leads Data (Previous Month)\",\n              data: previousMonthData.leads || []\n            },\n            {\n              name: \"Payroll Data (Previous Month)\",\n              data: previousMonthData.payroll || []\n            },\n            {\n              name: \"Discounts Data (Previous Month)\",\n              data: previousMonthData.discounts || []\n            }\n          ]}\n        />\n      </div>\n    </div>\n  );\n});\n\nComprehensiveExecutiveDashboard.displayName = 'ComprehensiveExecutiveDashboard';\n\nexport default ComprehensiveExecutiveDashboard;\n","\nimport React from 'react';\nimport { ComprehensiveExecutiveDashboard } from './ComprehensiveExecutiveDashboard';\n\nconst ExecutiveSummarySection = () => {\n  return <ComprehensiveExecutiveDashboard />;\n};\n\nexport { ExecutiveSummarySection };\nexport default ExecutiveSummarySection;\n","import React, { useMemo } from 'react';\nimport { useGlobalFilters } from '@/contexts/GlobalFiltersContext';\nimport { formatCurrency, formatNumber } from '@/utils/formatters';\n\ninterface DynamicHeroMetricsProps {\n  salesData: any[];\n  sessionsData: any[];\n  leadsData: any[];\n  newClientsData: any[];\n}\n\nexport const useDynamicHeroMetrics = ({\n  salesData,\n  sessionsData,\n  leadsData,\n  newClientsData\n}: DynamicHeroMetricsProps) => {\n  const { filters } = useGlobalFilters();\n\n  return useMemo(() => {\n    const selectedLocation = Array.isArray(filters.location) ? filters.location[0] : filters.location;\n\n    // Filter data by location\n    const filterByLocation = (items: any[], locationKey: string) => {\n      if (!selectedLocation) return items;\n      \n      return items.filter(item => {\n        const itemLocation = item[locationKey];\n        if (!itemLocation) return false;\n        \n        // Match exact location or partial match for variations\n        return itemLocation === selectedLocation || \n               itemLocation.includes(selectedLocation) ||\n               selectedLocation.includes(itemLocation);\n      });\n    };\n\n    const filteredSales = filterByLocation(salesData, 'calculatedLocation');\n    const filteredSessions = filterByLocation(sessionsData, 'location');\n    const filteredLeads = filterByLocation(leadsData, 'center');\n    const filteredNewClients = filterByLocation(newClientsData, 'homeLocation');\n\n    // Calculate metrics from filtered data\n    const totalRevenue = filteredSales.reduce((sum, sale) => sum + (sale.paymentValue || 0), 0);\n    const activeMembers = new Set(filteredSales.map(s => s.memberId)).size;\n    const totalAttendance = filteredSessions.reduce((sum, s) => sum + (s.checkedInCount || 0), 0);\n    const convertedLeads = filteredLeads.filter(l => l.conversionStatus === 'Converted').length;\n    const conversionRate = filteredLeads.length > 0 ? (convertedLeads / filteredLeads.length) * 100 : 0;\n\n    return [\n      { label: 'Total Revenue', value: formatCurrency(totalRevenue), trend: null },\n      { label: 'Active Members', value: formatNumber(activeMembers), trend: null },\n      { label: 'Session Attendance', value: formatNumber(totalAttendance), trend: null },\n      { label: 'Lead Conversion', value: `${conversionRate.toFixed(1)}%`, trend: null }\n    ];\n  }, [salesData, sessionsData, leadsData, newClientsData, filters.location]);\n};\n","import React from 'react';\nimport { ExecutiveSummarySection } from '@/components/dashboard/ExecutiveSummarySection';\nimport { Footer } from '@/components/ui/footer';\nimport { GlobalFiltersProvider } from '@/contexts/GlobalFiltersContext';\nimport DashboardMotionHero from '@/components/ui/DashboardMotionHero';\nimport { AdvancedExportButton } from '@/components/ui/AdvancedExportButton';\nimport { FileText, Download, Home, Play, Pause } from 'lucide-react';\nimport { useSalesData } from '@/hooks/useSalesData';\nimport { useSessionsData } from '@/hooks/useSessionsData';\nimport { usePayrollData } from '@/hooks/usePayrollData';\nimport { useNewClientData } from '@/hooks/useNewClientData';\nimport { useLeadsData } from '@/hooks/useLeadsData';\nimport { useDiscountAnalysis } from '@/hooks/useDiscountAnalysis';\nimport { Button } from '@/components/ui/button';\nimport { formatCurrency, formatNumber } from '@/utils/formatters';\nimport { useDynamicHeroMetrics } from '@/hooks/useDynamicHeroMetrics';\nimport InfoPopover from '@/components/ui/InfoSidebar';\nimport { useGlobalLoading } from '@/hooks/useGlobalLoading';\n\n// Inner component that has access to GlobalFilters context\nconst ExecutiveSummaryContent = () => {\n  const { data: salesData = [], loading: salesLoading } = useSalesData();\n  const { data: sessionsData = [], loading: sessionsLoading } = useSessionsData();\n  const { data: payrollData = [], isLoading: payrollLoading } = usePayrollData();\n  const { data: newClientData = [], loading: clientsLoading } = useNewClientData();\n  const { data: leadsData = [], loading: leadsLoading } = useLeadsData();\n  const { data: discountData = [] } = useDiscountAnalysis();\n  const { setLoading } = useGlobalLoading();\n  const exportRef = React.useRef<{ open: () => void }>(null);\n  const [isPlaying, setIsPlaying] = React.useState(false);\n\n  // Track loading state\n  React.useEffect(() => {\n    const isLoading = salesLoading || sessionsLoading || payrollLoading || clientsLoading || leadsLoading;\n    setLoading(isLoading, 'Loading executive dashboard data...');\n  }, [salesLoading, sessionsLoading, payrollLoading, clientsLoading, leadsLoading, setLoading]);\n\n  // Get dynamic hero metrics that update with location filter\n  const heroMetrics = useDynamicHeroMetrics({\n    salesData,\n    sessionsData,\n    leadsData,\n    newClientsData: newClientData\n  });\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/20\">\n      <DashboardMotionHero\n        title=\"Executive Overview\"\n        subtitle=\"A concise, high-level view of revenue, attendance, and growth trends across all locations.\"\n        metrics={heroMetrics}\n        extra={\n          <div className=\"flex items-center gap-2\">\n            <Button \n              onClick={() => setIsPlaying(p => !p)}\n              className=\"rounded-xl border border-white/30 bg-transparent text-white hover:border-white/50 px-4 py-2 text-sm font-semibold\"\n              variant=\"ghost\"\n            >\n              {isPlaying ? <Pause className=\"w-4 h-4 mr-2\" /> : <Play className=\"w-4 h-4 mr-2\" />}\n              {isPlaying ? 'Pause' : 'Play'}\n            </Button>\n            <Button \n              onClick={() => exportRef.current?.open()}\n              className=\"rounded-xl border border-white/30 bg-transparent text-white hover:border-white/50 px-4 py-2 text-sm font-semibold\"\n              variant=\"ghost\"\n            >\n              <Download className=\"w-4 h-4 mr-2\" />\n              Export All Data\n            </Button>\n            <Button\n              onClick={() => document.getElementById('exec-pdf-trigger')?.dispatchEvent(new MouseEvent('click', { bubbles: true }))}\n              className=\"rounded-xl border border-white/30 bg-transparent text-white hover:border-white/50 px-4 py-2 text-sm font-semibold\"\n              variant=\"ghost\"\n            >\n              <FileText className=\"w-4 h-4 mr-2\" />\n              Download PDF Reports\n            </Button>\n            <Button \n              onClick={() => window.location.href = '/'}\n              className=\"rounded-xl border border-white/30 bg-transparent text-white hover:border-white/50 px-4 py-2 text-sm font-semibold\"\n              variant=\"ghost\"\n            >\n              <Home className=\"w-4 h-4 mr-2\" />\n              Back to Main Dashboard\n            </Button>\n          </div>\n        }\n      />\n\n      {/* InfoPopover triggers for sales overview - explicitly load kwality and supreme popovers */}\n      <div className=\"flex justify-end max-w-5xl mx-auto mt-4 space-x-2\">\n        <InfoPopover context=\"sales-overview\" locationId=\"kwality\" iframeSrc=\"/popovers/sales-overview/kwality.html\" startAsSidebar={true} />\n        <InfoPopover context=\"sales-overview\" locationId=\"supreme\" iframeSrc=\"/popovers/sales-overview/supreme.html\" startAsSidebar={true} />\n      </div>\n      \n      <div className=\"container mx-auto px-6 py-8\">\n        <ExecutiveSummarySection />\n      </div>\n\n      {/* Hidden export dialog wired for programmatic open */}\n      <div className=\"hidden\">\n        <AdvancedExportButton \n          renderTrigger={false}\n          openRef={exportRef as any}\n          salesData={salesData}\n          sessionsData={sessionsData as any}\n          newClientData={newClientData}\n          payrollData={payrollData}\n          lateCancellationsData={[]}\n          discountData={discountData as any}\n          defaultFileName=\"executive-dashboard-export\"\n        />\n      </div>\n      <Footer />\n    </div>\n  );\n};\n\n// Outer wrapper component\nconst ExecutiveSummary = () => {\n  return (\n    <GlobalFiltersProvider>\n      <ExecutiveSummaryContent />\n    </GlobalFiltersProvider>\n  );\n};\n\nexport default ExecutiveSummary;\n"],"names":["generateComprehensiveExecutivePDF","reportData","pdf","jsPDF","pageWidth","pageHeight","margin","contentWidth","yPosition","colors","checkAndAddPage","requiredHeight","addPageFooter","footerY","drawSectionHeader","title","sectionColor","drawMetricGrid","metrics","boxWidth","boxHeight","metric","index","col","row","x","y","valueStr","rows","drawMetricsTable","headers","autoTable","acc","_","idx","summaryLines","section","descLines","rec","recLines","downloadComprehensiveExecutivePDF","filename","blob","url","link","useExecutiveReportGenerator","options","salesData","useSalesData","sessionsData","useSessionsData","clientData","useNewClientData","payrollData","usePayrollData","leadsData","useLeadsData","discountData","useDiscountAnalysis","cancellationsData","useLateCancellationsData","expirationsData","useExpirationsData","generateReportData","useCallback","totalRevenue","sum","s","totalTransactions","avgTransaction","totalSessions","totalAttendance","avgClassSize","totalCapacity","fillRate","newClients","convertedClients","c","conversionRate","retainedClients","retentionRate","avgLTV","totalTrainers","p","totalTrainerSessions","totalTrainerPaid","totalLeads","convertedLeads","l","leadConversionRate","totalDiscounts","d","discountCount","discountRate","cancellationCount","cancellationRate","expirationCount","expiredValue","e","sections","formatCurrency","formatNumber","formatPercentage","executiveSummary","recommendations","generateAndDownloadPDF","ExecutivePDFExportButton","dateRange","location","className","variant","size","showLabel","isExporting","setIsExporting","useState","toast","useToast","handleExport","jsx","Button","cn","jsxs","Fragment","Loader2","Download","ExecutiveFilterSection","availableLocations","isOpen","setIsOpen","filters","updateFilters","clearFilters","useGlobalFilters","handleLocationSelect","currentLocations","isSelected","selectedLocation","hasActiveFilters","handleDateRangeChange","type","date","dateString","clearDateRange","Card","Collapsible","CollapsibleTrigger","CardHeader","CardTitle","Filter","Badge","X","ChevronUp","ChevronDown","CollapsibleContent","CardContent","Calendar","CalendarIcon","Popover","PopoverTrigger","format","PopoverContent","CalendarComponent","MapPin","borderColorMap","iconBgMap","gradientMap","ExecutiveSectionCard","Icon","description","children","headerClassName","contentClassName","borderColor","collapsible","defaultCollapsed","isCollapsed","setIsCollapsed","React","ModernSalesTable","data","loading","onRowClick","showFooter","footerData","maxHeight","getGrowthBadge","current","previous","growth","isPositive","TrendingUp","TrendingDown","columns","value","formatDiscount","ModernDataTable","ExecutiveSalesSection","locationId","onMetricClick","salesLoading","previousSalesData","tableData","useMemo","item","ShoppingCart","BrandSpinner","SalesAnimatedMetricCardsComponent","ExecutiveSessionsSection","sessionsLoading","Activity","SessionsMetricCards","SessionsGroupedTable","ExecutiveClientsSection","clientLoading","Users","ClientConversionMetricCards","ClientRetentionMonthByTypePivot","ExecutiveTrainersSection","payrollLoading","trainerMetrics","trainer","Award","ImprovedLeadMetricCards","trialsCompleted","totalLTV","totalVisits","trialConversionRate","avgVisitsPerLead","Target","UserCheck","CreditCard","Zap","BarChart3","motion","ExecutiveLeadsSection","leadsLoading","leadSummary","sources","lead","source","ExecutiveDiscountsSection","discountLoading","discountMetrics","discounts","discountsByCategory","map","category","a","b","Percent","ExecutiveCancellationsSection","cancellationsLoading","Clock","LateCancellationsMetricCards","LateCancellationsMonthOnMonthTable","ExecutiveExpirationsSection","expirationsLoading","AlertCircle","ExpirationMetricCards","ExpirationDataTables","changeValue","trend","ComprehensiveExecutiveDashboard","showSourceData","setShowSourceData","isPlaying","setIsPlaying","isGeneratingPDF","setIsGeneratingPDF","audioRef","useRef","setLoading","useGlobalLoading","newClientsData","newClientsLoading","lateCancellationsData","lateCancellationsLoading","isLoading","useEffect","locations","sale","session","client","payroll","previousMonthData","startDate","endDate","withinDateRange","dateStr","parseDate","normalizeLocationId","raw","filterByLocation","items","locationKey","locationFilter","itemLocation","itemLocationLower","salesBase","filteredSales","filteredSessions","filteredPayroll","newClientsBase","filteredNewClients","filteredLeads","filteredDiscounts","filteredLateCancellations","filteredExpirations","salesMetrics","useSalesMetrics","clientMetrics","useClientConversionMetrics","derivedMetrics","sales","sessions","clients","cancellations","now","prevMonthStart","prevMonthEnd","filterByPreviousMonth","allSales","allSessions","allPayroll","allNewClients","allLeads","allDiscounts","allLateCancellations","lastYearMonthStart","lastYearMonthEnd","filterByLastYearMonth","yoySales","yoySessions","yoyNewClients","yoyLeads","yoyDiscounts","yoyLateCancellations","StudioLocationTabs","i","DollarSign","badge","UserPlus","ProductCategoryMetricsTable","SourceDataModal","ExecutiveSummarySection","useDynamicHeroMetrics","activeMembers","ExecutiveSummaryContent","newClientData","clientsLoading","exportRef","heroMetrics","DashboardMotionHero","Pause","Play","FileText","Home","InfoPopover","AdvancedExportButton","Footer","ExecutiveSummary","GlobalFiltersProvider"],"mappings":"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"}