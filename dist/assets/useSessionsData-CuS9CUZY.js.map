{"version":3,"file":"useSessionsData-CuS9CUZY.js","sources":["../../src/hooks/useSessionsData.ts"],"sourcesContent":["\nimport { useState, useEffect } from 'react';\nimport { fetchGoogleSheet, parseNumericValue, SPREADSHEET_IDS } from '@/utils/googleAuth';\nimport { createLogger } from '@/utils/logger';\n\nconst logger = createLogger('useSessionsData');\n\nexport interface SessionData {\n  trainerId: string;\n  trainerFirstName: string;\n  trainerLastName: string;\n  trainerName: string;\n  sessionId: string;\n  sessionName: string;\n  capacity: number;\n  checkedInCount: number;\n  lateCancelledCount: number;\n  bookedCount: number;\n  complimentaryCount: number;\n  location: string;\n  date: string;\n  dayOfWeek: string;\n  time: string;\n  totalPaid: number;\n  nonPaidCount: number;\n  uniqueId1: string;\n  uniqueId2: string;\n  checkedInsWithMemberships: number;\n  checkedInsWithPackages: number;\n  checkedInsWithIntroOffers: number;\n  checkedInsWithSingleClasses: number;\n  classType: string;\n  cleanedClass: string;\n  classes: number;\n  fillPercentage?: number;\n  revenue?: number;\n  // Legacy field for backward compatibility\n  uniqueId?: string;\n}\n\nexport const useSessionsData = () => {\n  const [data, setData] = useState<SessionData[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchSessionsData = async () => {\n    try {\n      setLoading(true);\n      logger.info('Fetching sessions data...');\n      \n      const rows = await fetchGoogleSheet(SPREADSHEET_IDS.SESSIONS, 'Sessions', {\n        valueRenderOption: 'FORMATTED_VALUE'\n      });\n      \n      if (rows.length < 2) {\n        setData([]);\n        return;\n      }\n\n      const sessionsData: SessionData[] = rows.slice(1).map((row: any[]) => {\n        const capacity = parseNumericValue(row[6]);\n        const checkedInCount = parseNumericValue(row[7]);\n        const fillPercentage = capacity > 0 ? (checkedInCount / capacity) * 100 : 0;\n        \n        return {\n          trainerId: row[0] || '',\n          trainerFirstName: row[1] || '',\n          trainerLastName: row[2] || '',\n          trainerName: row[3] || '',\n          sessionId: row[4] || '',\n          sessionName: row[5] || '',\n          capacity,\n          checkedInCount,\n          lateCancelledCount: parseNumericValue(row[8]),\n          bookedCount: parseNumericValue(row[9]),\n          complimentaryCount: parseNumericValue(row[10]),\n          location: row[11] || '',\n          date: row[12] || '',\n          dayOfWeek: row[13] || '',\n          time: row[14] || '',\n          totalPaid: parseNumericValue(row[15]),\n          nonPaidCount: parseNumericValue(row[16]),\n          uniqueId1: row[17] || '',\n          uniqueId2: row[18] || '',\n          checkedInsWithMemberships: parseNumericValue(row[19]),\n          checkedInsWithPackages: parseNumericValue(row[20]),\n          checkedInsWithIntroOffers: parseNumericValue(row[21]),\n          checkedInsWithSingleClasses: parseNumericValue(row[22]),\n          classType: row[23] || '',\n          cleanedClass: row[24] || '',\n          classes: parseNumericValue(row[25]),\n          fillPercentage,\n          revenue: parseNumericValue(row[15]),\n          uniqueId: row[17] || ''\n        };\n      });\n\n      setData(sessionsData);\n      setError(null);\n    } catch (err) {\n      logger.error('Error fetching sessions data:', err);\n      setError('Failed to load sessions data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchSessionsData();\n  }, []);\n\n  return { data, loading, error, refetch: fetchSessionsData };\n};\n"],"names":["logger","createLogger","useSessionsData","data","setData","useState","loading","setLoading","error","setError","fetchSessionsData","rows","fetchGoogleSheet","SPREADSHEET_IDS","sessionsData","row","capacity","parseNumericValue","checkedInCount","fillPercentage","useEffect"],"mappings":"0GAKA,MAAMA,EAASC,EAA8B,EAmChCC,EAAkB,IAAM,CACnC,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAwB,CAAA,CAAE,EAC5C,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAwB,IAAI,EAEhDK,EAAoB,SAAY,CACpC,GAAI,CACFH,EAAW,EAAI,EACfP,EAAO,KAAK,2BAA2B,EAEvC,MAAMW,EAAO,MAAMC,EAAiBC,EAAgB,SAAU,WAAY,CACxE,kBAAmB,iBAAA,CACpB,EAED,GAAIF,EAAK,OAAS,EAAG,CACnBP,EAAQ,CAAA,CAAE,EACV,MACF,CAEA,MAAMU,EAA8BH,EAAK,MAAM,CAAC,EAAE,IAAKI,GAAe,CACpE,MAAMC,EAAWC,EAAkBF,EAAI,CAAC,CAAC,EACnCG,EAAiBD,EAAkBF,EAAI,CAAC,CAAC,EACzCI,EAAiBH,EAAW,EAAKE,EAAiBF,EAAY,IAAM,EAE1E,MAAO,CACL,UAAWD,EAAI,CAAC,GAAK,GACrB,iBAAkBA,EAAI,CAAC,GAAK,GAC5B,gBAAiBA,EAAI,CAAC,GAAK,GAC3B,YAAaA,EAAI,CAAC,GAAK,GACvB,UAAWA,EAAI,CAAC,GAAK,GACrB,YAAaA,EAAI,CAAC,GAAK,GACvB,SAAAC,EACA,eAAAE,EACA,mBAAoBD,EAAkBF,EAAI,CAAC,CAAC,EAC5C,YAAaE,EAAkBF,EAAI,CAAC,CAAC,EACrC,mBAAoBE,EAAkBF,EAAI,EAAE,CAAC,EAC7C,SAAUA,EAAI,EAAE,GAAK,GACrB,KAAMA,EAAI,EAAE,GAAK,GACjB,UAAWA,EAAI,EAAE,GAAK,GACtB,KAAMA,EAAI,EAAE,GAAK,GACjB,UAAWE,EAAkBF,EAAI,EAAE,CAAC,EACpC,aAAcE,EAAkBF,EAAI,EAAE,CAAC,EACvC,UAAWA,EAAI,EAAE,GAAK,GACtB,UAAWA,EAAI,EAAE,GAAK,GACtB,0BAA2BE,EAAkBF,EAAI,EAAE,CAAC,EACpD,uBAAwBE,EAAkBF,EAAI,EAAE,CAAC,EACjD,0BAA2BE,EAAkBF,EAAI,EAAE,CAAC,EACpD,4BAA6BE,EAAkBF,EAAI,EAAE,CAAC,EACtD,UAAWA,EAAI,EAAE,GAAK,GACtB,aAAcA,EAAI,EAAE,GAAK,GACzB,QAASE,EAAkBF,EAAI,EAAE,CAAC,EAClC,eAAAI,EACA,QAASF,EAAkBF,EAAI,EAAE,CAAC,EAClC,SAAUA,EAAI,EAAE,GAAK,EAAA,CAEzB,CAAC,EAEDX,EAAQU,CAAY,EACpBL,EAAS,IAAI,CACf,MAAc,CAEZA,EAAS,8BAA8B,CACzC,QAAA,CACEF,EAAW,EAAK,CAClB,CACF,EAEAa,OAAAA,EAAAA,UAAU,IAAM,CACdV,EAAA,CACF,EAAG,CAAA,CAAE,EAEE,CAAE,KAAAP,EAAM,QAAAG,EAAS,MAAAE,EAAO,QAASE,CAAA,CAC1C"}