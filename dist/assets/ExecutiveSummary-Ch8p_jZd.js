import{r as $,e as qe,j as e,B as U,f as V,g as je,C as B,a as Me,b as We,X as Ee,c as G,h as de,m as rt,d as _e,p as ot,G as nt,H as lt}from"./index-Bm67KBkU.js";import{f as C,a as b,b as O,B as be,c as it}from"./index-DkD_C-d1.js";import{C as ct,a as dt,b as ut}from"./collapsible-bGJQ2Wb9.js";import{F as xt,C as ht,P as ze,a as $e,f as ie,b as Ie,c as Be}from"./select-CM-Birqk.js";import{u as pe}from"./useSalesData-Bl_2HqTc.js";import{u as Ne}from"./useSessionsData-CuS9CUZY.js";import{u as ye}from"./useNewClientData-Dl1VV2C_.js";import{u as we}from"./usePayrollData-DIt-ymzP.js";import{u as Ce}from"./useLeadsData-nt_JwR0P.js";import{u as Re}from"./useDiscountAnalysis-Vi7IK6Kl.js";import{u as Le}from"./useLateCancellationsData-CGb6iEHP.js";import{u as Fe}from"./useExpirationsData-CHlNy1D0.js";import{E as mt,a as pt}from"./useAdvancedExport-luHYyrc4.js";import{L as gt}from"./loader-circle-Bc3-I9bA.js";import{D as Qe,S as Ge,I as Ve}from"./SalesMotionHero-sGphstF2.js";import{C as Ze}from"./chevron-right-CbIMR3DA.js";import{C as X,T as ne}from"./googleAuth-BGo8ElRc.js";import{M as De,S as vt,P as bt,a as ft}from"./StudioLocationTabs-BSKYatd_.js";import{SourceDataModal as jt}from"./SourceDataModal-bAltj-zl.js";import{S as Nt,u as yt,P as Oe}from"./SalesAnimatedMetricCards-9SxqinUB.js";import{M as wt}from"./ModernDataTable-Qj0casC7.js";import{T as Ae}from"./trending-down-B5K1omnR.js";import{B as ae}from"./BrandSpinner-CGFi2e0U.js";import{S as Ct,a as Rt}from"./SessionsGroupedTable-xgFSi6NQ.js";import{A as ue}from"./activity-CeUP9h5f.js";import{C as Dt,a as St,u as kt}from"./ClientRetentionMonthByTypePivot-BWm8vzsu.js";import{U as Se}from"./users-7Ku-1TDB.js";import{A as He}from"./award-D0x2LQSI.js";import{T as ke}from"./target-BmxdxojS.js";import{U as Tt}from"./user-check-CLHYCjic.js";import{C as Te}from"./credit-card-yR0Iskrq.js";import{Z as Mt}from"./zap-IfyovFNW.js";import{C as Lt,D as Ue}from"./dollar-sign-CKqx8kbC.js";import{P as fe}from"./percent-BAS2Szsf.js";import{L as Ft,a as At}from"./LateCancellationsMonthOnMonthTable-ChB4z8WR.js";import{C as me}from"./clock-BP1BFskn.js";import{E as Pt,a as Et}from"./ExpirationDataTables-Dix9gqRP.js";import{C as Ye}from"./circle-alert-bpasmovd.js";import{U as Ke}from"./user-plus-B5fZWJk_.js";import{F as zt}from"./footer-BTvMjyAb.js";import{D as $t}from"./DashboardMotionHero-C2yuh4RF.js";import{A as It}from"./AdvancedExportButton-kiFhlv4f.js";import{F as Bt}from"./file-text-DChZNHsM.js";import"./index-BdQq_4o_.js";import"./useGoogleSheets-BPVLuLVa.js";import"./tabs-BTrhdLSC.js";import"./table-DhXofKdS.js";import"./designTokens-CW6vZXXA.js";import"./ModernTableWrapper-bhf1DsXx.js";import"./CopyTableButton-Blm2CDq4.js";import"./dropdown-menu-B9zQ9u84.js";import"./tableStyles-BJWvDwDQ.js";import"./package-C0br8ACw.js";import"./arrow-down-right-D7rC7EMG.js";import"./minus-BzN8XxOo.js";import"./star-qy423-d6.js";import"./arrow-up-narrow-wide-CQ9hbA7a.js";import"./arrow-up-down-DaenedAL.js";import"./circle-x-DIh1Phs9.js";import"./circle-check-big-y8tZauB3.js";import"./label-fD3fdNwH.js";import"./checkbox-ByePFv7I.js";const Gt=async i=>{const t=new mt({orientation:"portrait",unit:"mm",format:"a4"}),c=t.internal.pageSize.getWidth(),r=t.internal.pageSize.getHeight(),a=15,l=c-2*a;let o=a;const s={primary:[99,102,241],secondary:[139,92,246],accent:[236,72,153],dark:[30,41,59],light:[100,116,139]},x=d=>o+d>r-a-10?(t.addPage(),o=a,j(),!0):!1,j=()=>{const d=r-10;t.setFontSize(8),t.setTextColor(s.light[0],s.light[1],s.light[2]),t.text(`Generated: ${new Date().toLocaleDateString()} • ${i.location}`,a,d),t.text(`Page ${t.getNumberOfPages()}`,c-a-20,d)},p=(d,m)=>{t.setFillColor(m[0],m[1],m[2]),t.rect(a,o,l,9,"F"),t.setDrawColor(m[0],m[1],m[2]),t.setLineWidth(2),t.line(a,o,a,o+9),t.setFontSize(11),t.setFont("helvetica","bold"),t.setTextColor(s.dark[0],s.dark[1],s.dark[2]),t.text(d,a+4,o+6),o+=11},n=(d,m)=>{const q=(l-6)/4,M=18;d.forEach((W,J)=>{const _=J%4,re=Math.floor(J/4),Q=a+_*(q+2),Z=o+re*(M+2);t.setFillColor(m[0],m[1],m[2]),t.roundedRect(Q,Z,q,M,1.5,1.5,"F"),t.setDrawColor(m[0],m[1],m[2]),t.setLineWidth(.5),t.roundedRect(Q,Z,q,M,1.5,1.5,"S"),t.setFontSize(7),t.setFont("helvetica","normal"),t.setTextColor(80,84,97),t.text(W.label,Q+2,Z+4.5),t.setFontSize(9.5),t.setFont("helvetica","bold"),t.setTextColor(s.dark[0],s.dark[1],s.dark[2]);const ee=String(W.value);t.text(ee,Q+2,Z+13)});const Y=Math.ceil(d.length/4);o+=Y*(M+2)+4},v=(d,m,F)=>{x(60),pt(t,{startY:o,head:[d],body:m,theme:"grid",headStyles:{fillColor:F,textColor:[255,255,255],fontStyle:"bold",fontSize:8,halign:"center",cellPadding:2},bodyStyles:{fontSize:7.5,textColor:[s.dark[0],s.dark[1],s.dark[2]],cellPadding:1.5},alternateRowStyles:{fillColor:[248,250,252]},margin:{left:a,right:a},tableWidth:l,columnStyles:d.reduce((S,q,M)=>(S[M]={halign:M===0?"left":"center",cellPadding:1.5},S),{})}),o=(t.lastAutoTable?.finalY||o)+3};if(t.setFillColor(s.primary[0],s.primary[1],s.primary[2]),t.rect(0,0,c,80,"F"),t.setFillColor(s.secondary[0],s.secondary[1],s.secondary[2],40),t.rect(0,40,c,40,"F"),t.setTextColor(255,255,255),t.setFontSize(28),t.setFont("helvetica","bold"),t.text("Executive Performance Report",c/2,35,{align:"center"}),t.setFontSize(14),t.setFont("helvetica","normal"),t.text(i.location,c/2,50,{align:"center"}),t.setFontSize(11),t.text(i.dateRange,c/2,57,{align:"center"}),o=100,i.executiveSummary){t.setFillColor(245,247,250),t.roundedRect(a,o,l,35,3,3,"F"),t.setFontSize(10),t.setFont("helvetica","bold"),t.setTextColor(s.dark[0],s.dark[1],s.dark[2]),t.text("Executive Summary",a+4,o+6),t.setFontSize(9),t.setFont("helvetica","normal"),t.setTextColor(s.light[0],s.light[1],s.light[2]);const d=t.splitTextToSize(i.executiveSummary,l-8);t.text(d,a+4,o+12),o+=45}return t.addPage(),o=a,t.setFontSize(16),t.setFont("helvetica","bold"),t.setTextColor(s.dark[0],s.dark[1],s.dark[2]),t.text("Table of Contents",a,o),o+=12,t.setFontSize(10),t.setFont("helvetica","normal"),t.setTextColor(s.light[0],s.light[1],s.light[2]),i.sections.forEach((d,m)=>{o>r-a-10&&(t.addPage(),o=a),t.text(`${m+1}. ${d.title}`,a+5,o),o+=7}),i.sections.forEach(d=>{if(t.addPage(),o=a,j(),p(d.title,d.color),d.description){x(12),t.setFontSize(8),t.setFont("helvetica","normal"),t.setTextColor(100,116,139);const m=t.splitTextToSize(d.description,l);t.text(m,a,o),o+=m.length*3+2}d.metrics.length>0&&(x(35),n(d.metrics.map(m=>({label:m.label,value:m.value})),d.color)),d.tableData&&d.tableData.rows.length>0&&(x(50),t.setFontSize(9),t.setFont("helvetica","bold"),t.setTextColor(s.dark[0],s.dark[1],s.dark[2]),t.text(`${d.title} - Details`,a,o),o+=6,v(d.tableData.headers,d.tableData.rows,d.color))}),i.recommendations&&i.recommendations.length>0&&(t.addPage(),o=a,p("Strategic Recommendations",s.accent),t.setFontSize(9),t.setFont("helvetica","normal"),t.setTextColor(s.dark[0],s.dark[1],s.dark[2]),i.recommendations.forEach((d,m)=>{x(20),t.text(`${m+1}.`,a,o);const F=t.splitTextToSize(d,l-10);t.text(F,a+5,o),o+=F.length*4+6})),j(),t.output("blob")},Vt=async(i,t)=>{const c=await Gt(i),r=URL.createObjectURL(c),a=document.createElement("a");a.href=r,a.download=t||`Executive_Report_${new Date().getTime()}.pdf`,a.click(),URL.revokeObjectURL(r)},Ot=i=>{const{data:t}=pe(),{data:c}=Ne(),{data:r}=ye(),{data:a}=we(),{data:l}=Ce(),{data:o}=Re(),{data:s}=Le(),{data:x}=Fe(),j=$.useCallback(()=>{const n=t?.reduce((g,E)=>g+(E.paymentValue||0),0)||0,v=t?.length||0,d=v>0?n/v:0,m=c?.length||0,F=c?.reduce((g,E)=>g+(E.checkedInCount||0),0)||0,S=m>0?F/m:0,q=c?.reduce((g,E)=>g+(E.capacity||0),0)||0,M=q>0?F/q*100:0,Y=r?.length||0,W=r?.filter(g=>g.conversionStatus==="Converted").length||0,J=Y>0?W/Y*100:0,_=r?.filter(g=>g.retentionStatus==="Retained").length||0,re=Y>0?_/Y*100:0,Q=Y>0?r?.reduce((g,E)=>g+(E.ltv||0),0)||0/Y:0,Z=new Set((a||[]).map(g=>g.name||g.trainerName||"Unknown")).size||0,ee=(a||[]).reduce((g,E)=>g+(E.sessionsCount||E.numberOfClasses||0),0)||0,ge=(a||[]).reduce((g,E)=>g+(E.amount||0),0)||0,L=l?.length||0,R=l?.filter(g=>g.status==="converted").length||0,I=L>0?R/L*100:0,N=o?.reduce((g,E)=>g+(E.discountAmount||0),0)||0,ve=o?.length||0,u=v>0?ve/v*100:0,h=s?.length||0,k=m>0?h/m*100:0,A=x?.length||0,D=(x||[]).reduce((g,E)=>g+(E.packagePrice||E.orderAmount||0),0)||0,f=[{title:"Sales Overview",description:"Revenue generation, transaction volume, and average transaction value metrics.",color:[34,197,94],metrics:[{label:"Total Revenue",value:C(n)},{label:"Transactions",value:b(v)},{label:"Avg Transaction",value:C(d)},{label:"Unique Customers",value:b(new Set(t?.map(g=>g.customerId||g.clientId)).size)}],tableData:{headers:["Metric","Value","Status"],rows:[["Total Revenue",C(n),"Current"],["Transactions",b(v),"Current"],["Average Value",C(d),"Current"]]}},{title:"Sessions & Attendance",description:"Class scheduling, attendance rates, and capacity utilization metrics.",color:[59,130,246],metrics:[{label:"Total Sessions",value:b(m)},{label:"Avg Class Size",value:b(Math.round(S))},{label:"Fill Rate",value:O(M)},{label:"Total Attendance",value:b(F)}],tableData:{headers:["Metric","Value","Target"],rows:[["Total Sessions",b(m),"Baseline"],["Average Attendance",b(Math.round(S)),"Target: 15+"],["Fill Rate",O(M),"Target: 85%+"]]}},{title:"Client Acquisition & Retention",description:"New member onboarding, conversion, retention, and lifetime value analysis.",color:[168,85,247],metrics:[{label:"New Clients",value:b(Y)},{label:"Conversion Rate",value:O(J)},{label:"Retention Rate",value:O(re)},{label:"Avg LTV",value:C(Q)}],tableData:{headers:["Metric","Value","Performance"],rows:[["New Clients",b(Y),"Current"],["Conversion Rate",O(J),J>30?"✓ Good":"⚠ Monitor"],["Retention Rate",O(re),re>70?"✓ Good":"⚠ Monitor"],["Average LTV",C(Q),"Baseline"]]}},{title:"Trainer Performance",description:"Top trainer rankings, session counts, and revenue contribution.",color:[99,102,241],metrics:[{label:"Total Trainers",value:b(Z)},{label:"Total Sessions",value:b(ee)},{label:"Revenue Paid",value:C(ge)},{label:"Avg Per Trainer",value:C(ge/Math.max(Z,1))}],tableData:{headers:["Trainer","Sessions","Revenue","Avg/Session"],rows:(a||[]).slice(0,5).map(g=>[g.name||g.trainerName||"Unknown",b(g.sessionsCount||g.numberOfClasses||0),C(g.amount||0),C((g.amount||0)/Math.max(g.sessionsCount||g.numberOfClasses||1,1))])}},{title:"Lead Conversion Funnel",description:"Lead sources, conversion pipeline, and funnel analysis.",color:[236,72,153],metrics:[{label:"Total Leads",value:b(L)},{label:"Converted",value:b(R)},{label:"Conversion Rate",value:O(I)},{label:"Avg Response Time",value:"24h"}],tableData:{headers:["Source","Leads","Converted","Rate"],rows:[["Direct",b(Math.round(L*.3)),b(Math.round(R*.3)),O(I)],["Referral",b(Math.round(L*.4)),b(Math.round(R*.4)),O(I)],["Online",b(Math.round(L*.3)),b(Math.round(R*.3)),O(I)]]}},{title:"Discounts & Promotions",description:"Discount impact, promotion effectiveness, and revenue analysis.",color:[249,115,22],metrics:[{label:"Total Discounts",value:C(N)},{label:"Discount Count",value:b(ve)},{label:"Discount Rate",value:O(u)},{label:"Revenue Impact",value:O(N/n*100)}]},{title:"Late Cancellations",description:"Cancellation patterns, frequency, and recovery strategies.",color:[239,68,68],metrics:[{label:"Total Cancellations",value:b(h)},{label:"Cancellation Rate",value:O(k)},{label:"Revenue Impact",value:C(h*S*500||0)},{label:"Action Items",value:b(Math.ceil(h*.1))}]},{title:"Membership Expirations",description:"Upcoming expirations, retention opportunities, and renewal strategy.",color:[6,182,212],metrics:[{label:"Total Expirations",value:b(A)},{label:"Expiration Value",value:C(D)},{label:"Renewal Rate",value:O(70)},{label:"Priority Renewals",value:b(Math.ceil(A*.3))}]}],T=`This comprehensive executive performance report analyzes key business metrics across all operational areas for the selected period. The analysis reveals ${n>1e5?"strong":"moderate"} revenue generation with ${b(v)} transactions, alongside solid client acquisition and retention metrics. Session attendance shows a ${M.toFixed(1)}% fill rate, indicating ${M>80?"healthy":"room for improvement in"} capacity utilization. Strategic focus areas include optimizing trainer performance, improving lead conversion rates, and reducing late cancellations.`,le=[`Implement targeted promotions during low-attendance periods to improve the ${M.toFixed(1)}% fill rate toward the 85% target.`,"Focus on trainer retention and development initiatives, with emphasis on top performers and those with lower conversion metrics.",`Enhance lead nurturing processes to increase the current ${I.toFixed(1)}% conversion rate toward industry benchmarks of 35-40%.`,`Develop a proactive membership renewal strategy targeting the ${A} members with upcoming expirations.`,`Implement automated reminders and incentives to reduce late cancellations (currently ${k.toFixed(1)}% of sessions).`,"Analyze discount effectiveness and optimize promotion strategy to maximize revenue while maintaining profitability."];return{dateRange:i?.dateRange?`${i.dateRange.start} to ${i.dateRange.end}`:"Current Period",location:i?.location||"All Locations",sections:f,executiveSummary:T,recommendations:le}},[t,c,r,a,l,o,s,x]),p=$.useCallback(async()=>{const n=j();await Vt(n,`Executive_Report_${new Date().getTime()}.pdf`)},[j]);return{generateReportData:j,generateAndDownloadPDF:p,isLoading:!1}},Ht=({dateRange:i,location:t,className:c,variant:r="default",size:a="default",showLabel:l=!0})=>{const[o,s]=$.useState(!1),{toast:x}=qe(),{generateAndDownloadPDF:j}=Ot({dateRange:i,location:t}),p=async()=>{try{s(!0),await j(),x({title:"Success",description:"Executive report PDF has been generated and downloaded."})}catch{x({title:"Error",description:"Failed to generate PDF report. Please try again.",variant:"destructive"})}finally{s(!1)}};return e.jsx(U,{onClick:p,disabled:o,variant:r,size:a,className:V("gap-2 transition-all duration-200",o&&"opacity-75 cursor-not-allowed",c),children:o?e.jsxs(e.Fragment,{children:[e.jsx(gt,{className:"w-4 h-4 animate-spin"}),l&&e.jsx("span",{children:"Generating..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(Qe,{className:"w-4 h-4"}),l&&e.jsx("span",{children:"Download Executive Report"})]})})},Ut=({availableLocations:i})=>{const[t,c]=$.useState(!1),{filters:r,updateFilters:a,clearFilters:l}=je(),o=n=>{const v=Array.isArray(r.location)?r.location:[];if(n==="all")a({location:[]});else{const d=v.includes(n);a(d?{location:v.filter(m=>m!==n)}:{location:[n]})}},s=Array.isArray(r.location)?r.location[0]:r.location,x=r.location&&r.location.length>0||r.dateRange?.start||r.dateRange?.end,j=(n,v)=>{const d=v?v.toISOString().split("T")[0]:"";a({dateRange:{...r.dateRange,[n]:d}})},p=()=>{a({dateRange:{start:"",end:""}})};return e.jsx(B,{className:"bg-white/95 backdrop-blur-sm shadow-xl border-0",children:e.jsxs(ct,{open:t,onOpenChange:c,children:[e.jsx(dt,{asChild:!0,children:e.jsx(Me,{className:"cursor-pointer hover:bg-gray-50 transition-colors",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(We,{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-blue-600 to-purple-600 rounded-xl flex items-center justify-center",children:e.jsx(xt,{className:"w-5 h-5 text-white"})}),e.jsxs("div",{children:[e.jsx("span",{className:"text-xl font-bold text-gray-900",children:"Filters & Controls"}),e.jsx("p",{className:"text-sm text-gray-600 font-normal",children:r.dateRange?.start||r.dateRange?.end?`Custom date range${s?` • ${s}`:""}`:`Current month vs previous month${s?` • ${s}`:""}`})]}),x&&e.jsxs(be,{className:"bg-blue-100 text-blue-800 ml-2",children:[(r.location?.length||0)+(r.dateRange?.start||r.dateRange?.end?1:0)," filter",x?"s":""," active"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[x&&e.jsxs(U,{variant:"outline",size:"sm",onClick:n=>{n.stopPropagation(),l()},className:"text-gray-600 hover:text-red-600",children:[e.jsx(Ee,{className:"w-4 h-4 mr-1"}),"Clear"]}),e.jsx(Ht,{dateRange:r.dateRange?{start:r.dateRange.start,end:r.dateRange.end}:void 0,location:s,size:"sm",variant:"outline",showLabel:!1}),t?e.jsx(ht,{className:"w-5 h-5 text-gray-500"}):e.jsx(Ze,{className:"w-5 h-5 text-gray-500"})]})]})})}),e.jsx(ut,{children:e.jsxs(G,{className:"pt-0 space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Date Range Filter"}),(r.dateRange?.start||r.dateRange?.end)&&e.jsxs(U,{variant:"ghost",size:"sm",onClick:p,className:"text-gray-500 hover:text-red-600 ml-auto",children:[e.jsx(Ee,{className:"w-4 h-4 mr-1"}),"Clear Range"]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"font-medium text-sm text-gray-700 flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"Start Date"]}),r.dateRange?.start&&e.jsx(U,{variant:"ghost",size:"sm",onClick:()=>j("start",null),className:"h-6 px-2 text-xs",children:"Clear"})]}),e.jsxs(ze,{children:[e.jsx($e,{asChild:!0,children:e.jsxs(U,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),r.dateRange?.start?ie(new Date(r.dateRange.start),"PPP"):"Select start date"]})}),e.jsx(Ie,{className:"w-auto p-0",align:"start",children:e.jsx(Be,{mode:"single",selected:r.dateRange?.start?new Date(r.dateRange.start):void 0,onSelect:n=>j("start",n||null),disabled:n=>r.dateRange?.end?n>new Date(r.dateRange.end):!1,initialFocus:!0})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Filter data from this date"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"font-medium text-sm text-gray-700 flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),"End Date"]}),r.dateRange?.end&&e.jsx(U,{variant:"ghost",size:"sm",onClick:()=>j("end",null),className:"h-6 px-2 text-xs",children:"Clear"})]}),e.jsxs(ze,{children:[e.jsx($e,{asChild:!0,children:e.jsxs(U,{variant:"outline",className:"w-full justify-start text-left font-normal",children:[e.jsx(X,{className:"mr-2 h-4 w-4"}),r.dateRange?.end?ie(new Date(r.dateRange.end),"PPP"):"Select end date"]})}),e.jsx(Ie,{className:"w-auto p-0",align:"start",children:e.jsx(Be,{mode:"single",selected:r.dateRange?.end?new Date(r.dateRange.end):void 0,onSelect:n=>j("end",n||null),disabled:n=>r.dateRange?.start?n<new Date(r.dateRange.start):!1,initialFocus:!0})})]}),e.jsx("p",{className:"text-xs text-gray-500",children:"Filter data up to this date"})]})]}),!(r.dateRange?.start||r.dateRange?.end)&&e.jsx("div",{className:"p-3 bg-blue-50 rounded-lg border border-blue-200",children:e.jsxs("p",{className:"text-sm text-blue-700",children:[e.jsx("strong",{children:"Default:"})," Showing current month vs previous month comparison"]})}),(r.dateRange?.start||r.dateRange?.end)&&e.jsx("div",{className:"p-3 bg-green-50 rounded-lg border border-green-200",children:e.jsxs("p",{className:"text-sm text-green-700",children:[e.jsx("strong",{children:"Custom Range:"})," "," ",r.dateRange.start&&ie(new Date(r.dateRange.start),"MMM d, yyyy"),r.dateRange.start&&r.dateRange.end&&" to ",r.dateRange.end&&ie(new Date(r.dateRange.end),"MMM d, yyyy")]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-5 h-5 text-gray-600"}),e.jsx("h3",{className:"font-semibold text-gray-900",children:"Location Filter"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsxs(U,{variant:s?"outline":"default",size:"sm",onClick:()=>o("all"),className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),"All Locations"]}),i.map(n=>e.jsxs(U,{variant:s===n?"default":"outline",size:"sm",onClick:()=>o(n),className:"flex items-center gap-2",children:[n,s===n&&e.jsx(be,{className:"bg-white/20 text-current ml-1",children:"Active"})]},n))]})]}),x&&e.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg",children:[e.jsx("h4",{className:"font-medium text-gray-900 mb-2",children:"Active Filters Summary"}),e.jsxs("div",{className:"space-y-2 text-sm text-gray-700",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(De,{className:"w-4 h-4"}),e.jsxs("span",{children:["Location: ",s||"All"]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{className:"w-4 h-4"}),e.jsxs("span",{children:["Period: ",r.dateRange?.start||r.dateRange?.end?"Custom date range":"Current month vs Previous month"]})]}),(r.dateRange?.start||r.dateRange?.end)&&e.jsx("div",{className:"flex items-center gap-2 ml-6",children:e.jsxs("span",{className:"text-xs text-gray-500",children:[r.dateRange.start&&ie(new Date(r.dateRange.start),"MMM d, yyyy"),r.dateRange.start&&r.dateRange.end&&" to ",r.dateRange.end&&ie(new Date(r.dateRange.end),"MMM d, yyyy")]})})]})]})]})})]})})},Yt={emerald:"border-l-emerald-500",blue:"border-l-blue-500",purple:"border-l-purple-500",rose:"border-l-rose-500",amber:"border-l-amber-500",sky:"border-l-sky-500",indigo:"border-l-indigo-500",pink:"border-l-pink-500"},Kt={emerald:"bg-emerald-500/15 text-emerald-700",blue:"bg-blue-500/15 text-blue-700",purple:"bg-purple-500/15 text-purple-700",rose:"bg-rose-500/15 text-rose-700",amber:"bg-amber-500/15 text-amber-700",sky:"bg-sky-500/15 text-sky-700",indigo:"bg-indigo-500/15 text-indigo-700",pink:"bg-pink-500/15 text-pink-700"},qt={emerald:"from-emerald-50 to-emerald-100/50",blue:"from-blue-50 to-blue-100/50",purple:"from-purple-50 to-purple-100/50",rose:"from-rose-50 to-rose-100/50",amber:"from-amber-50 to-amber-100/50",sky:"from-sky-50 to-sky-100/50",indigo:"from-indigo-50 to-indigo-100/50",pink:"from-pink-50 to-pink-100/50"},H=({title:i,icon:t,description:c,children:r,className:a,headerClassName:l,contentClassName:o,borderColor:s="emerald",collapsible:x=!1,defaultCollapsed:j=!1})=>{const[p,n]=de.useState(j);return e.jsxs(B,{className:V("group relative overflow-hidden transition-all duration-300","bg-white hover:shadow-md shadow-sm","rounded-lg border-l-4",Yt[s],a),children:[e.jsx("div",{className:V("absolute inset-0 opacity-[0.015] group-hover:opacity-[0.025] pointer-events-none",`bg-gradient-to-br ${qt[s]}`)}),e.jsxs(Me,{className:V("pb-3 pt-4 px-5 border-b border-slate-100/60 flex items-center justify-between","group-hover:bg-slate-50/30 transition-colors",l),children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("div",{className:V("p-2 rounded-lg",Kt[s]),children:e.jsx(t,{size:18})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx(We,{className:"text-base font-semibold text-slate-900 truncate",children:i}),c&&e.jsx("p",{className:"text-xs text-slate-500 mt-0.5 line-clamp-1",children:c})]})]}),x&&e.jsx(U,{variant:"ghost",size:"sm",onClick:()=>n(!p),className:"h-8 w-8 p-0 ml-2 flex-shrink-0",children:e.jsx(Ze,{size:16,className:V("transition-transform duration-300",p&&"rotate-180")})})]}),!p&&e.jsx(G,{className:V("pt-4 px-5 pb-4",o),children:r})]})},Wt=({data:i,loading:t=!1,title:c,onRowClick:r,showFooter:a=!1,footerData:l,maxHeight:o="500px",className:s})=>{const x=(p,n)=>{if(!n||n===0)return null;const v=(p-n)/n*100,d=v>0;return e.jsxs("div",{className:V("group relative inline-flex items-center gap-1 px-2 py-1 rounded-full text-xs font-medium transition-all duration-200",d?"bg-emerald-50 text-emerald-700 hover:bg-emerald-100":"bg-red-50 text-red-700 hover:bg-red-100"),children:[d?e.jsx(ne,{className:"w-3 h-3"}):e.jsx(Ae,{className:"w-3 h-3"}),e.jsxs("span",{children:[Math.abs(v).toFixed(1),"%"]}),e.jsxs("div",{className:"absolute bottom-full left-1/2 transform -translate-x-1/2 mb-2 px-3 py-2 bg-gray-900 text-white text-xs rounded-lg opacity-0 group-hover:opacity-100 transition-opacity duration-200 whitespace-nowrap z-50",children:[e.jsx("div",{className:"font-medium",children:"Growth Details"}),e.jsxs("div",{children:["Previous: ",C(n)]}),e.jsxs("div",{children:["Current: ",C(p)]}),e.jsxs("div",{className:d?"text-emerald-300":"text-red-300",children:[d?"↗":"↘"," ",v.toFixed(1),"%"]}),e.jsx("div",{className:"absolute top-full left-1/2 transform -translate-x-1/2 border-4 border-transparent border-t-gray-900"})]})]})},j=[{key:"name",header:"Item",render:(p,n)=>e.jsx("div",{className:"flex items-center justify-between w-full",children:e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-slate-800",children:p}),n.category&&e.jsx("span",{className:"text-xs text-slate-500",children:n.category})]})}),align:"left",sortable:!0},{key:"revenue",header:"Revenue",render:(p,n)=>e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"font-mono font-semibold",children:C(p)}),n.previousRevenue&&x(p,n.previousRevenue)]}),align:"center",sortable:!0},{key:"transactions",header:"Transactions",render:(p,n)=>e.jsxs("div",{className:"flex flex-col items-center gap-1",children:[e.jsx("span",{className:"font-mono",children:b(p)}),n.previousTransactions&&x(p,n.previousTransactions)]}),align:"center",sortable:!0},{key:"discountAmount",header:"Discount",render:p=>e.jsx("span",{className:"font-mono text-red-600",children:it(p)}),align:"center",sortable:!0},{key:"atv",header:"ATV",render:p=>e.jsx("span",{className:"font-mono",children:C(p)}),align:"center",sortable:!0}];return e.jsxs("div",{className:"space-y-4",children:[c&&e.jsx("h3",{className:"text-lg font-semibold text-slate-800",children:c}),e.jsx(wt,{data:i,columns:j,loading:t,stickyHeader:!0,showFooter:a,footerData:l,maxHeight:o,className:s,headerGradient:"from-slate-700 to-slate-900",onRowClick:r})]})},_t=({locationId:i,onMetricClick:t})=>{const{filters:c}=je(),{data:r,loading:a}=pe(),{data:l}=pe(),o=$.useMemo(()=>!r||r.length===0?[]:r.slice(0,8).map((s,x)=>({...s,name:s.name||s.product||`Item ${x+1}`,revenue:s.paymentValue||0,transactions:1,discountAmount:s.paymentDiscount||0,atv:s.paymentValue||0,category:s.product||s.productCategory||"General",previousRevenue:0,previousTransactions:0})),[r]);return a?e.jsx(H,{title:"Sales Overview",icon:Ge,borderColor:"emerald",description:"Revenue, transactions, and ATV metrics",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ae,{})})}):e.jsxs(H,{title:"Sales Overview",icon:Ge,borderColor:"emerald",description:"Revenue, transactions, and ATV metrics",contentClassName:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Key Metrics"}),e.jsx(Nt,{data:r,historicalData:l,dateRange:c.dateRange,onMetricClick:t,locationId:i})]}),o.length>0&&e.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Top Products & Categories"}),e.jsx(Wt,{data:o,loading:a,title:"",maxHeight:"400px",showFooter:!0,footerData:{name:"TOTAL",revenue:o.reduce((s,x)=>s+x.revenue,0),transactions:o.reduce((s,x)=>s+x.transactions,0),discountAmount:o.reduce((s,x)=>s+x.discountAmount,0),atv:o.reduce((s,x)=>s+x.atv,0)/o.length}})]})]})},Qt=({onMetricClick:i})=>{const{data:t,loading:c}=Ne();return c?e.jsx(H,{title:"Sessions Overview",icon:ue,borderColor:"blue",description:"Total sessions, fill rates, and attendance metrics",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ae,{})})}):e.jsxs(H,{title:"Sessions Overview",icon:ue,borderColor:"blue",description:"Total sessions, fill rates, and attendance metrics",contentClassName:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Key Metrics"}),e.jsx(Ct,{data:t})]}),t&&t.length>0&&e.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Class Schedule & Attendance"}),e.jsx(Rt,{data:t})]})]})},Zt=({onMetricClick:i})=>{const{data:t,loading:c}=ye();return c?e.jsx(H,{title:"Client Acquisition & Retention",icon:Se,borderColor:"purple",description:"New clients, retention rates, and LTV metrics",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ae,{})})}):e.jsxs(H,{title:"Client Acquisition & Retention",icon:Se,borderColor:"purple",description:"New clients, retention rates, and LTV metrics",contentClassName:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Key Metrics"}),e.jsx(Dt,{data:t})]}),t&&t.length>0&&e.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Retention by Client Type"}),e.jsx(St,{data:t})]})]})},Xt=({onMetricClick:i})=>{const{data:t,isLoading:c}=we(),r=de.useMemo(()=>!t||t.length===0?[]:t.slice(0,5).map((a,l)=>({name:a.name||a.trainerName||`Trainer ${l+1}`,sessionsCount:a.sessionsCount||a.numberOfClasses||0,totalPaid:a.amount||a.totalPaid||0,attendees:a.totalAttendees||0,avgPerSession:(a.amount||0)/(a.sessionsCount||1),rating:a.rating||4+Math.random()})),[t]);return c?e.jsx(H,{title:"Top Trainers",icon:He,borderColor:"indigo",description:"Trainer performance and payroll metrics",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ae,{})})}):e.jsxs(H,{title:"Top Trainers",icon:He,borderColor:"indigo",description:"Trainer performance and payroll metrics",contentClassName:"space-y-4",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:r.map((a,l)=>e.jsx(B,{className:V("group relative overflow-hidden cursor-pointer transition-all duration-300","border-t-2 bg-white hover:bg-gradient-to-br hover:from-indigo-900 hover:to-purple-900","hover:shadow-lg hover:scale-[1.02]","border-indigo-500"),children:e.jsxs(G,{className:"p-4 relative space-y-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold text-slate-900 group-hover:text-white transition-colors line-clamp-1",children:a.name}),a.rating&&e.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[e.jsx("span",{className:"text-xs text-yellow-500 font-semibold",children:"★"}),e.jsx("span",{className:"text-xs text-slate-600 group-hover:text-slate-300 transition-colors",children:a.rating.toFixed(1)})]})]}),e.jsxs("div",{className:"space-y-2 pt-2 border-t border-slate-100 group-hover:border-slate-600",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 group-hover:text-slate-300",children:"Sessions"}),e.jsx("span",{className:"text-sm font-bold text-slate-900 group-hover:text-white",children:a.sessionsCount})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 group-hover:text-slate-300",children:"Revenue"}),e.jsx("span",{className:"text-sm font-bold text-slate-900 group-hover:text-white",children:C(a.totalPaid)})]}),e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-xs text-slate-600 group-hover:text-slate-300",children:"Avg/Session"}),e.jsx("span",{className:"text-sm font-bold text-slate-900 group-hover:text-white",children:C(a.avgPerSession)})]})]})]})},`${a.name}-${l}`))}),r.length===0&&e.jsx("div",{className:"text-center py-8 text-slate-500",children:"No trainer data available"})]})},Jt=({data:i})=>{const t=i.length,c=i.filter(n=>n.conversionStatus==="Converted").length,r=i.filter(n=>n.stage==="Trial Completed").length,a=i.reduce((n,v)=>n+(v.ltv||0),0),l=i.reduce((n,v)=>n+(v.visits||0),0),o=t>0?a/t:0,s=t>0?c/t*100:0,x=t>0?r/t*100:0,j=t>0?l/t:0,p=[{title:"Total Leads",value:b(t),change:"+12.5%",changeType:"positive",description:"Total leads in pipeline",icon:Se,gradient:"from-blue-500 to-blue-600",bgGradient:"from-blue-50 to-blue-100"},{title:"Conversion Rate",value:`${s.toFixed(1)}%`,change:"+8.2%",changeType:"positive",description:"Lead to customer conversion",icon:ke,gradient:"from-green-500 to-green-600",bgGradient:"from-green-50 to-green-100"},{title:"Trial Conversion",value:`${x.toFixed(1)}%`,change:"+15.3%",changeType:"positive",description:"Lead to trial conversion",icon:Tt,gradient:"from-purple-500 to-purple-600",bgGradient:"from-purple-50 to-purple-100"},{title:"Average LTV",value:C(o),change:"+7.4%",changeType:"positive",description:"Customer lifetime value",icon:Te,gradient:"from-amber-500 to-orange-500",bgGradient:"from-amber-50 to-orange-100"},{title:"Total Revenue",value:C(a),change:"+22.1%",changeType:"positive",description:"Total pipeline value",icon:ne,gradient:"from-emerald-500 to-teal-600",bgGradient:"from-emerald-50 to-teal-100"},{title:"Converted Leads",value:b(c),change:"+18.7%",changeType:"positive",description:"Successfully converted leads",icon:Mt,gradient:"from-indigo-500 to-indigo-600",bgGradient:"from-indigo-50 to-indigo-100"},{title:"Avg Visits/Lead",value:j.toFixed(1),change:"+5.2%",changeType:"positive",description:"Average visits per lead",icon:ue,gradient:"from-pink-500 to-rose-500",bgGradient:"from-pink-50 to-rose-100"},{title:"Pipeline Health",value:`${((c+r)/t*100).toFixed(1)}%`,change:"+9.8%",changeType:"positive",description:"Active + converted leads",icon:Lt,gradient:"from-cyan-500 to-blue-500",bgGradient:"from-cyan-50 to-blue-100"}];return e.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map((n,v)=>e.jsx(rt.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:v*.1,duration:.5},children:e.jsxs(B,{className:"relative overflow-hidden bg-white shadow-lg hover:shadow-xl transition-all duration-300 border-0 rounded-2xl group hover:scale-105",children:[e.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${n.bgGradient} opacity-50`}),e.jsx(Me,{className:"relative pb-2",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:`p-3 rounded-xl bg-gradient-to-r ${n.gradient} shadow-lg`,children:e.jsx(n.icon,{className:"w-6 h-6 text-white"})}),e.jsx(be,{variant:"secondary",className:`${n.changeType==="positive"?"bg-green-100 text-green-700 border-green-200":"bg-red-100 text-red-700 border-red-200"} font-semibold`,children:n.change})]})}),e.jsx(G,{className:"relative pt-0",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:n.title}),e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.value}),e.jsx("p",{className:"text-sm text-gray-500",children:n.description})]})})]})},n.title))})},es=({onMetricClick:i})=>{const{data:t,loading:c}=Ce(),r=$.useMemo(()=>{if(!t||t.length===0)return null;const a=new Map;return t.forEach(l=>{const o=l.source||l.leadSource||"Direct";a.has(o)||a.set(o,{count:0,converted:0,contacted:0});const s=a.get(o);s.count+=1,(l.status==="converted"||l.conversionStatus==="Converted")&&(s.converted+=1),(l.contacted===!0||l.isContacted===!0)&&(s.contacted+=1)}),Array.from(a.entries()).map(([l,o])=>({source:l,...o,conversionRate:o.converted/o.count*100,contactRate:o.contacted/o.count*100}))},[t]);return c?e.jsx(H,{title:"Lead Conversion & Funnel",icon:ne,borderColor:"pink",description:"Conversion rates, lead sources, and funnel analytics",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ae,{})})}):e.jsxs(H,{title:"Lead Conversion & Funnel",icon:ne,borderColor:"pink",description:"Conversion rates, lead sources, and funnel analytics",contentClassName:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Key Metrics"}),e.jsx(Jt,{data:t})]}),r&&r.length>0&&e.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Leads by Source"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-pink-700 to-pink-900 text-white",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Source"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Total Leads"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Contacted"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Converted"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Conv. Rate"})]})}),e.jsx("tbody",{children:r.map(a=>e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:a.source}),e.jsx("td",{className:"px-4 py-3 text-center text-slate-700",children:b(a.count)}),e.jsx("td",{className:"px-4 py-3 text-center text-slate-700",children:b(a.contacted)}),e.jsx("td",{className:"px-4 py-3 text-center",children:e.jsx(be,{className:a.converted>0?"bg-emerald-100 text-emerald-700":"bg-slate-100 text-slate-600",children:b(a.converted)})}),e.jsx("td",{className:"px-4 py-3 text-center font-semibold",children:e.jsx("span",{className:a.conversionRate>30?"text-emerald-600":"text-amber-600",children:O(a.conversionRate)})})]},a.source))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-slate-800 text-white font-bold",children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-center",children:b(t?.length||0)}),e.jsx("td",{className:"px-4 py-3 text-center",children:b(r.reduce((a,l)=>a+l.contacted,0))}),e.jsx("td",{className:"px-4 py-3 text-center",children:b(r.reduce((a,l)=>a+l.converted,0))}),e.jsx("td",{className:"px-4 py-3 text-center",children:t&&t.length>0?O(r.reduce((a,l)=>a+l.converted,0)/t.length*100):"0%"})]})})]})})]})]})},ts=({onMetricClick:i})=>{const{data:t,loading:c}=Re(),r=$.useMemo(()=>{if(!t||t.length===0)return{totalDiscounts:0,avgDiscount:0,maxDiscount:0,minDiscount:0,discountCount:0};const l=t.map(x=>x.discountAmount||0),o=l.reduce((x,j)=>x+j,0),s=t.length;return{totalDiscounts:o,avgDiscount:s>0?o/s:0,maxDiscount:Math.max(...l),minDiscount:Math.min(...l),discountCount:s}},[t]),a=$.useMemo(()=>{if(!t||t.length===0)return[];const l=new Map;return t.forEach(o=>{const s=o.category||o.discountType||"General";l.has(s)||l.set(s,{count:0,total:0});const x=l.get(s);x.count+=1,x.total+=o.discountAmount||0}),Array.from(l.entries()).map(([o,s])=>({category:o,count:s.count,total:s.total,avg:s.total/s.count})).sort((o,s)=>s.total-o.total)},[t]);return c?e.jsx(H,{title:"Discounts & Promotions",icon:fe,borderColor:"amber",description:"Discount trends, impact analysis, and ROI",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ae,{})})}):e.jsxs(H,{title:"Discounts & Promotions",icon:fe,borderColor:"amber",description:"Discount trends, impact analysis, and ROI",contentClassName:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Key Metrics"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(B,{className:"bg-gradient-to-br from-amber-50 to-amber-100/50 border-amber-200",children:e.jsx(G,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-amber-700 uppercase",children:"Total Discounts"}),e.jsx("p",{className:"text-2xl font-bold text-amber-900",children:C(r.totalDiscounts)}),e.jsx("p",{className:"text-xs text-amber-600",children:"Revenue reduced"})]})})}),e.jsx(B,{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 border-blue-200",children:e.jsx(G,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-blue-700 uppercase",children:"Discount Count"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:r.discountCount}),e.jsx("p",{className:"text-xs text-blue-600",children:"Transactions"})]})})}),e.jsx(B,{className:"bg-gradient-to-br from-emerald-50 to-emerald-100/50 border-emerald-200",children:e.jsx(G,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-emerald-700 uppercase",children:"Avg Discount"}),e.jsx("p",{className:"text-2xl font-bold text-emerald-900",children:C(r.avgDiscount)}),e.jsx("p",{className:"text-xs text-emerald-600",children:"Per transaction"})]})})}),e.jsx(B,{className:"bg-gradient-to-br from-rose-50 to-rose-100/50 border-rose-200",children:e.jsx(G,{className:"pt-6",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-xs font-semibold text-rose-700 uppercase",children:"Max Discount"}),e.jsx("p",{className:"text-2xl font-bold text-rose-900",children:C(r.maxDiscount)}),e.jsx("p",{className:"text-xs text-rose-600",children:"Highest value"})]})})})]})]}),a.length>0&&e.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Discounts by Category"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gradient-to-r from-amber-700 to-amber-900 text-white",children:[e.jsx("th",{className:"px-4 py-3 text-left text-sm font-semibold",children:"Category"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Count"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Total Discount"}),e.jsx("th",{className:"px-4 py-3 text-center text-sm font-semibold",children:"Avg Discount"})]})}),e.jsx("tbody",{children:a.map(l=>e.jsxs("tr",{className:"border-b border-slate-100 hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"px-4 py-3 font-medium text-slate-800",children:l.category}),e.jsx("td",{className:"px-4 py-3 text-center text-slate-700",children:l.count}),e.jsx("td",{className:"px-4 py-3 text-center font-semibold text-amber-700",children:C(l.total)}),e.jsx("td",{className:"px-4 py-3 text-center text-slate-700",children:C(l.avg)})]},l.category))}),e.jsx("tfoot",{children:e.jsxs("tr",{className:"bg-slate-800 text-white font-bold",children:[e.jsx("td",{className:"px-4 py-3",children:"TOTAL"}),e.jsx("td",{className:"px-4 py-3 text-center",children:a.reduce((l,o)=>l+o.count,0)}),e.jsx("td",{className:"px-4 py-3 text-center",children:C(a.reduce((l,o)=>l+o.total,0))}),e.jsx("td",{className:"px-4 py-3 text-center",children:C(a.reduce((l,o)=>l+o.avg,0)/a.length)})]})})]})})]})]})},ss=({onMetricClick:i})=>{const{data:t,loading:c}=Le();return c?e.jsx(H,{title:"Late Cancellations",icon:me,borderColor:"rose",description:"Cancellation trends, patterns, and recovery opportunities",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ae,{})})}):e.jsxs(H,{title:"Late Cancellations",icon:me,borderColor:"rose",description:"Cancellation trends, patterns, and recovery opportunities",contentClassName:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Key Metrics"}),e.jsx(Ft,{data:t})]}),t&&t.length>0&&e.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Cancellations by Time Period"}),e.jsx(At,{data:t})]})]})},as=({onMetricClick:i})=>{const{data:t,loading:c}=Fe();return c?e.jsx(H,{title:"Membership Expirations",icon:Ye,borderColor:"sky",description:"Upcoming expirations and retention opportunities",children:e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsx(ae,{})})}):e.jsxs(H,{title:"Membership Expirations",icon:Ye,borderColor:"sky",description:"Upcoming expirations and retention opportunities",contentClassName:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Key Metrics"}),e.jsx(Pt,{data:t})]}),t&&t.length>0&&e.jsxs("div",{className:"pt-4 border-t border-slate-100",children:[e.jsx("h4",{className:"text-sm font-semibold text-slate-700 mb-4",children:"Expiration Details"}),e.jsx(Et,{data:t})]})]})},ce=(i,t)=>i==null?{icon:ne,text:"Stable",color:"text-gray-600"}:i>0?{icon:ne,text:t==="strong"?"Strong Growth":i>10?"High Growth":"Growing",color:"text-green-600 group-hover:text-green-400"}:i<0?{icon:Ae,text:Math.abs(i)>10?"Declining":"Slight Decline",color:"text-red-600 group-hover:text-red-400"}:{icon:ne,text:"Stable",color:"text-gray-600 group-hover:text-gray-400"},Xe=de.memo(()=>{const[i,t]=$.useState(!1),[c,r]=$.useState(!1),[a,l]=$.useState(!1),o=$.useRef(null),{filters:s,updateFilters:x}=je(),{setLoading:j}=_e();qe();const{data:p,loading:n}=pe(),{data:v,loading:d}=Ne(),{data:m,isLoading:F}=we(),{data:S,loading:q}=ye(),{data:M,loading:Y}=Ce(),{data:W,loading:J}=Re(),{data:_,loading:re}=Le(),{data:Q,loading:Z}=Fe(),ee=n||d||F||q||Y||J||re||Z;$.useEffect(()=>{j(ee,"Loading executive dashboard overview...")},[ee,j]),$.useEffect(()=>{try{x({dateRange:{start:"2025-11-01",end:"2025-11-30"}})}catch{}},[]);const ge=$.useMemo(()=>{const u=new Set;return p?.forEach(h=>{h.calculatedLocation&&u.add(h.calculatedLocation)}),v?.forEach(h=>{h.location&&u.add(h.location)}),S?.forEach(h=>{h.homeLocation&&u.add(h.homeLocation)}),m?.forEach(h=>{h.location&&u.add(h.location)}),Array.from(u).sort()},[p,v,S,m]),L=$.useMemo(()=>{const u=s.dateRange?.start?new Date(s.dateRange.start):null,h=s.dateRange?.end?(()=>{const w=new Date(s.dateRange.end);return w.setHours(23,59,59,999),w})():null,k=w=>{if(!w)return!1;const z=ot(w);return!(!z||u&&z<u||h&&z>h)},A=w=>{if(!w)return null;const z=String(w).toLowerCase();return["all","all locations"].includes(z)?"all":z.includes("kwality")||z.includes("kemps")?"kwality":z.includes("supreme")||z.includes("bandra")?"supreme":z.includes("kenkere")||z.includes("bengaluru")||z.includes("bangalore")?"kenkere":z==="kwality"||z==="supreme"||z==="kenkere"?z:null},D=(w,z)=>{if(!s.location||Array.isArray(s.location)&&s.location.length===0)return w;const st=Array.isArray(s.location)?s.location[0]:s.location,te=A(st);return!te||te==="all"?w:w.filter(at=>{const he=at?.[z];if(!he)return!1;const se=String(he).toLowerCase();if(z==="calculatedLocation"){if(te==="kwality")return String(he)==="Kwality House, Kemps Corner";if(te==="supreme")return String(he)==="Supreme HQ, Bandra";if(te==="kenkere")return se.includes("kenkere")||String(he)==="Kenkere House"}return te==="kwality"?se.includes("kwality")||se.includes("kemps"):te==="supreme"?se.includes("supreme")||se.includes("bandra"):te==="kenkere"?se.includes("kenkere")||se.includes("bengaluru")||se.includes("bangalore"):!1})},f=D(p||[],"calculatedLocation"),T=f.filter(w=>k(w.paymentDate)),g=D(v||[],"location").filter(w=>k(w.date)),xe=D(m||[],"location").filter(w=>k(w.monthYear||"")),P=D(S||[],"homeLocation"),y=P.filter(w=>k(w.firstVisitDate)),oe=D(M||[],"center").filter(w=>w.createdAt?k(w.createdAt):!1),Je=D(W||[],"location").filter(w=>k(w.paymentDate)),et=D(_||[],"location").filter(w=>{const z=w.dateIST||"";return typeof z=="string"&&k(z)}),tt=D(Q||[],"homeLocation").filter(w=>k(w.endDate||w.orderAt));return{sales:T,salesHistoricalBase:f,sessions:g,payroll:xe,newClients:y,newClientsHistoricalBase:P,leads:oe,discounts:Je,lateCancellations:et,expirations:tt}},[p,v,m,S,M,W,_,Q,s.location,s.dateRange]),R=yt(L?.sales||[],L?.salesHistoricalBase||p||[],{compareMode:"previousMonth",dateRange:s.dateRange?.start||s.dateRange?.end?{start:s.dateRange?.start,end:s.dateRange?.end}:void 0}),I=kt(L?.newClients||[],L?.newClientsHistoricalBase||S||[],{dateRange:{start:s.dateRange?.start,end:s.dateRange?.end}}),N=$.useMemo(()=>{const u=L?.sales||[],h=L?.sessions||[],k=L?.newClients||[],A=L?.lateCancellations||[],D=L?.discounts||[];return{totalRevenue:u.reduce((f,T)=>f+((T.paymentValue||0)-(T.paymentVAT||0)),0),totalTransactions:new Set(u.map(f=>f.paymentTransactionId||f.paymentTransactionID).filter(Boolean)).size,totalSessions:h.length,totalVisits:h.reduce((f,T)=>f+(T.checkedInCount||0),0),avgAttendance:h.length>0?h.reduce((f,T)=>f+(T.checkedInCount||0),0)/h.length:0,totalCapacity:h.reduce((f,T)=>f+(T.capacity||0),0),fillRate:h.reduce((f,T)=>f+(T.capacity||0),0)>0?h.reduce((f,T)=>f+(T.checkedInCount||0),0)/h.reduce((f,T)=>f+(T.capacity||0),0)*100:0,lateCancellations:A.length,cancellationRate:h.length>0?A.length/h.length*100:0,newClients:k.length,conversionRate:k.length>0?k.filter(f=>f.conversionStatus==="Converted").length/k.length*100:0,retentionRate:k.length>0?k.filter(f=>f.retentionStatus==="Retained").length/k.length*100:0,avgLTV:k.length>0?k.reduce((f,T)=>f+(T.ltv||0),0)/k.length:0,totalDiscounts:D.reduce((f,T)=>f+(T.discountAmount||0),0),discountRate:u.length>0?D.length/u.length*100:0}},[L]);if($.useMemo(()=>{const u=new Date,h=new Date(u.getFullYear(),u.getMonth()-1,1),k=new Date(u.getFullYear(),u.getMonth(),0),A=y=>{if(!y)return!1;const K=new Date(y);return K>=h&&K<=k},D=(y,K)=>{if(!s.location||Array.isArray(s.location)&&s.location.length===0)return y;const oe=Array.isArray(s.location)?s.location[0]:s.location;return!oe||["all","all locations"].includes(String(oe).toLowerCase())?y:y.filter(Pe=>Pe[K]===oe)},f=D(p?.filter(y=>A(y.paymentDate))||[],"calculatedLocation"),T=D(v?.filter(y=>A(y.date))||[],"location"),le=D(m?.filter(y=>A(y.monthYear||""))||[],"location"),g=D(S?.filter(y=>A(y.firstVisitDate))||[],"homeLocation"),E=D(M?.filter(y=>A(y.createdAt||""))||[],"center"),xe=D(W?.filter(y=>A(y.paymentDate))||[],"location"),P=D(_?.filter(y=>{const K=y.dateIST||"";return typeof K=="string"&&A(K)})||[],"location");return{sales:f,sessions:T,payroll:le,newClients:g,leads:E,discounts:xe,lateCancellations:P}},[p,v,m,S,M,W,_,s.location]),$.useMemo(()=>{const u=new Date,h=new Date(u.getFullYear()-1,u.getMonth(),1),k=new Date(u.getFullYear()-1,u.getMonth()+1,0),A=P=>{if(!P)return!1;const y=new Date(P);return y>=h&&y<=k},D=(P,y)=>{if(!s.location||Array.isArray(s.location)&&s.location.length===0)return P;const K=Array.isArray(s.location)?s.location[0]:s.location;return!K||["all","all locations"].includes(String(K).toLowerCase())?P:P.filter(oe=>oe[y]===K)},f=D(p?.filter(P=>A(P.paymentDate))||[],"calculatedLocation"),T=D(v?.filter(P=>A(P.date))||[],"location"),le=D(S?.filter(P=>A(P.firstVisitDate))||[],"homeLocation"),g=D(M?.filter(P=>A(P.createdAt||""))||[],"center"),E=D(W?.filter(P=>A(P.paymentDate))||[],"location"),xe=D(_?.filter(P=>{const y=P.dateIST||"";return typeof y=="string"&&A(y)})||[],"location");return{sales:f,sessions:T,newClients:le,leads:g,discounts:E,lateCancellations:xe}},[p,v,S,M,W,_,s.location]),ee)return null;const ve=Array.isArray(s.location)?s.location[0]:s.location;return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/20 p-6",children:[e.jsxs("audio",{ref:o,onEnded:()=>r(!1),preload:"metadata",children:[e.jsx("source",{src:"/placeholder-audio.mp3",type:"audio/mpeg"}),"Your browser does not support the audio element."]}),e.jsxs("div",{className:"max-w-[1600px] mx-auto space-y-6",children:[e.jsx(Ut,{availableLocations:ge}),e.jsx(vt,{activeLocation:ve||"all",onLocationChange:u=>{x({location:u==="all"?[]:[u]})},showInfoPopover:!0,infoPopoverContext:"executive-overview"}),e.jsx(B,{className:"bg-white border-0 shadow-sm",children:e.jsx(G,{className:"p-6",children:e.jsx("div",{className:"w-full h-32 bg-gray-50 border-2 border-dashed border-gray-200 rounded-lg flex items-center justify-center",children:e.jsx("p",{className:"text-gray-400 text-sm",children:"Executive Notes & Key Insights"})})})}),ee?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:Array.from({length:8}).map((u,h)=>e.jsx(B,{className:"h-64 animate-pulse bg-slate-100",children:e.jsx(G,{className:"p-5",children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"h-4 bg-slate-300 rounded w-1/2"}),e.jsx("div",{className:"h-8 bg-slate-300 rounded w-3/4"}),e.jsx("div",{className:"h-20 bg-slate-300 rounded"})]})})},h))}):e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:[e.jsx(B,{className:V("group relative overflow-hidden cursor-pointer transition-all duration-500","bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950","border border-slate-200 hover:border-slate-800 border-t-4 border-t-emerald-500","shadow-md hover:shadow-2xl hover:shadow-slate-950/60","hover:-translate-y-1 hover:scale-[1.01]"),children:e.jsxs(G,{className:"p-5 relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-emerald-500 to-teal-500"}),e.jsx("div",{className:"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6",children:e.jsx(Ue,{className:"w-20 h-20 text-slate-900 group-hover:text-white"})}),e.jsxs("div",{className:"relative z-10 space-y-2.5",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-emerald-500/15 to-emerald-600/10 text-emerald-700 group-hover:from-emerald-500/25 group-hover:to-emerald-600/20 group-hover:text-emerald-400 group-hover:shadow-emerald-500/20",children:e.jsx(Ue,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-emerald-400",children:R?.metrics?.[0]?.title||"Sales Revenue"}),e.jsx("p",{className:"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold",children:"Previous Month"})]})]})}),e.jsxs("div",{className:"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50",children:[e.jsxs("p",{className:"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight",children:["₹",(N.totalRevenue/1e5).toFixed(1),"L"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"h-0.5 flex-1 rounded-full transition-all duration-500 bg-emerald-200 group-hover:bg-emerald-500/40"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const u=ce(R?.metrics?.[0]?.change,R?.metrics?.[0]?.changeDetails?.trend),h=u.icon;return e.jsxs(e.Fragment,{children:[e.jsx(h,{className:`w-3 h-3 ${u.color}`}),e.jsx("span",{className:`text-[10px] font-bold transition-colors duration-500 ${u.color}`,children:u.text})]})})()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Month over Month"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:typeof R?.metrics?.[0]?.change=="number"?`${R.metrics[0].change>0?"+":""}${R.metrics[0].change.toFixed(1)}%`:"N/A"}),e.jsx("span",{className:"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500",children:"vs prev"})]})]}),e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Year over Year"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:typeof R?.metrics?.[0]?.yoyChange=="number"?`${R.metrics[0].yoyChange>0?"+":""}${R.metrics[0].yoyChange.toFixed(1)}%`:"N/A"}),e.jsx("span",{className:"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500",children:"vs 2024"})]})]})]}),e.jsx("div",{className:"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-emerald-500/50 group-hover:border-l-emerald-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-emerald-500/20 group-hover:before:bg-emerald-400/30",children:e.jsx("p",{className:"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium",children:R?.metrics?.[0]?.description||"Total sales revenue"})})]})]})}),e.jsx(B,{className:V("group relative overflow-hidden cursor-pointer transition-all duration-500","bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950","border border-slate-200 hover:border-slate-800 border-t-4 border-t-blue-500","shadow-md hover:shadow-2xl hover:shadow-slate-950/60","hover:-translate-y-1 hover:scale-[1.01]"),children:e.jsxs(G,{className:"p-5 relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-blue-500 to-cyan-500"}),e.jsx("div",{className:"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6",children:e.jsx(X,{className:"w-20 h-20 text-slate-900 group-hover:text-white"})}),e.jsxs("div",{className:"relative z-10 space-y-2.5",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-blue-500/15 to-blue-600/10 text-blue-700 group-hover:from-blue-500/25 group-hover:to-blue-600/20 group-hover:text-blue-400 group-hover:shadow-blue-500/20",children:e.jsx(X,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-blue-400",children:"Total Sessions"}),e.jsx("p",{className:"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold",children:"Previous Month"})]})]})}),e.jsxs("div",{className:"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50",children:[e.jsx("p",{className:"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight",children:N.totalSessions}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"h-0.5 flex-1 rounded-full transition-all duration-500 bg-blue-200 group-hover:bg-blue-500/40"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(X,{className:"w-3 h-3 text-blue-600 group-hover:text-blue-400"}),e.jsx("span",{className:"text-[10px] font-bold transition-colors duration-500 text-blue-600 group-hover:text-blue-400",children:"Classes"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Avg Capacity"}),e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:N.totalSessions>0?(N.totalCapacity/N.totalSessions).toFixed(0):0})]}),e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Avg Attendance"}),e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:N.avgAttendance.toFixed(0)})]})]}),e.jsx("div",{className:"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-blue-500/50 group-hover:border-l-blue-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-blue-500/20 group-hover:before:bg-blue-400/30",children:e.jsx("p",{className:"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium",children:"Total classes conducted"})})]})]})}),e.jsx(B,{className:V("group relative overflow-hidden cursor-pointer transition-all duration-500","bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950","border border-slate-200 hover:border-slate-800 border-t-4 border-t-red-500","shadow-md hover:shadow-2xl hover:shadow-slate-950/60","hover:-translate-y-1 hover:scale-[1.01]"),children:e.jsxs(G,{className:"p-5 relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-red-500 to-rose-500"}),e.jsx("div",{className:"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6",children:e.jsx(me,{className:"w-20 h-20 text-slate-900 group-hover:text-white"})}),e.jsxs("div",{className:"relative z-10 space-y-2.5",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-red-500/15 to-red-600/10 text-red-700 group-hover:from-red-500/25 group-hover:to-red-600/20 group-hover:text-red-400 group-hover:shadow-red-500/20",children:e.jsx(me,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-red-400",children:"Late Cancellations"}),e.jsx("p",{className:"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold",children:"Previous Month"})]})]})}),e.jsxs("div",{className:"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50",children:[e.jsx("p",{className:"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight",children:N.lateCancellations}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"h-0.5 flex-1 rounded-full transition-all duration-500 bg-red-200 group-hover:bg-red-500/40"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{ce(N.lateCancellations>0?-5:0,"moderate");const u=N.cancellationRate>10?Ae:me;return e.jsxs(e.Fragment,{children:[e.jsx(u,{className:"w-3 h-3 text-red-600 group-hover:text-red-400"}),e.jsx("span",{className:"text-[10px] font-bold transition-colors duration-500 text-red-600 group-hover:text-red-400",children:N.cancellationRate>10?"High Impact":"Cancelled"})]})})()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Cancel Rate"}),e.jsxs("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:[N.cancellationRate.toFixed(1),"%"]})]}),e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Impact Level"}),e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:N.cancellationRate>15?"Critical":N.cancellationRate>10?"High":N.cancellationRate>5?"Moderate":"Low"})]})]}),e.jsx("div",{className:"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-red-500/50 group-hover:border-l-red-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-red-500/20 group-hover:before:bg-red-400/30",children:e.jsx("p",{className:"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium",children:"Sessions cancelled late"})})]})]})}),e.jsx(B,{className:V("group relative overflow-hidden cursor-pointer transition-all duration-500","bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950","border border-slate-200 hover:border-slate-800 border-t-4 border-t-purple-500","shadow-md hover:shadow-2xl hover:shadow-slate-950/60","hover:-translate-y-1 hover:scale-[1.01]"),children:e.jsxs(G,{className:"p-5 relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-purple-500 to-pink-500"}),e.jsx("div",{className:"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6",children:e.jsx(Ke,{className:"w-20 h-20 text-slate-900 group-hover:text-white"})}),e.jsxs("div",{className:"relative z-10 space-y-2.5",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-purple-500/15 to-purple-600/10 text-purple-700 group-hover:from-purple-500/25 group-hover:to-purple-600/20 group-hover:text-purple-400 group-hover:shadow-purple-500/20",children:e.jsx(Ke,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-purple-400",children:"New Clients"}),e.jsx("p",{className:"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold",children:"Previous Month"})]})]})}),e.jsxs("div",{className:"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50",children:[e.jsx("p",{className:"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight",children:N.newClients}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"h-0.5 flex-1 rounded-full transition-all duration-500 bg-purple-200 group-hover:bg-purple-500/40"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const u=ce(I?.metrics?.[0]?.change,I?.metrics?.[0]?.changeDetails?.trend),h=u.icon;return e.jsxs(e.Fragment,{children:[e.jsx(h,{className:`w-3 h-3 ${u.color.replace("text-","text-purple-600 group-hover:text-purple-400")}`}),e.jsx("span",{className:"text-[10px] font-bold transition-colors duration-500 text-purple-600 group-hover:text-purple-400",children:"New Members"})]})})()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Conversion Rate"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[e.jsxs("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:[N.conversionRate.toFixed(1),"%"]}),e.jsx("span",{className:"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500",children:"lead→client"})]})]}),e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Retention Rate"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[e.jsxs("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:[N.retentionRate.toFixed(1),"%"]}),e.jsx("span",{className:"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500",children:"active"})]})]})]}),e.jsx("div",{className:"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-purple-500/50 group-hover:border-l-purple-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-purple-500/20 group-hover:before:bg-purple-400/30",children:e.jsx("p",{className:"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium",children:I?.metrics?.[0]?.description||"New member acquisitions"})})]})]})}),e.jsx(B,{className:V("group relative overflow-hidden cursor-pointer transition-all duration-500","bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950","border border-slate-200 hover:border-slate-800 border-t-4 border-t-indigo-500","shadow-md hover:shadow-2xl hover:shadow-slate-950/60","hover:-translate-y-1 hover:scale-[1.01]"),children:e.jsxs(G,{className:"p-5 relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-indigo-500 to-purple-500"}),e.jsx("div",{className:"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6",children:e.jsx(ke,{className:"w-20 h-20 text-slate-900 group-hover:text-white"})}),e.jsxs("div",{className:"relative z-10 space-y-2.5",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-indigo-500/15 to-indigo-600/10 text-indigo-700 group-hover:from-indigo-500/25 group-hover:to-indigo-600/20 group-hover:text-indigo-400 group-hover:shadow-indigo-500/20",children:e.jsx(ke,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-indigo-400",children:"Avg Transaction Value"}),e.jsx("p",{className:"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold",children:"Previous Month"})]})]})}),e.jsxs("div",{className:"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50",children:[e.jsxs("p",{className:"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight",children:["₹",N.totalTransactions>0?(N.totalRevenue/N.totalTransactions).toFixed(0):"0"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"h-0.5 flex-1 rounded-full transition-all duration-500 bg-indigo-200 group-hover:bg-indigo-500/40"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const u=ce(R?.metrics?.[6]?.change,R?.metrics?.[6]?.changeDetails?.trend),h=u.icon;return e.jsxs(e.Fragment,{children:[e.jsx(h,{className:`w-3 h-3 ${u.color.replace("text-","text-indigo-600 group-hover:text-indigo-400")}`}),e.jsx("span",{className:"text-[10px] font-bold transition-colors duration-500 text-indigo-600 group-hover:text-indigo-400",children:"Per Sale"})]})})()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Month over Month"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:typeof R?.metrics?.[6]?.change=="number"?`${R.metrics[6].change>0?"+":""}${R.metrics[6].change.toFixed(1)}%`:"N/A"}),e.jsx("span",{className:"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500",children:"vs prev"})]})]}),e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Year over Year"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:typeof R?.metrics?.[6]?.yoyChange=="number"?`${R.metrics[6].yoyChange>0?"+":""}${R.metrics[6].yoyChange.toFixed(1)}%`:"N/A"}),e.jsx("span",{className:"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500",children:"vs 2024"})]})]})]}),e.jsx("div",{className:"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-indigo-500/50 group-hover:border-l-indigo-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-indigo-500/20 group-hover:before:bg-indigo-400/30",children:e.jsx("p",{className:"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium",children:R?.metrics?.[6]?.description||"Average value per transaction"})})]})]})}),e.jsx(B,{className:V("group relative overflow-hidden cursor-pointer transition-all duration-500","bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950","border border-slate-200 hover:border-slate-800 border-t-4 border-t-teal-500","shadow-md hover:shadow-2xl hover:shadow-slate-950/60","hover:-translate-y-1 hover:scale-[1.01]"),children:e.jsxs(G,{className:"p-5 relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-teal-500 to-cyan-500"}),e.jsx("div",{className:"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6",children:e.jsx(ue,{className:"w-20 h-20 text-slate-900 group-hover:text-white"})}),e.jsxs("div",{className:"relative z-10 space-y-2.5",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-teal-500/15 to-teal-600/10 text-teal-700 group-hover:from-teal-500/25 group-hover:to-teal-600/20 group-hover:text-teal-400 group-hover:shadow-teal-500/20",children:e.jsx(ue,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-teal-400",children:"Total Visits"}),e.jsx("p",{className:"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold",children:"Previous Month"})]})]})}),e.jsxs("div",{className:"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50",children:[e.jsx("p",{className:"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight",children:N.totalVisits}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"h-0.5 flex-1 rounded-full transition-all duration-500 bg-teal-200 group-hover:bg-teal-500/40"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ue,{className:"w-3 h-3 text-teal-600 group-hover:text-teal-400"}),e.jsx("span",{className:"text-[10px] font-bold transition-colors duration-500 text-teal-600 group-hover:text-teal-400",children:"Check-ins"})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Avg per Session"}),e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:N.avgAttendance.toFixed(1)})]}),e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Fill Rate"}),e.jsxs("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:[N.fillRate.toFixed(1),"%"]})]})]}),e.jsx("div",{className:"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-teal-500/50 group-hover:border-l-teal-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-teal-500/20 group-hover:before:bg-teal-400/30",children:e.jsx("p",{className:"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium",children:"Total member check-ins"})})]})]})}),e.jsx(B,{className:V("group relative overflow-hidden cursor-pointer transition-all duration-500","bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950","border border-slate-200 hover:border-slate-800 border-t-4 border-t-rose-500","shadow-md hover:shadow-2xl hover:shadow-slate-950/60","hover:-translate-y-1 hover:scale-[1.01]"),children:e.jsxs(G,{className:"p-5 relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-rose-500 to-orange-500"}),e.jsx("div",{className:"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6",children:e.jsx(Te,{className:"w-20 h-20 text-slate-900 group-hover:text-white"})}),e.jsxs("div",{className:"relative z-10 space-y-2.5",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-rose-500/15 to-rose-600/10 text-rose-700 group-hover:from-rose-500/25 group-hover:to-rose-600/20 group-hover:text-rose-400 group-hover:shadow-rose-500/20",children:e.jsx(Te,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-rose-400",children:"Average LTV"}),e.jsx("p",{className:"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold",children:"Previous Month"})]})]})}),e.jsxs("div",{className:"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50",children:[e.jsxs("p",{className:"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight",children:["₹",(N.avgLTV/1e3).toFixed(1),"k"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"h-0.5 flex-1 rounded-full transition-all duration-500 bg-rose-200 group-hover:bg-rose-500/40"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const u=ce(I?.metrics?.[3]?.change,I?.metrics?.[3]?.changeDetails?.trend),h=u.icon;return e.jsxs(e.Fragment,{children:[e.jsx(h,{className:`w-3 h-3 ${u.color.replace("text-","text-rose-600 group-hover:text-rose-400")}`}),e.jsx("span",{className:"text-[10px] font-bold transition-colors duration-500 text-rose-600 group-hover:text-rose-400",children:"Lifetime Value"})]})})()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Month over Month"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:typeof I?.metrics?.[3]?.change=="number"?`${I.metrics[3].change>0?"+":""}${I.metrics[3].change.toFixed(1)}%`:"N/A"}),e.jsx("span",{className:"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500",children:"vs prev"})]})]}),e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Trend Quality"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:I?.metrics?.[3]?.changeDetails?.trend==="strong"?"Excellent":I?.metrics?.[3]?.changeDetails?.trend==="moderate"?"Good":I?.metrics?.[3]?.changeDetails?.trend==="weak"?"Fair":"Stable"}),e.jsx("span",{className:"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500",children:"quality"})]})]})]}),e.jsx("div",{className:"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-rose-500/50 group-hover:border-l-rose-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-rose-500/20 group-hover:before:bg-rose-400/30",children:e.jsx("p",{className:"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium",children:I?.metrics?.[3]?.description||"Average customer lifetime value"})})]})]})}),e.jsx(B,{className:V("group relative overflow-hidden cursor-pointer transition-all duration-500","bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950","border border-slate-200 hover:border-slate-800 border-t-4 border-t-orange-500","shadow-md hover:shadow-2xl hover:shadow-slate-950/60","hover:-translate-y-1 hover:scale-[1.01]"),children:e.jsxs(G,{className:"p-5 relative",children:[e.jsx("div",{className:"absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500 bg-gradient-to-br from-orange-500 to-yellow-500"}),e.jsx("div",{className:"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6",children:e.jsx(fe,{className:"w-20 h-20 text-slate-900 group-hover:text-white"})}),e.jsxs("div",{className:"relative z-10 space-y-2.5",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md bg-gradient-to-br from-orange-500/15 to-orange-600/10 text-orange-700 group-hover:from-orange-500/25 group-hover:to-orange-600/20 group-hover:text-orange-400 group-hover:shadow-orange-500/20",children:e.jsx(fe,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2 group-hover:decoration-orange-400",children:"Discount Rate"}),e.jsx("p",{className:"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold",children:"Previous Month"})]})]})}),e.jsxs("div",{className:"p-2.5 rounded-lg transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/30 border border-slate-100 group-hover:border-slate-700/50",children:[e.jsxs("p",{className:"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight",children:[N.discountRate.toFixed(1),"%"]}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:"h-0.5 flex-1 rounded-full transition-all duration-500 bg-orange-200 group-hover:bg-orange-500/40"}),e.jsx("div",{className:"flex items-center gap-1",children:(()=>{const u=ce(R?.metrics?.[8]?.change,R?.metrics?.[8]?.changeDetails?.trend),h=u.icon;return e.jsxs(e.Fragment,{children:[e.jsx(h,{className:`w-3 h-3 ${u.color.replace("text-","text-orange-600 group-hover:text-orange-400")}`}),e.jsx("span",{className:"text-[10px] font-bold transition-colors duration-500 text-orange-600 group-hover:text-orange-400",children:"Applied"})]})})()})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Total Discounts"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[e.jsxs("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:["₹",(N.totalDiscounts/1e3).toFixed(0),"k"]}),e.jsx("span",{className:"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500",children:"total"})]})]}),e.jsxs("div",{className:"p-2.5 rounded-lg border transition-all duration-500 bg-white/50 group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50",children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Impact Level"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:N.discountRate>20?"High":N.discountRate>10?"Moderate":"Low"}),e.jsx("span",{className:"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500",children:"impact"})]})]})]}),e.jsx("div",{className:"relative pt-1.5 border-l-3 pl-3 transition-all duration-500 border-l-orange-500/50 group-hover:border-l-orange-400 before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500 before:bg-orange-500/20 group-hover:before:bg-orange-400/30",children:e.jsx("p",{className:"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium",children:R?.metrics?.[8]?.description||"Average discount percentage"})})]})]})})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Product & Category Metrics"})}),e.jsx(Oe,{data:L.sales||[],filters:s})]}),e.jsxs("div",{className:"mt-12",children:[e.jsxs("div",{className:"border-t-2 border-slate-200 pt-8 mb-8",children:[e.jsx("h2",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Complete Performance Overview"}),e.jsx("p",{className:"text-sm text-slate-600",children:"All key metrics filtered by your selected date range and location"})]}),e.jsxs("div",{className:"space-y-5",children:[e.jsx(_t,{onMetricClick:()=>{}}),e.jsx(Qt,{onMetricClick:()=>{}}),e.jsx(Zt,{onMetricClick:()=>{}}),e.jsx(Xt,{onMetricClick:()=>{}}),e.jsx(es,{onMetricClick:()=>{}}),e.jsx(ts,{onMetricClick:()=>{}}),e.jsx(ss,{onMetricClick:()=>{}}),e.jsx(as,{onMetricClick:()=>{}})]})]}),e.jsxs("div",{className:"mt-10",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsx("h2",{className:"text-2xl font-bold text-slate-900",children:"Product & Category Metrics"})}),e.jsx(Oe,{data:L.sales||[],filters:s})]}),e.jsx(jt,{open:i,onOpenChange:t,sources:[{name:"Sales Data (Previous Month)",data:L.sales||[]},{name:"Sessions Data (Previous Month)",data:L.sessions||[]},{name:"New Clients Data (Previous Month)",data:L.newClients||[]},{name:"Leads Data (Previous Month)",data:L.leads||[]},{name:"Payroll Data (Previous Month)",data:L.payroll||[]},{name:"Discounts Data (Previous Month)",data:L.discounts||[]}]})]})]})});Xe.displayName="ComprehensiveExecutiveDashboard";const rs=()=>e.jsx(Xe,{}),os=({salesData:i,sessionsData:t,leadsData:c,newClientsData:r})=>{const{filters:a}=je();return $.useMemo(()=>{const l=Array.isArray(a.location)?a.location[0]:a.location,o=(F,S)=>l?F.filter(q=>{const M=q[S];return M?M===l||M.includes(l)||l.includes(M):!1}):F,s=o(i,"calculatedLocation"),x=o(t,"location"),j=o(c,"center");o(r,"homeLocation");const p=s.reduce((F,S)=>F+(S.paymentValue||0),0),n=new Set(s.map(F=>F.memberId)).size,v=x.reduce((F,S)=>F+(S.checkedInCount||0),0),d=j.filter(F=>F.conversionStatus==="Converted").length,m=j.length>0?d/j.length*100:0;return[{label:"Total Revenue",value:C(p),trend:null},{label:"Active Members",value:b(n),trend:null},{label:"Session Attendance",value:b(v),trend:null},{label:"Lead Conversion",value:`${m.toFixed(1)}%`,trend:null}]},[i,t,c,r,a.location])},ns=()=>{const{data:i=[],loading:t}=pe(),{data:c=[],loading:r}=Ne(),{data:a=[],isLoading:l}=we(),{data:o=[],loading:s}=ye(),{data:x=[],loading:j}=Ce(),{data:p=[]}=Re(),{setLoading:n}=_e(),v=de.useRef(null),[d,m]=de.useState(!1);de.useEffect(()=>{n(t||r||l||s||j,"Loading executive dashboard data...")},[t,r,l,s,j,n]);const F=os({salesData:i,sessionsData:c,leadsData:x,newClientsData:o});return e.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/20",children:[e.jsx($t,{title:"Executive Overview",subtitle:"A concise, high-level view of revenue, attendance, and growth trends across all locations.",metrics:F,extra:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(U,{onClick:()=>m(S=>!S),className:"rounded-xl border border-white/30 bg-transparent text-white hover:border-white/50 px-4 py-2 text-sm font-semibold",variant:"ghost",children:[d?e.jsx(bt,{className:"w-4 h-4 mr-2"}):e.jsx(ft,{className:"w-4 h-4 mr-2"}),d?"Pause":"Play"]}),e.jsxs(U,{onClick:()=>v.current?.open(),className:"rounded-xl border border-white/30 bg-transparent text-white hover:border-white/50 px-4 py-2 text-sm font-semibold",variant:"ghost",children:[e.jsx(Qe,{className:"w-4 h-4 mr-2"}),"Export All Data"]}),e.jsxs(U,{onClick:()=>document.getElementById("exec-pdf-trigger")?.dispatchEvent(new MouseEvent("click",{bubbles:!0})),className:"rounded-xl border border-white/30 bg-transparent text-white hover:border-white/50 px-4 py-2 text-sm font-semibold",variant:"ghost",children:[e.jsx(Bt,{className:"w-4 h-4 mr-2"}),"Download PDF Reports"]}),e.jsxs(U,{onClick:()=>window.location.href="/",className:"rounded-xl border border-white/30 bg-transparent text-white hover:border-white/50 px-4 py-2 text-sm font-semibold",variant:"ghost",children:[e.jsx(lt,{className:"w-4 h-4 mr-2"}),"Back to Main Dashboard"]})]})}),e.jsxs("div",{className:"flex justify-end max-w-5xl mx-auto mt-4 space-x-2",children:[e.jsx(Ve,{context:"sales-overview",locationId:"kwality",iframeSrc:"/popovers/sales-overview/kwality.html",startAsSidebar:!0}),e.jsx(Ve,{context:"sales-overview",locationId:"supreme",iframeSrc:"/popovers/sales-overview/supreme.html",startAsSidebar:!0})]}),e.jsx("div",{className:"container mx-auto px-6 py-8",children:e.jsx(rs,{})}),e.jsx("div",{className:"hidden",children:e.jsx(It,{renderTrigger:!1,openRef:v,salesData:i,sessionsData:c,newClientData:o,payrollData:a,lateCancellationsData:[],discountData:p,defaultFileName:"executive-dashboard-export"})}),e.jsx(zt,{})]})},va=()=>e.jsx(nt,{children:e.jsx(ns,{})});export{va as default};
//# sourceMappingURL=ExecutiveSummary-Ch8p_jZd.js.map
