{"version":3,"file":"useCheckinsData-DGPJRptq.js","sources":["../../src/hooks/useCheckinsData.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { fetchGoogleSheet, parseNumericValue } from '@/utils/googleAuth';\nimport { createLogger } from '@/utils/logger';\n\nconst logger = createLogger('useCheckinsData');\nconst SPREADSHEET_ID = \"1DSRuJJBhl1Sc9yfY6ki-ZFhdmQ_OeVeGyPDE6n9zpK4\";\n\nexport interface CheckinData {\n  memberId: string;\n  firstName: string;\n  lastName: string;\n  email: string;\n  orderAt: string;\n  paid: number;\n  paymentMethodName: string;\n  checkedIn: boolean;\n  complementary: boolean;\n  isLateCancelled: boolean;\n  sessionId: string;\n  sessionName: string;\n  capacity: number;\n  location: string;\n  dateIST: string;\n  dayOfWeek: string;\n  time: string;\n  durationMinutes: number;\n  teacherName: string;\n  cleanedProduct: string;\n  cleanedCategory: string;\n  cleanedClass: string;\n  hostId: string;\n  month: string;\n  year: number;\n  classNo: number;\n  isNew: string;\n}\n\nexport const useCheckinsData = () => {\n  const [data, setData] = useState<CheckinData[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const parseBoolean = (value: string | boolean): boolean => {\n    if (typeof value === 'boolean') return value;\n    return value?.toString().toUpperCase() === 'TRUE';\n  };\n\n  const fetchCheckinsData = async () => {\n    try {\n      logger.info('Fetching checkins data...');\n      setLoading(true);\n      \n      const rows = await fetchGoogleSheet(SPREADSHEET_ID, 'Checkins', {\n        valueRenderOption: 'FORMATTED_VALUE'\n      });\n\n      if (rows.length < 2) {\n        setData([]);\n        setError(null);\n        return;\n      }\n\n      const checkinsData: CheckinData[] = rows.slice(1).map((row: any[]) => ({\n        memberId: row[0]?.toString() || '',\n        firstName: row[1] || '',\n        lastName: row[2] || '',\n        email: row[3] || '',\n        orderAt: row[4] || '',\n        paid: parseNumericValue(row[5]),\n        paymentMethodName: row[6] || '',\n        checkedIn: parseBoolean(row[7]),\n        complementary: parseBoolean(row[8]),\n        isLateCancelled: parseBoolean(row[9]),\n        sessionId: row[10]?.toString() || '',\n        sessionName: row[11] || '',\n        capacity: parseNumericValue(row[12]),\n        location: row[13] || '',\n        dateIST: row[14] || '',\n        dayOfWeek: row[15] || '',\n        time: row[16] || '',\n        durationMinutes: parseNumericValue(row[17]),\n        teacherName: row[18] || '',\n        cleanedProduct: row[19] || '',\n        cleanedCategory: row[20] || '',\n        cleanedClass: row[21] || '',\n        hostId: row[22]?.toString() || '',\n        month: row[23] || '',\n        year: parseNumericValue(row[24]),\n        classNo: parseNumericValue(row[25]),\n        isNew: row[26] || ''\n      }));\n\n      setData(checkinsData);\n      setError(null);\n      logger.info(`Loaded ${checkinsData.length} checkins`);\n    } catch (err) {\n      logger.error('Error fetching checkins data:', err);\n      setError('Failed to load checkins data');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchCheckinsData();\n  }, []);\n\n  return { data, loading, error, refetch: fetchCheckinsData };\n};\n"],"names":["logger","createLogger","SPREADSHEET_ID","useCheckinsData","data","setData","useState","loading","setLoading","error","setError","parseBoolean","value","fetchCheckinsData","rows","fetchGoogleSheet","checkinsData","row","parseNumericValue","useEffect"],"mappings":"mGAIA,MAAMA,EAASC,EAA8B,EACvCC,EAAiB,+CAgCVC,EAAkB,IAAM,CACnC,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAAwB,CAAA,CAAE,EAC5C,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAwB,IAAI,EAEhDK,EAAgBC,GAChB,OAAOA,GAAU,UAAkBA,EAChCA,GAAO,WAAW,YAAA,IAAkB,OAGvCC,EAAoB,SAAY,CACpC,GAAI,CACFb,EAAO,KAAK,2BAA2B,EACvCQ,EAAW,EAAI,EAEf,MAAMM,EAAO,MAAMC,EAAiBb,EAAgB,WAAY,CAC9D,kBAAmB,iBAAA,CACpB,EAED,GAAIY,EAAK,OAAS,EAAG,CACnBT,EAAQ,CAAA,CAAE,EACVK,EAAS,IAAI,EACb,MACF,CAEA,MAAMM,EAA8BF,EAAK,MAAM,CAAC,EAAE,IAAKG,IAAgB,CACrE,SAAUA,EAAI,CAAC,GAAG,YAAc,GAChC,UAAWA,EAAI,CAAC,GAAK,GACrB,SAAUA,EAAI,CAAC,GAAK,GACpB,MAAOA,EAAI,CAAC,GAAK,GACjB,QAASA,EAAI,CAAC,GAAK,GACnB,KAAMC,EAAkBD,EAAI,CAAC,CAAC,EAC9B,kBAAmBA,EAAI,CAAC,GAAK,GAC7B,UAAWN,EAAaM,EAAI,CAAC,CAAC,EAC9B,cAAeN,EAAaM,EAAI,CAAC,CAAC,EAClC,gBAAiBN,EAAaM,EAAI,CAAC,CAAC,EACpC,UAAWA,EAAI,EAAE,GAAG,YAAc,GAClC,YAAaA,EAAI,EAAE,GAAK,GACxB,SAAUC,EAAkBD,EAAI,EAAE,CAAC,EACnC,SAAUA,EAAI,EAAE,GAAK,GACrB,QAASA,EAAI,EAAE,GAAK,GACpB,UAAWA,EAAI,EAAE,GAAK,GACtB,KAAMA,EAAI,EAAE,GAAK,GACjB,gBAAiBC,EAAkBD,EAAI,EAAE,CAAC,EAC1C,YAAaA,EAAI,EAAE,GAAK,GACxB,eAAgBA,EAAI,EAAE,GAAK,GAC3B,gBAAiBA,EAAI,EAAE,GAAK,GAC5B,aAAcA,EAAI,EAAE,GAAK,GACzB,OAAQA,EAAI,EAAE,GAAG,YAAc,GAC/B,MAAOA,EAAI,EAAE,GAAK,GAClB,KAAMC,EAAkBD,EAAI,EAAE,CAAC,EAC/B,QAASC,EAAkBD,EAAI,EAAE,CAAC,EAClC,MAAOA,EAAI,EAAE,GAAK,EAAA,EAClB,EAEFZ,EAAQW,CAAY,EACpBN,EAAS,IAAI,EACbV,EAAO,KAAK,UAAUgB,EAAa,MAAM,WAAW,CACtD,MAAc,CAEZN,EAAS,8BAA8B,CACzC,QAAA,CACEF,EAAW,EAAK,CAClB,CACF,EAEAW,OAAAA,EAAAA,UAAU,IAAM,CACdN,EAAA,CACF,EAAG,CAAA,CAAE,EAEE,CAAE,KAAAT,EAAM,QAAAG,EAAS,MAAAE,EAAO,QAASI,CAAA,CAC1C"}