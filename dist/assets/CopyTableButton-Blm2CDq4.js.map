{"version":3,"file":"CopyTableButton-Blm2CDq4.js","sources":["../../src/components/ui/CopyTableButton.tsx"],"sourcesContent":["import React, { useState } from 'react';\nimport { Copy, Check, FileText } from 'lucide-react';\nimport { Button } from './button';\nimport { DropdownMenu, DropdownMenuContent, DropdownMenuItem, DropdownMenuTrigger } from './dropdown-menu';\nimport { toast } from './use-toast';\n\ninterface CopyTableButtonProps {\n  tableRef: React.RefObject<HTMLTableElement | HTMLDivElement>;\n  tableName?: string;\n  className?: string;\n  size?: 'sm' | 'md' | 'lg';\n  showDropdown?: boolean; // If false, defaults to HTML copy on click\n  onCopyAllTabs?: () => Promise<string>; // Function to generate content for all tabs\n  // Additional context for enhanced text export\n  contextInfo?: {\n    selectedMetric?: string;\n    dateRange?: { start: string; end: string };\n    filters?: Record<string, any>;\n    location?: string; // Current selected location\n    additionalInfo?: Record<string, any>;\n  };\n}\n\nexport const CopyTableButton: React.FC<CopyTableButtonProps> = ({\n  tableRef,\n  tableName = 'Table',\n  className = '',\n  size = 'sm',\n  showDropdown = true,\n  onCopyAllTabs,\n  contextInfo\n}) => {\n  const [copied, setCopied] = useState(false);\n\n  const copyTableAsHTML = async () => {\n    if (!tableRef.current) {\n      toast({\n        title: \"Error\",\n        description: \"Table not found\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    try {\n      // Create a temporary container\n      const container = document.createElement('div');\n      container.style.position = 'absolute';\n      container.style.left = '-9999px';\n      container.style.top = '-9999px';\n      document.body.appendChild(container);\n\n      // Clone the table element\n      const tableClone = tableRef.current.cloneNode(true) as HTMLElement;\n      \n      // Remove grouped rows (category headers) but keep totals row\n      const tbody = tableClone.querySelector('tbody');\n      if (tbody) {\n        const rows = Array.from(tbody.querySelectorAll('tr'));\n        rows.forEach(row => {\n          // Check if this is a grouped/category row (has bg-slate-100 or contains collapse button)\n          // But NOT the totals row (has bg-slate-800)\n          const isGroupRow = row.classList.contains('bg-slate-100') || \n                             row.querySelector('button[class*=\"ChevronRight\"], button[class*=\"ChevronDown\"]') !== null ||\n                             row.querySelector('svg.lucide-chevron-right, svg.lucide-chevron-down') !== null;\n          const isTotalsRow = row.classList.contains('bg-slate-800') || \n                              row.textContent?.includes('TOTALS') ||\n                              row.textContent?.includes('Total');\n          \n          // Remove group rows but keep totals\n          if (isGroupRow && !isTotalsRow) {\n            row.remove();\n          }\n        });\n      }\n      \n      // Add comprehensive styling to the cloned table\n      const styleSheet = document.createElement('style');\n      styleSheet.textContent = `\n        /* Table Container */\n        .table-container {\n          font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;\n          background: #ffffff;\n          border-radius: 12px;\n          box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);\n          overflow: hidden;\n          border: 1px solid #e5e7eb;\n        }\n\n        /* Table Styling */\n        table {\n          width: 100%;\n          border-collapse: collapse;\n          background: white;\n          font-size: 14px;\n        }\n\n        /* Header Styling */\n        thead tr {\n          background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n          border-bottom: 2px solid #e2e8f0;\n        }\n\n        th {\n          padding: 12px 16px;\n          text-align: left;\n          font-weight: 600;\n          color: #374151;\n          border-right: 1px solid #e5e7eb;\n          position: relative;\n        }\n\n        th:last-child {\n          border-right: none;\n        }\n\n        /* Body Styling */\n        tbody tr {\n          border-bottom: 1px solid #f3f4f6;\n          transition: background-color 0.2s ease;\n        }\n\n        tbody tr:nth-child(even) {\n          background-color: #f9fafb;\n        }\n\n        tbody tr:hover {\n          background-color: #f3f4f6;\n        }\n\n        td {\n          padding: 12px 16px;\n          color: #374151;\n          border-right: 1px solid #f3f4f6;\n        }\n\n        td:last-child {\n          border-right: none;\n        }\n\n        /* Number formatting */\n        .number-cell {\n          text-align: right;\n          font-variant-numeric: tabular-nums;\n          font-weight: 500;\n        }\n\n        /* Currency formatting */\n        .currency-cell {\n          text-align: right;\n          font-variant-numeric: tabular-nums;\n          font-weight: 600;\n          color: #059669;\n        }\n\n        /* Percentage formatting */\n        .percentage-cell {\n          text-align: right;\n          font-variant-numeric: tabular-nums;\n          font-weight: 500;\n        }\n\n        /* Status badges */\n        .status-badge {\n          display: inline-block;\n          padding: 4px 8px;\n          border-radius: 6px;\n          font-size: 12px;\n          font-weight: 500;\n          text-transform: uppercase;\n          letter-spacing: 0.025em;\n        }\n\n        .status-active {\n          background-color: #dcfce7;\n          color: #166534;\n        }\n\n        .status-inactive {\n          background-color: #fef3c7;\n          color: #92400e;\n        }\n\n        /* Metric highlights */\n        .metric-positive {\n          color: #059669;\n          font-weight: 600;\n        }\n\n        .metric-negative {\n          color: #dc2626;\n          font-weight: 600;\n        }\n\n        .metric-neutral {\n          color: #6b7280;\n          font-weight: 500;\n        }\n\n        /* Card wrapper for better presentation */\n        .table-card {\n          background: white;\n          border-radius: 12px;\n          box-shadow: 0 1px 3px 0 rgba(0, 0, 0, 0.1);\n          border: 1px solid #e5e7eb;\n          overflow: hidden;\n          margin: 16px 0;\n        }\n\n        .table-header {\n          background: linear-gradient(135deg, #f8fafc 0%, #f1f5f9 100%);\n          padding: 16px 20px;\n          border-bottom: 1px solid #e5e7eb;\n        }\n\n        .table-title {\n          font-size: 18px;\n          font-weight: 600;\n          color: #111827;\n          margin: 0;\n        }\n\n        .table-subtitle {\n          font-size: 14px;\n          color: #6b7280;\n          margin: 4px 0 0 0;\n        }\n      `;\n\n      // Wrap the table in a styled container\n      const wrapper = document.createElement('div');\n      wrapper.className = 'table-card';\n      \n      // Add title header\n      const header = document.createElement('div');\n      header.className = 'table-header';\n      header.innerHTML = `\n        <h3 class=\"table-title\">${tableName}</h3>\n        <p class=\"table-subtitle\">Exported on ${new Date().toLocaleDateString()}</p>\n      `;\n      \n      wrapper.appendChild(header);\n      wrapper.appendChild(styleSheet);\n      wrapper.appendChild(tableClone);\n      container.appendChild(wrapper);\n\n      // Enhance table cells with proper classes\n      try {\n        const cells = tableClone.querySelectorAll('td, th');\n        cells.forEach((cell) => {\n          try {\n            const text = cell.textContent?.trim() || '';\n            \n            // Add appropriate classes based on content\n            if (text.match(/^\\$[\\d,]+\\.?\\d*$/) || text.match(/^₹[\\d,]+\\.?\\d*$/)) {\n              cell.classList.add('currency-cell');\n            } else if (text.match(/^\\d+\\.?\\d*%$/)) {\n              cell.classList.add('percentage-cell');\n            } else if (text.match(/^[\\d,]+\\.?\\d*$/)) {\n              cell.classList.add('number-cell');\n            }\n\n            // Add status styling\n            if (text.toLowerCase().includes('active') || text.toLowerCase().includes('converted')) {\n              cell.innerHTML = `<span class=\"status-badge status-active\">${text}</span>`;\n            } else if (text.toLowerCase().includes('inactive') || text.toLowerCase().includes('pending')) {\n              cell.innerHTML = `<span class=\"status-badge status-inactive\">${text}</span>`;\n            }\n\n            // Add metric styling for positive/negative values\n            if (text.includes('+') || (text.includes('%') && parseFloat(text) > 0)) {\n              cell.classList.add('metric-positive');\n            } else if (text.includes('-') || (text.includes('%') && parseFloat(text) < 0)) {\n              cell.classList.add('metric-negative');\n            }\n          } catch (cellError) {\n            console.warn('Error processing cell:', cellError);\n            // Continue processing other cells\n          }\n        });\n      } catch (cellsError) {\n        console.warn('Error processing table cells:', cellsError);\n        // Continue with table copy without enhanced styling\n      }\n\n      // Create the HTML content to copy\n      const htmlContent = wrapper.outerHTML;\n\n      // Copy to clipboard using the Clipboard API\n      if (navigator.clipboard && navigator.clipboard.write) {\n        try {\n          const blob = new Blob([htmlContent], { type: 'text/html' });\n          const clipboardItem = new ClipboardItem({ 'text/html': blob });\n          await navigator.clipboard.write([clipboardItem]);\n        } catch (clipboardError) {\n          // If HTML copying fails, fall back to plain text\n          console.warn('HTML copy failed, falling back to text:', clipboardError);\n          const plainText = tableClone.textContent || '';\n          await navigator.clipboard.writeText(plainText);\n        }\n      } else {\n        // Fallback for older browsers\n        const textArea = document.createElement('textarea');\n        textArea.value = htmlContent;\n        container.appendChild(textArea);\n        textArea.select();\n        document.execCommand('copy');\n        container.removeChild(textArea);\n      }\n\n      // Cleanup\n      document.body.removeChild(container);\n\n      // Show success feedback\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n\n      toast({\n        title: \"Copied to Clipboard\",\n        description: `${tableName} has been copied with styling`,\n      });\n\n    } catch (error) {\n      console.error('Error copying table:', error);\n      toast({\n        title: \"Copy Failed\",\n        description: `Unable to copy table to clipboard: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const copyTableAsText = async () => {\n    if (!tableRef.current) {\n      toast({\n        title: \"Error\",\n        description: \"Table not found\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    try {\n      // Extract text content from the table\n      const tableElement = tableRef.current;\n      \n      // Find the actual table or extract data from the component\n      const table = tableElement.querySelector('table') || tableElement;\n      \n      // Build comprehensive header with context information\n      let textContent = `${tableName}\\n`;\n      textContent += `Exported on ${new Date().toLocaleDateString()} at ${new Date().toLocaleTimeString()}\\n`;\n      \n      // Add context information if provided\n      if (contextInfo) {\n        textContent += `\\n--- Export Context ---\\n`;\n        \n        // Add selected metric\n        if (contextInfo.selectedMetric) {\n          textContent += `Metric: ${contextInfo.selectedMetric}\\n`;\n        }\n        \n        // Add location information\n        if (contextInfo.location) {\n          textContent += `Location: ${contextInfo.location}\\n`;\n        } else if (contextInfo.filters?.location) {\n          // Handle location from filters\n          const locationValue = Array.isArray(contextInfo.filters.location) \n            ? contextInfo.filters.location.join(', ') \n            : contextInfo.filters.location;\n          if (locationValue && locationValue !== 'all') {\n            textContent += `Location: ${locationValue}\\n`;\n          } else {\n            textContent += `Location: All Locations\\n`;\n          }\n        } else {\n          textContent += `Location: All Locations\\n`;\n        }\n        \n        // Add date range\n        if (contextInfo.dateRange) {\n          const { start, end } = contextInfo.dateRange;\n          if (start && end) {\n            textContent += `Date Range: ${start} to ${end}\\n`;\n          }\n        }\n        \n        // Add active filters\n        if (contextInfo.filters) {\n          const activeFilters: string[] = [];\n          Object.entries(contextInfo.filters).forEach(([key, value]) => {\n            if (value && Array.isArray(value) && value.length > 0) {\n              activeFilters.push(`${key.charAt(0).toUpperCase() + key.slice(1)}: ${value.join(', ')}`);\n            } else if (value && typeof value === 'string' && value !== 'All' && value !== '') {\n              activeFilters.push(`${key.charAt(0).toUpperCase() + key.slice(1)}: ${value}`);\n            } else if (typeof value === 'object' && value !== null && !Array.isArray(value)) {\n              // Handle nested objects like dateRange\n              const subFilters = Object.entries(value)\n                .filter(([_, v]) => v && v !== '')\n                .map(([k, v]) => `${k}: ${v}`)\n                .join(', ');\n              if (subFilters) {\n                activeFilters.push(`${key.charAt(0).toUpperCase() + key.slice(1)}: ${subFilters}`);\n              }\n            }\n          });\n          \n          if (activeFilters.length > 0) {\n            textContent += `Active Filters: ${activeFilters.join('; ')}\\n`;\n          } else {\n            textContent += `Active Filters: None\\n`;\n          }\n        }\n        \n        // Add any additional info\n        if (contextInfo.additionalInfo) {\n          Object.entries(contextInfo.additionalInfo).forEach(([key, value]) => {\n            if (value) {\n              textContent += `${key.charAt(0).toUpperCase() + key.slice(1)}: ${value}\\n`;\n            }\n          });\n        }\n        \n        textContent += `\\n--- Table Data (Headers + Data Rows + Totals) ---\\n`;\n        textContent += `Note: Grouped/Category rows have been excluded\\n`;\n      } else {\n        textContent += `\\n`;\n      }\n      \n      // Extract headers\n      const headers: string[] = [];\n      const headerCells = table.querySelectorAll('thead th, thead td, tr:first-child th, tr:first-child td');\n      headerCells.forEach(cell => {\n        const text = cell.textContent?.trim() || '';\n        if (text) headers.push(text);\n      });\n      \n      if (headers.length > 0) {\n        textContent += headers.join('\\t') + '\\n';\n        textContent += headers.map(() => '---').join('\\t') + '\\n';\n      }\n      \n      // Extract data rows with enhanced grouped row detection\n      const dataRows = table.querySelectorAll('tbody tr, tr:not(:first-child)');\n      dataRows.forEach(row => {\n        // Enhanced detection for grouped/category rows\n        const isGroupRow = (\n          // Common group row styling classes\n          row.classList.contains('bg-slate-100') || \n          row.classList.contains('bg-gray-100') ||\n          row.classList.contains('bg-slate-50') ||\n          row.classList.contains('bg-gray-50') ||\n          row.classList.contains('group-row') ||\n          row.classList.contains('category-row') ||\n          row.classList.contains('section-header') ||\n          row.classList.contains('group-header') ||\n          row.classList.contains('category-header') ||\n          \n          // Detect expand/collapse buttons (chevron icons)\n          row.querySelector('button[class*=\"ChevronRight\"], button[class*=\"ChevronDown\"]') !== null ||\n          row.querySelector('svg.lucide-chevron-right, svg.lucide-chevron-down') !== null ||\n          row.querySelector('[data-lucide=\"chevron-right\"], [data-lucide=\"chevron-down\"]') !== null ||\n          row.querySelector('.fa-chevron-right, .fa-chevron-down') !== null ||\n          \n          // Detect if row has data attributes indicating it's a group\n          row.hasAttribute('data-group') ||\n          row.hasAttribute('data-category') ||\n          row.hasAttribute('data-section') ||\n          row.hasAttribute('data-grouped') ||\n          \n          // Detect if first cell spans multiple columns (common in group headers)\n          (() => {\n            const firstCell = row.querySelector('td:first-child, th:first-child');\n            return firstCell && (\n              firstCell.getAttribute('colspan') && parseInt(firstCell.getAttribute('colspan') || '1') > 1\n            );\n          })() ||\n          \n          // Detect common group row text patterns\n          (() => {\n            const rowText = row.textContent?.trim().toLowerCase() || '';\n            return (\n              rowText.includes('expand') ||\n              rowText.includes('collapse') ||\n              rowText.includes('show more') ||\n              rowText.includes('show less') ||\n              (rowText.includes('items') && !rowText.match(/\\d+\\s+items/)) || // Avoid matching actual data like \"5 items sold\"\n              rowText.includes('category:') ||\n              rowText.includes('group:') ||\n              rowText.includes('section:') ||\n              // Detect rows that are just category names without data\n              (rowText.length > 0 && rowText.length < 50 && \n               !rowText.match(/\\d/) && // No numbers (likely data)\n               !rowText.includes('₹') && // No currency\n               !rowText.includes('%') && // No percentages\n               !rowText.includes(':') && // No time or ratios\n               row.querySelectorAll('td, th').length <= 2) // Few cells (likely category header)\n            );\n          })()\n        );\n        \n        // Enhanced detection for totals/summary rows (these should be included)\n        const isTotalsRow = (\n          row.classList.contains('bg-slate-800') || \n          row.classList.contains('bg-gray-800') ||\n          row.classList.contains('bg-slate-900') ||\n          row.classList.contains('totals-row') ||\n          row.classList.contains('summary-row') ||\n          row.classList.contains('footer-row') ||\n          (() => {\n            const rowText = row.textContent?.trim() || '';\n            return (\n              rowText.includes('TOTALS') ||\n              rowText.includes('TOTAL') ||\n              rowText.includes('Total') ||\n              rowText.includes('Sum') ||\n              rowText.includes('Summary') ||\n              rowText.includes('Grand Total') ||\n              rowText.includes('Subtotal') ||\n              // Check if first cell indicates a total\n              (() => {\n                const firstCell = row.querySelector('td:first-child, th:first-child');\n                const firstCellText = firstCell?.textContent?.trim().toLowerCase() || '';\n                return (\n                  firstCellText === 'total' ||\n                  firstCellText === 'totals' ||\n                  firstCellText === 'grand total' ||\n                  firstCellText === 'summary' ||\n                  firstCellText.startsWith('total ')\n                );\n              })()\n            );\n          })()\n        );\n        \n        // Skip group rows but always include totals rows and regular data rows\n        if (isGroupRow && !isTotalsRow) {\n          return;\n        }\n        \n        // Extract cell data\n        const cells = row.querySelectorAll('td, th');\n        const rowData: string[] = [];\n        cells.forEach(cell => {\n          // Skip cells that are just expand/collapse buttons\n          const hasOnlyButton = cell.querySelector('button') && !cell.textContent?.trim().replace(/[\\s\\n\\r]+/g, '').length;\n          if (hasOnlyButton) {\n            rowData.push(''); // Add empty cell for button columns\n          } else {\n            const text = cell.textContent?.trim() || '';\n            rowData.push(text);\n          }\n        });\n        \n        // Only add row if it has meaningful content\n        if (rowData.length > 0 && rowData.some(cell => cell !== '')) {\n          textContent += rowData.join('\\t') + '\\n';\n        }\n      });\n      \n      // If no structured table found, get all text content\n      if (headers.length === 0 && dataRows.length === 0) {\n        textContent += table.textContent?.trim() || 'No data available';\n      }\n      // Copy to clipboard as plain text\n      if (navigator.clipboard && navigator.clipboard.writeText) {\n        await navigator.clipboard.writeText(textContent);\n      } else {\n        // Fallback for older browsers\n        const textArea = document.createElement('textarea');\n        textArea.value = textContent;\n        textArea.style.position = 'fixed';\n        textArea.style.left = '-9999px';\n        document.body.appendChild(textArea);\n        textArea.select();\n        document.execCommand('copy');\n        document.body.removeChild(textArea);\n      }\n\n      // Show success feedback\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n\n      toast({\n        title: \"Copied to Clipboard\",\n        description: `${tableName} has been copied as text`,\n      });\n\n    } catch (error) {\n      console.error('Error copying table as text:', error);\n      toast({\n        title: \"Copy Failed\",\n        description: `Unable to copy table to clipboard: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const copyAllTabsAsText = async () => {\n    if (!onCopyAllTabs) {\n      toast({\n        title: \"Error\",\n        description: \"Copy all tabs function not provided\",\n        variant: \"destructive\"\n      });\n      return;\n    }\n\n    try {\n      const allTabsContent = await onCopyAllTabs();\n      \n      // Copy to clipboard\n      await navigator.clipboard.writeText(allTabsContent);\n      \n      // Show success feedback\n      setCopied(true);\n      setTimeout(() => setCopied(false), 2000);\n\n      toast({\n        title: \"Copied All Tabs\",\n        description: \"All metric tables have been copied to clipboard\",\n      });\n\n    } catch (error) {\n      console.error('Error copying all tabs:', error);\n      toast({\n        title: \"Copy Failed\",\n        description: `Unable to copy all tabs: ${error instanceof Error ? error.message : 'Unknown error'}`,\n        variant: \"destructive\"\n      });\n    }\n  };\n\n  const buttonSize = {\n    sm: 'h-8 w-8',\n    md: 'h-10 w-10', \n    lg: 'h-12 w-12'\n  }[size];\n\n  const iconSize = {\n    sm: 'h-4 w-4',\n    md: 'h-5 w-5',\n    lg: 'h-6 w-6'\n  }[size];\n\n  if (showDropdown) {\n    return (\n      <DropdownMenu>\n        <DropdownMenuTrigger asChild>\n          <Button\n            variant=\"outline\"\n            size=\"icon\"\n            className={`${buttonSize} bg-white/90 hover:bg-gray-50 border-gray-200 shadow-sm transition-all duration-200 ${className}`}\n            title={`Copy ${tableName} to clipboard`}\n          >\n            {copied ? (\n              <Check className={`${iconSize} text-green-600`} />\n            ) : (\n              <Copy className={`${iconSize} text-gray-600`} />\n            )}\n          </Button>\n        </DropdownMenuTrigger>\n        <DropdownMenuContent align=\"end\" className=\"w-48\">\n          <DropdownMenuItem onClick={copyTableAsHTML} className=\"flex items-center gap-2\">\n            <Copy className=\"h-4 w-4\" />\n            <span>Copy with styling</span>\n          </DropdownMenuItem>\n          <DropdownMenuItem onClick={copyTableAsText} className=\"flex items-center gap-2\">\n            <FileText className=\"h-4 w-4\" />\n            <span>Copy as text</span>\n          </DropdownMenuItem>\n          {onCopyAllTabs && (\n            <DropdownMenuItem onClick={copyAllTabsAsText} className=\"flex items-center gap-2\">\n              <FileText className=\"h-4 w-4\" />\n              <span>Copy all tabs</span>\n            </DropdownMenuItem>\n          )}\n        </DropdownMenuContent>\n      </DropdownMenu>\n    );\n  }\n\n  // Simple button that copies with styling by default\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"icon\"\n      onClick={copyTableAsHTML}\n      className={`${buttonSize} bg-white/90 hover:bg-gray-50 border-gray-200 shadow-sm transition-all duration-200 ${className}`}\n      title={`Copy ${tableName} with styling to clipboard`}\n    >\n      {copied ? (\n        <Check className={`${iconSize} text-green-600`} />\n      ) : (\n        <Copy className={`${iconSize} text-gray-600`} />\n      )}\n    </Button>\n  );\n};\n\nexport default CopyTableButton;"],"names":["CopyTableButton","tableRef","tableName","className","size","showDropdown","onCopyAllTabs","contextInfo","copied","setCopied","useState","copyTableAsHTML","toast","container","tableClone","tbody","row","isGroupRow","isTotalsRow","styleSheet","wrapper","header","cell","text","htmlContent","blob","clipboardItem","plainText","textArea","error","copyTableAsText","tableElement","table","textContent","locationValue","start","end","activeFilters","key","value","subFilters","_","v","k","headers","dataRows","firstCell","rowText","firstCellText","cells","rowData","copyAllTabsAsText","allTabsContent","buttonSize","iconSize","DropdownMenu","jsx","DropdownMenuTrigger","Button","Check","Copy","jsxs","DropdownMenuContent","DropdownMenuItem","FileText"],"mappings":"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"}