{"version":3,"file":"useExpirationsData-CHlNy1D0.js","sources":["../../src/hooks/useExpirationsData.ts"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { ExpirationData } from '@/types/dashboard';\nimport { fetchGoogleSheet, SPREADSHEET_IDS } from '@/utils/googleAuth';\nimport { createLogger } from '@/utils/logger';\n\nconst logger = createLogger('useExpirationsData');\nconst SHEET_NAME = \"Expirations\";\n\nexport const useExpirationsData = () => {\n  const [data, setData] = useState<ExpirationData[]>([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState<string | null>(null);\n\n  const fetchExpirationsData = async () => {\n    try {\n      setLoading(true);\n      setError(null);\n\n      logger.info('Fetching expirations data...');\n      \n      const rows = await fetchGoogleSheet(SPREADSHEET_IDS.EXPIRATIONS, `${SHEET_NAME}!A:Z`, {\n        valueRenderOption: 'FORMATTED_VALUE'\n      });\n      \n      logger.info(`Total rows received: ${rows.length}`);\n      \n      if (rows.length === 0) {\n        logger.warn('No data found in the sheet');\n        setData([]);\n        return;\n      }\n\n      const dataRows = rows.slice(1);\n\n      const processedData: ExpirationData[] = dataRows.map((row: string[]) => ({\n        uniqueId: row[0] || '',\n        memberId: row[1] || '',\n        firstName: row[2] || '',\n        lastName: row[3] || '',\n        email: row[4] || '',\n        membershipName: row[5] || '',\n        endDate: row[6] || '',\n        homeLocation: row[7] || '',\n        currentUsage: row[8] || '-',\n        id: row[9] || '',\n        orderAt: row[10] || '',\n        soldBy: row[11] || '-',\n        membershipId: row[12] || '-',\n        frozen: row[13]?.toUpperCase() === 'TRUE',\n        paid: row[14] || '-',\n        status: row[15] || '',\n      }));\n\n      logger.info(`Processed ${processedData.length} expirations`);\n\n      setData(processedData);\n    } catch (error) {\n      logger.error('Error fetching expirations data:', error);\n      setError(error instanceof Error ? error.message : 'Unknown error occurred');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  useEffect(() => {\n    fetchExpirationsData();\n  }, []);\n\n  return {\n    data,\n    loading,\n    error,\n    refetch: fetchExpirationsData,\n  };\n};\n"],"names":["logger","createLogger","SHEET_NAME","useExpirationsData","data","setData","useState","loading","setLoading","error","setError","fetchExpirationsData","rows","fetchGoogleSheet","SPREADSHEET_IDS","processedData","row","useEffect"],"mappings":"mGAKA,MAAMA,EAASC,EAAiC,EAC1CC,EAAa,cAENC,EAAqB,IAAM,CACtC,KAAM,CAACC,EAAMC,CAAO,EAAIC,EAAAA,SAA2B,CAAA,CAAE,EAC/C,CAACC,EAASC,CAAU,EAAIF,EAAAA,SAAS,EAAI,EACrC,CAACG,EAAOC,CAAQ,EAAIJ,EAAAA,SAAwB,IAAI,EAEhDK,EAAuB,SAAY,CACvC,GAAI,CACFH,EAAW,EAAI,EACfE,EAAS,IAAI,EAEbV,EAAO,KAAK,8BAA8B,EAE1C,MAAMY,EAAO,MAAMC,EAAiBC,EAAgB,YAAa,GAAGZ,CAAU,OAAQ,CACpF,kBAAmB,iBAAA,CACpB,EAID,GAFAF,EAAO,KAAK,wBAAwBY,EAAK,MAAM,EAAE,EAE7CA,EAAK,SAAW,EAAG,CACrBZ,EAAO,KAAK,4BAA4B,EACxCK,EAAQ,CAAA,CAAE,EACV,MACF,CAIA,MAAMU,EAFWH,EAAK,MAAM,CAAC,EAEoB,IAAKI,IAAmB,CACvE,SAAUA,EAAI,CAAC,GAAK,GACpB,SAAUA,EAAI,CAAC,GAAK,GACpB,UAAWA,EAAI,CAAC,GAAK,GACrB,SAAUA,EAAI,CAAC,GAAK,GACpB,MAAOA,EAAI,CAAC,GAAK,GACjB,eAAgBA,EAAI,CAAC,GAAK,GAC1B,QAASA,EAAI,CAAC,GAAK,GACnB,aAAcA,EAAI,CAAC,GAAK,GACxB,aAAcA,EAAI,CAAC,GAAK,IACxB,GAAIA,EAAI,CAAC,GAAK,GACd,QAASA,EAAI,EAAE,GAAK,GACpB,OAAQA,EAAI,EAAE,GAAK,IACnB,aAAcA,EAAI,EAAE,GAAK,IACzB,OAAQA,EAAI,EAAE,GAAG,gBAAkB,OACnC,KAAMA,EAAI,EAAE,GAAK,IACjB,OAAQA,EAAI,EAAE,GAAK,EAAA,EACnB,EAEFhB,EAAO,KAAK,aAAae,EAAc,MAAM,cAAc,EAE3DV,EAAQU,CAAa,CACvB,OAASN,EAAO,CAEdC,EAASD,aAAiB,MAAQA,EAAM,QAAU,wBAAwB,CAC5E,QAAA,CACED,EAAW,EAAK,CAClB,CACF,EAEAS,OAAAA,EAAAA,UAAU,IAAM,CACdN,EAAA,CACF,EAAG,CAAA,CAAE,EAEE,CACL,KAAAP,EACA,QAAAG,EACA,MAAAE,EACA,QAASE,CAAA,CAEb"}