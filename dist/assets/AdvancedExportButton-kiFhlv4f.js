import{r as c,j as e,f as S,B as C,h as $,D as q,l as H,n as W,o as G,q as J,s as K}from"./index-Bm67KBkU.js";import{P as Q,a as X,f as v,b as Y,c as Z,S as _,d as ee,e as se,g as te,h as E,I as ae}from"./select-CM-Birqk.js";import{L as n}from"./label-fD3fdNwH.js";import{F as re,C as l}from"./checkbox-ByePFv7I.js";import{C as ne}from"./googleAuth-BGo8ElRc.js";import{B as le}from"./BrandSpinner-CGFi2e0U.js";import{u as ce}from"./useAdvancedExport-luHYyrc4.js";import{D as N}from"./SalesMotionHero-sGphstF2.js";import{F as oe}from"./file-text-DChZNHsM.js";function ie({value:o,onChange:m,className:x}){const[r,h]=c.useState(o);c.useEffect(()=>{h(o)},[o]);const u=i=>{h(i),m?.(i)};return e.jsx("div",{className:S("grid gap-2",x),children:e.jsxs(Q,{children:[e.jsx(X,{asChild:!0,children:e.jsxs(C,{id:"date",variant:"outline",className:S("w-full justify-start text-left font-normal",!r&&"text-muted-foreground"),children:[e.jsx(ne,{className:"mr-2 h-4 w-4"}),r?.from?r.to?e.jsxs(e.Fragment,{children:[v(r.from,"LLL dd, y")," -"," ",v(r.to,"LLL dd, y")]}):v(r.from,"LLL dd, y"):e.jsx("span",{children:"Pick a date range"})]})}),e.jsx(Y,{className:"w-auto p-0",align:"start",children:e.jsx(Z,{initialFocus:!0,mode:"range",defaultMonth:r?.from,selected:r,onSelect:u,numberOfMonths:2,className:"p-3 pointer-events-auto"})})]})})}const Ce=({salesData:o=[],sessionsData:m=[],newClientData:x=[],payrollData:r=[],lateCancellationsData:h=[],discountData:u=[],additionalData:i={},defaultFileName:P,size:L="default",variant:w="outline",buttonClassName:D,buttonLabel:O,openRef:j,renderTrigger:I=!0})=>{const{exportAllData:A,isExporting:F}=ce(),[T,p]=c.useState(!1);$.useEffect(()=>{if(j)return j.current={open:()=>p(!0),close:()=>p(!1)},()=>{j.current&&(j.current=null)}},[j]);const[f,B]=c.useState("pdf"),[b,R]=c.useState(P||`dashboard-export-${v(new Date,"yyyy-MM-dd")}`),[k,M]=c.useState(!1),[g,z]=c.useState(),[t,d]=c.useState({sales:!0,sessions:!0,clientConversion:!0,trainerPerformance:!0,lateCancellations:!0,discounts:!0,additional:!0}),V=async()=>{try{const s={...t.sales&&{salesData:o},...t.sessions&&{sessionsData:m},...t.clientConversion&&{newClientData:x},...t.trainerPerformance&&{payrollData:r},...t.lateCancellations&&{lateCancellationsData:h},...t.discounts&&{discountData:u},...t.additional&&{additionalData:i}},a={format:f,fileName:b,includeCharts:k,...g?.from&&g?.to&&{dateRange:{start:g.from.toISOString(),end:g.to.toISOString()}}};await A(s,a),p(!1)}catch{}},y=()=>{let s=0;return t.sales&&(s+=o.length),t.sessions&&(s+=m.length),t.clientConversion&&(s+=x.length),t.trainerPerformance&&(s+=r.length),t.lateCancellations&&(s+=h.length),t.discounts&&(s+=u.length),t.additional&&(s+=Object.values(i).reduce((a,U)=>a+U.length,0)),s};return e.jsxs(q,{open:T,onOpenChange:p,children:[I&&e.jsx(H,{asChild:!0,children:e.jsxs(C,{variant:w,size:L,className:S("gap-2 font-semibold bg-transparent text-base rounded-xl border backdrop-blur-sm transition-all duration-300 ease-out",D),style:{borderColor:"var(--hero-accent, rgba(255,255,255,0.3))"},children:[e.jsx(N,{className:"w-4 h-4"}),O??"Export All Data"]})}),e.jsxs(W,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(G,{children:[e.jsxs(J,{className:"flex items-center gap-2",children:[e.jsx(N,{className:"w-5 h-5"}),"Advanced Data Export"]}),e.jsx(K,{children:"Export comprehensive data from all dashboard sections. Choose your format and customize the export options."})]}),e.jsxs("div",{className:"space-y-6 py-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"format",children:"Export Format"}),e.jsxs(_,{value:f,onValueChange:s=>B(s),children:[e.jsx(ee,{children:e.jsx(se,{placeholder:"Choose format"})}),e.jsxs(te,{children:[e.jsx(E,{value:"pdf",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(oe,{className:"w-4 h-4"}),"PDF Report"]})}),e.jsx(E,{value:"csv",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(re,{className:"w-4 h-4"}),"CSV Spreadsheet"]})})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{htmlFor:"filename",children:"File Name"}),e.jsx(ae,{id:"filename",value:b,onChange:s=>R(s.target.value),placeholder:"Enter file name"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(n,{children:"Date Range Filter (Optional)"}),e.jsx(ie,{value:g,onChange:z,className:"w-full"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(n,{children:"Data Sections to Include"}),e.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"sales",checked:t.sales,onCheckedChange:s=>d(a=>({...a,sales:!!s}))}),e.jsxs(n,{htmlFor:"sales",className:"text-sm",children:["Sales Analytics (",o.length," records)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"sessions",checked:t.sessions,onCheckedChange:s=>d(a=>({...a,sessions:!!s}))}),e.jsxs(n,{htmlFor:"sessions",className:"text-sm",children:["Sessions Data (",m.length," records)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"clientConversion",checked:t.clientConversion,onCheckedChange:s=>d(a=>({...a,clientConversion:!!s}))}),e.jsxs(n,{htmlFor:"clientConversion",className:"text-sm",children:["Client Conversion (",x.length," records)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"trainerPerformance",checked:t.trainerPerformance,onCheckedChange:s=>d(a=>({...a,trainerPerformance:!!s}))}),e.jsxs(n,{htmlFor:"trainerPerformance",className:"text-sm",children:["Trainer Performance (",r.length," records)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"lateCancellations",checked:t.lateCancellations,onCheckedChange:s=>d(a=>({...a,lateCancellations:!!s}))}),e.jsxs(n,{htmlFor:"lateCancellations",className:"text-sm",children:["Late Cancellations (",h.length," records)"]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"discounts",checked:t.discounts,onCheckedChange:s=>d(a=>({...a,discounts:!!s}))}),e.jsxs(n,{htmlFor:"discounts",className:"text-sm",children:["Discounts & Promotions (",u.length," records)"]})]}),Object.keys(i).length>0&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"additional",checked:t.additional,onCheckedChange:s=>d(a=>({...a,additional:!!s}))}),e.jsxs(n,{htmlFor:"additional",className:"text-sm",children:["Additional Data (",Object.values(i).reduce((s,a)=>s+a.length,0)," records)"]})]})]})]}),f==="pdf"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(l,{id:"charts",checked:k,onCheckedChange:s=>M(!!s)}),e.jsx(n,{htmlFor:"charts",className:"text-sm",children:"Include charts and visualizations (PDF only)"})]}),e.jsx("div",{className:"p-4 bg-muted rounded-lg",children:e.jsxs("div",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Export Summary:"}),e.jsx("br",{}),"Format: ",f.toUpperCase(),e.jsx("br",{}),"Total Records: ",y().toLocaleString(),e.jsx("br",{}),"Sections: ",Object.values(t).filter(Boolean).length," selected"]})})]}),e.jsxs("div",{className:"flex justify-end gap-2 pt-4 border-t",children:[e.jsx(C,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsx(C,{onClick:V,disabled:F||y()===0,className:"gap-2",children:F?e.jsxs(e.Fragment,{children:[e.jsx(le,{size:"xs"}),"Exporting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(N,{className:"w-4 h-4"}),"Export ",f.toUpperCase()]})})]})]})]})};export{Ce as A};
//# sourceMappingURL=AdvancedExportButton-kiFhlv4f.js.map
