import{r as j,j as e,D as A,n as S,o as M,q as B,B as O,X as U,C as r,c as n,a as g,b as N}from"./index-Bm67KBkU.js";import{a as x,b as o,f as p,B as m}from"./index-DkD_C-d1.js";import{T as H,a as L,b,c as f}from"./tabs-BTrhdLSC.js";import{T as z,a as E,b as T,c as i,d as q,e as d}from"./table-DhXofKdS.js";import{A as V}from"./activity-CeUP9h5f.js";import{C as W}from"./googleAuth-BGo8ElRc.js";import{U as u}from"./users-7Ku-1TDB.js";import{T as X}from"./target-BmxdxojS.js";import{D as G,C as k}from"./dollar-sign-CKqx8kbC.js";import{M as w}from"./StudioLocationTabs-BSKYatd_.js";import{C}from"./clock-BP1BFskn.js";import"./SalesMotionHero-sGphstF2.js";const re=({isOpen:I,onClose:y,classFormat:v,sessionsData:R,overallStats:h})=>{const c=j.useMemo(()=>R.filter(t=>(t.cleanedClass||t.classType)===v).sort((t,s)=>new Date(s.date).getTime()-new Date(t.date).getTime()),[R,v]),F=j.useMemo(()=>{const t=c.reduce((s,l)=>{const a=l.location||"Unknown";return s[a]||(s[a]={location:a,sessions:0,totalCapacity:0,totalCheckedIn:0,totalRevenue:0,avgFillRate:0}),s[a].sessions+=1,s[a].totalCapacity+=l.capacity||0,s[a].totalCheckedIn+=l.checkedInCount||0,s[a].totalRevenue+=l.totalPaid||0,s},{});return Object.values(t).map(s=>({...s,avgFillRate:s.totalCapacity>0?s.totalCheckedIn/s.totalCapacity*100:0}))},[c]),D=j.useMemo(()=>{const t=c.reduce((s,l)=>{const a=l.trainerName||"Unknown";return s[a]||(s[a]={trainer:a,sessions:0,totalCapacity:0,totalCheckedIn:0,totalRevenue:0,avgFillRate:0}),s[a].sessions+=1,s[a].totalCapacity+=l.capacity||0,s[a].totalCheckedIn+=l.checkedInCount||0,s[a].totalRevenue+=l.totalPaid||0,s},{});return Object.values(t).map(s=>({...s,avgFillRate:s.totalCapacity>0?s.totalCheckedIn/s.totalCapacity*100:0})).sort((s,l)=>l.sessions-s.sessions)},[c]),P=j.useMemo(()=>{const t=c.reduce((s,l)=>{const a=l.time||"Unknown";return s[a]||(s[a]={timeSlot:a,sessions:0,totalCapacity:0,totalCheckedIn:0,totalRevenue:0,avgFillRate:0}),s[a].sessions+=1,s[a].totalCapacity+=l.capacity||0,s[a].totalCheckedIn+=l.checkedInCount||0,s[a].totalRevenue+=l.totalPaid||0,s},{});return Object.values(t).map(s=>({...s,avgFillRate:s.totalCapacity>0?s.totalCheckedIn/s.totalCapacity*100:0})).sort((s,l)=>s.timeSlot.localeCompare(l.timeSlot))},[c]);return e.jsx(A,{open:I,onOpenChange:y,children:e.jsxs(S,{className:"max-w-6xl max-h-[90vh] overflow-hidden flex flex-col bg-gradient-to-br from-white to-slate-50/50",children:[e.jsx(M,{className:"border-b border-slate-200/60 pb-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 rounded-xl bg-gradient-to-br from-blue-600 to-purple-600",children:e.jsx(V,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{children:[e.jsxs(B,{className:"text-2xl font-bold text-slate-800",children:[v," - Deep Dive Analysis"]}),e.jsx("p",{className:"text-slate-600 mt-1",children:"Detailed performance insights and session breakdown"})]})]}),e.jsx(O,{variant:"ghost",size:"sm",onClick:y,className:"rounded-full p-2 hover:bg-slate-100",children:e.jsx(U,{className:"w-4 h-4"})})]})}),e.jsx("div",{className:"flex-1 overflow-auto",children:e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(r,{className:"bg-gradient-to-br from-blue-50 to-blue-100/50 border-blue-200/60",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-blue-600 rounded-lg",children:e.jsx(W,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-blue-700 font-medium",children:"Total Sessions"}),e.jsx("p",{className:"text-2xl font-bold text-blue-900",children:x(h.totalSessions)})]})]})})}),e.jsx(r,{className:"bg-gradient-to-br from-green-50 to-green-100/50 border-green-200/60",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-600 rounded-lg",children:e.jsx(u,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-green-700 font-medium",children:"Attendance"}),e.jsx("p",{className:"text-2xl font-bold text-green-900",children:x(h.totalCheckedIn)})]})]})})}),e.jsx(r,{className:"bg-gradient-to-br from-purple-50 to-purple-100/50 border-purple-200/60",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-600 rounded-lg",children:e.jsx(X,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-purple-700 font-medium",children:"Fill Rate"}),e.jsx("p",{className:"text-2xl font-bold text-purple-900",children:o(h.fillRate)})]})]})})}),e.jsx(r,{className:"bg-gradient-to-br from-orange-50 to-orange-100/50 border-orange-200/60",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-600 rounded-lg",children:e.jsx(G,{className:"w-4 h-4 text-white"})}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-orange-700 font-medium",children:"Total Revenue"}),e.jsx("p",{className:"text-2xl font-bold text-orange-900",children:p(h.totalRevenue)})]})]})})})]}),e.jsxs(H,{defaultValue:"sessions",className:"space-y-6",children:[e.jsxs(L,{className:"grid w-full grid-cols-4 bg-white/60 backdrop-blur-sm border border-slate-200/60",children:[e.jsxs(b,{value:"sessions",className:"flex items-center gap-2",children:[e.jsx(k,{className:"w-4 h-4"}),"Sessions"]}),e.jsxs(b,{value:"locations",className:"flex items-center gap-2",children:[e.jsx(w,{className:"w-4 h-4"}),"Locations"]}),e.jsxs(b,{value:"trainers",className:"flex items-center gap-2",children:[e.jsx(u,{className:"w-4 h-4"}),"Trainers"]}),e.jsxs(b,{value:"timeslots",className:"flex items-center gap-2",children:[e.jsx(C,{className:"w-4 h-4"}),"Time Slots"]})]}),e.jsx(f,{value:"sessions",className:"space-y-4",children:e.jsxs(r,{className:"shadow-lg border-0",children:[e.jsx(g,{className:"bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-200/60",children:e.jsxs(N,{className:"flex items-center gap-2 text-slate-800",children:[e.jsx(k,{className:"w-5 h-5 text-blue-600"}),"Individual Session Details",e.jsxs(m,{variant:"outline",className:"text-blue-600",children:[c.length," sessions"]})]})}),e.jsx(n,{className:"p-0",children:e.jsxs("div",{className:"max-h-96 overflow-auto",children:[e.jsxs(z,{children:[e.jsx(E,{className:"sticky top-0 z-10",children:e.jsxs(T,{className:"bg-gradient-to-r from-slate-800 via-slate-900 to-slate-800",children:[e.jsx(i,{className:"font-semibold text-slate-100",children:"Date"}),e.jsx(i,{className:"font-semibold text-slate-100",children:"Time"}),e.jsx(i,{className:"font-semibold text-slate-100",children:"Trainer"}),e.jsx(i,{className:"font-semibold text-slate-100",children:"Location"}),e.jsx(i,{className:"text-center font-semibold text-slate-100",children:"Capacity"}),e.jsx(i,{className:"text-center font-semibold text-slate-100",children:"Checked In"}),e.jsx(i,{className:"text-center font-semibold text-slate-100",children:"Fill Rate"}),e.jsx(i,{className:"text-center font-semibold text-slate-100",children:"Revenue"})]})}),e.jsx(q,{children:c.slice(0,50).map((t,s)=>e.jsxs(T,{className:"compact-table-row hover:bg-gray-50 transition-colors",children:[e.jsx(d,{className:"font-medium",children:e.jsxs("div",{children:[e.jsx("div",{className:"text-slate-900",children:t.date}),e.jsx("div",{className:"text-xs text-slate-500",children:t.dayOfWeek})]})}),e.jsx(d,{children:e.jsx(m,{variant:"outline",className:"text-slate-700",children:t.time})}),e.jsx(d,{children:t.trainerName}),e.jsx(d,{className:"text-sm text-slate-600",children:t.location}),e.jsx(d,{className:"text-center font-medium",children:t.capacity}),e.jsx(d,{className:"text-center font-medium",children:t.checkedInCount}),e.jsx(d,{className:"text-center",children:e.jsx(m,{className:(t.fillPercentage||0)>=80?"bg-green-100 text-green-800":(t.fillPercentage||0)>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:o(t.fillPercentage||0)})}),e.jsx(d,{className:"text-center font-medium text-green-700",children:x(t.totalPaid||0)})]},s))})]}),c.length>50&&e.jsxs("div",{className:"p-4 text-center text-slate-500 border-t",children:["Showing first 50 sessions of ",c.length," total"]})]})})]})}),e.jsx(f,{value:"locations",className:"space-y-4",children:e.jsxs(r,{className:"shadow-lg border-0",children:[e.jsx(g,{className:"bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-200/60",children:e.jsxs(N,{className:"flex items-center gap-2 text-slate-800",children:[e.jsx(w,{className:"w-5 h-5 text-green-600"}),"Performance by Location"]})}),e.jsx(n,{className:"p-6",children:e.jsx("div",{className:"grid gap-4",children:F.map((t,s)=>e.jsx(r,{className:"bg-gradient-to-r from-white to-green-50/30 border border-green-100",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-green-100 rounded-lg",children:e.jsx(w,{className:"w-4 h-4 text-green-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-800",children:t.location}),e.jsxs("p",{className:"text-sm text-slate-600",children:[t.sessions," sessions"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-slate-700",children:x(t.totalCheckedIn)}),e.jsx("p",{className:"text-xs text-slate-500",children:"Attendance"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(m,{className:t.avgFillRate>=80?"bg-green-100 text-green-800":t.avgFillRate>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:o(t.avgFillRate)}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Fill Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-green-600",children:p(t.totalRevenue)}),e.jsx("p",{className:"text-xs text-slate-500",children:"Revenue"})]})]})]})})},s))})})]})}),e.jsx(f,{value:"trainers",className:"space-y-4",children:e.jsxs(r,{className:"shadow-lg border-0",children:[e.jsx(g,{className:"bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-200/60",children:e.jsxs(N,{className:"flex items-center gap-2 text-slate-800",children:[e.jsx(u,{className:"w-5 h-5 text-purple-600"}),"Performance by Trainer"]})}),e.jsx(n,{className:"p-6",children:e.jsx("div",{className:"grid gap-4",children:D.map((t,s)=>e.jsx(r,{className:"bg-gradient-to-r from-white to-purple-50/30 border border-purple-100",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-purple-100 rounded-lg",children:e.jsx(u,{className:"w-4 h-4 text-purple-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-800",children:t.trainer}),e.jsxs("p",{className:"text-sm text-slate-600",children:[t.sessions," sessions"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-slate-700",children:x(t.totalCheckedIn)}),e.jsx("p",{className:"text-xs text-slate-500",children:"Attendance"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(m,{className:t.avgFillRate>=80?"bg-green-100 text-green-800":t.avgFillRate>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:o(t.avgFillRate)}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Fill Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-purple-600",children:p(t.totalRevenue)}),e.jsx("p",{className:"text-xs text-slate-500",children:"Revenue"})]})]})]})})},s))})})]})}),e.jsx(f,{value:"timeslots",className:"space-y-4",children:e.jsxs(r,{className:"shadow-lg border-0",children:[e.jsx(g,{className:"bg-gradient-to-r from-slate-50 to-slate-100/50 border-b border-slate-200/60",children:e.jsxs(N,{className:"flex items-center gap-2 text-slate-800",children:[e.jsx(C,{className:"w-5 h-5 text-orange-600"}),"Performance by Time Slot"]})}),e.jsx(n,{className:"p-6",children:e.jsx("div",{className:"grid gap-4",children:P.map((t,s)=>e.jsx(r,{className:"bg-gradient-to-r from-white to-orange-50/30 border border-orange-100",children:e.jsx(n,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-orange-100 rounded-lg",children:e.jsx(C,{className:"w-4 h-4 text-orange-600"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-slate-800",children:t.timeSlot}),e.jsxs("p",{className:"text-sm text-slate-600",children:[t.sessions," sessions"]})]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-slate-700",children:x(t.totalCheckedIn)}),e.jsx("p",{className:"text-xs text-slate-500",children:"Attendance"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(m,{className:t.avgFillRate>=80?"bg-green-100 text-green-800":t.avgFillRate>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800",children:o(t.avgFillRate)}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Fill Rate"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"font-medium text-orange-600",children:p(t.totalRevenue)}),e.jsx("p",{className:"text-xs text-slate-500",children:"Revenue"})]})]})]})})},s))})})]})})]})]})})]})})};export{re as ClassAttendanceDrillDownModal};
//# sourceMappingURL=ClassAttendanceDrillDownModal-DwJ_FITe.js.map
