{"version":3,"file":"ExpirationAnalytics-Dj3jcMQI.js","sources":["../../src/components/dashboard/ExpirationChartsGrid.tsx","../../src/components/dashboard/ExpirationAdditionalAnalytics.tsx","../../src/components/dashboard/ChurnedMembersDetailedTable.tsx","../../src/components/dashboard/ExpirationAnalyticsSection.tsx","../../src/pages/ExpirationAnalytics.tsx"],"sourcesContent":["import React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Legend, PieChart, Pie, Cell, LineChart, Line, AreaChart, Area } from 'recharts';\nimport { ExpirationData } from '@/types/dashboard';\nimport { formatNumber } from '@/utils/formatters';\n\ninterface ExpirationChartsGridProps {\n  data: ExpirationData[];\n}\n\nconst COLORS = ['#6366f1', '#8b5cf6', '#ec4899', '#f59e0b', '#10b981', '#ef4444', '#06b6d4', '#84cc16'];\n\nexport const ExpirationChartsGrid: React.FC<ExpirationChartsGridProps> = ({ data }) => {\n  // Chart 1: Status Distribution\n  const statusData = data.reduce((acc, item) => {\n    const status = item.status || 'Unknown';\n    acc[status] = (acc[status] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n\n  const statusChartData = Object.entries(statusData).map(([name, value]) => ({ name, value }));\n\n  // Chart 2: Membership Types Distribution\n  const membershipData = data.reduce((acc, item) => {\n    const type = item.membershipName || 'Unknown';\n    acc[type] = (acc[type] || 0) + 1;\n    return acc;\n  }, {} as Record<string, number>);\n\n  const membershipChartData = Object.entries(membershipData)\n    .map(([name, value]) => ({ name: name.length > 20 ? name.substring(0, 20) + '...' : name, value }))\n    .sort((a, b) => b.value - a.value)\n    .slice(0, 8);\n\n  // Chart 3: Monthly Expiration Trend (simulated data based on end dates)\n  const monthlyData = data.reduce((acc, item) => {\n    if (item.endDate) {\n      const month = new Date(item.endDate).toLocaleDateString('en-US', { month: 'short', year: '2-digit' });\n      acc[month] = (acc[month] || 0) + 1;\n    }\n    return acc;\n  }, {} as Record<string, number>);\n\n  const trendData = Object.entries(monthlyData)\n    .map(([month, count]) => ({ month, count }))\n    .sort((a, b) => a.month.localeCompare(b.month))\n    .slice(0, 12);\n\n  // Chart 4: Location vs Status Analysis\n  const locationStatusData = data.reduce((acc, item) => {\n    const location = item.homeLocation || 'Unknown';\n    const status = item.status || 'Unknown';\n    \n    if (!acc[location]) acc[location] = {};\n    acc[location][status] = (acc[location][status] || 0) + 1;\n    return acc;\n  }, {} as Record<string, Record<string, number>>);\n\n  const locationChartData = Object.entries(locationStatusData).map(([location, statuses]) => ({\n    location: location.length > 15 ? location.substring(0, 15) + '...' : location,\n    ...statuses\n  }));\n\n  return (\n    <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8\">\n      {/* Chart 1: Status Distribution */}\n      <Card className=\"bg-white/70 backdrop-blur-lg border-gray-200/80 shadow-lg rounded-2xl hover:shadow-xl transition-all duration-300\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-lg font-semibold bg-gradient-to-r from-slate-700 to-slate-500 bg-clip-text text-transparent flex items-center gap-2\">\n            <div className=\"w-2 h-2 bg-gradient-to-r from-blue-500 to-purple-500 rounded-full\"></div>\n            Membership Status Distribution\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <PieChart>\n              <Pie\n                data={statusChartData}\n                cx=\"50%\"\n                cy=\"50%\"\n                labelLine={false}\n                label={({ name, percent }) => `${name} ${(percent * 100).toFixed(1)}%`}\n                outerRadius={80}\n                fill=\"#8884d8\"\n                dataKey=\"value\"\n              >\n                {statusChartData.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                ))}\n              </Pie>\n              <Tooltip formatter={(value) => [formatNumber(value as number), 'Count']} />\n            </PieChart>\n          </ResponsiveContainer>\n        </CardContent>\n      </Card>\n\n      {/* Chart 2: Top Membership Types */}\n      <Card className=\"bg-white/70 backdrop-blur-lg border-gray-200/80 shadow-lg rounded-2xl hover:shadow-xl transition-all duration-300\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-lg font-semibold bg-gradient-to-r from-slate-700 to-slate-500 bg-clip-text text-transparent flex items-center gap-2\">\n            <div className=\"w-2 h-2 bg-gradient-to-r from-green-500 to-blue-500 rounded-full\"></div>\n            Top Membership Types\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <BarChart data={membershipChartData} layout=\"horizontal\">\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis type=\"number\" />\n              <YAxis dataKey=\"name\" type=\"category\" width={100} />\n              <Tooltip formatter={(value) => [formatNumber(value as number), 'Members']} />\n              <Bar dataKey=\"value\" fill=\"#6366f1\" />\n            </BarChart>\n          </ResponsiveContainer>\n        </CardContent>\n      </Card>\n\n      {/* Chart 3: Monthly Expiration Trend */}\n      <Card className=\"bg-white/70 backdrop-blur-lg border-gray-200/80 shadow-lg rounded-2xl hover:shadow-xl transition-all duration-300\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-lg font-semibold bg-gradient-to-r from-slate-700 to-slate-500 bg-clip-text text-transparent flex items-center gap-2\">\n            <div className=\"w-2 h-2 bg-gradient-to-r from-purple-500 to-pink-500 rounded-full\"></div>\n            Monthly Expiration Trend\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <AreaChart data={trendData}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"month\" />\n              <YAxis />\n              <Tooltip formatter={(value) => [formatNumber(value as number), 'Expirations']} />\n              <Area type=\"monotone\" dataKey=\"count\" stroke=\"#8b5cf6\" fill=\"#8b5cf6\" fillOpacity={0.3} />\n            </AreaChart>\n          </ResponsiveContainer>\n        </CardContent>\n      </Card>\n\n      {/* Chart 4: Location vs Status */}\n      <Card className=\"bg-white/70 backdrop-blur-lg border-gray-200/80 shadow-lg rounded-2xl hover:shadow-xl transition-all duration-300\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-lg font-semibold bg-gradient-to-r from-slate-700 to-slate-500 bg-clip-text text-transparent flex items-center gap-2\">\n            <div className=\"w-2 h-2 bg-gradient-to-r from-orange-500 to-red-500 rounded-full\"></div>\n            Status by Location\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <ResponsiveContainer width=\"100%\" height={300}>\n            <BarChart data={locationChartData}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"location\" />\n              <YAxis />\n              <Tooltip />\n              <Legend />\n              <Bar dataKey=\"Active\" stackId=\"a\" fill=\"#10b981\" />\n              <Bar dataKey=\"Churned\" stackId=\"a\" fill=\"#ef4444\" />\n              <Bar dataKey=\"Frozen\" stackId=\"a\" fill=\"#f59e0b\" />\n            </BarChart>\n          </ResponsiveContainer>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};","import React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { ResponsiveContainer, AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip, BarChart, Bar, Legend } from 'recharts';\nimport { ExpirationData } from '@/types/dashboard';\nimport { formatNumber, formatPercentage } from '@/utils/formatters';\nimport { format, parseISO } from 'date-fns';\n\ninterface ExpirationAdditionalAnalyticsProps {\n  data: ExpirationData[];\n}\n\nexport const ExpirationAdditionalAnalytics: React.FC<ExpirationAdditionalAnalyticsProps> = ({ data }) => {\n  // Location Performance Analysis\n  const locationAnalysis = data.reduce((acc, item) => {\n    const location = item.homeLocation || 'Unknown';\n    if (!acc[location]) {\n      acc[location] = { name: location, total: 0, active: 0, churned: 0, frozen: 0, churnRate: 0 };\n    }\n    acc[location].total++;\n    if (item.status === 'Active') acc[location].active++;\n    if (item.status === 'Churned') acc[location].churned++;\n    if (item.status === 'Frozen') acc[location].frozen++;\n    return acc;\n  }, {} as Record<string, { name: string; total: number; active: number; churned: number; frozen: number; churnRate: number }>);\n\n  // Calculate churn rates\n  Object.values(locationAnalysis).forEach(location => {\n    location.churnRate = location.total > 0 ? (location.churned / location.total) * 100 : 0;\n  });\n\n  const locationData = Object.values(locationAnalysis).sort((a, b) => b.total - a.total);\n\n  // Sales Rep Performance\n  const salesRepAnalysis = data.reduce((acc, item) => {\n    const rep = item.soldBy || 'Unknown';\n    if (!acc[rep]) {\n      acc[rep] = { name: rep, total: 0, active: 0, churned: 0, frozen: 0, churnRate: 0 };\n    }\n    acc[rep].total++;\n    if (item.status === 'Active') acc[rep].active++;\n    if (item.status === 'Churned') acc[rep].churned++;\n    if (item.status === 'Frozen') acc[rep].frozen++;\n    return acc;\n  }, {} as Record<string, { name: string; total: number; active: number; churned: number; frozen: number; churnRate: number }>);\n\n  // Calculate churn rates for sales reps\n  Object.values(salesRepAnalysis).forEach(rep => {\n    rep.churnRate = rep.total > 0 ? (rep.churned / rep.total) * 100 : 0;\n  });\n\n  const topSalesReps = Object.values(salesRepAnalysis)\n    .filter(rep => rep.name !== 'Unknown' && rep.name !== '-')\n    .sort((a, b) => b.total - a.total)\n    .slice(0, 10);\n\n  // Monthly Trend Analysis (based on end dates)\n  const monthlyTrend = data.reduce((acc, item) => {\n    if (item.endDate) {\n      try {\n        const date = new Date(item.endDate);\n        const monthYear = format(date, 'MMM yyyy');\n        if (!acc[monthYear]) {\n          acc[monthYear] = { month: monthYear, active: 0, churned: 0, frozen: 0, total: 0 };\n        }\n        acc[monthYear].total++;\n        if (item.status === 'Active') acc[monthYear].active++;\n        if (item.status === 'Churned') acc[monthYear].churned++;\n        if (item.status === 'Frozen') acc[monthYear].frozen++;\n      } catch (error) {\n        // Skip invalid dates\n      }\n    }\n    return acc;\n  }, {} as Record<string, { month: string; active: number; churned: number; frozen: number; total: number }>);\n\n  const trendData = Object.values(monthlyTrend)\n    .sort((a, b) => new Date(a.month).getTime() - new Date(b.month).getTime())\n    .slice(-12); // Last 12 months\n\n  // High Value vs Low Value Analysis (based on paid amount)\n  const valueAnalysis = data.reduce((acc, item) => {\n    const paidAmount = parseFloat(item.paid) || 0;\n    const category = paidAmount >= 10000 ? 'High Value (â‚¹10K+)' : paidAmount >= 5000 ? 'Medium Value (â‚¹5K-10K)' : 'Low Value (<â‚¹5K)';\n    \n    if (!acc[category]) {\n      acc[category] = { category, total: 0, active: 0, churned: 0, frozen: 0, churnRate: 0 };\n    }\n    acc[category].total++;\n    if (item.status === 'Active') acc[category].active++;\n    if (item.status === 'Churned') acc[category].churned++;\n    if (item.status === 'Frozen') acc[category].frozen++;\n    return acc;\n  }, {} as Record<string, { category: string; total: number; active: number; churned: number; frozen: number; churnRate: number }>);\n\n  Object.values(valueAnalysis).forEach(segment => {\n    segment.churnRate = segment.total > 0 ? (segment.churned / segment.total) * 100 : 0;\n  });\n\n  const valueSegments = Object.values(valueAnalysis);\n\n  const getChurnRateColor = (rate: number) => {\n    if (rate >= 50) return 'text-red-600';\n    if (rate >= 30) return 'text-yellow-600';\n    return 'text-green-600';\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Location Performance */}\n      <Card className=\"bg-white/70 backdrop-blur-lg border-gray-200/80 shadow-lg rounded-2xl\">\n        <CardHeader>\n          <CardTitle className=\"text-lg font-semibold bg-gradient-to-r from-slate-700 to-slate-500 bg-clip-text text-transparent\">\n            Location Performance Analysis\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Location Chart */}\n            <div>\n              <ResponsiveContainer width=\"100%\" height={300}>\n                <BarChart data={locationData}>\n                  <CartesianGrid strokeDasharray=\"3 3\" />\n                  <XAxis \n                    dataKey=\"name\" \n                    angle={-45}\n                    textAnchor=\"end\"\n                    height={100}\n                    fontSize={12}\n                  />\n                  <YAxis />\n                  <Tooltip />\n                  <Legend />\n                  <Bar dataKey=\"active\" stackId=\"a\" fill=\"#10b981\" name=\"Active\" />\n                  <Bar dataKey=\"frozen\" stackId=\"a\" fill=\"#f59e0b\" name=\"Frozen\" />\n                  <Bar dataKey=\"churned\" stackId=\"a\" fill=\"#ef4444\" name=\"Churned\" />\n                </BarChart>\n              </ResponsiveContainer>\n            </div>\n\n            {/* Location Stats Table */}\n            <div className=\"overflow-x-auto\">\n              <table className=\"w-full text-sm\">\n                <thead>\n                  <tr className=\"border-b border-slate-200\">\n                    <th className=\"text-left py-2 px-3 font-medium text-slate-700\">Location</th>\n                    <th className=\"text-center py-2 px-3 font-medium text-slate-700\">Total</th>\n                    <th className=\"text-center py-2 px-3 font-medium text-slate-700\">Churn Rate</th>\n                  </tr>\n                </thead>\n                <tbody>\n                  {locationData.map((location, index) => (\n                    <tr key={index} className=\"border-b border-slate-100 hover:bg-slate-50/50\">\n                      <td className=\"py-2 px-3 font-medium text-xs\">{location.name}</td>\n                      <td className=\"py-2 px-3 text-center\">{formatNumber(location.total)}</td>\n                      <td className={`py-2 px-3 text-center font-medium ${getChurnRateColor(location.churnRate)}`}>\n                        {formatPercentage(location.churnRate)}\n                      </td>\n                    </tr>\n                  ))}\n                </tbody>\n              </table>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Sales Rep Performance */}\n      <Card className=\"bg-white/70 backdrop-blur-lg border-gray-200/80 shadow-lg rounded-2xl\">\n        <CardHeader>\n          <CardTitle className=\"text-lg font-semibold bg-gradient-to-r from-slate-700 to-slate-500 bg-clip-text text-transparent\">\n            Top Sales Representatives by Membership Volume\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"overflow-x-auto\">\n            <table className=\"w-full text-sm\">\n              <thead>\n                <tr className=\"border-b border-slate-200\">\n                  <th className=\"text-left py-2 px-3 font-medium text-slate-700\">Sales Rep</th>\n                  <th className=\"text-center py-2 px-3 font-medium text-slate-700\">Total Sold</th>\n                  <th className=\"text-center py-2 px-3 font-medium text-green-600\">Active</th>\n                  <th className=\"text-center py-2 px-3 font-medium text-yellow-600\">Frozen</th>\n                  <th className=\"text-center py-2 px-3 font-medium text-red-600\">Churned</th>\n                  <th className=\"text-center py-2 px-3 font-medium text-slate-700\">Churn Rate</th>\n                </tr>\n              </thead>\n              <tbody>\n                {topSalesReps.map((rep, index) => (\n                  <tr key={index} className=\"border-b border-slate-100 hover:bg-slate-50/50\">\n                    <td className=\"py-2 px-3 font-medium text-xs\">{rep.name}</td>\n                    <td className=\"py-2 px-3 text-center font-medium\">{formatNumber(rep.total)}</td>\n                    <td className=\"py-2 px-3 text-center text-green-600\">{formatNumber(rep.active)}</td>\n                    <td className=\"py-2 px-3 text-center text-yellow-600\">{formatNumber(rep.frozen)}</td>\n                    <td className=\"py-2 px-3 text-center text-red-600\">{formatNumber(rep.churned)}</td>\n                    <td className={`py-2 px-3 text-center font-medium ${getChurnRateColor(rep.churnRate)}`}>\n                      {formatPercentage(rep.churnRate)}\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Monthly Trend & Value Segment Analysis */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Monthly Trend */}\n        <Card className=\"bg-white/70 backdrop-blur-lg border-gray-200/80 shadow-lg rounded-2xl\">\n          <CardHeader>\n            <CardTitle className=\"text-lg font-semibold bg-gradient-to-r from-slate-700 to-slate-500 bg-clip-text text-transparent\">\n              Monthly Status Trend\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <AreaChart data={trendData}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"month\" fontSize={12} />\n                <YAxis />\n                <Tooltip />\n                <Area type=\"monotone\" dataKey=\"churned\" stackId=\"1\" stroke=\"#ef4444\" fill=\"#ef4444\" />\n                <Area type=\"monotone\" dataKey=\"frozen\" stackId=\"1\" stroke=\"#f59e0b\" fill=\"#f59e0b\" />\n                <Area type=\"monotone\" dataKey=\"active\" stackId=\"1\" stroke=\"#10b981\" fill=\"#10b981\" />\n              </AreaChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        {/* Value Segment Analysis */}\n        <Card className=\"bg-white/70 backdrop-blur-lg border-gray-200/80 shadow-lg rounded-2xl\">\n          <CardHeader>\n            <CardTitle className=\"text-lg font-semibold bg-gradient-to-r from-slate-700 to-slate-500 bg-clip-text text-transparent\">\n              Value Segment Performance\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"space-y-4\">\n              {valueSegments.map((segment, index) => (\n                <div key={index} className=\"p-4 bg-slate-50/50 rounded-lg\">\n                  <div className=\"flex justify-between items-center mb-2\">\n                    <h4 className=\"font-medium text-slate-700\">{segment.category}</h4>\n                    <Badge variant=\"outline\" className={`${getChurnRateColor(segment.churnRate)} border-current`}>\n                      {formatPercentage(segment.churnRate)} Churn\n                    </Badge>\n                  </div>\n                  <div className=\"grid grid-cols-4 gap-2 text-sm\">\n                    <div className=\"text-center\">\n                      <div className=\"text-xs text-slate-500\">Total</div>\n                      <div className=\"font-medium\">{formatNumber(segment.total)}</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-xs text-green-600\">Active</div>\n                      <div className=\"font-medium text-green-600\">{formatNumber(segment.active)}</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-xs text-yellow-600\">Frozen</div>\n                      <div className=\"font-medium text-yellow-600\">{formatNumber(segment.frozen)}</div>\n                    </div>\n                    <div className=\"text-center\">\n                      <div className=\"text-xs text-red-600\">Churned</div>\n                      <div className=\"font-medium text-red-600\">{formatNumber(segment.churned)}</div>\n                    </div>\n                  </div>\n                </div>\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n    </div>\n  );\n};","import React, { useState, useMemo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { ExpirationData } from '@/types/dashboard';\nimport { formatNumber, formatCurrency } from '@/utils/formatters';\nimport { Search, SortAsc, SortDesc, Users, AlertTriangle, Calendar, MapPin, DollarSign } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface ChurnedMembersDetailedTableProps {\n  data: ExpirationData[];\n  onRowClick?: (item: ExpirationData) => void;\n}\n\ntype SortField = 'firstName' | 'membershipName' | 'endDate' | 'homeLocation' | 'paid' | 'soldBy';\ntype SortDirection = 'asc' | 'desc';\n\nexport const ChurnedMembersDetailedTable: React.FC<ChurnedMembersDetailedTableProps> = ({ \n  data, \n  onRowClick \n}) => {\n  const [searchTerm, setSearchTerm] = useState('');\n  const [sortField, setSortField] = useState<SortField>('endDate');\n  const [sortDirection, setSortDirection] = useState<SortDirection>('desc');\n  const [locationFilter, setLocationFilter] = useState('all');\n  const [membershipFilter, setMembershipFilter] = useState('all');\n\n  // Filter for churned members only\n  const churnedData = useMemo(() => {\n    return data.filter(item => item.status === 'Churned');\n  }, [data]);\n\n  // Get unique values for filters\n  const uniqueLocations = useMemo(() => {\n    const locations = new Set(churnedData.map(item => item.homeLocation).filter(Boolean));\n    return Array.from(locations);\n  }, [churnedData]);\n\n  const uniqueMemberships = useMemo(() => {\n    const memberships = new Set(churnedData.map(item => item.membershipName).filter(Boolean));\n    return Array.from(memberships);\n  }, [churnedData]);\n\n  // Handle sorting\n  const handleSort = (field: SortField) => {\n    if (sortField === field) {\n      setSortDirection(sortDirection === 'asc' ? 'desc' : 'asc');\n    } else {\n      setSortField(field);\n      setSortDirection('asc');\n    }\n  };\n\n  // Filter and sort data\n  const filteredAndSortedData = useMemo(() => {\n    return churnedData\n      .filter(item => {\n        const searchLower = searchTerm.toLowerCase();\n        const matchesSearch = (\n          item.firstName?.toLowerCase().includes(searchLower) ||\n          item.lastName?.toLowerCase().includes(searchLower) ||\n          item.email?.toLowerCase().includes(searchLower) ||\n          item.membershipName?.toLowerCase().includes(searchLower) ||\n          item.soldBy?.toLowerCase().includes(searchLower)\n        );\n\n        const matchesLocation = locationFilter === 'all' || item.homeLocation === locationFilter;\n        const matchesMembership = membershipFilter === 'all' || item.membershipName === membershipFilter;\n\n        return matchesSearch && matchesLocation && matchesMembership;\n      })\n      .sort((a, b) => {\n        let aVal: any = a[sortField] || '';\n        let bVal: any = b[sortField] || '';\n        \n        // Handle different data types\n        if (sortField === 'endDate') {\n          aVal = new Date(aVal);\n          bVal = new Date(bVal);\n        } else if (sortField === 'paid') {\n          aVal = parseFloat(aVal?.toString().replace(/[^0-9.-]/g, '') || '0');\n          bVal = parseFloat(bVal?.toString().replace(/[^0-9.-]/g, '') || '0');\n        }\n\n        const multiplier = sortDirection === 'asc' ? 1 : -1;\n        \n        if (aVal < bVal) return -1 * multiplier;\n        if (aVal > bVal) return 1 * multiplier;\n        return 0;\n      });\n  }, [churnedData, searchTerm, sortField, sortDirection, locationFilter, membershipFilter]);\n\n  // Calculate summary stats\n  const summaryStats = useMemo(() => {\n    const totalRevenueLoss = filteredAndSortedData.reduce((sum, member) => {\n      const paid = parseFloat(member.paid?.toString().replace(/[^0-9.-]/g, '') || '0');\n      return sum + (isNaN(paid) ? 0 : paid);\n    }, 0);\n\n    const membershipBreakdown = filteredAndSortedData.reduce((acc, member) => {\n      const membership = member.membershipName || 'Unknown';\n      acc[membership] = (acc[membership] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n    return {\n      totalCount: filteredAndSortedData.length,\n      totalRevenueLoss,\n      membershipBreakdown\n    };\n  }, [filteredAndSortedData]);\n\n  const SortButton = ({ field, children }: { field: SortField; children: React.ReactNode }) => (\n    <Button\n      variant=\"ghost\"\n      size=\"sm\"\n      onClick={() => handleSort(field)}\n      className=\"h-auto p-1 font-medium text-white hover:text-gray-200 hover:bg-white/10\"\n    >\n      {children}\n      {sortField === field && (\n        sortDirection === 'asc' ? <SortAsc className=\"ml-1 h-3 w-3\" /> : <SortDesc className=\"ml-1 h-3 w-3\" />\n      )}\n    </Button>\n  );\n\n  const formatPaidAmount = (paid: string) => {\n    if (!paid || paid === '-') return '-';\n    const amount = parseFloat(paid.toString().replace(/[^0-9.-]/g, '') || '0');\n    return isNaN(amount) ? '-' : formatCurrency(amount);\n  };\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Summary Cards */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n        <Card className=\"bg-gradient-to-r from-red-500 to-red-600 text-white border-0 shadow-lg\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <AlertTriangle className=\"w-8 h-8\" />\n              <div>\n                <div className=\"text-2xl font-bold\">{formatNumber(summaryStats.totalCount)}</div>\n                <div className=\"text-red-100\">Churned Members</div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-r from-orange-500 to-orange-600 text-white border-0 shadow-lg\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <DollarSign className=\"w-8 h-8\" />\n              <div>\n                <div className=\"text-2xl font-bold\">{formatCurrency(summaryStats.totalRevenueLoss)}</div>\n                <div className=\"text-orange-100\">Revenue Impact</div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-r from-purple-500 to-purple-600 text-white border-0 shadow-lg\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <Users className=\"w-8 h-8\" />\n              <div>\n                <div className=\"text-2xl font-bold\">{Object.keys(summaryStats.membershipBreakdown).length}</div>\n                <div className=\"text-purple-100\">Membership Types</div>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Filters and Search */}\n      <Card className=\"bg-white/90 backdrop-blur-sm border-slate-200/50 shadow-lg\">\n        <CardContent className=\"p-4\">\n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div className=\"relative\">\n              <Search className=\"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4\" />\n              <Input\n                placeholder=\"Search members...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10 border-slate-300 focus:border-red-500 focus:ring-red-500\"\n              />\n            </div>\n\n            <Select value={locationFilter} onValueChange={setLocationFilter}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Filter by location\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Locations</SelectItem>\n                {uniqueLocations.map(location => (\n                  <SelectItem key={location} value={location}>{location}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n\n            <Select value={membershipFilter} onValueChange={setMembershipFilter}>\n              <SelectTrigger>\n                <SelectValue placeholder=\"Filter by membership\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Memberships</SelectItem>\n                {uniqueMemberships.map(membership => (\n                  <SelectItem key={membership} value={membership}>{membership}</SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n\n            <div className=\"text-sm text-slate-600 flex items-center\">\n              Showing {formatNumber(filteredAndSortedData.length)} of {formatNumber(churnedData.length)} churned members\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Detailed Table */}\n      <Card className=\"bg-white/90 backdrop-blur-sm border-slate-200/50 shadow-lg\">\n        <CardHeader className=\"bg-gradient-to-r from-slate-800 via-slate-900 to-slate-800 text-white\">\n          <CardTitle className=\"text-xl font-bold flex items-center gap-2\">\n            <AlertTriangle className=\"w-6 h-6\" />\n            Churned Members - Detailed Analysis\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <div className=\"overflow-x-auto max-h-[600px]\">\n            <table className=\"w-full text-sm\">\n              <thead className=\"sticky top-0 bg-gradient-to-r from-slate-800 via-slate-900 to-slate-800 text-white\">\n                <tr>\n                  <th className=\"text-left py-3 px-4 min-w-[150px]\">\n                    <SortButton field=\"firstName\">Member Details</SortButton>\n                  </th>\n                  <th className=\"text-left py-3 px-4 min-w-[200px]\">\n                    <SortButton field=\"membershipName\">Membership</SortButton>\n                  </th>\n                  <th className=\"text-left py-3 px-4 min-w-[120px]\">\n                    <SortButton field=\"endDate\">End Date</SortButton>\n                  </th>\n                  <th className=\"text-left py-3 px-4 min-w-[150px]\">\n                    <SortButton field=\"homeLocation\">Location</SortButton>\n                  </th>\n                  <th className=\"text-right py-3 px-4 min-w-[100px]\">\n                    <SortButton field=\"paid\">Paid Amount</SortButton>\n                  </th>\n                  <th className=\"text-left py-3 px-4 min-w-[120px]\">\n                    <SortButton field=\"soldBy\">Sold By</SortButton>\n                  </th>\n                  <th className=\"text-center py-3 px-4\">Status</th>\n                </tr>\n              </thead>\n              <tbody>\n                {filteredAndSortedData.map((item, index) => (\n                  <tr \n                    key={item.uniqueId || index} \n                    className=\"border-b border-slate-100 hover:bg-red-50/50 cursor-pointer transition-colors\"\n                    onClick={() => onRowClick?.(item)}\n                  >\n                    <td className=\"py-3 px-4\">\n                      <div className=\"space-y-1\">\n                        <div className=\"font-medium text-slate-900\">\n                          {`${item.firstName} ${item.lastName}`}\n                        </div>\n                        <div className=\"text-xs text-slate-500\">{item.email}</div>\n                        <div className=\"text-xs text-slate-400\">ID: {item.memberId}</div>\n                      </div>\n                    </td>\n                    <td className=\"py-3 px-4\">\n                      <div className=\"space-y-1\">\n                        <div className=\"font-medium text-slate-700\">{item.membershipName}</div>\n                        <div className=\"text-xs text-slate-500\">\n                          Membership ID: {item.membershipId}\n                        </div>\n                      </div>\n                    </td>\n                    <td className=\"py-3 px-4 text-slate-600\">\n                      {new Date(item.endDate).toLocaleDateString()}\n                    </td>\n                    <td className=\"py-3 px-4\">\n                      <div className=\"flex items-center gap-1 text-slate-600\">\n                        <MapPin className=\"w-3 h-3\" />\n                        <span className=\"text-sm\">{item.homeLocation}</span>\n                      </div>\n                    </td>\n                    <td className=\"py-3 px-4 text-right font-medium\">\n                      {formatPaidAmount(item.paid)}\n                    </td>\n                    <td className=\"py-3 px-4 text-slate-600 text-sm\">\n                      {item.soldBy && item.soldBy !== '-' ? item.soldBy : 'N/A'}\n                    </td>\n                    <td className=\"py-3 px-4 text-center\">\n                      <Badge\n                        variant=\"outline\"\n                        className=\"border-red-200 bg-red-50 text-red-700\"\n                      >\n                        Churned\n                      </Badge>\n                    </td>\n                  </tr>\n                ))}\n              </tbody>\n            </table>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n};","import React, { useState, useMemo } from 'react';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { AutoCloseFilterSection } from './AutoCloseFilterSection';\nimport { ExpirationMetricCards } from './ExpirationMetricCards';\nimport { UnifiedTopBottomSellers } from './UnifiedTopBottomSellers';\nimport { ModernDrillDownModal } from './ModernDrillDownModal';\nimport { ExpirationChartsGrid } from './ExpirationChartsGrid';\nimport { ExpirationDataTables } from './ExpirationDataTables';\nimport { ExpirationAdditionalAnalytics } from './ExpirationAdditionalAnalytics';\nimport { ChurnedMembersDetailedTable } from './ChurnedMembersDetailedTable';\nimport { ExpirationData, ExpirationFilterOptions, MetricCardData } from '@/types/dashboard';\nimport { formatNumber, formatPercentage } from '@/utils/formatters';\nimport { getPreviousMonthDateRange } from '@/utils/dateUtils';\nimport { cn } from '@/lib/utils';\nimport { AdvancedExportButton } from '@/components/ui/AdvancedExportButton';\nimport { Calendar, Users, AlertTriangle, Clock, CheckCircle } from 'lucide-react';\nimport { InfoPopover } from '@/components/ui/InfoSidebar';\nimport { StudioLocationTabs } from '@/components/ui/StudioLocationTabs';\n\ninterface ExpirationAnalyticsSectionProps {\n  data: ExpirationData[];\n}\n\nconst locations = [{\n  id: 'all',\n  name: 'All Locations',\n  fullName: 'All Locations'\n}, {\n  id: 'kwality',\n  name: 'Kwality House, Kemps Corner',\n  fullName: 'Kwality House, Kemps Corner'\n}, {\n  id: 'supreme',\n  name: 'Supreme HQ, Bandra',\n  fullName: 'Supreme HQ, Bandra'\n}, {\n  id: 'kenkere',\n  name: 'Kenkere House',\n  fullName: 'Kenkere House'\n}, {\n  id: 'popup',\n  name: 'Pop-up',\n  fullName: 'Pop-up'\n}];\n\nexport const ExpirationAnalyticsSection: React.FC<ExpirationAnalyticsSectionProps> = ({ data }) => {\n  const [activeLocation, setActiveLocation] = useState('kwality');\n  const [drillDownData, setDrillDownData] = useState<any>(null);\n  const [drillDownType, setDrillDownType] = useState<'expiration' | 'member' | 'status'>('expiration');\n\n  // Initialize filters with previous month as default\n  const [filters, setFilters] = useState<ExpirationFilterOptions>(() => {\n    const previousMonth = getPreviousMonthDateRange();\n    \n    return {\n      dateRange: previousMonth,\n      location: [],\n      status: [],\n      membershipType: [],\n      soldBy: []\n    };\n  });\n\n  // Count data by location for tabs\n  const tabCounts = useMemo(() => {\n    const counts = {\n      all: data?.length || 0,\n      kwality: 0,\n      supreme: 0,\n      kenkere: 0\n    };\n\n    data?.forEach(item => {\n      const location = (item.homeLocation || '').toString();\n      if (location.includes('Kwality') || location.includes('Kemps Corner')) {\n        counts.kwality++;\n      } else if (location.includes('Supreme') || location.includes('Bandra')) {\n        counts.supreme++;\n      } else if (location.includes('Kenkere') || location.includes('Bengaluru')) {\n        counts.kenkere++;\n      } else if (location.toLowerCase().includes('pop') || location.toLowerCase().includes('popup') || location.toLowerCase().includes('pop-up')) {\n        counts.popup++;\n      }\n    });\n\n    return counts;\n  }, [data]);\n\n  const applyFilters = (rawData: ExpirationData[]) => {\n    console.log('Applying filters to', rawData.length, 'expiration records');\n    \n    let filtered = [...rawData];\n\n    // Apply location filter from activeLocation (location tabs)\n    if (activeLocation !== 'all') {\n      filtered = filtered.filter(item => {\n        const loc = (item.homeLocation || '').toString().toLowerCase();\n        if (activeLocation === 'kwality') return loc.includes('kwality') || loc.includes('kemps');\n        if (activeLocation === 'supreme') return loc.includes('supreme') || loc.includes('bandra');\n        if (activeLocation === 'kenkere') return loc.includes('kenkere') || loc.includes('bengaluru');\n        if (activeLocation === 'popup') return loc.includes('pop') || loc.includes('popup') || loc.includes('pop-up');\n        return false;\n      });\n      console.log(`ðŸ“ LOCATION FILTER: Reduced to ${filtered.length} records for location: ${activeLocation}`);\n    }\n\n    // Apply status filter\n    if (filters.status?.length) {\n      filtered = filtered.filter(item => \n        filters.status!.some(status => \n          item.status?.toLowerCase().includes(status.toLowerCase())\n        )\n      );\n    }\n\n    // Apply membership type filter\n    if (filters.membershipType?.length) {\n      filtered = filtered.filter(item => \n        filters.membershipType!.some(type => \n          item.membershipName?.toLowerCase().includes(type.toLowerCase())\n        )\n      );\n    }\n\n    // Apply sold by filter\n    if (filters.soldBy?.length) {\n      filtered = filtered.filter(item => \n        filters.soldBy!.some(seller => \n          item.soldBy?.toLowerCase().includes(seller.toLowerCase())\n        )\n      );\n    }\n\n    return filtered;\n  };\n\n  const filteredData = useMemo(() => applyFilters(data || []), [data, filters, activeLocation]);\n\n  const calculateMetrics = (data: ExpirationData[]): MetricCardData[] => {\n    const totalMemberships = data.length;\n    const activeCount = data.filter(item => item.status === 'Active').length;\n    const churnedCount = data.filter(item => item.status === 'Churned').length;\n    const frozenCount = data.filter(item => item.status === 'Frozen').length;\n\n    const churnRate = totalMemberships > 0 ? (churnedCount / totalMemberships) * 100 : 0;\n    const activeRate = totalMemberships > 0 ? (activeCount / totalMemberships) * 100 : 0;\n    const frozenRate = totalMemberships > 0 ? (frozenCount / totalMemberships) * 100 : 0;\n\n    return [\n      {\n        title: 'Total Memberships',\n        value: formatNumber(totalMemberships),\n        change: 0, // Would need historical data for comparison\n        description: 'All tracked membership records',\n        calculation: 'Count of all membership records',\n        icon: 'Users',\n        rawValue: totalMemberships\n      },\n      {\n        title: 'Active Members',\n        value: formatNumber(activeCount),\n        change: 0,\n        description: `${formatPercentage(activeRate)} of total memberships`,\n        calculation: 'Count of active status',\n        icon: 'CheckCircle',\n        rawValue: activeCount\n      },\n      {\n        title: 'Churned Members',\n        value: formatNumber(churnedCount),\n        change: 0,\n        description: `${formatPercentage(churnRate)} churn rate`,\n        calculation: 'Count of churned status',\n        icon: 'AlertTriangle',\n        rawValue: churnedCount\n      },\n      {\n        title: 'Frozen Members',\n        value: formatNumber(frozenCount),\n        change: 0,\n        description: `${formatPercentage(frozenRate)} of total memberships`,\n        calculation: 'Count of frozen status',\n        icon: 'Clock',\n        rawValue: frozenCount\n      }\n    ];\n  };\n\n  const resetFilters = () => {\n    const previousMonth = getPreviousMonthDateRange();\n    setFilters({\n      dateRange: previousMonth,\n      location: [],\n      status: [],\n      membershipType: [],\n      soldBy: []\n    });\n  };\n\n  const metrics = calculateMetrics(filteredData);\n\n  const handleRowClick = (data: any, type: 'expiration' | 'member' | 'status' = 'expiration') => {\n    setDrillDownData(data);\n    setDrillDownType(type);\n  };\n\n  const getTopBottomData = (data: ExpirationData[]) => {\n    // Top membership types by count\n    const membershipCounts = data.reduce((acc, item) => {\n      const key = item.membershipName || 'Unknown';\n      acc[key] = (acc[key] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n    const topMemberships = Object.entries(membershipCounts)\n      .map(([name, count]) => ({ name, count }))\n      .sort((a, b) => b.count - a.count);\n\n    // Status distribution\n    const statusCounts = data.reduce((acc, item) => {\n      const key = item.status || 'Unknown';\n      acc[key] = (acc[key] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n    const topStatuses = Object.entries(statusCounts)\n      .map(([name, count]) => ({ name, count }))\n      .sort((a, b) => b.count - a.count);\n\n    return { topMemberships, topStatuses };\n  };\n\n  const { topMemberships, topStatuses } = getTopBottomData(filteredData);\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Enhanced Location Tabs - matching Sales tab structure */}\n      <StudioLocationTabs \n        activeLocation={activeLocation}\n        onLocationChange={setActiveLocation}\n        showInfoPopover={true}\n        infoPopoverContext=\"expiration-analytics-overview\"\n      />\n\n      {/* Main Content */}\n      <div className=\"space-y-8\">\n        {/* Filters */}\n        <AutoCloseFilterSection\n          filters={filters as any}\n          onFiltersChange={(newFilters: any) => setFilters(newFilters as ExpirationFilterOptions)}\n          onReset={resetFilters}\n        />\n\n        {/* Metric Cards */}\n        <ExpirationMetricCards\n          data={filteredData}\n          historicalData={data || []}\n          dateRange={filters.dateRange}\n          onMetricClick={(data, type) => handleRowClick(data, 'expiration')}\n        />\n\n        {/* Charts Grid */}\n        <ExpirationChartsGrid data={filteredData} />\n\n        {/* Analysis Tabs */}\n        <Tabs defaultValue=\"overview\" className=\"w-full\">\n          <TabsList className=\"bg-white/90 backdrop-blur-sm p-1 rounded-2xl shadow-xl border border-slate-200 flex w-full max-w-7xl mx-auto overflow-hidden\">\n            <TabsTrigger value=\"overview\" className=\"relative flex-1 text-center px-4 py-3 font-semibold text-sm md:text-base min-h-[48px] data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-blue-800 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50 border-l border-slate-200 first:border-l-0\">\n              Overview & Analytics\n            </TabsTrigger>\n            <TabsTrigger value=\"churned\" className=\"relative flex-1 text-center px-4 py-3 font-semibold text-sm md:text-base min-h-[48px] data-[state=active]:bg-gradient-to-r data-[state=active]:from-red-600 data-[state=active]:to-red-800 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50 border-l border-slate-200 first:border-l-0\">\n              Churned Members Details\n            </TabsTrigger>\n          </TabsList>\n\n          {/* Overview Tab */}\n          <TabsContent value=\"overview\" className=\"mt-8\">\n            <div className=\"space-y-8\">\n              {/* Top/Bottom Lists */}\n              <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n                <Card className=\"bg-white/70 backdrop-blur-lg border-gray-200/80 shadow-lg rounded-2xl\">\n                  <CardHeader>\n                    <CardTitle className=\"text-lg font-semibold bg-gradient-to-r from-slate-700 to-slate-500 bg-clip-text text-transparent\">\n                      Top Membership Types\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-2\">\n                      {topMemberships.slice(0, 5).map((membership, index) => (\n                        <div key={membership.name} className=\"flex justify-between items-center p-2 hover:bg-slate-50/50 rounded cursor-pointer\"\n                             onClick={() => handleRowClick(filteredData.filter(item => item.membershipName === membership.name), 'expiration')}>\n                          <span className=\"text-sm text-slate-700\">{membership.name}</span>\n                          <span className=\"text-sm font-medium text-slate-900\">{membership.count}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card className=\"bg-white/70 backdrop-blur-lg border-gray-200/80 shadow-lg rounded-2xl\">\n                  <CardHeader>\n                    <CardTitle className=\"text-lg font-semibold bg-gradient-to-r from-slate-700 to-slate-500 bg-clip-text text-transparent\">\n                      Status Distribution\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent>\n                    <div className=\"space-y-2\">\n                      {topStatuses.map((status, index) => (\n                        <div key={status.name} className=\"flex justify-between items-center p-2 hover:bg-slate-50/50 rounded cursor-pointer\"\n                             onClick={() => handleRowClick(filteredData.filter(item => item.status === status.name), 'status')}>\n                          <span className=\"text-sm text-slate-700\">{status.name}</span>\n                          <span className=\"text-sm font-medium text-slate-900\">{status.count}</span>\n                        </div>\n                      ))}\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n\n              {/* Additional Analytics */}\n              <ExpirationAdditionalAnalytics data={filteredData} />\n\n              {/* Data Tables */}\n              <ExpirationDataTables \n                data={filteredData} \n                onRowClick={(item) => handleRowClick([item], 'member')} \n              />\n            </div>\n          </TabsContent>\n\n          {/* Churned Members Tab */}\n          <TabsContent value=\"churned\" className=\"mt-8\">\n            <ChurnedMembersDetailedTable\n              data={filteredData}\n              onRowClick={(item) => handleRowClick([item], 'member')}\n            />\n          </TabsContent>\n        </Tabs>\n      </div>\n\n      {drillDownData && (\n        <ModernDrillDownModal \n          isOpen={!!drillDownData} \n          onClose={() => setDrillDownData(null)} \n          data={drillDownData} \n          type=\"member\"\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ExpirationAnalyticsSection;","import React from 'react';\nimport { ExpirationAnalyticsSection } from '@/components/dashboard/ExpirationAnalyticsSection';\nimport { useExpirationsData } from '@/hooks/useExpirationsData';\nimport { useGlobalLoading } from '@/hooks/useGlobalLoading';\nimport { useEffect } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { Button } from '@/components/ui/button';\nimport { Home, Calendar } from 'lucide-react';\nimport { Footer } from '@/components/ui/footer';\nimport DashboardMotionHero from '@/components/ui/DashboardMotionHero';\n\nconst ExpirationAnalytics = () => {\n  const { data, loading, error } = useExpirationsData();\n  const { setLoading } = useGlobalLoading();\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    setLoading(loading, 'Loading expirations and churn data...');\n  }, [loading, setLoading]);\n\n  // Remove individual loader - rely on global loader only\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/20 flex items-center justify-center\">\n        <div className=\"text-center space-y-4 max-w-lg\">\n          <h1 className=\"text-2xl font-bold text-red-600\">Data Access Issue</h1>\n          <p className=\"text-slate-600\">{error}</p>\n          {error.includes('Failed to fetch') && (\n            <div className=\"bg-amber-50 border border-amber-200 rounded-lg p-4 text-left\">\n              <h3 className=\"font-semibold text-amber-800 mb-2\">Development Environment Note:</h3>\n              <p className=\"text-sm text-amber-700\">\n                This appears to be a CORS/network restriction in the development environment. \n                The integration is correctly configured for the spreadsheet:\n                <br />\n                <code className=\"text-xs bg-amber-100 px-2 py-1 rounded mt-1 inline-block\">\n                  1rGMDDvvTbZfNg1dueWtRN3LhOgGQOdLg3Fd7Sn1GCZo\n                </code>\n                <br />\n                <br />\n                In a production environment with proper CORS configuration, this should work correctly.\n              </p>\n            </div>\n          )}\n          <Button onClick={() => window.location.reload()}>Retry</Button>\n        </div>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/20\">\n      <DashboardMotionHero \n        title=\"Expirations & Churn\"\n        subtitle=\"Comprehensive analysis of membership expirations and customer retention insights\"\n        metrics={[]}\n        onDashboardClick={() => {\n          const main = document.querySelector('main, .container');\n          if (main) (main as HTMLElement).scrollIntoView({ behavior: 'smooth' });\n        }}\n      />\n\n      <div className=\"container mx-auto px-6 py-8\">\n        <main className=\"space-y-8\">\n          <ExpirationAnalyticsSection data={data || []} />\n        </main>\n      </div>\n      \n      <Footer />\n    </div>\n  );\n};\n\nexport default ExpirationAnalytics;"],"names":["COLORS","ExpirationChartsGrid","data","statusData","acc","item","status","statusChartData","name","value","membershipData","type","membershipChartData","b","monthlyData","month","trendData","count","locationStatusData","location","locationChartData","statuses","jsxs","Card","jsx","CardHeader","CardTitle","CardContent","ResponsiveContainer","PieChart","Pie","percent","entry","index","Cell","Tooltip","formatNumber","BarChart","CartesianGrid","XAxis","YAxis","Bar","AreaChart","Area","Legend","ExpirationAdditionalAnalytics","locationAnalysis","locationData","a","salesRepAnalysis","rep","topSalesReps","monthlyTrend","date","monthYear","format","valueAnalysis","paidAmount","category","segment","valueSegments","getChurnRateColor","rate","formatPercentage","Badge","ChurnedMembersDetailedTable","onRowClick","searchTerm","setSearchTerm","useState","sortField","setSortField","sortDirection","setSortDirection","locationFilter","setLocationFilter","membershipFilter","setMembershipFilter","churnedData","useMemo","uniqueLocations","locations","uniqueMemberships","memberships","handleSort","field","filteredAndSortedData","searchLower","matchesSearch","matchesLocation","matchesMembership","aVal","bVal","multiplier","summaryStats","totalRevenueLoss","sum","member","paid","membershipBreakdown","membership","SortButton","children","Button","SortAsc","SortDesc","formatPaidAmount","amount","formatCurrency","AlertTriangle","DollarSign","Users","Search","Input","e","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","MapPin","ExpirationAnalyticsSection","activeLocation","setActiveLocation","drillDownData","setDrillDownData","drillDownType","setDrillDownType","filters","setFilters","getPreviousMonthDateRange","counts","applyFilters","rawData","filtered","loc","seller","filteredData","calculateMetrics","totalMemberships","activeCount","churnedCount","frozenCount","churnRate","activeRate","frozenRate","resetFilters","previousMonth","handleRowClick","getTopBottomData","membershipCounts","key","topMemberships","statusCounts","topStatuses","StudioLocationTabs","AutoCloseFilterSection","newFilters","ExpirationMetricCards","Tabs","TabsList","TabsTrigger","TabsContent","ExpirationDataTables","ModernDrillDownModal","ExpirationAnalytics","loading","error","useExpirationsData","setLoading","useGlobalLoading","useNavigate","useEffect","DashboardMotionHero","main","Footer"],"mappings":"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"}