import{r as P,h as fe,j as e,f as y,p as le,g as Oe,C as _e,c as We}from"./index-Bm67KBkU.js";import{S as Je,a as Ke}from"./ModernTableWrapper-bhf1DsXx.js";import{T as u}from"./tableStyles-BJWvDwDQ.js";import{B as Qe,a as S,f as N,b as me}from"./index-DkD_C-d1.js";import{a as Xe,C as Ze}from"./chevron-right-CbIMR3DA.js";import{C as et,D as He}from"./dollar-sign-CKqx8kbC.js";import{A as tt}from"./activity-CeUP9h5f.js";import{A as ce}from"./arrow-down-right-D7rC7EMG.js";import{C as rt}from"./googleAuth-BGo8ElRc.js";import{U as ot}from"./users-7Ku-1TDB.js";import{T as at}from"./target-BmxdxojS.js";import{C as st}from"./credit-card-yR0Iskrq.js";import{S as nt,A as ye}from"./SalesMotionHero-sGphstF2.js";import{M as ve}from"./minus-BzN8XxOo.js";const X=Je.map(r=>({key:r.key,label:r.label})),lt=r=>{const s=r?.dateRange?.start?new Date(r.dateRange.start):null,h=r?.dateRange?.end?(()=>{const g=new Date(r.dateRange.end);return g.setHours(23,59,59,999),g})():null;return{start:s,end:h}},ct=(r,s,h)=>{if(!r)return!1;const g=le(r);return!(!g||s&&g<s||h&&g>h)},it=r=>{const s=r?.dateRange?.start?le(r.dateRange.start):null,h=r?.dateRange?.end?le(r.dateRange.end):null,g=s||h;if(g)return g.toLocaleString("en-US",{month:"short",year:"numeric"});const D=new Date;return new Date(D.getFullYear(),D.getMonth()-1,1).toLocaleString("en-US",{month:"short",year:"numeric"})},q=r=>{if(typeof r=="number")return isFinite(r)?r:0;if(typeof r=="string"){const s=parseFloat(r.replace(/[\s,]/g,""));return isNaN(s)?0:s}return 0},H=(r,s)=>{if(!r.length)return 0;const h=r.reduce((n,b)=>{const l=q(b.paymentValue),f=q(b.paymentVAT)||q(b.vat);return n+(l-f)},0),g=new Set(r.map(n=>n.paymentTransactionId||n.paymentTransactionID||n.transactionId).filter(Boolean)),D=g.size>0?g.size:r.length,V=new Set(r.map(n=>n.memberId||n.customerEmail).filter(Boolean)).size,R=new Set(r.map(n=>n.salesItemId||n.saleItemId||n.saleItemID||n.itemId).filter(Boolean)),a=R.size>0?R.size:r.length,i=r.reduce((n,b)=>n+q(b.discountAmount),0),C=r.reduce((n,b)=>n+(q(b.paymentVAT)||q(b.vat)),0),j=r.reduce((n,b)=>n+q(b.paymentValue),0),$=j>0?i/j*100:0,I=r.map(n=>le(n.paymentDate)).filter(n=>!!n).sort((n,b)=>n.getTime()-b.getTime());let B=0;switch(I.length>1&&(B=(I[I.length-1].getTime()-I[0].getTime())/864e5/(I.length-1)),s){case"revenue":return h;case"units":return a;case"transactions":return D;case"members":return V;case"auv":return V>0?h/V:0;case"atv":return D>0?h/D:0;case"asv":return V>0?h/V:0;case"upt":return D>0?a/D:0;case"vat":return C;case"discountAmount":case"discountValue":return i;case"discountPercentage":return $;case"purchaseFrequency":return B;default:return 0}},be=(r,s)=>{switch(s){case"revenue":case"auv":case"atv":case"asv":case"vat":case"discountValue":case"discountAmount":return N(r);case"transactions":case"members":case"units":return S(r);case"upt":return r.toFixed(1);case"discountPercentage":return`${r.toFixed(1)}%`;case"purchaseFrequency":return`${r.toFixed(1)} days`;default:return S(r)}},Mt=({data:r,filters:s,onReady:h})=>{const g=P.useRef(null),[D,V]=P.useState(new Set),R=P.useMemo(()=>it(s),[s]),{start:a,end:i}=P.useMemo(()=>lt(s),[s]),C=P.useMemo(()=>(Array.isArray(r)?r:[]).filter(f=>ct(f.paymentDate,a,i)),[r,a,i]),j=P.useMemo(()=>{const l=new Map;for(const c of C){const p=c.cleanedCategory||"Uncategorized",m=c.cleanedProduct||"Unspecified";l.has(p)||l.set(p,new Map);const x=l.get(p);x.has(m)||x.set(m,[]),x.get(m).push(c)}const f=[];for(const[c,p]of l.entries()){const m=Array.from(p.entries()).map(([x,d])=>({product:x,items:d})).sort((x,d)=>H(d.items,"revenue")-H(x.items,"revenue"));f.push({category:c,products:m})}return f.sort((c,p)=>{const m=H(c.products.flatMap(d=>d.items),"revenue");return H(p.products.flatMap(d=>d.items),"revenue")-m}),f},[C]),$=P.useMemo(()=>{const l=new Map;for(const f of X)l.set(f.key,H(C,f.key));return l},[C]),I=P.useMemo(()=>j.reduce((l,f)=>l+f.products.length,0),[j]),B=l=>{V(f=>{const c=new Set(f);return c.has(l)?c.delete(l):c.add(l),c})},n=()=>V(new Set(j.map(l=>l.category))),b=()=>V(new Set);return fe.useEffect(()=>{h?.()},[h]),e.jsx(Ke,{title:"Product × Category Metrics (Previous Month)",description:`Each metric is a column; rows are products grouped by category for ${R}.`,icon:e.jsx(et,{className:"w-5 h-5 text-white"}),totalItems:I,headerControls:e.jsx(Qe,{variant:"secondary",className:"bg-white/20 text-white font-semibold",children:R}),showCollapseControls:!0,onCollapseAll:n,onExpandAll:b,tableRef:g,contextInfo:{selectedMetric:"all",dateRange:s?.dateRange?.start&&s?.dateRange?.end?s.dateRange:void 0,filters:{category:s?.category,product:s?.product,soldBy:s?.soldBy,paymentMethod:s?.paymentMethod}},children:e.jsx("div",{className:u.container,children:e.jsxs("table",{ref:g,className:u.table,children:[e.jsx("thead",{className:u.header.wrapper,children:e.jsxs("tr",{className:u.header.row,children:[e.jsx("th",{className:y(u.header.cell,u.header.cellSticky,"min-w-[280px]"),children:"Product"}),X.map(l=>e.jsx("th",{className:y(u.header.cell,u.header.monthCell),children:e.jsx("div",{className:u.header.monthDisplay,children:e.jsx("span",{className:u.header.monthText,children:l.label})})},l.key))]})}),e.jsxs("tbody",{children:[j.length===0?e.jsx("tr",{className:u.body.row,children:e.jsx("td",{className:y(u.body.cell,"text-center text-slate-500"),colSpan:X.length+1,children:"No records found for the selected period."})}):j.map((l,f)=>{const c=D.has(l.category),p=l.products.flatMap(m=>m.items);return e.jsxs(fe.Fragment,{children:[e.jsxs("tr",{className:u.group.row,children:[e.jsx("td",{className:y(u.group.cell,u.group.cellSticky),children:e.jsxs("button",{type:"button",onClick:()=>B(l.category),className:"flex items-center gap-2 w-full text-left",children:[c?e.jsx(Xe,{className:u.group.expandIcon}):e.jsx(Ze,{className:u.group.expandIcon}),e.jsx("span",{className:"font-bold",children:l.category})]})}),X.map(m=>{const x=H(p,m.key);return e.jsx("td",{className:y(u.group.cell,u.body.cellCenter,"tabular-nums"),children:be(x,m.key)},`${l.category}::group::${m.key}`)})]}),!c&&l.products.map((m,x)=>{const d=(f+x)%2===1;return e.jsxs("tr",{className:y(u.body.row,d&&u.body.rowAlternate),children:[e.jsx("td",{className:y(u.body.cell,u.body.cellSticky,u.body.cellBold),children:m.product}),X.map(M=>{const T=H(m.items,M.key);return e.jsx("td",{className:y(u.body.cell,u.body.cellCenter,"tabular-nums"),children:be(T,M.key)},`${l.category}::${m.product}::${M.key}`)})]},`${l.category}::${m.product}`)})]},l.category)}),j.length>0&&e.jsxs("tr",{className:u.footer.row,children:[e.jsx("td",{className:y(u.footer.cell,u.footer.cellSticky),children:e.jsx("span",{className:u.footer.label,children:"TOTALS"})}),X.map(l=>e.jsx("td",{className:y(u.footer.cell,u.footer.cellCenter),children:be($.get(l.key)||0,l.key)},`totals::${l.key}`))]})]})]})})})},ut=(r,s,h={compareMode:"previousMonth"})=>{const{filters:g}=Oe();return{metrics:P.useMemo(()=>{const V=h?.compareMode??"previousMonth";if(!r||r.length===0)return[];const R=t=>le(typeof t=="string"?t:String(t)),a=s&&s.length?s:r,i=t=>{const o=t.map(v=>R(v.paymentDate)).filter(v=>!!v).sort((v,A)=>v.getTime()-A.getTime());return{first:o[0],last:o[o.length-1]}};let C=null,j=null;h?.dateRange?.start&&h?.dateRange?.end?(C=new Date(h.dateRange.start),j=new Date(h.dateRange.end),j.setHours(23,59,59,999)):g?.dateRange?.start&&g?.dateRange?.end&&(C=new Date(g.dateRange.start),j=new Date(g.dateRange.end),j.setHours(23,59,59,999));const $=V==="previousMonth"?j||new Date:j||i(a).last||new Date,I=t=>new Date(t.getFullYear(),t.getMonth(),1),B=t=>new Date(t.getFullYear(),t.getMonth()+1,0,23,59,59,999);let n,b,l,f,c,p;if(V==="previousMonth"){n=I($),b=B($);const t=new Date(n.getFullYear(),n.getMonth()-1,15);l=I(t),f=B(t);const o=v=>v.toLocaleDateString(void 0,{month:"short",year:"numeric"});c=o(n),p=o(l)}else{const t=i(r),o=C||t.first||$,v=j||t.last||$;n=o,b=v;const A=Math.max(1,b.getTime()-n.getTime()+1);f=new Date(n.getTime()-1),l=new Date(f.getTime()-A+1)}const m=a.filter(t=>{const o=R(t.paymentDate);return o&&o>=n&&o<=b}),x=a.filter(t=>{const o=R(t.paymentDate);return o&&o>=l&&o<=f}),d=t=>{if(typeof t=="number")return isFinite(t)?t:0;if(typeof t=="string"){const o=parseFloat(t.replace(/[,\s]/g,""));return isNaN(o)?0:o}return 0},M=m.reduce((t,o)=>{const v=d(o.paymentValue),A=d(o.paymentVAT)||d(o.vat);return t+(v-A)},0),T=m.reduce((t,o)=>t+d(o.discountAmount),0),O=m.reduce((t,o)=>t+(d(o.paymentVAT)||d(o.vat)),0),G=new Set(m.map(t=>t.paymentTransactionId||t.paymentTransactionID).filter(Boolean)).size,L=new Set(m.map(t=>t.memberId||t.customerEmail).filter(Boolean)).size,_=new Set(m.map(t=>t.saleItemId||t.saleItemID).filter(Boolean)).size,W=G>0?M/G:0,J=L>0?M/L:0,xe=m.reduce((t,o)=>t+d(o.paymentValue),0),K=xe+T>0?T/(xe+T)*100:0,F=x.reduce((t,o)=>{const v=d(o.paymentValue),A=d(o.paymentVAT)||d(o.vat);return t+(v-A)},0),E=x.reduce((t,o)=>t+d(o.discountAmount),0),Z=x.reduce((t,o)=>t+(d(o.paymentVAT)||d(o.vat)),0),z=new Set(x.map(t=>t.paymentTransactionId||t.paymentTransactionID).filter(Boolean)).size,U=new Set(x.map(t=>t.memberId||t.customerEmail).filter(Boolean)).size,ee=new Set(x.map(t=>t.saleItemId||t.saleItemID).filter(Boolean)).size,te=z>0?F/z:0,re=U>0?F/U:0,we=x.reduce((t,o)=>t+d(o.paymentValue),0),oe=we+E>0?E/(we+E)*100:0,w=(t,o)=>{if(o===0)return{rate:t>0?100:0,isSignificant:t>0,trend:t>0?"moderate":"weak"};const v=(t-o)/o*100,A=Math.abs(v)>=5;let ge;return v>0?ge=v>=20?"strong":v>=10?"moderate":"weak":ge=v<=-20?"weak":v<=-10?"moderate":"weak",{rate:v,isSignificant:A,trend:ge}},je=new Date(n.getFullYear()-1,n.getMonth(),n.getDate()),Ne=new Date(b.getFullYear()-1,b.getMonth(),b.getDate());Ne.setHours(23,59,59,999);const Y=a.filter(t=>{const o=R(t.paymentDate);return o&&o>=je&&o<=Ne}),ae=Y.reduce((t,o)=>{const v=d(o.paymentValue),A=d(o.paymentVAT)||d(o.vat);return t+(v-A)},0),Q=Y.reduce((t,o)=>t+d(o.discountAmount),0),ie=Y.reduce((t,o)=>t+(d(o.paymentVAT)||d(o.vat)),0),se=new Set(Y.map(t=>t.paymentTransactionId||t.paymentTransactionID).filter(Boolean)).size,ne=new Set(Y.map(t=>t.memberId||t.customerEmail).filter(Boolean)).size,ue=new Set(Y.map(t=>t.saleItemId||t.saleItemID).filter(Boolean)).size,de=se>0?ae/se:0,pe=ne>0?ae/ne:0,De=Y.reduce((t,o)=>t+d(o.paymentValue),0),he=De+Q>0?Q/(De+Q)*100:0,Ve=t=>t.toLocaleDateString(void 0,{month:"short",year:"numeric"}),k=`${Ve(n)} vs ${Ve(je)}`,Ce=w(M,F),Re=w(G,z),Me=w(L,U),Te=w(_,ee),Ae=w(W,te),Se=w(J,re),Ie=w(T,E),ke=w(K,oe),Pe=w(O,Z),$e=w(M,ae),Ge=w(G,se),Le=w(L,ne),Ee=w(_,ue),Be=w(W,de),Fe=w(J,pe),ze=w(T,Q),Ue=w(K,he),Ye=w(O,ie);return[{title:"Sales Revenue",value:N(M),rawValue:M,change:Ce.rate,changeDetails:Ce,icon:"DollarSign",color:"blue",description:"Total sales revenue across all transactions",previousValue:N(F),previousRawValue:F,comparison:{current:M,previous:F,difference:M-F},periodLabel:c&&p?`${c} vs ${p}`:void 0,yoyChange:$e.rate,yoyChangeDetails:$e,yoyPreviousValue:N(ae),yoyPreviousRawValue:ae,yoyPeriodLabel:k},{title:"Units Sold",value:S(_),rawValue:_,change:Te.rate,changeDetails:Te,icon:"ShoppingCart",color:"green",description:"Total number of units/items sold",previousValue:S(ee),previousRawValue:ee,comparison:{current:_,previous:ee,difference:_-ee},periodLabel:c&&p?`${c} vs ${p}`:void 0,yoyChange:Ee.rate,yoyChangeDetails:Ee,yoyPreviousValue:S(ue),yoyPreviousRawValue:ue,yoyPeriodLabel:k},{title:"Transactions",value:S(G),rawValue:G,change:Re.rate,changeDetails:Re,icon:"Activity",color:"purple",description:"Number of completed transactions",previousValue:S(z),previousRawValue:z,comparison:{current:G,previous:z,difference:G-z},periodLabel:c&&p?`${c} vs ${p}`:void 0,yoyChange:Ge.rate,yoyChangeDetails:Ge,yoyPreviousValue:S(se),yoyPreviousRawValue:se,yoyPeriodLabel:k},{title:"Unique Members",value:S(L),rawValue:L,change:Me.rate,changeDetails:Me,icon:"Users",color:"orange",description:"Individual customers who made purchases",previousValue:S(U),previousRawValue:U,comparison:{current:L,previous:U,difference:L-U},periodLabel:c&&p?`${c} vs ${p}`:void 0,yoyChange:Le.rate,yoyChangeDetails:Le,yoyPreviousValue:S(ne),yoyPreviousRawValue:ne,yoyPeriodLabel:k},{title:"Avg Transaction Value",value:N(W),rawValue:W,change:Ae.rate,changeDetails:Ae,icon:"Target",color:"cyan",description:"Average value per transaction",previousValue:N(te),previousRawValue:te,comparison:{current:W,previous:te,difference:W-te},periodLabel:c&&p?`${c} vs ${p}`:void 0,yoyChange:Be.rate,yoyChangeDetails:Be,yoyPreviousValue:N(de),yoyPreviousRawValue:de,yoyPeriodLabel:k},{title:"Avg Spend per Member",value:N(J),rawValue:J,change:Se.rate,changeDetails:Se,icon:"Calendar",color:"pink",description:"Average spending per unique customer",previousValue:N(re),previousRawValue:re,comparison:{current:J,previous:re,difference:J-re},periodLabel:c&&p?`${c} vs ${p}`:void 0,yoyChange:Fe.rate,yoyChangeDetails:Fe,yoyPreviousValue:N(pe),yoyPreviousRawValue:pe,yoyPeriodLabel:k},{title:"Discount Value",value:N(T),rawValue:T,change:Ie.rate,changeDetails:Ie,icon:"CreditCard",color:"red",description:"Total discount amount applied",previousValue:N(E),previousRawValue:E,comparison:{current:T,previous:E,difference:T-E},periodLabel:c&&p?`${c} vs ${p}`:void 0,yoyChange:ze.rate,yoyChangeDetails:ze,yoyPreviousValue:N(Q),yoyPreviousRawValue:Q,yoyPeriodLabel:k},{title:"Discount Percentage",value:me(K),rawValue:K,change:ke.rate,changeDetails:ke,icon:"ArrowDownRight",color:"amber",description:"Average discount rate applied",previousValue:me(oe),previousRawValue:oe,comparison:{current:K,previous:oe,difference:K-oe},periodLabel:c&&p?`${c} vs ${p}`:void 0,yoyChange:Ue.rate,yoyChangeDetails:Ue,yoyPreviousValue:me(he),yoyPreviousRawValue:he,yoyPeriodLabel:k},{title:"VAT Amount",value:N(O),rawValue:O,change:Pe.rate,changeDetails:Pe,icon:"Receipt",color:"green",description:"Total VAT collected from sales",previousValue:N(Z),previousRawValue:Z,comparison:{current:O,previous:Z,difference:O-Z},periodLabel:c&&p?`${c} vs ${p}`:void 0,yoyChange:Ye.rate,yoyChangeDetails:Ye,yoyPreviousValue:N(ie),yoyPreviousRawValue:ie,yoyPeriodLabel:k}]},[r,s,h?.dateRange?.start,h?.dateRange?.end,g?.dateRange?.start,g?.dateRange?.end,h?.compareMode])}},qe=(r,s)=>{if(r===s)return!0;if(typeof r!="object"||typeof s!="object"||r===null||s===null)return!1;const h=Object.keys(r),g=Object.keys(s);if(h.length!==g.length)return!1;for(const D of h)if(r[D]!==s[D])return!1;return!0},dt={DollarSign:He,ShoppingCart:nt,CreditCard:st,Target:at,Users:ot,Calendar:rt,ArrowDownRight:ce,Activity:tt},pt=({data:r,historicalData:s,dateRange:h,onMetricClick:g,locationId:D})=>{const{metrics:V}=ut(r,s,{dateRange:h}),R=V.slice(0,8);return e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:R.map((a,i)=>{const C=dt[a.icon]||He;return a.change>0,a.change<0,e.jsx(_e,{className:y("group relative overflow-hidden cursor-pointer transition-all duration-500","bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950","border border-slate-200 hover:border-slate-800 border-t-4","shadow-md hover:shadow-2xl hover:shadow-slate-950/60","hover:-translate-y-1 hover:scale-[1.01]",i%4===0&&"border-t-emerald-500",i%4===1&&"border-t-blue-500",i%4===2&&"border-t-purple-500",i%4===3&&"border-t-rose-500",g&&"hover:cursor-pointer"),onClick:()=>g?.({...a,metricType:a.title.toLowerCase().replace(/\s+/g,"-"),specificData:a,drillDownType:"metric"}),children:e.jsxs(We,{className:"p-5 relative",children:[e.jsx("div",{className:y("absolute inset-0 opacity-[0.03] group-hover:opacity-[0.08] transition-all duration-500",i%4===0&&"bg-gradient-to-br from-emerald-500 to-teal-500",i%4===1&&"bg-gradient-to-br from-blue-500 to-cyan-500",i%4===2&&"bg-gradient-to-br from-purple-500 to-pink-500",i%4===3&&"bg-gradient-to-br from-rose-500 to-orange-500")}),e.jsx("div",{className:"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6",children:e.jsx(C,{className:"w-20 h-20 text-slate-900 group-hover:text-white"})}),e.jsx("div",{className:"absolute inset-0 opacity-[0.02] group-hover:opacity-[0.04] transition-opacity duration-500",style:{backgroundImage:"radial-gradient(circle at 2px 2px, currentColor 1px, transparent 0)",backgroundSize:"24px 24px"}}),e.jsxs("div",{className:"relative z-10 space-y-2.5",children:[e.jsx("div",{className:"flex items-start justify-between",children:e.jsxs("div",{className:"flex items-center gap-2.5",children:[e.jsx("div",{className:y("p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md",i%4===0&&"bg-gradient-to-br from-emerald-500/15 to-emerald-600/10 text-emerald-700 group-hover:from-emerald-500/25 group-hover:to-emerald-600/20 group-hover:text-emerald-400 group-hover:shadow-emerald-500/20",i%4===1&&"bg-gradient-to-br from-blue-500/15 to-blue-600/10 text-blue-700 group-hover:from-blue-500/25 group-hover:to-blue-600/20 group-hover:text-blue-400 group-hover:shadow-blue-500/20",i%4===2&&"bg-gradient-to-br from-purple-500/15 to-purple-600/10 text-purple-700 group-hover:from-purple-500/25 group-hover:to-purple-600/20 group-hover:text-purple-400 group-hover:shadow-purple-500/20",i%4===3&&"bg-gradient-to-br from-rose-500/15 to-rose-600/10 text-rose-700 group-hover:from-rose-500/25 group-hover:to-rose-600/20 group-hover:text-rose-400 group-hover:shadow-rose-500/20"),children:e.jsx(C,{className:"w-5 h-5"})}),e.jsxs("div",{children:[e.jsx("h3",{className:y("font-bold text-sm text-slate-700 transition-all duration-500 leading-tight","group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2",i%4===0&&"group-hover:decoration-emerald-400",i%4===1&&"group-hover:decoration-blue-400",i%4===2&&"group-hover:decoration-purple-400",i%4===3&&"group-hover:decoration-rose-400"),children:a.title}),e.jsx("p",{className:"text-[9px] text-slate-500 group-hover:text-slate-400 transition-colors duration-500 mt-0.5 uppercase tracking-wide font-semibold",children:"Current Period"})]})]})}),e.jsxs("div",{className:y("p-2.5 rounded-lg transition-all duration-500","bg-slate-50 group-hover:bg-slate-800/30","border border-slate-100 group-hover:border-slate-700/50"),children:[e.jsx("p",{className:"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500 tracking-tight",children:a.value}),e.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[e.jsx("div",{className:y("h-0.5 flex-1 rounded-full transition-all duration-500",a.change>0&&"bg-emerald-200 group-hover:bg-emerald-500/40",a.change<0&&"bg-rose-200 group-hover:bg-rose-500/40",a.change===0&&"bg-slate-200 group-hover:bg-slate-500/40")}),e.jsxs("div",{className:"flex items-center gap-1",children:[a.change>0&&e.jsx(ye,{className:"w-3 h-3 text-emerald-600 group-hover:text-emerald-400"}),a.change<0&&e.jsx(ce,{className:"w-3 h-3 text-rose-600 group-hover:text-rose-400"}),a.change===0&&e.jsx(ve,{className:"w-3 h-3 text-slate-600 group-hover:text-slate-400"}),e.jsx("span",{className:y("text-[10px] font-bold transition-colors duration-500",a.change>0&&"text-emerald-600 group-hover:text-emerald-400",a.change<0&&"text-rose-600 group-hover:text-rose-400",a.change===0&&"text-slate-600 group-hover:text-slate-400"),children:a.changeDetails.trend})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[e.jsxs("div",{className:y("p-2.5 rounded-lg border transition-all duration-500","bg-white/50 group-hover:bg-slate-800/20","border-slate-200 group-hover:border-slate-700/50"),children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Month over Month"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:a.previousValue??"—"}),e.jsx("span",{className:"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500",children:"prev"})]}),e.jsxs("div",{className:y("inline-flex items-center justify-center gap-1 px-3 py-1.5 rounded-lg font-bold text-[11px] tabular-nums transition-all duration-500 min-w-[65px]",a.change>0&&"bg-emerald-900/90 text-white group-hover:bg-emerald-800 group-hover:shadow-lg group-hover:shadow-emerald-900/40",a.change<0&&"bg-rose-900/90 text-white group-hover:bg-rose-800 group-hover:shadow-lg group-hover:shadow-rose-900/40",a.change===0&&"bg-slate-700/90 text-white group-hover:bg-slate-600 group-hover:shadow-lg"),children:[a.change>0&&e.jsx(ye,{className:"w-3.5 h-3.5 flex-shrink-0"}),a.change<0&&e.jsx(ce,{className:"w-3.5 h-3.5 flex-shrink-0"}),a.change===0&&e.jsx(ve,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{children:typeof a.change=="number"?(a.change>0?"+":"")+Math.round(a.change)+"%":"N/A"})]})]}),a.yoyPreviousValue!=null?e.jsxs("div",{className:y("p-2.5 rounded-lg border transition-all duration-500","bg-white/50 group-hover:bg-slate-800/20","border-slate-200 group-hover:border-slate-700/50"),children:[e.jsx("div",{className:"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500",children:"Year over Year"}),e.jsxs("div",{className:"flex items-baseline gap-1.5 mb-1.5",children:[e.jsx("span",{className:"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums",children:a.yoyPreviousValue??"—"}),e.jsx("span",{className:"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500",children:"prev"})]}),typeof a.yoyChange=="number"&&e.jsxs("div",{className:y("inline-flex items-center justify-center gap-1 px-3 py-1.5 rounded-lg font-bold text-[11px] tabular-nums transition-all duration-500 min-w-[65px]",a.yoyChange>0&&"bg-emerald-900/90 text-white group-hover:bg-emerald-800 group-hover:shadow-lg group-hover:shadow-emerald-900/40",a.yoyChange<0&&"bg-rose-900/90 text-white group-hover:bg-rose-800 group-hover:shadow-lg group-hover:shadow-rose-900/40",a.yoyChange===0&&"bg-slate-700/90 text-white group-hover:bg-slate-600 group-hover:shadow-lg"),children:[a.yoyChange>0&&e.jsx(ye,{className:"w-3.5 h-3.5 flex-shrink-0"}),a.yoyChange<0&&e.jsx(ce,{className:"w-3.5 h-3.5 flex-shrink-0"}),a.yoyChange===0&&e.jsx(ve,{className:"w-3.5 h-3.5 flex-shrink-0"}),e.jsx("span",{children:typeof a.yoyChange=="number"?(a.yoyChange>0?"+":"")+Math.round(a.yoyChange)+"%":"N/A"})]})]}):e.jsx("div",{className:y("p-2.5 rounded-lg border transition-all duration-500 flex items-center justify-center","bg-slate-50/50 group-hover:bg-slate-800/10","border-slate-200 group-hover:border-slate-700/30"),children:e.jsx("span",{className:"text-[9px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500 font-semibold",children:"No YoY Data"})})]}),e.jsx("div",{className:y("relative pt-1.5 border-l-3 pl-3 transition-all duration-500","before:absolute before:left-0 before:top-0 before:w-1 before:h-full before:rounded-r-full before:transition-all before:duration-500",i%4===0&&"border-l-emerald-500/50 group-hover:border-l-emerald-400 before:bg-emerald-500/20 group-hover:before:bg-emerald-400/30",i%4===1&&"border-l-blue-500/50 group-hover:border-l-blue-400 before:bg-blue-500/20 group-hover:before:bg-blue-400/30",i%4===2&&"border-l-purple-500/50 group-hover:border-l-purple-400 before:bg-purple-500/20 group-hover:before:bg-purple-400/30",i%4===3&&"border-l-rose-500/50 group-hover:border-l-rose-400 before:bg-rose-500/20 group-hover:before:bg-rose-400/30"),children:e.jsx("p",{className:"text-xs text-slate-600 group-hover:text-slate-300 leading-snug transition-colors duration-500 line-clamp-2 font-medium",children:a.description})}),e.jsx("div",{className:y("pt-2 space-y-2 border-t transition-all duration-500 overflow-hidden","max-h-0 opacity-0 group-hover:max-h-40 group-hover:opacity-100",i%4===0&&"border-emerald-200 group-hover:border-emerald-500/30",i%4===1&&"border-blue-200 group-hover:border-blue-500/30",i%4===2&&"border-purple-200 group-hover:border-purple-500/30",i%4===3&&"border-rose-200 group-hover:border-rose-500/30"),children:e.jsxs("div",{className:"text-xs space-y-1",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400 font-medium",children:"Trend:"}),e.jsx("span",{className:"text-white font-semibold",children:a.changeDetails.trend})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400 font-medium",children:"Difference:"}),e.jsx("span",{className:"text-white font-semibold",children:N(Math.abs(a.comparison.difference))})]}),a.yoyChangeDetails&&e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-slate-400 font-medium",children:"YoY Trend:"}),e.jsx("span",{className:"text-white font-semibold",children:a.yoyChangeDetails.trend})]})]})})]})]})},a.title)})})},Tt=fe.memo(pt,(r,s)=>r.data===s.data&&qe(r.historicalData,s.historicalData)&&qe(r.dateRange,s.dateRange)&&r.onMetricClick===s.onMetricClick&&r.locationId===s.locationId);export{Mt as P,pt as S,Tt as a,qe as s,ut as u};
//# sourceMappingURL=SalesAnimatedMetricCards-9SxqinUB.js.map
