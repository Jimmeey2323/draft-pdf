import{j as e,D,n as T,o as M,q as R,C as o,c as m,a as g,b as h}from"./index-Bm67KBkU.js";import{f as d,a as b,B as N}from"./index-DkD_C-d1.js";import{T as V,a as $,b as u,c as p}from"./tabs-BTrhdLSC.js";import{D as A,C as P}from"./dollar-sign-CKqx8kbC.js";import{U as S}from"./users-7Ku-1TDB.js";import{S as B}from"./SalesMotionHero-sGphstF2.js";import{T as k}from"./googleAuth-BGo8ElRc.js";const L=({isOpen:f,onClose:v,data:s,type:c})=>{if(!s)return null;const a=(n,l=0)=>{const i=Number(n);return isNaN(i)?l:i},j=(n,l=2)=>a(n,0).toFixed(l),w=()=>{const n=a(s.grossRevenue||s.totalValue||s.totalCurrent||s.metricValue||s.revenue||s.totalRevenue||s.amount||s.value||s.rawData?.reduce((r,t)=>r+(t.paymentValue||t.grossRevenue||0),0),0),l=a(s.transactions||s.totalTransactions||s.count||s.totalCount||s.rawData?.length||(s.months?Object.values(s.months).reduce((r,t)=>r+(t.transactions||1),0):0),0),i=a(s.uniqueMembers||s.totalCustomers||s.customers||s.memberCount||(s.rawData?new Set(s.rawData.map(r=>r.memberId||r.customerEmail)).size:0),0),x=a(s.totalChange||s.change||s.growth,0);return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(o,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:e.jsxs(m,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(A,{className:"w-4 h-4 text-blue-600"}),e.jsx("span",{className:"text-sm font-medium text-blue-600",children:"Revenue"})]}),e.jsx("div",{className:"text-xl font-bold text-blue-700",children:d(n)})]})}),e.jsx(o,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:e.jsxs(m,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(S,{className:"w-4 h-4 text-green-600"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"Customers"})]}),e.jsx("div",{className:"text-xl font-bold text-green-700",children:b(i)})]})}),e.jsx(o,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:e.jsxs(m,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(B,{className:"w-4 h-4 text-purple-600"}),e.jsx("span",{className:"text-sm font-medium text-purple-600",children:"Transactions"})]}),e.jsx("div",{className:"text-xl font-bold text-purple-700",children:b(l)})]})}),e.jsx(o,{className:"bg-gradient-to-br from-orange-50 to-orange-100 border-orange-200",children:e.jsxs(m,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(k,{className:"w-4 h-4 text-orange-600"}),e.jsx("span",{className:"text-sm font-medium text-orange-600",children:"Growth"})]}),e.jsx("div",{className:"text-xl font-bold text-orange-700",children:x!==0?`${x>0?"+":""}${j(x,1)}%`:"N/A"})]})})]}),e.jsxs(V,{defaultValue:"performance",className:"w-full",children:[e.jsxs($,{className:"grid w-full grid-cols-3",children:[e.jsx(u,{value:"performance",children:"Performance"}),e.jsx(u,{value:"trends",children:"Monthly Trends"}),e.jsx(u,{value:"insights",children:"Insights"})]}),e.jsx(p,{value:"performance",className:"space-y-4",children:e.jsxs(o,{className:"bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx(g,{children:e.jsx(h,{className:"text-slate-800",children:"Key Metrics"})}),e.jsx(m,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg",children:[e.jsx("span",{className:"text-slate-600",children:"Total Revenue"}),e.jsx("span",{className:"font-bold text-blue-600",children:d(n)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg",children:[e.jsx("span",{className:"text-slate-600",children:"Average per Transaction"}),e.jsx("span",{className:"font-bold text-green-600",children:d(l>0?Math.round(n/l):0)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg",children:[e.jsx("span",{className:"text-slate-600",children:"Average per Customer"}),e.jsx("span",{className:"font-bold text-purple-600",children:d(i>0?Math.round(n/i):0)})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg",children:[e.jsx("span",{className:"text-slate-600",children:"Performance Rating"}),e.jsx(N,{className:`${n>5e4?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:n>1e5?"Excellent":n>5e4?"Good":"Average"})]})]})})]})}),e.jsx(p,{value:"trends",className:"space-y-4",children:e.jsxs(o,{className:"bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx(g,{children:e.jsx(h,{className:"text-slate-800",children:"Monthly Breakdown"})}),e.jsx(m,{children:s.months&&Object.keys(s.months).length>0?e.jsx("div",{className:"space-y-3",children:Object.entries(s.months).slice(-6).map(([r,t])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg",children:[e.jsx("span",{className:"font-medium text-slate-800",children:r}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("span",{className:"text-blue-600",children:d(a(t.current,0))}),e.jsxs(N,{className:`${a(t.change,0)>=0?"bg-green-200 text-green-800":"bg-red-200 text-red-800"}`,children:[a(t.change,0)>0?"+":"",j(t.change,1),"%"]})]})]},r))}):s.monthlyValues?e.jsx("div",{className:"space-y-3",children:Object.entries(s.monthlyValues).slice(-6).map(([r,t])=>e.jsxs("div",{className:"flex items-center justify-between p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-lg",children:[e.jsx("span",{className:"font-medium text-slate-800",children:r}),e.jsx("span",{className:"text-blue-600",children:d(a(t,0))})]},r))}):e.jsx("p",{className:"text-center text-slate-600",children:"No monthly data available"})})]})}),e.jsx(p,{value:"insights",className:"space-y-4",children:e.jsxs(o,{className:"bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx(g,{children:e.jsx(h,{className:"text-slate-800",children:"Performance Insights"})}),e.jsx(m,{children:e.jsxs("div",{className:"space-y-3 text-sm text-slate-700",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border-l-4 border-blue-400",children:[e.jsx("strong",{className:"text-blue-600",children:"Performance:"}),n>1e5?" Exceptional performance with high revenue generation":n>5e4?" Good performance showing steady growth":" Moderate performance with room for improvement"]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border-l-4 border-green-400",children:[e.jsx("strong",{className:"text-green-600",children:"Customer Engagement:"}),i>50?" Strong customer base with good engagement":i>20?" Moderate customer engagement":" Limited customer base - focus on acquisition"]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border-l-4 border-purple-400",children:[e.jsx("strong",{className:"text-purple-600",children:"Transaction Volume:"}),l>100?" High transaction volume indicating strong sales activity":l>50?" Moderate transaction activity":" Low transaction volume - consider promotional strategies"]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border-l-4 border-orange-400",children:[e.jsx("strong",{className:"text-orange-600",children:"Recommendation:"}),x>0?" Continue current strategies and consider scaling successful initiatives":" Review pricing strategy and focus on customer retention programs"]})]})})]})})]}),s.rawData&&s.rawData.length>0&&e.jsxs(o,{className:"bg-gradient-to-br from-indigo-50 to-indigo-100",children:[e.jsx(g,{children:e.jsxs(h,{className:"flex items-center gap-2 text-indigo-800",children:[e.jsx(P,{className:"w-5 h-5"}),"Data Summary"]})}),e.jsx(m,{children:e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4 text-sm text-indigo-700",children:[e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg",children:[e.jsx("div",{className:"font-bold text-lg",children:s.rawData.length}),e.jsx("div",{children:"Total Records"})]}),e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg",children:[e.jsx("div",{className:"font-bold text-lg",children:d(s.rawData.reduce((r,t)=>r+(t.paymentValue||0),0))}),e.jsx("div",{children:"Total Value"})]}),e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg",children:[e.jsx("div",{className:"font-bold text-lg",children:new Set(s.rawData.map(r=>r.memberId)).size}),e.jsx("div",{children:"Unique Customers"})]}),e.jsxs("div",{className:"text-center p-3 bg-white rounded-lg",children:[e.jsx("div",{className:"font-bold text-lg",children:d(s.rawData.reduce((r,t)=>r+(t.paymentValue||0),0)/s.rawData.length)}),e.jsx("div",{children:"Avg Transaction"})]})]})})]})]})},y=()=>c==="metric"?`${s.title} - Detailed Analysis`:c==="soldBy"?`${s.soldBy||s.name} - Sales Performance`:c==="paymentMethod"?`${s.paymentMethod||s.name} - Payment Analytics`:c==="client-conversion"?`${s.firstName||s.name||"Client"} ${s.lastName||""} - Conversion Details`:`${s.name||s.trainer||"Item"} - Performance Breakdown`,C=()=>c==="metric"?"Comprehensive performance analysis with real-time data insights":c==="soldBy"?"Detailed breakdown of sales associate performance and growth trends":c==="paymentMethod"?"Payment method analysis with transaction patterns and insights":c==="client-conversion"?"Detailed client conversion and retention analysis":"Detailed breakdown of performance metrics and growth trends";return e.jsx(D,{open:f,onOpenChange:v,children:e.jsxs(T,{className:"max-w-6xl max-h-[90vh] overflow-y-auto bg-gradient-to-br from-white via-slate-50/50 to-white",children:[e.jsxs(M,{className:"pb-4 border-b",children:[e.jsx(R,{className:"text-3xl font-bold bg-gradient-to-r from-blue-600 via-purple-600 to-blue-800 bg-clip-text text-transparent",children:y()}),e.jsx("p",{className:"text-slate-600 mt-2",children:C()})]}),e.jsx("div",{className:"pt-4",children:w()})]})})};export{L as DrillDownModal};
//# sourceMappingURL=DrillDownModal-BZ3bqDle.js.map
