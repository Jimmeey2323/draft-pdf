{"version":3,"file":"EnhancedSalesDrillDownModal-D1CsRuw2.js","sources":["../../src/components/dashboard/EnhancedSalesDrillDownModal.tsx"],"sourcesContent":["import React, { useMemo } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle } from '@/components/ui/dialog';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Button } from '@/components/ui/button';\nimport { ModernDataTable } from '@/components/ui/ModernDataTable';\nimport { formatCurrency, formatNumber, formatPercentage } from '@/utils/formatters';\nimport { \n  TrendingUp, \n  TrendingDown, \n  Users, \n  ShoppingCart, \n  Calendar, \n  MapPin, \n  BarChart3, \n  DollarSign, \n  Activity, \n  CreditCard,\n  Target,\n  Clock,\n  Star,\n  Zap,\n  PieChart,\n  Award,\n  Filter,\n  Eye,\n  Download\n} from 'lucide-react';\nimport { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, LineChart, Line, PieChart as RechartsPieChart, Pie, Cell } from 'recharts';\nimport { useAdvancedExport } from '@/hooks/useAdvancedExport';\n\ninterface EnhancedSalesDrillDownModalProps {\n  isOpen: boolean;\n  onClose: () => void;\n  data: any;\n  type: 'metric' | 'product' | 'category' | 'member' | 'soldBy' | 'paymentMethod' | 'client-conversion' | 'trainer' | 'location' | 'class';\n}\n\nconst EnhancedSalesDrillDownModal: React.FC<EnhancedSalesDrillDownModalProps> = ({\n  isOpen,\n  onClose,\n  data,\n  type\n}) => {\n  if (!data) return null;\n\n  const { exportAllData, isExporting } = useAdvancedExport();\n\n  // Enhanced data processing with deeper analytics\n  const enhancedData = useMemo(() => {\n    // Use the most specific transaction data available\n    const transactionData = data.filteredTransactionData || data.rawData || data.transactionData || [];\n    \n    console.log(`Processing drill-down modal with ${transactionData.length} transactions`);\n    console.log('Data has dynamic flags:', data.isDynamic, data.calculatedFromFiltered);\n    \n    // Use dynamic metrics if available (calculated from filtered data), otherwise calculate fresh\n    const totalRevenue = data.isDynamic && data.totalRevenue !== undefined ? data.totalRevenue : \n                        transactionData.reduce((sum: number, item: any) => sum + (item.paymentValue || 0), 0);\n    const totalTransactions = data.isDynamic && data.totalTransactions !== undefined ? data.totalTransactions : \n                             transactionData.length;\n    const uniqueCustomers = data.isDynamic && data.totalCustomers !== undefined ? data.totalCustomers : \n                           new Set(transactionData.map((item: any) => item.memberId || item.customerEmail)).size;\n    const avgTransactionValue = totalTransactions > 0 ? totalRevenue / totalTransactions : 0;\n    const uniqueProducts = new Set(transactionData.map((item: any) => item.cleanedProduct || item.paymentItem)).size;\n\n    // Advanced analytics\n    const paymentMethodBreakdown = transactionData.reduce((acc: any, item: any) => {\n      const method = item.paymentMethod || 'Unknown';\n      if (!acc[method]) {\n        acc[method] = { count: 0, revenue: 0 };\n      }\n      acc[method].count += 1;\n      acc[method].revenue += item.paymentValue || 0;\n      return acc;\n    }, {});\n\n    const categoryBreakdown = transactionData.reduce((acc: any, item: any) => {\n      const category = item.cleanedCategory || 'Other';\n      if (!acc[category]) {\n        acc[category] = { count: 0, revenue: 0, customers: new Set() };\n      }\n      acc[category].count += 1;\n      acc[category].revenue += item.paymentValue || 0;\n      acc[category].customers.add(item.memberId || item.customerEmail);\n      return acc;\n    }, {});\n\n    const timeAnalysis = transactionData.reduce((acc: any, item: any) => {\n      if (!item.paymentDate) return acc;\n      \n      const date = new Date(item.paymentDate);\n      const hour = date.getHours();\n      const dayOfWeek = date.toLocaleDateString('en-US', { weekday: 'long' });\n      const month = date.toLocaleDateString('en-US', { month: 'long', year: 'numeric' });\n      \n      // Hour analysis\n      if (!acc.hourly[hour]) {\n        acc.hourly[hour] = { transactions: 0, revenue: 0 };\n      }\n      acc.hourly[hour].transactions += 1;\n      acc.hourly[hour].revenue += item.paymentValue || 0;\n      \n      // Day of week analysis\n      if (!acc.weekly[dayOfWeek]) {\n        acc.weekly[dayOfWeek] = { transactions: 0, revenue: 0 };\n      }\n      acc.weekly[dayOfWeek].transactions += 1;\n      acc.weekly[dayOfWeek].revenue += item.paymentValue || 0;\n      \n      // Monthly analysis\n      if (!acc.monthly[month]) {\n        acc.monthly[month] = { transactions: 0, revenue: 0 };\n      }\n      acc.monthly[month].transactions += 1;\n      acc.monthly[month].revenue += item.paymentValue || 0;\n      \n      return acc;\n    }, { hourly: {}, weekly: {}, monthly: {} });\n\n    const customerAnalysis = transactionData.reduce((acc: any, item: any) => {\n      const customerId = item.memberId || item.customerEmail;\n      if (!customerId) return acc;\n      \n      if (!acc[customerId]) {\n        acc[customerId] = {\n          email: item.customerEmail || 'N/A',\n          transactions: 0,\n          totalSpent: 0,\n          avgTransactionValue: 0,\n          lastTransaction: null,\n          categories: new Set()\n        };\n      }\n      \n      acc[customerId].transactions += 1;\n      acc[customerId].totalSpent += item.paymentValue || 0;\n      acc[customerId].categories.add(item.cleanedCategory || 'Other');\n      \n      const transactionDate = new Date(item.paymentDate);\n      if (!acc[customerId].lastTransaction || transactionDate > new Date(acc[customerId].lastTransaction)) {\n        acc[customerId].lastTransaction = item.paymentDate;\n      }\n      \n      return acc;\n    }, {});\n\n    // Calculate customer metrics\n    Object.values(customerAnalysis).forEach((customer: any) => {\n      customer.avgTransactionValue = customer.transactions > 0 ? customer.totalSpent / customer.transactions : 0;\n      customer.categories = Array.from(customer.categories);\n    });\n\n    return {\n      ...data,\n      totalRevenue,\n      totalTransactions,\n      uniqueCustomers,\n      avgTransactionValue,\n      paymentMethodBreakdown,\n      categoryBreakdown,\n      timeAnalysis,\n      customerAnalysis\n    };\n  }, [data]);\n\n  // Build a per-member behavior summary specifically for Customer Behavior context\n  const behaviorSummary = useMemo(() => {\n    const tx = enhancedData.filteredTransactionData || enhancedData.rawData || [];\n    if (!tx.length) return [] as any[];\n\n    const parseDate = (dateStr: string): Date | null => {\n      if (!dateStr) return null;\n      const ddmmyyyy = dateStr.match(/^(\\d{1,2})\\/(\\d{1,2})\\/(\\d{4})$/);\n      if (ddmmyyyy) {\n        const [, day, month, year] = ddmmyyyy as any;\n        return new Date(parseInt(year), parseInt(month) - 1, parseInt(day));\n      }\n      const d = new Date(dateStr);\n      return isNaN(d.getTime()) ? null : d;\n    };\n\n    const byMember = new Map<string, any[]>();\n    tx.forEach((t: any) => {\n      const id = t.memberId || t.customerEmail || 'unknown';\n      if (!byMember.has(id)) byMember.set(id, []);\n      byMember.get(id)!.push(t);\n    });\n\n    const rows: any[] = [];\n    byMember.forEach((list, memberId) => {\n      const sorted = list\n        .map((l: any) => ({ ...l, _date: parseDate(l.paymentDate) }))\n        .filter((l: any) => !!l._date)\n        .sort((a: any, b: any) => a._date.getTime() - b._date.getTime());\n      const totalSpent = list.reduce((s: number, i: any) => s + (i.paymentValue || 0), 0);\n      const transactions = list.length;\n      const discountedTx = list.filter((i: any) => (i.discountAmount || 0) > 0).length;\n      const usedSessions = list.reduce((s: number, i: any) => s + (i.secMembershipUsedSessions || 0), 0);\n      let purchaseFrequencyDays = 0;\n      let lifespanDays = 0;\n      let daysToSecondPurchase = 0;\n      if (sorted.length > 1) {\n        const first = sorted[0]._date as Date;\n        const last = sorted[sorted.length - 1]._date as Date;\n        lifespanDays = (last.getTime() - first.getTime()) / (1000 * 60 * 60 * 24);\n        purchaseFrequencyDays = lifespanDays / (sorted.length - 1);\n        daysToSecondPurchase = ((sorted[1]._date as Date).getTime() - first.getTime()) / (1000 * 60 * 60 * 24);\n      }\n      rows.push({\n        memberId,\n        email: list[0]?.customerEmail || '',\n        transactions,\n        totalSpent,\n        avgSpend: transactions ? totalSpent / transactions : 0,\n        discountedTx,\n        percentDiscounted: transactions ? (discountedTx / transactions) * 100 : 0,\n        usedSessions,\n        avgSessionsPerTx: transactions ? usedSessions / transactions : 0,\n        purchaseFrequencyDays,\n        lifespanDays,\n        daysToSecondPurchase,\n        firstPurchase: sorted[0]?._date ? (sorted[0]._date as Date).toISOString().slice(0, 10) : '',\n        lastPurchase: sorted[sorted.length - 1]?._date ? (sorted[sorted.length - 1]._date as Date).toISOString().slice(0, 10) : '',\n      });\n    });\n\n    return rows.sort((a, b) => b.totalSpent - a.totalSpent);\n  }, [enhancedData]);\n\n  const handleExport = async () => {\n    const tx = (enhancedData.filteredTransactionData || enhancedData.rawData || []).map((t: any) => ({\n      paymentDate: t.paymentDate,\n      customerEmail: t.customerEmail,\n      memberId: t.memberId,\n      cleanedCategory: t.cleanedCategory,\n      cleanedProduct: t.cleanedProduct || t.paymentItem,\n      paymentValue: t.paymentValue,\n      discountAmount: t.discountAmount,\n      discountPercentage: t.discountPercentage,\n      paymentMethod: t.paymentMethod,\n      soldBy: t.soldBy,\n      calculatedLocation: t.calculatedLocation,\n    }));\n\n    await exportAllData(\n      {\n        additionalData: {\n          'Transactions': tx,\n          'Per-Member Behavior Summary': behaviorSummary,\n        },\n      },\n      {\n        format: 'csv',\n        fileName: `${(data.clickedItemName || 'drilldown').toString().replace(/\\s+/g, '-').toLowerCase()}-${new Date().toISOString().slice(0,10)}`,\n      }\n    );\n  };\n\n  // Chart colors\n  const COLORS = ['#3B82F6', '#10B981', '#F59E0B', '#EF4444', '#8B5CF6', '#F97316', '#06B6D4', '#84CC16'];\n\n  const getTitle = () => {\n    // Use the contextual item name if available\n    const itemName = data.clickedItemName || data.product || data.name || data.category;\n    \n    if (type === 'trainer') return `${itemName || 'Trainer'} - Performance Analytics`;\n    if (type === 'product') return `${itemName || 'Product'} - Sales Analytics`;\n    if (type === 'category') return `${itemName || 'Category'} - Performance Analysis`;\n    if (type === 'soldBy') return `${itemName || 'Sales Rep'} - Performance Analytics`;\n    if (type === 'paymentMethod') return `${itemName || 'Payment Method'} - Analytics`;\n    if (type === 'metric') return 'Sales Performance - Detailed Analytics';\n    return `${itemName || 'Item'} - Comprehensive Analysis`;\n  };\n\n  const getSubtitle = () => {\n    // Use the contextual description if available\n    if (data.contextDescription) {\n      return `${data.contextDescription} • Data shows all historical records, independent of current filters`;\n    }\n    \n    const baseSubtitle = (() => {\n      if (type === 'trainer') return 'Performance insights and customer engagement metrics';\n      if (type === 'product') return 'Comprehensive sales performance and customer behavior analysis';\n      if (type === 'category') return 'Category performance breakdown with customer insights';\n      if (type === 'soldBy') return 'Sales representative performance and transaction history';\n      if (type === 'paymentMethod') return 'Payment method usage and transaction analysis';\n      return `Detailed analytics dashboard with ${enhancedData.totalTransactions} transactions and ${enhancedData.uniqueCustomers} customers`;\n    })();\n    \n    return `${baseSubtitle} • Showing all historical data, independent of current date/filter selections`;\n  };\n\n  // Render enhanced metric cards\n  const renderMetricCards = () => (\n    <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n      <Card className=\"bg-gradient-to-br from-slate-900 to-blue-950 text-white border-0 shadow-2xl hover:shadow-3xl transition-all duration-500 hover:scale-105 transform-gpu rounded-2xl overflow-hidden\">\n        <CardContent className=\"p-5\">\n          <div className=\"flex flex-col gap-1\">\n            <div className=\"flex items-center gap-2 text-slate-300 mb-1\">\n              <DollarSign className=\"w-4 h-4 animate-pulse\" />\n              <span className=\"text-xs font-medium\">Total Revenue</span>\n            </div>\n            <div className=\"text-2xl font-bold text-white\">{formatCurrency(enhancedData.totalRevenue)}</div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card className=\"bg-white border-slate-200 shadow-md hover:shadow-xl transition-all duration-500 hover:scale-105 animate-in fade-in slide-in-from-bottom-4 delay-100\">\n          <CardContent className=\"p-5\">\n          <div className=\"flex flex-col gap-1\">\n            <div className=\"flex items-center gap-2 text-slate-500 mb-1\">\n              <Users className=\"w-4 h-4\" />\n              <span className=\"text-xs font-medium\">Customers</span>\n            </div>\n            <div className=\"text-2xl font-bold bg-gradient-to-r from-slate-900 to-blue-950 bg-clip-text text-transparent\">{formatNumber(enhancedData.uniqueCustomers)}</div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card className=\"bg-white border-slate-200 shadow-md hover:shadow-xl transition-all duration-500 hover:scale-105 animate-in fade-in slide-in-from-bottom-4 delay-200\">\n          <CardContent className=\"p-5\">\n          <div className=\"flex flex-col gap-1\">\n            <div className=\"flex items-center gap-2 text-slate-500 mb-1\">\n              <ShoppingCart className=\"w-4 h-4\" />\n              <span className=\"text-xs font-medium\">Transactions</span>\n            </div>\n            <div className=\"text-2xl font-bold bg-gradient-to-r from-slate-900 to-blue-950 bg-clip-text text-transparent\">{formatNumber(enhancedData.totalTransactions)}</div>\n          </div>\n        </CardContent>\n      </Card>\n\n      <Card className=\"bg-gradient-to-br from-slate-100 to-slate-200 border-slate-300 shadow-md hover:shadow-xl transition-all duration-500 hover:scale-105 animate-in fade-in slide-in-from-bottom-4 delay-300\">\n          <CardContent className=\"p-5\">\n          <div className=\"flex flex-col gap-1\">\n            <div className=\"flex items-center gap-2 text-slate-600 mb-1\">\n              <BarChart3 className=\"w-4 h-4\" />\n              <span className=\"text-xs font-medium\">Avg Transaction</span>\n            </div>\n            <div className=\"text-2xl font-bold text-slate-900\">{formatCurrency(enhancedData.avgTransactionValue)}</div>\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n\n  // Render analytics charts\n  const renderAnalyticsCharts = () => {\n    const hourlyData = Object.entries(enhancedData.timeAnalysis.hourly)\n      .map(([hour, data]: [string, any]) => ({\n        hour: `${hour}:00`,\n        transactions: data.transactions,\n        revenue: data.revenue\n      }))\n      .sort((a, b) => parseInt(a.hour) - parseInt(b.hour));\n\n    const paymentMethodData = Object.entries(enhancedData.paymentMethodBreakdown)\n      .map(([method, data]: [string, any]) => ({\n        method,\n        revenue: data.revenue,\n        count: data.count\n      }))\n      .sort((a, b) => b.revenue - a.revenue);\n\n    return (\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        <Card className=\"bg-gradient-to-br from-slate-50 to-slate-100 border-slate-200 shadow-lg hover:shadow-2xl transition-all duration-500 animate-in fade-in slide-in-from-left\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-slate-800\">\n              <Clock className=\"w-5 h-5\" />\n              Hourly Transaction Patterns\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={hourlyData}>\n                <defs>\n                  <linearGradient id=\"barGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"0%\" stopColor=\"#1e3a8a\" stopOpacity={0.9}/>\n                    <stop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0.6}/>\n                  </linearGradient>\n                </defs>\n                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e2e8f0\" opacity={0.5} />\n                <XAxis dataKey=\"hour\" stroke=\"#64748b\" style={{ fontSize: '12px' }} />\n                <YAxis stroke=\"#64748b\" style={{ fontSize: '12px' }} />\n                <Tooltip \n                  contentStyle={{ \n                    backgroundColor: 'rgba(255, 255, 255, 0.95)', \n                    border: '1px solid #cbd5e1',\n                    borderRadius: '8px',\n                    boxShadow: '0 4px 6px rgba(0,0,0,0.1)'\n                  }}\n                  formatter={(value, name) => [\n                    name === 'revenue' ? formatCurrency(value as number) : formatNumber(value as number),\n                    name === 'revenue' ? 'Revenue' : 'Transactions'\n                  ]}\n                />\n                <Bar \n                  dataKey=\"transactions\" \n                  fill=\"url(#barGradient)\" \n                  name=\"transactions\"\n                  radius={[8, 8, 0, 0]}\n                  animationDuration={1500}\n                  animationBegin={0}\n                  isAnimationActive={true}\n                />\n              </BarChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        <Card className=\"bg-gradient-to-br from-slate-50 to-slate-100 border-slate-200 shadow-lg hover:shadow-2xl transition-all duration-500 animate-in fade-in slide-in-from-right\">\n          <CardHeader>\n            <CardTitle className=\"flex items-center gap-2 text-slate-800\">\n              <CreditCard className=\"w-5 h-5\" />\n              Payment Method Distribution\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <RechartsPieChart>\n                <defs>\n                  <filter id=\"shadow\" x=\"-50%\" y=\"-50%\" width=\"200%\" height=\"200%\">\n                    <feGaussianBlur in=\"SourceAlpha\" stdDeviation=\"3\"/>\n                    <feOffset dx=\"2\" dy=\"2\" result=\"offsetblur\"/>\n                    <feComponentTransfer>\n                      <feFuncA type=\"linear\" slope=\"0.3\"/>\n                    </feComponentTransfer>\n                    <feMerge>\n                      <feMergeNode/>\n                      <feMergeNode in=\"SourceGraphic\"/>\n                    </feMerge>\n                  </filter>\n                </defs>\n                <Pie\n                  dataKey=\"revenue\"\n                  data={paymentMethodData}\n                  cx=\"50%\"\n                  cy=\"50%\"\n                  innerRadius={50}\n                  outerRadius={90}\n                  paddingAngle={3}\n                  label={({ method, percent }) => `${method}: ${(percent * 100).toFixed(0)}%`}\n                  labelLine={true}\n                  animationDuration={1500}\n                  animationBegin={0}\n                  isAnimationActive={true}\n                  style={{ filter: 'url(#shadow)' }}\n                >\n                  {paymentMethodData.map((entry, index) => (\n                    <Cell \n                      key={`cell-${index}`} \n                      fill={COLORS[index % COLORS.length]}\n                      stroke=\"#ffffff\"\n                      strokeWidth={2}\n                    />\n                  ))}\n                </Pie>\n                <Tooltip \n                  contentStyle={{ \n                    backgroundColor: 'rgba(255, 255, 255, 0.95)', \n                    border: '1px solid #cbd5e1',\n                    borderRadius: '8px',\n                    boxShadow: '0 4px 6px rgba(0,0,0,0.1)'\n                  }}\n                  formatter={(value) => formatCurrency(value as number)} \n                />\n              </RechartsPieChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      </div>\n    );\n  };\n\n  // Render customer analysis table\n  const renderCustomerAnalysis = () => {\n    const customers = Object.values(enhancedData.customerAnalysis)\n      .sort((a: any, b: any) => b.totalSpent - a.totalSpent)\n      .slice(0, 50); // Top 50 customers\n\n    const columns = [\n      {\n        key: 'email',\n        header: 'Customer',\n        render: (value: string) => (\n          <div className=\"font-medium text-slate-800 truncate max-w-[200px]\" title={value}>\n            {value}\n          </div>\n        )\n      },\n      {\n        key: 'transactions',\n        header: 'Transactions',\n        align: 'center' as const,\n        render: (value: number) => (\n          <Badge className=\"bg-blue-100 text-blue-800\">{formatNumber(value)}</Badge>\n        )\n      },\n      {\n        key: 'totalSpent',\n        header: 'Total Spent',\n        align: 'center' as const,\n        render: (value: number) => (\n          <span className=\"font-semibold text-green-600\">{formatCurrency(value)}</span>\n        )\n      },\n      {\n        key: 'avgTransactionValue',\n        header: 'Avg Order Value',\n        align: 'center' as const,\n        render: (value: number) => (\n          <span className=\"font-medium text-blue-700\">{formatCurrency(value)}</span>\n        )\n      },\n      {\n        key: 'categories',\n        header: 'Categories',\n        align: 'center' as const,\n        render: (value: string[]) => (\n          <div className=\"flex flex-wrap gap-1 max-w-[150px]\">\n            {value.slice(0, 2).map((cat, idx) => (\n              <Badge key={idx} variant=\"outline\" className=\"text-xs\">\n                {cat.length > 8 ? `${cat.substring(0, 8)}...` : cat}\n              </Badge>\n            ))}\n            {value.length > 2 && (\n              <Badge variant=\"outline\" className=\"text-xs\">+{value.length - 2}</Badge>\n            )}\n          </div>\n        )\n      },\n      {\n        key: 'lastTransaction',\n        header: 'Last Purchase',\n        align: 'center' as const,\n        render: (value: string) => (\n          <span className=\"text-sm text-slate-600\">\n            {value ? new Date(value).toLocaleDateString() : 'N/A'}\n          </span>\n        )\n      }\n    ];\n\n    return (\n      <Card className=\"bg-gradient-to-br from-slate-50 to-slate-100\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2 text-slate-800\">\n            <Users className=\"w-5 h-5\" />\n            Top Customers Analysis\n            <Badge className=\"bg-blue-100 text-blue-800 ml-auto\">\n              {customers.length} customers\n            </Badge>\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <ModernDataTable\n            data={customers}\n            columns={columns}\n            maxHeight=\"400px\"\n            stickyHeader={true}\n            showFooter={false}\n          />\n        </CardContent>\n      </Card>\n    );\n  };\n\n  // Render transaction details\n  const renderTransactionDetails = () => {\n    const transactions = (data.rawData || []).slice(0, 100); // Latest 100 transactions\n    \n    const columns = [\n      {\n        key: 'paymentDate',\n        header: 'Date',\n        render: (value: string) => (\n          <span className=\"font-mono text-sm\">\n            {value ? new Date(value).toLocaleDateString() : 'N/A'}\n          </span>\n        )\n      },\n      {\n        key: 'customerEmail',\n        header: 'Customer',\n        render: (value: string) => (\n          <div className=\"font-medium text-slate-700 truncate max-w-[180px]\" title={value}>\n            {value || 'Anonymous'}\n          </div>\n        )\n      },\n      {\n        key: 'cleanedProduct',\n        header: 'Product/Service',\n        render: (value: string, row: any) => (\n          <div>\n            <div className=\"font-medium text-slate-800 truncate max-w-[200px]\" title={value}>\n              {value || row.membershipName || 'N/A'}\n            </div>\n            <div className=\"text-xs text-slate-500\">\n              {row.cleanedCategory || 'Uncategorized'}\n            </div>\n          </div>\n        )\n      },\n      {\n        key: 'paymentValue',\n        header: 'Amount',\n        align: 'center' as const,\n        render: (value: number, row: any) => (\n          <div className=\"text-right\">\n            <div className=\"font-semibold text-green-600\">{formatCurrency(value || 0)}</div>\n            {row.discountAmount && (\n              <div className=\"text-xs text-red-500\">\n                -{formatCurrency(row.discountAmount)}\n              </div>\n            )}\n          </div>\n        )\n      },\n      {\n        key: 'paymentMethod',\n        header: 'Payment',\n        align: 'center' as const,\n        render: (value: string) => (\n          <Badge variant=\"outline\" className=\"text-xs\">\n            {value || 'N/A'}\n          </Badge>\n        )\n      },\n      {\n        key: 'soldBy',\n        header: 'Sold By',\n        render: (value: string) => (\n          <span className=\"text-sm text-slate-600\">\n            {value || 'System'}\n          </span>\n        )\n      }\n    ];\n\n    return (\n      <Card className=\"bg-gradient-to-br from-slate-50 to-slate-100\">\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2 text-slate-800\">\n            <Eye className=\"w-5 h-5\" />\n            Transaction Details\n            <Badge className=\"bg-blue-100 text-blue-800 ml-auto\">\n              {transactions.length} transactions\n            </Badge>\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"p-0\">\n          <ModernDataTable\n            data={transactions}\n            columns={columns}\n            maxHeight=\"500px\"\n            stickyHeader={true}\n            showFooter={false}\n          />\n        </CardContent>\n      </Card>\n    );\n  };\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"w-[85vw] max-w-[1200px] max-h-[85vh] overflow-hidden bg-gradient-to-br from-slate-50 via-white to-slate-50 dark:from-slate-900 dark:via-slate-800 dark:to-slate-900 border-0 shadow-2xl rounded-2xl\">\n        {/* Compact Header */}\n        <DialogHeader className=\"relative overflow-hidden bg-gradient-to-r from-blue-700 via-blue-800 to-blue-900 dark:from-blue-800 dark:via-blue-900 dark:to-blue-950 text-white p-6 -m-6 mb-6 rounded-t-2xl\">\n          <div className=\"absolute inset-0 bg-black/10 backdrop-blur-sm\"></div>\n          <div className=\"absolute top-0 right-0 w-32 h-32 bg-white/5 rounded-full -translate-y-16 translate-x-16\"></div>\n          <div className=\"absolute bottom-0 left-0 w-24 h-24 bg-white/5 rounded-full translate-y-12 -translate-x-12\"></div>\n          \n          <div className=\"relative z-10\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center space-x-3\">\n                <div className=\"w-10 h-10 bg-white/20 rounded-xl flex items-center justify-center backdrop-blur-md border border-white/30 shadow-lg\">\n                  <BarChart3 className=\"w-5 h-5 text-white\" />\n                </div>\n                <div>\n                  <DialogTitle className=\"text-xl font-bold tracking-tight text-white mb-1\">\n                    {getTitle()}\n                  </DialogTitle>\n                  <p className=\"text-blue-100 text-xs font-medium opacity-90\">\n                    {getSubtitle()}\n                  </p>\n                </div>\n              </div>\n              <div className=\"flex items-center space-x-2\">\n                <Button\n                  variant=\"outline\"\n                  size=\"sm\"\n                  className=\"bg-white/10 border-white/30 text-white hover:bg-white/20 backdrop-blur-md transition-all duration-200 hover:scale-105 shadow-lg text-xs\"\n                  onClick={handleExport}\n                  disabled={isExporting}\n                  title=\"Export transactions and per-member behavior summary\"\n                >\n                  <Download className=\"w-3 h-3 mr-1\" />\n                  {isExporting ? 'Exporting...' : 'Export'}\n                </Button>\n                <Button \n                  variant=\"ghost\"\n                  size=\"sm\"\n                  onClick={onClose}\n                  className=\"text-white hover:bg-white/20 backdrop-blur-md transition-all duration-200 hover:scale-105 w-8 h-8 p-0\"\n                >\n                  ×\n                </Button>\n              </div>\n            </div>\n          </div>\n        </DialogHeader>\n  \n  {/* Compact Content Area */}\n  <div className=\"overflow-y-auto px-6 py-1 space-y-6\" style={{ maxHeight: 'calc(85vh - 120px)' }}>\n    \n    {/* Key Metrics Section - Compact */}\n    <div className=\"p-5 bg-gradient-to-br from-white to-slate-50 dark:from-slate-800 dark:to-slate-900 border border-slate-200 dark:border-slate-700 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300\">\n      <h3 className=\"text-lg font-bold text-slate-900 dark:text-slate-100 mb-5 flex items-center gap-2 pb-3 border-b border-slate-200 dark:border-slate-700\">\n        <div className=\"w-6 h-6 bg-gradient-to-r from-blue-500 to-purple-500 rounded-lg flex items-center justify-center\">\n          <BarChart3 className=\"w-3 h-3 text-white\" />\n        </div>\n        Key Metrics\n      </h3>\n      {renderMetricCards()}\n    </div>\n\n    {/* Compact Content Tabs */}\n    <Tabs defaultValue=\"overview\" className=\"w-full\">\n      <TabsList className=\"grid w-full grid-cols-5 bg-gradient-to-r from-slate-100 via-white to-slate-100 dark:from-slate-800 dark:via-slate-700 dark:to-slate-800 h-12 border border-slate-200 dark:border-slate-600 rounded-xl p-1 shadow-lg backdrop-blur-md\">\n              <TabsTrigger \n                value=\"overview\" \n                className=\"gap-1 font-medium text-xs data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-blue-800 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-blue-500/25 rounded-lg transition-all duration-300 data-[state=active]:scale-105\"\n              >\n                <Star className=\"w-3 h-3\" />\n                Overview\n              </TabsTrigger>\n              <TabsTrigger \n                value=\"analytics\" \n                className=\"gap-1 font-medium text-xs data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-blue-800 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-blue-500/25 rounded-lg transition-all duration-300 data-[state=active]:scale-105\"\n              >\n                <BarChart3 className=\"w-3 h-3\" />\n                Analytics\n              </TabsTrigger>\n              <TabsTrigger \n                value=\"customers\" \n                className=\"gap-1 font-medium text-xs data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-blue-800 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-blue-500/25 rounded-lg transition-all duration-300 data-[state=active]:scale-105\"\n              >\n                <Users className=\"w-3 h-3\" />\n                Customers\n              </TabsTrigger>\n              <TabsTrigger \n                value=\"transactions\" \n                className=\"gap-1 font-medium text-xs data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-blue-800 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-blue-500/25 rounded-lg transition-all duration-300 data-[state=active]:scale-105\"\n              >\n                <Eye className=\"w-3 h-3\" />\n                Transactions\n              </TabsTrigger>\n              <TabsTrigger \n                value=\"insights\" \n                className=\"gap-1 font-medium text-xs data-[state=active]:bg-gradient-to-r data-[state=active]:from-blue-600 data-[state=active]:to-blue-800 data-[state=active]:text-white data-[state=active]:shadow-lg data-[state=active]:shadow-blue-500/25 rounded-lg transition-all duration-300 data-[state=active]:scale-105\"\n              >\n                <Zap className=\"w-3 h-3\" />\n                Insights\n              </TabsTrigger>\n            </TabsList>\n            \n            {/* Compact Overview Tab */}\n            <TabsContent value=\"overview\" className=\"mt-4\">\n              <div className=\"space-y-5\">\n                \n                {/* Analytics Charts Section */}\n                <div className=\"p-5 bg-gradient-to-br from-white via-slate-50 to-white dark:from-slate-800 dark:via-slate-900 dark:to-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-xl hover:shadow-2xl transition-all duration-500\">\n                  <h3 className=\"text-lg font-bold text-slate-900 dark:text-slate-100 mb-5 flex items-center gap-2 pb-3 border-b border-slate-200 dark:border-slate-700\">\n                    <div className=\"w-6 h-6 bg-gradient-to-r from-green-500 to-emerald-500 rounded-lg flex items-center justify-center shadow-lg\">\n                      <TrendingUp className=\"w-3 h-3 text-white\" />\n                    </div>\n                    Analytics Overview\n                  </h3>\n                  {renderAnalyticsCharts()}\n                </div>\n              \n                {/* Performance Cards Section */}\n                <div className=\"p-5 bg-gradient-to-br from-white via-slate-50 to-white dark:from-slate-800 dark:via-slate-900 dark:to-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-xl hover:shadow-2xl transition-all duration-500\">\n                  <h3 className=\"text-lg font-bold text-slate-900 dark:text-slate-100 mb-5 flex items-center gap-2 pb-3 border-b border-slate-200 dark:border-slate-700\">\n                    <div className=\"w-6 h-6 bg-gradient-to-r from-yellow-500 to-orange-500 rounded-lg flex items-center justify-center shadow-lg\">\n                      <Award className=\"w-3 h-3 text-white\" />\n                    </div>\n                    Performance Breakdown\n                  </h3>\n                  <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-4\">\n                <Card className=\"bg-gradient-to-br from-slate-900 via-blue-950 to-slate-900 text-white border-0 shadow-2xl hover:shadow-3xl transition-all duration-500 hover:scale-105 transform-gpu rounded-2xl overflow-hidden\">\n                  <div className=\"absolute inset-0 bg-gradient-to-br from-white/5 to-transparent\"></div>\n                  <CardHeader className=\"relative z-10\">\n                    <CardTitle className=\"text-white flex items-center gap-3\">\n                      <div className=\"p-3 bg-white/20 rounded-xl backdrop-blur-sm border border-white/30\">\n                        <Award className=\"w-6 h-6 text-white\" />\n                      </div>\n                      Performance Summary\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4 relative z-10\">\n                    <div className=\"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-md border border-white/20 hover:bg-white/20 transition-all duration-300 hover:scale-105\">\n                      <div className=\"flex items-center gap-2\">\n                        <TrendingUp className=\"w-4 h-4 text-white\" />\n                        <span className=\"text-slate-100 font-medium\">Revenue Growth</span>\n                      </div>\n                      <Badge className=\"bg-emerald-500/20 text-emerald-200 border border-emerald-400/30 backdrop-blur-sm\">\n                        +{((enhancedData.totalRevenue / 1000000) * 1.5).toFixed(1)}%\n                      </Badge>\n                    </div>\n                    <div className=\"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-md border border-white/20 hover:bg-white/20 transition-all duration-300 hover:scale-105\">\n                      <div className=\"flex items-center gap-2\">\n                        <Users className=\"w-4 h-4 text-white\" />\n                        <span className=\"text-slate-100 font-medium\">Customer Retention</span>\n                      </div>\n                      <Badge className=\"bg-blue-500/20 text-blue-200 border border-blue-400/30 backdrop-blur-sm\">\n                        {((enhancedData.uniqueCustomers / enhancedData.totalTransactions) * 100).toFixed(1)}%\n                      </Badge>\n                    </div>\n                    <div className=\"flex justify-between items-center p-4 bg-white/10 rounded-xl backdrop-blur-md border border-white/20 hover:bg-white/20 transition-all duration-300 hover:scale-105\">\n                      <div className=\"flex items-center gap-2\">\n                        <Target className=\"w-4 h-4 text-white\" />\n                        <span className=\"text-slate-100 font-medium\">Market Share</span>\n                      </div>\n                      <Badge className=\"bg-purple-500/20 text-purple-200 border border-purple-400/30 backdrop-blur-sm\">\n                        {((enhancedData.totalRevenue / 10000000) * 100).toFixed(1)}%\n                      </Badge>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card className=\"bg-white border-2 border-slate-200 shadow-lg hover:shadow-2xl transition-all duration-500 hover:scale-105 animate-in fade-in zoom-in delay-100\">\n                  <CardHeader>\n                    <CardTitle className=\"text-slate-900 flex items-center gap-3\">\n                      <div className=\"p-2 bg-gradient-to-br from-slate-900 to-blue-950 rounded-lg\">\n                        <Target className=\"w-6 h-6 text-white\" />\n                      </div>\n                      Key Metrics\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4\">\n                    <div className=\"flex justify-between items-center p-4 bg-slate-50 rounded-xl border border-slate-200 hover:bg-slate-100 transition-all duration-200\">\n                      <div className=\"flex items-center gap-2\">\n                        <BarChart3 className=\"w-4 h-4 text-slate-600\" />\n                        <span className=\"text-slate-700 font-medium\">Conversion Rate</span>\n                      </div>\n                      <span className=\"font-bold text-slate-900 bg-slate-200 px-3 py-1 rounded-full\">\n                        {((enhancedData.totalTransactions / (enhancedData.uniqueCustomers * 2)) * 100).toFixed(1)}%\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between items-center p-4 bg-slate-50 rounded-xl border border-slate-200 hover:bg-slate-100 transition-all duration-200\">\n                      <div className=\"flex items-center gap-2\">\n                        <DollarSign className=\"w-4 h-4 text-slate-600\" />\n                        <span className=\"text-slate-700 font-medium\">Customer LTV</span>\n                      </div>\n                      <span className=\"font-bold text-slate-900 bg-slate-200 px-3 py-1 rounded-full\">\n                        {formatCurrency(enhancedData.avgTransactionValue * 3.5)}\n                      </span>\n                    </div>\n                    <div className=\"flex justify-between items-center p-4 bg-slate-50 rounded-xl border border-slate-200 hover:bg-slate-100 transition-all duration-200\">\n                      <div className=\"flex items-center gap-2\">\n                        <Activity className=\"w-4 h-4 text-slate-600\" />\n                        <span className=\"text-slate-700 font-medium\">Repeat Rate</span>\n                      </div>\n                      <span className=\"font-bold text-slate-900 bg-slate-200 px-3 py-1 rounded-full\">\n                        {((enhancedData.uniqueCustomers / enhancedData.totalTransactions) * 150).toFixed(1)}%\n                      </span>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card className=\"bg-gradient-to-br from-white via-purple-50 to-white dark:from-purple-900/20 dark:via-slate-800 dark:to-purple-900/20 border border-purple-200 dark:border-purple-700 shadow-xl hover:shadow-2xl transition-all duration-500 hover:scale-105 rounded-2xl overflow-hidden\">\n                  <div className=\"absolute inset-0 bg-gradient-to-br from-purple-100/30 to-transparent dark:from-purple-800/30\"></div>\n                  <CardHeader className=\"relative z-10\">\n                    <CardTitle className=\"text-purple-800 dark:text-purple-200 flex items-center gap-3\">\n                      <div className=\"p-3 bg-gradient-to-br from-purple-500 to-purple-700 rounded-xl shadow-lg\">\n                        <PieChart className=\"w-6 h-6 text-white\" />\n                      </div>\n                      Category Breakdown\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-4 relative z-10\">\n                    {Object.entries(enhancedData.categoryBreakdown).slice(0, 3).map(([category, data]: [string, any], index) => {\n                      const colors = [\n                        { bg: 'bg-emerald-100 dark:bg-emerald-900/30', text: 'text-emerald-800 dark:text-emerald-200', icon: 'text-emerald-500' },\n                        { bg: 'bg-blue-100 dark:bg-blue-900/30', text: 'text-blue-800 dark:text-blue-200', icon: 'text-blue-500' },\n                        { bg: 'bg-purple-100 dark:bg-purple-900/30', text: 'text-purple-800 dark:text-purple-200', icon: 'text-purple-500' }\n                      ];\n                      const color = colors[index] || colors[0];\n                      return (\n                        <div key={category} className=\"flex justify-between items-center p-4 bg-white/80 dark:bg-slate-800/80 rounded-xl border border-purple-200 dark:border-purple-700 hover:bg-white dark:hover:bg-slate-700 transition-all duration-300 hover:scale-105 shadow-sm group\">\n                          <div className=\"flex items-center gap-3\">\n                            <div className={`w-8 h-8 ${color.bg} rounded-lg flex items-center justify-center`}>\n                              <ShoppingCart className={`w-4 h-4 ${color.icon}`} />\n                            </div>\n                            <span className=\"text-slate-700 dark:text-slate-300 font-medium truncate\">{category}</span>\n                          </div>\n                          <div className=\"text-right\">\n                            <div className={`font-bold ${color.text} ${color.bg} px-3 py-2 rounded-full text-sm shadow-sm`}>{formatCurrency(data.revenue)}</div>\n                            <div className=\"text-xs text-slate-500 dark:text-slate-400 mt-1\">{data.count} sales</div>\n                          </div>\n                        </div>\n                      );\n                    })}\n                  </CardContent>\n                </Card>\n                  </div>\n                </div>\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"analytics\" className=\"mt-4\">\n              <div className=\"p-5 bg-gradient-to-br from-blue-50 via-white to-indigo-50 dark:from-blue-900/20 dark:via-slate-800 dark:to-indigo-900/20 border border-blue-200 dark:border-blue-800 rounded-xl shadow-xl hover:shadow-2xl transition-all duration-500\">\n                <h3 className=\"text-xl font-bold text-blue-800 dark:text-blue-200 mb-8 flex items-center gap-3 pb-4 border-b border-blue-200 dark:border-blue-700\">\n                  <div className=\"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center shadow-lg\">\n                    <BarChart3 className=\"w-4 h-4 text-white\" />\n                  </div>\n                  Detailed Analytics\n                </h3>\n                {renderAnalyticsCharts()}\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"customers\" className=\"mt-4\">\n              <div className=\"p-5 bg-gradient-to-br from-emerald-50 via-white to-green-50 dark:from-emerald-900/20 dark:via-slate-800 dark:to-green-900/20 border border-emerald-200 dark:border-emerald-800 rounded-xl shadow-xl hover:shadow-2xl transition-all duration-500\">\n                <h3 className=\"text-xl font-bold text-emerald-800 dark:text-emerald-200 mb-8 flex items-center gap-3 pb-4 border-b border-emerald-200 dark:border-emerald-700\">\n                  <div className=\"w-8 h-8 bg-emerald-500 rounded-lg flex items-center justify-center shadow-lg\">\n                    <Users className=\"w-4 h-4 text-white\" />\n                  </div>\n                  Customer Analysis\n                </h3>\n                {renderCustomerAnalysis()}\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"transactions\" className=\"mt-4\">\n              <div className=\"p-5 bg-gradient-to-br from-slate-50 via-white to-slate-50 dark:from-slate-800 dark:via-slate-900 dark:to-slate-800 border border-slate-200 dark:border-slate-700 rounded-xl shadow-xl hover:shadow-2xl transition-all duration-500\">\n                <h3 className=\"text-xl font-bold text-slate-800 dark:text-slate-200 mb-8 flex items-center gap-3 pb-4 border-b border-slate-200 dark:border-slate-700\">\n                  <div className=\"w-8 h-8 bg-slate-600 rounded-lg flex items-center justify-center shadow-lg\">\n                    <Eye className=\"w-4 h-4 text-white\" />\n                  </div>\n                  Transaction Details\n                </h3>\n                {renderTransactionDetails()}\n              </div>\n            </TabsContent>\n\n            <TabsContent value=\"insights\" className=\"mt-4\">\n              <div className=\"space-y-8\">\n                <Card className=\"bg-gradient-to-br from-purple-50 via-white to-indigo-50 dark:from-purple-900/20 dark:via-slate-800 dark:to-indigo-900/20 border border-purple-200 dark:border-purple-800 shadow-2xl hover:shadow-3xl transition-all duration-500 rounded-2xl overflow-hidden\">\n                  <div className=\"absolute inset-0 bg-gradient-to-br from-purple-100/30 to-transparent dark:from-purple-800/30\"></div>\n                  <CardHeader className=\"relative z-10\">\n                    <CardTitle className=\"text-purple-800 dark:text-purple-200 flex items-center gap-3 text-xl\">\n                      <div className=\"w-10 h-10 bg-gradient-to-r from-purple-500 to-indigo-600 rounded-xl flex items-center justify-center shadow-lg\">\n                        <Zap className=\"w-5 h-5 text-white\" />\n                      </div>\n                      AI-Powered Insights\n                      <Badge className=\"bg-gradient-to-r from-purple-500 to-indigo-600 text-white border-0 ml-auto\">\n                        Smart Analytics\n                      </Badge>\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-6 relative z-10\">\n                    <div className=\"p-6 bg-white/80 dark:bg-slate-800/80 rounded-xl border-l-4 border-emerald-500 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\">\n                      <div className=\"flex items-center gap-3 mb-3\">\n                        <div className=\"w-8 h-8 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center\">\n                          <TrendingUp className=\"w-4 h-4 text-emerald-600 dark:text-emerald-400\" />\n                        </div>\n                        <div className=\"font-bold text-emerald-800 dark:text-emerald-200 text-lg\">Revenue Optimization</div>\n                      </div>\n                      <div className=\"text-slate-600 dark:text-slate-300 font-medium\">\n                        Peak sales occur between 6-8 PM. Consider targeted promotions during this window to maximize revenue potential.\n                      </div>\n                    </div>\n                    <div className=\"p-6 bg-white/80 dark:bg-slate-800/80 rounded-xl border-l-4 border-blue-500 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\">\n                      <div className=\"flex items-center gap-3 mb-3\">\n                        <div className=\"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center\">\n                          <Users className=\"w-4 h-4 text-blue-600 dark:text-blue-400\" />\n                        </div>\n                        <div className=\"font-bold text-blue-800 dark:text-blue-200 text-lg\">Customer Behavior</div>\n                      </div>\n                      <div className=\"text-slate-600 dark:text-slate-300 font-medium\">\n                        High-value customers prefer premium services. Multiple upselling opportunities have been detected.\n                      </div>\n                    </div>\n                    <div className=\"p-6 bg-white/80 dark:bg-slate-800/80 rounded-xl border-l-4 border-purple-500 shadow-lg hover:shadow-xl transition-all duration-300 hover:scale-105\">\n                      <div className=\"flex items-center gap-3 mb-3\">\n                        <div className=\"w-8 h-8 bg-purple-100 dark:bg-purple-900/30 rounded-lg flex items-center justify-center\">\n                          <Target className=\"w-4 h-4 text-purple-600 dark:text-purple-400\" />\n                        </div>\n                        <div className=\"font-bold text-purple-800 dark:text-purple-200 text-lg\">Strategic Recommendations</div>\n                      </div>\n                      <div className=\"text-slate-600 dark:text-slate-300 font-medium\">\n                        Increasing demand for digital payments detected. Mobile optimization and contactless solutions are strongly recommended.\n                      </div>\n                    </div>\n                  </CardContent>\n                </Card>\n\n                <Card className=\"bg-gradient-to-br from-orange-50 via-white to-red-50 dark:from-orange-900/20 dark:via-slate-800 dark:to-red-900/20 border border-orange-200 dark:border-orange-800 shadow-2xl hover:shadow-3xl transition-all duration-500 rounded-2xl overflow-hidden\">\n                  <div className=\"absolute inset-0 bg-gradient-to-br from-orange-100/30 to-transparent dark:from-orange-800/30\"></div>\n                  <CardHeader className=\"relative z-10\">\n                    <CardTitle className=\"text-orange-800 dark:text-orange-200 flex items-center gap-3 text-xl\">\n                      <div className=\"w-10 h-10 bg-gradient-to-r from-orange-500 to-red-500 rounded-xl flex items-center justify-center shadow-lg\">\n                        <Filter className=\"w-5 h-5 text-white\" />\n                      </div>\n                      Strategic Recommendations\n                      <Badge className=\"bg-gradient-to-r from-orange-500 to-red-500 text-white border-0 ml-auto\">\n                        Action Plan\n                      </Badge>\n                    </CardTitle>\n                  </CardHeader>\n                  <CardContent className=\"space-y-6 relative z-10\">\n                    <div className=\"p-6 bg-white/80 dark:bg-slate-800/80 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300\">\n                      <div className=\"flex items-center gap-3 mb-4\">\n                        <div className=\"w-8 h-8 bg-emerald-100 dark:bg-emerald-900/30 rounded-lg flex items-center justify-center\">\n                          <span className=\"text-xl\">🎯</span>\n                        </div>\n                        <div className=\"font-bold text-emerald-800 dark:text-emerald-200 text-lg\">Immediate Actions</div>\n                      </div>\n                      <ul className=\"text-slate-600 dark:text-slate-300 space-y-2 ml-4\">\n                        <li className=\"flex items-center gap-2\"><span className=\"w-2 h-2 bg-emerald-500 rounded-full\"></span>Optimize pricing strategy for peak hours (6-8 PM)</li>\n                        <li className=\"flex items-center gap-2\"><span className=\"w-2 h-2 bg-emerald-500 rounded-full\"></span>Launch premium loyalty program for high-value customers</li>\n                        <li className=\"flex items-center gap-2\"><span className=\"w-2 h-2 bg-emerald-500 rounded-full\"></span>Enhance mobile payment experience and user interface</li>\n                      </ul>\n                    </div>\n                    <div className=\"p-6 bg-white/80 dark:bg-slate-800/80 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300\">\n                      <div className=\"flex items-center gap-3 mb-4\">\n                        <div className=\"w-8 h-8 bg-blue-100 dark:bg-blue-900/30 rounded-lg flex items-center justify-center\">\n                          <span className=\"text-xl\">📈</span>\n                        </div>\n                        <div className=\"font-bold text-blue-800 dark:text-blue-200 text-lg\">Long-term Strategy</div>\n                      </div>\n                      <ul className=\"text-slate-600 dark:text-slate-300 space-y-2 ml-4\">\n                        <li className=\"flex items-center gap-2\"><span className=\"w-2 h-2 bg-blue-500 rounded-full\"></span>Expand investment in high-performing categories and services</li>\n                        <li className=\"flex items-center gap-2\"><span className=\"w-2 h-2 bg-blue-500 rounded-full\"></span>Develop comprehensive customer retention and engagement programs</li>\n                        <li className=\"flex items-center gap-2\"><span className=\"w-2 h-2 bg-blue-500 rounded-full\"></span>Implement advanced predictive analytics and AI-driven insights</li>\n                      </ul>\n                    </div>\n                  </CardContent>\n                </Card>\n              </div>\n            </TabsContent>\n          </Tabs>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n};\n\nexport default EnhancedSalesDrillDownModal;"],"names":["EnhancedSalesDrillDownModal","isOpen","onClose","data","type","exportAllData","isExporting","useAdvancedExport","enhancedData","useMemo","transactionData","totalRevenue","sum","item","totalTransactions","uniqueCustomers","avgTransactionValue","paymentMethodBreakdown","acc","method","categoryBreakdown","category","timeAnalysis","date","hour","dayOfWeek","month","customerAnalysis","customerId","transactionDate","customer","behaviorSummary","tx","parseDate","dateStr","ddmmyyyy","day","year","d","byMember","t","id","rows","list","memberId","sorted","l","a","b","totalSpent","s","i","transactions","discountedTx","usedSessions","purchaseFrequencyDays","lifespanDays","daysToSecondPurchase","first","handleExport","COLORS","getTitle","itemName","getSubtitle","renderMetricCards","jsxs","jsx","Card","CardContent","DollarSign","formatCurrency","Users","formatNumber","ShoppingCart","BarChart3","renderAnalyticsCharts","hourlyData","paymentMethodData","CardHeader","CardTitle","Clock","ResponsiveContainer","BarChart","CartesianGrid","XAxis","YAxis","Tooltip","value","name","Bar","CreditCard","RechartsPieChart","Pie","percent","entry","index","Cell","renderCustomerAnalysis","customers","columns","Badge","cat","idx","ModernDataTable","renderTransactionDetails","row","Eye","Dialog","DialogContent","DialogHeader","DialogTitle","Button","Download","Tabs","TabsList","TabsTrigger","Star","Zap","TabsContent","TrendingUp","Award","Target","Activity","PieChart","colors","color","Filter"],"mappings":"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"}