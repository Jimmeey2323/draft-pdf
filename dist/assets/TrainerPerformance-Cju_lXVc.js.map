{"version":3,"file":"TrainerPerformance-Cju_lXVc.js","sources":["../../node_modules/lucide-react/dist/esm/icons/arrow-down.js","../../node_modules/lucide-react/dist/esm/icons/arrow-up.js","../../node_modules/lucide-react/dist/esm/icons/bike.js","../../node_modules/lucide-react/dist/esm/icons/circle-check.js","../../node_modules/lucide-react/dist/esm/icons/music.js","../../node_modules/recharts/es6/polar/PolarGrid.js","../../node_modules/lodash/head.js","../../node_modules/lodash/first.js","../../node_modules/recharts/es6/polar/Radar.js","../../node_modules/recharts/es6/chart/RadarChart.js","../../src/components/dashboard/TrainerYearOnYearTable.tsx","../../src/components/dashboard/TrainerPerformanceDetailTable.tsx","../../src/components/dashboard/TrainerEfficiencyAnalysisTable.tsx","../../src/components/dashboard/TrainerMetricTabs.tsx","../../src/components/dashboard/TrainerDataProcessor.tsx","../../src/components/dashboard/MonthOnMonthTrainerTable.tsx","../../src/components/dashboard/ComprehensiveTrainerDrillDown.tsx","../../src/components/dashboard/TrainerFilterSection.tsx","../../src/components/dashboard/EnhancedTrainerMetricCards.tsx","../../src/components/dashboard/EnhancedTrainerPerformanceSection.tsx","../../src/pages/TrainerPerformance.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowDown = createLucideIcon(\"ArrowDown\", [\n  [\"path\", { d: \"M12 5v14\", key: \"s699le\" }],\n  [\"path\", { d: \"m19 12-7 7-7-7\", key: \"1idqje\" }]\n]);\n\nexport { ArrowDown as default };\n//# sourceMappingURL=arrow-down.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst ArrowUp = createLucideIcon(\"ArrowUp\", [\n  [\"path\", { d: \"m5 12 7-7 7 7\", key: \"hav0vg\" }],\n  [\"path\", { d: \"M12 19V5\", key: \"x0mq9r\" }]\n]);\n\nexport { ArrowUp as default };\n//# sourceMappingURL=arrow-up.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Bike = createLucideIcon(\"Bike\", [\n  [\"circle\", { cx: \"18.5\", cy: \"17.5\", r: \"3.5\", key: \"15x4ox\" }],\n  [\"circle\", { cx: \"5.5\", cy: \"17.5\", r: \"3.5\", key: \"1noe27\" }],\n  [\"circle\", { cx: \"15\", cy: \"5\", r: \"1\", key: \"19l28e\" }],\n  [\"path\", { d: \"M12 17.5V14l-3-3 4-3 2 3h2\", key: \"1npguv\" }]\n]);\n\nexport { Bike as default };\n//# sourceMappingURL=bike.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst CircleCheck = createLucideIcon(\"CircleCheck\", [\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"10\", key: \"1mglay\" }],\n  [\"path\", { d: \"m9 12 2 2 4-4\", key: \"dzmm74\" }]\n]);\n\nexport { CircleCheck as default };\n//# sourceMappingURL=circle-check.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Music = createLucideIcon(\"Music\", [\n  [\"path\", { d: \"M9 18V5l12-2v13\", key: \"1jmyc2\" }],\n  [\"circle\", { cx: \"6\", cy: \"18\", r: \"3\", key: \"fqmcym\" }],\n  [\"circle\", { cx: \"18\", cy: \"16\", r: \"3\", key: \"1hluhg\" }]\n]);\n\nexport { Music as default };\n//# sourceMappingURL=music.js.map\n","var _excluded = [\"cx\", \"cy\", \"innerRadius\", \"outerRadius\", \"gridType\", \"radialLines\"];\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } } return target; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * @fileOverview Polar Grid\n */\nimport React from 'react';\nimport clsx from 'clsx';\nimport { polarToCartesian } from '../util/PolarUtils';\nimport { filterProps } from '../util/ReactUtils';\nvar getPolygonPath = function getPolygonPath(radius, cx, cy, polarAngles) {\n  var path = '';\n  polarAngles.forEach(function (angle, i) {\n    var point = polarToCartesian(cx, cy, radius, angle);\n    if (i) {\n      path += \"L \".concat(point.x, \",\").concat(point.y);\n    } else {\n      path += \"M \".concat(point.x, \",\").concat(point.y);\n    }\n  });\n  path += 'Z';\n  return path;\n};\n\n// Draw axis of radial line\nvar PolarAngles = function PolarAngles(props) {\n  var cx = props.cx,\n    cy = props.cy,\n    innerRadius = props.innerRadius,\n    outerRadius = props.outerRadius,\n    polarAngles = props.polarAngles,\n    radialLines = props.radialLines;\n  if (!polarAngles || !polarAngles.length || !radialLines) {\n    return null;\n  }\n  var polarAnglesProps = _objectSpread({\n    stroke: '#ccc'\n  }, filterProps(props, false));\n  return /*#__PURE__*/React.createElement(\"g\", {\n    className: \"recharts-polar-grid-angle\"\n  }, polarAngles.map(function (entry) {\n    var start = polarToCartesian(cx, cy, innerRadius, entry);\n    var end = polarToCartesian(cx, cy, outerRadius, entry);\n    return /*#__PURE__*/React.createElement(\"line\", _extends({}, polarAnglesProps, {\n      key: \"line-\".concat(entry),\n      x1: start.x,\n      y1: start.y,\n      x2: end.x,\n      y2: end.y\n    }));\n  }));\n};\n\n// Draw concentric circles\nvar ConcentricCircle = function ConcentricCircle(props) {\n  var cx = props.cx,\n    cy = props.cy,\n    radius = props.radius,\n    index = props.index;\n  var concentricCircleProps = _objectSpread(_objectSpread({\n    stroke: '#ccc'\n  }, filterProps(props, false)), {}, {\n    fill: 'none'\n  });\n  return /*#__PURE__*/React.createElement(\"circle\", _extends({}, concentricCircleProps, {\n    className: clsx('recharts-polar-grid-concentric-circle', props.className),\n    key: \"circle-\".concat(index),\n    cx: cx,\n    cy: cy,\n    r: radius\n  }));\n};\n\n// Draw concentric polygons\nvar ConcentricPolygon = function ConcentricPolygon(props) {\n  var radius = props.radius,\n    index = props.index;\n  var concentricPolygonProps = _objectSpread(_objectSpread({\n    stroke: '#ccc'\n  }, filterProps(props, false)), {}, {\n    fill: 'none'\n  });\n  return /*#__PURE__*/React.createElement(\"path\", _extends({}, concentricPolygonProps, {\n    className: clsx('recharts-polar-grid-concentric-polygon', props.className),\n    key: \"path-\".concat(index),\n    d: getPolygonPath(radius, props.cx, props.cy, props.polarAngles)\n  }));\n};\n\n// Draw concentric axis\n// TODO Optimize the name\nvar ConcentricPath = function ConcentricPath(props) {\n  var polarRadius = props.polarRadius,\n    gridType = props.gridType;\n  if (!polarRadius || !polarRadius.length) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"g\", {\n    className: \"recharts-polar-grid-concentric\"\n  }, polarRadius.map(function (entry, i) {\n    var key = i;\n    if (gridType === 'circle') return /*#__PURE__*/React.createElement(ConcentricCircle, _extends({\n      key: key\n    }, props, {\n      radius: entry,\n      index: i\n    }));\n    return /*#__PURE__*/React.createElement(ConcentricPolygon, _extends({\n      key: key\n    }, props, {\n      radius: entry,\n      index: i\n    }));\n  }));\n};\nexport var PolarGrid = function PolarGrid(_ref) {\n  var _ref$cx = _ref.cx,\n    cx = _ref$cx === void 0 ? 0 : _ref$cx,\n    _ref$cy = _ref.cy,\n    cy = _ref$cy === void 0 ? 0 : _ref$cy,\n    _ref$innerRadius = _ref.innerRadius,\n    innerRadius = _ref$innerRadius === void 0 ? 0 : _ref$innerRadius,\n    _ref$outerRadius = _ref.outerRadius,\n    outerRadius = _ref$outerRadius === void 0 ? 0 : _ref$outerRadius,\n    _ref$gridType = _ref.gridType,\n    gridType = _ref$gridType === void 0 ? 'polygon' : _ref$gridType,\n    _ref$radialLines = _ref.radialLines,\n    radialLines = _ref$radialLines === void 0 ? true : _ref$radialLines,\n    props = _objectWithoutProperties(_ref, _excluded);\n  if (outerRadius <= 0) {\n    return null;\n  }\n  return /*#__PURE__*/React.createElement(\"g\", {\n    className: \"recharts-polar-grid\"\n  }, /*#__PURE__*/React.createElement(PolarAngles, _extends({\n    cx: cx,\n    cy: cy,\n    innerRadius: innerRadius,\n    outerRadius: outerRadius,\n    gridType: gridType,\n    radialLines: radialLines\n  }, props)), /*#__PURE__*/React.createElement(ConcentricPath, _extends({\n    cx: cx,\n    cy: cy,\n    innerRadius: innerRadius,\n    outerRadius: outerRadius,\n    gridType: gridType,\n    radialLines: radialLines\n  }, props)));\n};\nPolarGrid.displayName = 'PolarGrid';","/**\n * Gets the first element of `array`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias first\n * @category Array\n * @param {Array} array The array to query.\n * @returns {*} Returns the first element of `array`.\n * @example\n *\n * _.head([1, 2, 3]);\n * // => 1\n *\n * _.head([]);\n * // => undefined\n */\nfunction head(array) {\n  return (array && array.length) ? array[0] : undefined;\n}\n\nmodule.exports = head;\n","module.exports = require('./head');\n","var _excluded = [\"key\"];\nfunction _typeof(o) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) { return typeof o; } : function (o) { return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o; }, _typeof(o); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } } return target; }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _callSuper(t, o, e) { return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e)); }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { try { var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); } catch (t) {} return (_isNativeReflectConstruct = function _isNativeReflectConstruct() { return !!t; })(); }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(t) { var i = _toPrimitive(t, \"string\"); return \"symbol\" == _typeof(i) ? i : i + \"\"; }\nfunction _toPrimitive(t, r) { if (\"object\" != _typeof(t) || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || \"default\"); if (\"object\" != _typeof(i)) return i; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (\"string\" === r ? String : Number)(t); }\n/**\n * @fileOverview Radar\n */\nimport React, { PureComponent } from 'react';\nimport Animate from 'react-smooth';\nimport isNil from 'lodash/isNil';\nimport last from 'lodash/last';\nimport first from 'lodash/first';\nimport isEqual from 'lodash/isEqual';\nimport isFunction from 'lodash/isFunction';\nimport clsx from 'clsx';\nimport { interpolateNumber } from '../util/DataUtils';\nimport { Global } from '../util/Global';\nimport { polarToCartesian } from '../util/PolarUtils';\nimport { getValueByDataKey } from '../util/ChartUtils';\nimport { Polygon } from '../shape/Polygon';\nimport { Dot } from '../shape/Dot';\nimport { Layer } from '../container/Layer';\nimport { LabelList } from '../component/LabelList';\nimport { filterProps } from '../util/ReactUtils';\nexport var Radar = /*#__PURE__*/function (_PureComponent) {\n  function Radar() {\n    var _this;\n    _classCallCheck(this, Radar);\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    _this = _callSuper(this, Radar, [].concat(args));\n    _defineProperty(_this, \"state\", {\n      isAnimationFinished: false\n    });\n    _defineProperty(_this, \"handleAnimationEnd\", function () {\n      var onAnimationEnd = _this.props.onAnimationEnd;\n      _this.setState({\n        isAnimationFinished: true\n      });\n      if (isFunction(onAnimationEnd)) {\n        onAnimationEnd();\n      }\n    });\n    _defineProperty(_this, \"handleAnimationStart\", function () {\n      var onAnimationStart = _this.props.onAnimationStart;\n      _this.setState({\n        isAnimationFinished: false\n      });\n      if (isFunction(onAnimationStart)) {\n        onAnimationStart();\n      }\n    });\n    _defineProperty(_this, \"handleMouseEnter\", function (e) {\n      var onMouseEnter = _this.props.onMouseEnter;\n      if (onMouseEnter) {\n        onMouseEnter(_this.props, e);\n      }\n    });\n    _defineProperty(_this, \"handleMouseLeave\", function (e) {\n      var onMouseLeave = _this.props.onMouseLeave;\n      if (onMouseLeave) {\n        onMouseLeave(_this.props, e);\n      }\n    });\n    return _this;\n  }\n  _inherits(Radar, _PureComponent);\n  return _createClass(Radar, [{\n    key: \"renderDots\",\n    value: function renderDots(points) {\n      var _this$props = this.props,\n        dot = _this$props.dot,\n        dataKey = _this$props.dataKey;\n      var baseProps = filterProps(this.props, false);\n      var customDotProps = filterProps(dot, true);\n      var dots = points.map(function (entry, i) {\n        var dotProps = _objectSpread(_objectSpread(_objectSpread({\n          key: \"dot-\".concat(i),\n          r: 3\n        }, baseProps), customDotProps), {}, {\n          dataKey: dataKey,\n          cx: entry.x,\n          cy: entry.y,\n          index: i,\n          payload: entry\n        });\n        return Radar.renderDotItem(dot, dotProps);\n      });\n      return /*#__PURE__*/React.createElement(Layer, {\n        className: \"recharts-radar-dots\"\n      }, dots);\n    }\n  }, {\n    key: \"renderPolygonStatically\",\n    value: function renderPolygonStatically(points) {\n      var _this$props2 = this.props,\n        shape = _this$props2.shape,\n        dot = _this$props2.dot,\n        isRange = _this$props2.isRange,\n        baseLinePoints = _this$props2.baseLinePoints,\n        connectNulls = _this$props2.connectNulls;\n      var radar;\n      if ( /*#__PURE__*/React.isValidElement(shape)) {\n        radar = /*#__PURE__*/React.cloneElement(shape, _objectSpread(_objectSpread({}, this.props), {}, {\n          points: points\n        }));\n      } else if (isFunction(shape)) {\n        radar = shape(_objectSpread(_objectSpread({}, this.props), {}, {\n          points: points\n        }));\n      } else {\n        radar = /*#__PURE__*/React.createElement(Polygon, _extends({}, filterProps(this.props, true), {\n          onMouseEnter: this.handleMouseEnter,\n          onMouseLeave: this.handleMouseLeave,\n          points: points,\n          baseLinePoints: isRange ? baseLinePoints : null,\n          connectNulls: connectNulls\n        }));\n      }\n      return /*#__PURE__*/React.createElement(Layer, {\n        className: \"recharts-radar-polygon\"\n      }, radar, dot ? this.renderDots(points) : null);\n    }\n  }, {\n    key: \"renderPolygonWithAnimation\",\n    value: function renderPolygonWithAnimation() {\n      var _this2 = this;\n      var _this$props3 = this.props,\n        points = _this$props3.points,\n        isAnimationActive = _this$props3.isAnimationActive,\n        animationBegin = _this$props3.animationBegin,\n        animationDuration = _this$props3.animationDuration,\n        animationEasing = _this$props3.animationEasing,\n        animationId = _this$props3.animationId;\n      var prevPoints = this.state.prevPoints;\n      return /*#__PURE__*/React.createElement(Animate, {\n        begin: animationBegin,\n        duration: animationDuration,\n        isActive: isAnimationActive,\n        easing: animationEasing,\n        from: {\n          t: 0\n        },\n        to: {\n          t: 1\n        },\n        key: \"radar-\".concat(animationId),\n        onAnimationEnd: this.handleAnimationEnd,\n        onAnimationStart: this.handleAnimationStart\n      }, function (_ref) {\n        var t = _ref.t;\n        var prevPointsDiffFactor = prevPoints && prevPoints.length / points.length;\n        var stepData = points.map(function (entry, index) {\n          var prev = prevPoints && prevPoints[Math.floor(index * prevPointsDiffFactor)];\n          if (prev) {\n            var _interpolatorX = interpolateNumber(prev.x, entry.x);\n            var _interpolatorY = interpolateNumber(prev.y, entry.y);\n            return _objectSpread(_objectSpread({}, entry), {}, {\n              x: _interpolatorX(t),\n              y: _interpolatorY(t)\n            });\n          }\n          var interpolatorX = interpolateNumber(entry.cx, entry.x);\n          var interpolatorY = interpolateNumber(entry.cy, entry.y);\n          return _objectSpread(_objectSpread({}, entry), {}, {\n            x: interpolatorX(t),\n            y: interpolatorY(t)\n          });\n        });\n        return _this2.renderPolygonStatically(stepData);\n      });\n    }\n  }, {\n    key: \"renderPolygon\",\n    value: function renderPolygon() {\n      var _this$props4 = this.props,\n        points = _this$props4.points,\n        isAnimationActive = _this$props4.isAnimationActive,\n        isRange = _this$props4.isRange;\n      var prevPoints = this.state.prevPoints;\n      if (isAnimationActive && points && points.length && !isRange && (!prevPoints || !isEqual(prevPoints, points))) {\n        return this.renderPolygonWithAnimation();\n      }\n      return this.renderPolygonStatically(points);\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props5 = this.props,\n        hide = _this$props5.hide,\n        className = _this$props5.className,\n        points = _this$props5.points,\n        isAnimationActive = _this$props5.isAnimationActive;\n      if (hide || !points || !points.length) {\n        return null;\n      }\n      var isAnimationFinished = this.state.isAnimationFinished;\n      var layerClass = clsx('recharts-radar', className);\n      return /*#__PURE__*/React.createElement(Layer, {\n        className: layerClass\n      }, this.renderPolygon(), (!isAnimationActive || isAnimationFinished) && LabelList.renderCallByParent(this.props, points));\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      if (nextProps.animationId !== prevState.prevAnimationId) {\n        return {\n          prevAnimationId: nextProps.animationId,\n          curPoints: nextProps.points,\n          prevPoints: prevState.curPoints\n        };\n      }\n      if (nextProps.points !== prevState.curPoints) {\n        return {\n          curPoints: nextProps.points\n        };\n      }\n      return null;\n    }\n  }, {\n    key: \"renderDotItem\",\n    value: function renderDotItem(option, props) {\n      var dotItem;\n      if ( /*#__PURE__*/React.isValidElement(option)) {\n        dotItem = /*#__PURE__*/React.cloneElement(option, props);\n      } else if (isFunction(option)) {\n        dotItem = option(props);\n      } else {\n        var key = props.key,\n          dotProps = _objectWithoutProperties(props, _excluded);\n        dotItem = /*#__PURE__*/React.createElement(Dot, _extends({}, dotProps, {\n          key: key,\n          className: clsx('recharts-radar-dot', typeof option !== 'boolean' ? option.className : '')\n        }));\n      }\n      return dotItem;\n    }\n  }]);\n}(PureComponent);\n_defineProperty(Radar, \"displayName\", 'Radar');\n_defineProperty(Radar, \"defaultProps\", {\n  angleAxisId: 0,\n  radiusAxisId: 0,\n  hide: false,\n  activeDot: true,\n  dot: false,\n  legendType: 'rect',\n  isAnimationActive: !Global.isSsr,\n  animationBegin: 0,\n  animationDuration: 1500,\n  animationEasing: 'ease'\n});\n_defineProperty(Radar, \"getComposedData\", function (_ref2) {\n  var radiusAxis = _ref2.radiusAxis,\n    angleAxis = _ref2.angleAxis,\n    displayedData = _ref2.displayedData,\n    dataKey = _ref2.dataKey,\n    bandSize = _ref2.bandSize;\n  var cx = angleAxis.cx,\n    cy = angleAxis.cy;\n  var isRange = false;\n  var points = [];\n  var angleBandSize = angleAxis.type !== 'number' ? bandSize !== null && bandSize !== void 0 ? bandSize : 0 : 0;\n  displayedData.forEach(function (entry, i) {\n    var name = getValueByDataKey(entry, angleAxis.dataKey, i);\n    var value = getValueByDataKey(entry, dataKey);\n    var angle = angleAxis.scale(name) + angleBandSize;\n    var pointValue = Array.isArray(value) ? last(value) : value;\n    var radius = isNil(pointValue) ? undefined : radiusAxis.scale(pointValue);\n    if (Array.isArray(value) && value.length >= 2) {\n      isRange = true;\n    }\n    points.push(_objectSpread(_objectSpread({}, polarToCartesian(cx, cy, radius, angle)), {}, {\n      name: name,\n      value: value,\n      cx: cx,\n      cy: cy,\n      radius: radius,\n      angle: angle,\n      payload: entry\n    }));\n  });\n  var baseLinePoints = [];\n  if (isRange) {\n    points.forEach(function (point) {\n      if (Array.isArray(point.value)) {\n        var baseValue = first(point.value);\n        var radius = isNil(baseValue) ? undefined : radiusAxis.scale(baseValue);\n        baseLinePoints.push(_objectSpread(_objectSpread({}, point), {}, {\n          radius: radius\n        }, polarToCartesian(cx, cy, radius, point.angle)));\n      } else {\n        baseLinePoints.push(point);\n      }\n    });\n  }\n  return {\n    points: points,\n    isRange: isRange,\n    baseLinePoints: baseLinePoints\n  };\n});","/**\n * @fileOverview Radar Chart\n */\nimport { generateCategoricalChart } from './generateCategoricalChart';\nimport { Radar } from '../polar/Radar';\nimport { PolarAngleAxis } from '../polar/PolarAngleAxis';\nimport { PolarRadiusAxis } from '../polar/PolarRadiusAxis';\nimport { formatAxisMap } from '../util/PolarUtils';\nexport var RadarChart = generateCategoricalChart({\n  chartName: 'RadarChart',\n  GraphicalChild: Radar,\n  axisComponents: [{\n    axisType: 'angleAxis',\n    AxisComp: PolarAngleAxis\n  }, {\n    axisType: 'radiusAxis',\n    AxisComp: PolarRadiusAxis\n  }],\n  formatAxisMap: formatAxisMap,\n  defaultProps: {\n    layout: 'centric',\n    startAngle: 90,\n    endAngle: -270,\n    cx: '50%',\n    cy: '50%',\n    innerRadius: 0,\n    outerRadius: '80%'\n  }\n});","import React, { useMemo, useState } from 'react';\nimport { ModernTableWrapper } from './ModernTableWrapper';\nimport { ProcessedTrainerData } from './TrainerDataProcessor';\nimport { formatCurrency, formatNumber } from '@/utils/formatters';\nimport { Calendar, TrendingUp, TrendingDown, BarChart3 } from 'lucide-react';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\nimport { Badge } from '@/components/ui/badge';\nimport { TrainerNameCell } from '@/components/ui/TrainerAvatar';\ninterface TrainerYearOnYearTableProps {\n  data: ProcessedTrainerData[];\n  onRowClick?: (trainer: string, data: any) => void;\n}\nexport const TrainerYearOnYearTable: React.FC<TrainerYearOnYearTableProps> = ({\n  data,\n  onRowClick\n}) => {\n  const [sortConfig, setSortConfig] = useState<{ key: string; direction: 'asc' | 'desc' }>({\n    key: 'revenueGrowth',\n    direction: 'desc'\n  });\n  const yearOnYearData = useMemo(() => {\n    const currentYear = new Date().getFullYear();\n    const previousYear = currentYear - 1;\n\n    // Group data by trainer and year\n    const trainerStats = data.reduce((acc, record) => {\n      const label = record.monthLabel || record.monthYear || '';\n      let yearNum = NaN;\n      if (record.monthKey && record.monthKey.includes('-')) {\n        yearNum = parseInt(record.monthKey.split('-')[0]);\n      } else {\n        const parts = label.replace('-', ' ').split(' ').filter(Boolean);\n        yearNum = parseInt(parts[1]);\n      }\n      const trainerKey = record.trainerName;\n      if (!isNaN(yearNum) && (yearNum === currentYear || yearNum === previousYear)) {\n        if (!acc[trainerKey]) {\n          acc[trainerKey] = {\n            trainerName: record.trainerName,\n            location: record.location,\n            currentYear: {\n              sessions: 0,\n              revenue: 0,\n              customers: 0,\n              monthsActive: 0\n            },\n            previousYear: {\n              sessions: 0,\n              revenue: 0,\n              customers: 0,\n              monthsActive: 0\n            }\n          };\n        }\n        const yearData = yearNum === currentYear ? acc[trainerKey].currentYear : acc[trainerKey].previousYear;\n        yearData.sessions += record.totalSessions;\n        yearData.revenue += record.totalPaid;\n        yearData.customers += record.totalCustomers;\n        yearData.monthsActive += 1;\n      }\n      return acc;\n    }, {} as Record<string, any>);\n  return Object.values(trainerStats).map((trainer: any) => {\n      const currentAvgClassSize = trainer.currentYear.sessions > 0 ? trainer.currentYear.customers / trainer.currentYear.sessions : 0;\n      const previousAvgClassSize = trainer.previousYear.sessions > 0 ? trainer.previousYear.customers / trainer.previousYear.sessions : 0;\n      const currentRevenuePerSession = trainer.currentYear.sessions > 0 ? trainer.currentYear.revenue / trainer.currentYear.sessions : 0;\n      const previousRevenuePerSession = trainer.previousYear.sessions > 0 ? trainer.previousYear.revenue / trainer.previousYear.sessions : 0;\n      return {\n        trainerName: trainer.trainerName,\n        location: trainer.location,\n        currentSessions: trainer.currentYear.sessions,\n        previousSessions: trainer.previousYear.sessions,\n        sessionsGrowth: trainer.previousYear.sessions > 0 ? (trainer.currentYear.sessions - trainer.previousYear.sessions) / trainer.previousYear.sessions * 100 : 0,\n        currentRevenue: trainer.currentYear.revenue,\n        previousRevenue: trainer.previousYear.revenue,\n        revenueGrowth: trainer.previousYear.revenue > 0 ? (trainer.currentYear.revenue - trainer.previousYear.revenue) / trainer.previousYear.revenue * 100 : 0,\n        currentCustomers: trainer.currentYear.customers,\n        previousCustomers: trainer.previousYear.customers,\n        customersGrowth: trainer.previousYear.customers > 0 ? (trainer.currentYear.customers - trainer.previousYear.customers) / trainer.previousYear.customers * 100 : 0,\n        currentAvgClassSize,\n        previousAvgClassSize,\n        classSizeGrowth: previousAvgClassSize > 0 ? (currentAvgClassSize - previousAvgClassSize) / previousAvgClassSize * 100 : 0,\n        currentRevenuePerSession,\n        previousRevenuePerSession,\n        revenuePerSessionGrowth: previousRevenuePerSession > 0 ? (currentRevenuePerSession - previousRevenuePerSession) / previousRevenuePerSession * 100 : 0,\n        currentMonthsActive: trainer.currentYear.monthsActive,\n        previousMonthsActive: trainer.previousYear.monthsActive\n      };\n    }).filter(trainer => trainer.currentSessions > 0 || trainer.previousSessions > 0).sort((a, b) => b.revenueGrowth - a.revenueGrowth);\n  }, [data]);\n\n  const sortedYoY = useMemo(() => {\n    const rows = [...yearOnYearData];\n    const key = sortConfig.key as keyof (typeof rows)[number];\n    return rows.sort((a: any, b: any) => {\n      const av = a[key] ?? 0;\n      const bv = b[key] ?? 0;\n      if (typeof av === 'string' || typeof bv === 'string') {\n        return sortConfig.direction === 'asc' ? String(av).localeCompare(String(bv)) : String(bv).localeCompare(String(av));\n      }\n      return sortConfig.direction === 'asc' ? (av as number) - (bv as number) : (bv as number) - (av as number);\n    });\n  }, [yearOnYearData, sortConfig]);\n\n  const handleSort = (key: string) => {\n    setSortConfig(prev => ({\n      key,\n      direction: prev.key === key && prev.direction === 'desc' ? 'asc' : 'desc'\n    }));\n  };\n  const handleRowClick = (rowData: any) => {\n    if (onRowClick) {\n      onRowClick(rowData.trainerName, {\n        ...rowData,\n        monthYear: rowData.monthYear || '',\n        location: rowData.location || '',\n        type: 'year-on-year-comparison'\n      });\n    }\n  };\n  const columns = [{\n    key: 'trainerName' as const,\n    header: (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger className=\"cursor-help\">Trainer</TooltipTrigger>\n          <TooltipContent>Trainer name</TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    ),\n    className: 'min-w-[240px]',\n    sortable: true,\n    render: (value: string, row: any) => (\n      <div className=\"flex flex-col gap-1\">\n        <TrainerNameCell name={value} className=\"text-nowrap\" />\n        <div className=\"text-xs text-slate-500 ml-10\">{row.location}</div>\n      </div>\n    )\n  }, {\n    key: 'currentSessions' as const,\n    header: (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger className=\"cursor-help\">{`${new Date().getFullYear()} Sessions`}</TooltipTrigger>\n          <TooltipContent>Total sessions conducted this year</TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    ),\n    align: 'center' as const,\n    sortable: true,\n    render: (value: number) => <span className=\"font-medium text-slate-800 text-sm \">{formatNumber(value)}</span>\n  }, {\n    key: 'previousSessions' as const,\n    header: (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger className=\"cursor-help\">{`${new Date().getFullYear() - 1} Sessions`}</TooltipTrigger>\n          <TooltipContent>Total sessions conducted last year</TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    ),\n    align: 'center' as const,\n    sortable: true,\n    render: (value: number) => <span className=\"font-medium text-slate-800 text-sm\">{formatNumber(value)}</span>\n  }, {\n    key: 'sessionsGrowth' as const,\n    header: (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger className=\"cursor-help\">Sessions Growth</TooltipTrigger>\n          <TooltipContent>Year-over-year change in sessions</TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    ),\n    align: 'center' as const,\n    sortable: true,\n    render: (value: number) => <div className=\"flex items-center justify-center gap-1\">\n          {value > 0 ? <TrendingUp className=\"w-3 h-3 text-green-500\" /> : value < 0 ? <TrendingDown className=\"w-3 h-3 text-red-500\" /> : null}\n      <span className={`font-semibold text-sm ${value > 0 ? 'text-green-600' : value < 0 ? 'text-red-600' : 'text-slate-600'}`}>\n            {value.toFixed(1)}%\n          </span>\n        </div>\n  }, {\n    key: 'currentRevenue' as const,\n    header: (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger className=\"cursor-help\">{`${new Date().getFullYear()} Revenue`}</TooltipTrigger>\n          <TooltipContent>Total revenue generated this year</TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    ),\n    align: 'center' as const,\n    sortable: true,\n    render: (value: number) => <span className=\"font-medium text-slate-800 text-sm\">{formatCurrency(value)}</span>\n  }, {\n    key: 'previousRevenue' as const,\n    header: (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger className=\"cursor-help\">{`${new Date().getFullYear() - 1} Revenue`}</TooltipTrigger>\n          <TooltipContent>Total revenue generated last year</TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    ),\n    align: 'center' as const,\n    sortable: true,\n    render: (value: number) => <span className=\"font-medium text-slate-800 text-sm\">{formatCurrency(value)}</span>\n  }, {\n    key: 'revenueGrowth' as const,\n    header: (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger className=\"cursor-help\">Revenue Growth</TooltipTrigger>\n          <TooltipContent>Year-over-year change in revenue</TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    ),\n    align: 'center' as const,\n    sortable: true,\n    render: (value: number) => <div className=\"flex items-center justify-center gap-1\">\n          {value > 0 ? <TrendingUp className=\"w-3 h-3 text-green-500\" /> : value < 0 ? <TrendingDown className=\"w-3 h-3 text-red-500\" /> : null}\n      <span className={`font-semibold text-sm ${value > 0 ? 'text-green-600' : value < 0 ? 'text-red-600' : 'text-slate-600'}`}>\n            {value.toFixed(1)}%\n          </span>\n        </div>\n  }, {\n    key: 'currentAvgClassSize' as const,\n    header: (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger className=\"cursor-help\">{`${new Date().getFullYear()} Avg Size`}</TooltipTrigger>\n          <TooltipContent>Average customers per session this year</TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    ),\n    align: 'center' as const,\n    sortable: true,\n    render: (value: number) => <span className=\"font-medium text-slate-800 text-sm\">{value.toFixed(1)}</span>\n  }, {\n    key: 'previousAvgClassSize' as const,\n    header: (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger className=\"cursor-help\">{`${new Date().getFullYear() - 1} Avg Size`}</TooltipTrigger>\n          <TooltipContent>Average customers per session last year</TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    ),\n    align: 'center' as const,\n    sortable: true,\n    render: (value: number) => <span className=\"font-medium text-slate-800 text-sm\">{value.toFixed(1)}</span>\n  }, {\n    key: 'classSizeGrowth' as const,\n    header: (\n      <TooltipProvider>\n        <Tooltip>\n          <TooltipTrigger className=\"cursor-help\">Size Growth</TooltipTrigger>\n          <TooltipContent>Year-over-year change in average class size</TooltipContent>\n        </Tooltip>\n      </TooltipProvider>\n    ),\n    align: 'center' as const,\n    sortable: true,\n    render: (value: number) => <div className=\"flex items-center justify-center gap-1\">\n          {value > 0 ? <TrendingUp className=\"w-3 h-3 text-green-500\" /> : value < 0 ? <TrendingDown className=\"w-3 h-3 text-red-500\" /> : null}\n      <span className={`font-semibold text-sm ${value > 0 ? 'text-green-600' : value < 0 ? 'text-red-600' : 'text-slate-600'}`}>\n            {value.toFixed(1)}%\n          </span>\n        </div>\n  }];\n\n  // Calculate totals\n  const totals = {\n    trainerName: 'TOTAL',\n    location: 'All Locations',\n    currentSessions: yearOnYearData.reduce((sum, row) => sum + row.currentSessions, 0),\n    previousSessions: yearOnYearData.reduce((sum, row) => sum + row.previousSessions, 0),\n    sessionsGrowth: 0,\n    currentRevenue: yearOnYearData.reduce((sum, row) => sum + row.currentRevenue, 0),\n    previousRevenue: yearOnYearData.reduce((sum, row) => sum + row.previousRevenue, 0),\n    revenueGrowth: 0,\n    currentCustomers: yearOnYearData.reduce((sum, row) => sum + row.currentCustomers, 0),\n    previousCustomers: yearOnYearData.reduce((sum, row) => sum + row.previousCustomers, 0),\n    customersGrowth: 0,\n    currentAvgClassSize: 0,\n    previousAvgClassSize: 0,\n    classSizeGrowth: 0\n  };\n  totals.sessionsGrowth = totals.previousSessions > 0 ? (totals.currentSessions - totals.previousSessions) / totals.previousSessions * 100 : 0;\n  totals.revenueGrowth = totals.previousRevenue > 0 ? (totals.currentRevenue - totals.previousRevenue) / totals.previousRevenue * 100 : 0;\n  totals.customersGrowth = totals.previousCustomers > 0 ? (totals.currentCustomers - totals.previousCustomers) / totals.previousCustomers * 100 : 0;\n  totals.currentAvgClassSize = totals.currentSessions > 0 ? totals.currentCustomers / totals.currentSessions : 0;\n  totals.previousAvgClassSize = totals.previousSessions > 0 ? totals.previousCustomers / totals.previousSessions : 0;\n  totals.classSizeGrowth = totals.previousAvgClassSize > 0 ? (totals.currentAvgClassSize - totals.previousAvgClassSize) / totals.previousAvgClassSize * 100 : 0;\n  return (\n    <ModernTableWrapper\n      title=\"Trainer Year-on-Year Performance Comparison\"\n      description={`Performance comparison for ${sortedYoY.length} trainers: ${new Date().getFullYear()} vs ${new Date().getFullYear() - 1}`}\n      icon={<BarChart3 className=\"w-5 h-5\" />}\n      totalItems={sortedYoY.length}\n    >\n      <div className=\"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-gradient-to-r from-emerald-600 via-emerald-700 to-teal-600 text-white\">\n              <tr>\n                {columns.map((column, index) => (\n                  <th\n                    key={column.key}\n                    className={`px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider whitespace-nowrap cursor-pointer hover:bg-white/10 transition-colors ${\n                      column.className || ''\n                    } ${column.align === 'center' ? 'text-center' : column.align === 'right' ? 'text-right' : 'text-left'}`}\n                    onClick={() => column.sortable !== false && handleSort(column.key)}\n                    style={{ height: '40px' }}\n                  >\n                    <div className=\"flex items-center gap-1\">\n                      {column.header}\n                      {sortConfig.key === column.key && (\n                        sortConfig.direction === 'asc' ? (\n                          <TrendingUp className=\"w-3 h-3\" />\n                        ) : (\n                          <TrendingDown className=\"w-3 h-3\" />\n                        )\n                      )}\n                    </div>\n                  </th>\n                ))}\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {sortedYoY.map((row, index) => (\n                <tr\n                  key={index}\n                  className=\"hover:bg-gray-50 cursor-pointer transition-colors\"\n                  onClick={() => handleRowClick(row)}\n                  style={{ height: '40px' }}\n                >\n                  {columns.map((column) => (\n                    <td\n                      key={column.key}\n                      className={`px-4 py-2 text-sm whitespace-nowrap ${\n                        column.align === 'center' ? 'text-center' : column.align === 'right' ? 'text-right' : 'text-left'\n                      }`}\n                    >\n                      {column.render ? column.render(row[column.key], row) : row[column.key]}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </ModernTableWrapper>\n  );\n};","import React, { useState, useMemo } from 'react';\nimport { ModernTableWrapper } from './ModernTableWrapper';\nimport { ProcessedTrainerData } from './TrainerDataProcessor';\nimport { formatCurrency, formatNumber, formatRevenue } from '@/utils/formatters';\nimport { Users, Activity, Target, TrendingUp, TrendingDown, UserCheck } from 'lucide-react';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\nimport { Badge } from '@/components/ui/badge';\nimport { TrainerNameCell } from '@/components/ui/TrainerAvatar';\n\ninterface TrainerPerformanceDetailTableProps {\n  data: ProcessedTrainerData[];\n  onRowClick?: (trainer: string, data: any) => void;\n}\n\nexport const TrainerPerformanceDetailTable: React.FC<TrainerPerformanceDetailTableProps> = ({ \n  data, \n  onRowClick \n}) => {\n  const [sortConfig, setSortConfig] = useState<{ key: string; direction: 'asc' | 'desc' }>({\n    key: 'totalRevenue',\n    direction: 'desc'\n  });\n\n  const processedTableData = useMemo(() => {\n    // Aggregate data by trainer across all months\n    const trainerStats = data.reduce((acc, record) => {\n      const key = record.trainerName;\n      \n      if (!acc[key]) {\n        acc[key] = {\n          trainerName: record.trainerName,\n          location: record.location,\n          totalSessions: 0,\n          totalCustomers: 0,\n          totalRevenue: 0,\n          cycleSessions: 0,\n          barreSessions: 0,\n          strengthSessions: 0,\n          cycleRevenue: 0,\n          barreRevenue: 0,\n          strengthRevenue: 0,\n          avgClassSize: 0,\n          fillRate: 0,\n          utilizationRate: 0,\n          conversionRate: 0,\n          retentionRate: 0,\n          monthsActive: 0,\n          revenuePerSession: 0,\n          revenuePerCustomer: 0,\n          consistencyScore: 0,\n          performanceRating: 'Excellent' as const,\n          topFormat: 'Cycle' as const,\n          growthTrend: 0\n        };\n      }\n\n      acc[key].totalSessions += record.totalSessions;\n      acc[key].totalCustomers += record.totalCustomers;\n      acc[key].totalRevenue += record.totalPaid;\n      acc[key].cycleSessions += record.cycleSessions;\n      acc[key].barreSessions += record.barreSessions;\n      acc[key].strengthSessions += record.strengthSessions;\n      acc[key].cycleRevenue += record.cycleRevenue;\n      acc[key].barreRevenue += record.barreRevenue;\n      acc[key].strengthRevenue += record.strengthRevenue;\n      acc[key].monthsActive += 1;\n\n      return acc;\n    }, {} as Record<string, any>);\n\n    // Calculate derived metrics\n    return Object.values(trainerStats).map((trainer: any) => {\n      trainer.avgClassSize = trainer.totalSessions > 0 ? trainer.totalCustomers / trainer.totalSessions : 0;\n      trainer.revenuePerSession = trainer.totalSessions > 0 ? trainer.totalRevenue / trainer.totalSessions : 0;\n      trainer.revenuePerCustomer = trainer.totalCustomers > 0 ? trainer.totalRevenue / trainer.totalCustomers : 0;\n\n      // Compute fill rate and utilization using underlying records by recomputing from 'data'\n      const records = data.filter(r => r.trainerName === trainer.trainerName);\n      const totalSessions = records.reduce((s, r) => s + (r.totalSessions || 0), 0);\n      const nonEmptySessions = records.reduce((s, r) => s + (r.nonEmptySessions || 0), 0);\n      const totalCustomers = records.reduce((s, r) => s + (r.totalCustomers || 0), 0);\n      const assumedCapacityPerSession = 20; // keep consistent with processor\n      const capacity = totalSessions * assumedCapacityPerSession;\n      trainer.fillRate = capacity > 0 ? (totalCustomers / capacity) * 100 : 0;\n      trainer.utilizationRate = totalSessions > 0 ? (nonEmptySessions / totalSessions) * 100 : 0;\n\n      // Use weighted conversion/retention rates across months\n      const totalNew = records.reduce((s, r) => s + (r.newMembers || 0), 0);\n      const totalConverted = records.reduce((s, r) => s + (r.convertedMembers || 0), 0);\n      const totalRetained = records.reduce((s, r) => s + (r.retainedMembers || 0), 0);\n      trainer.conversionRate = totalNew > 0 ? (totalConverted / totalNew) * 100 : 0;\n      trainer.retentionRate = totalNew > 0 ? (totalRetained / totalNew) * 100 : 0;\n\n      // Consistency score based on variability in monthly totals for sessions\n      const monthlySessions = records.map(r => r.totalSessions || 0);\n      if (monthlySessions.length > 1) {\n        const avg = monthlySessions.reduce((s, v) => s + v, 0) / monthlySessions.length;\n        const variance = monthlySessions.reduce((s, v) => s + Math.pow(v - avg, 2), 0) / monthlySessions.length;\n        const stddev = Math.sqrt(variance);\n        trainer.consistencyScore = avg > 0 ? Math.max(0, 100 - (stddev / avg) * 100) : 100;\n      } else {\n        trainer.consistencyScore = 100;\n      }\n\n      // Growth trend: last month vs previous month on sessions\n      const sortedRecs = [...records].sort((a, b) => (a.monthKey || '').localeCompare(b.monthKey || ''));\n      const last = sortedRecs[sortedRecs.length - 1]?.totalSessions || 0;\n      const prev = sortedRecs[sortedRecs.length - 2]?.totalSessions || 0;\n      trainer.growthTrend = prev > 0 ? ((last - prev) / prev) * 100 : (last > 0 ? 100 : 0);\n\n      // Determine top format\n      const formatRevenues = {\n        'Cycle': trainer.cycleRevenue,\n        'Barre': trainer.barreRevenue,\n        'Strength': trainer.strengthRevenue\n      };\n      trainer.topFormat = Object.entries(formatRevenues).reduce((a, b) => \n        formatRevenues[a[0]] > formatRevenues[b[0]] ? a : b\n      )[0];\n\n  // Performance rating (simple revenue thresholds)\n      if (trainer.totalRevenue >= 50000) trainer.performanceRating = 'Excellent';\n      else if (trainer.totalRevenue >= 30000) trainer.performanceRating = 'Good';\n      else if (trainer.totalRevenue >= 15000) trainer.performanceRating = 'Average';\n      else trainer.performanceRating = 'Needs Improvement';\n\n      return trainer;\n    }).sort((a, b) => {\n      if (sortConfig.key === 'trainerName') {\n        return sortConfig.direction === 'asc' \n          ? a.trainerName.localeCompare(b.trainerName)\n          : b.trainerName.localeCompare(a.trainerName);\n      }\n      const aValue = a[sortConfig.key] || 0;\n      const bValue = b[sortConfig.key] || 0;\n      return sortConfig.direction === 'asc' ? aValue - bValue : bValue - aValue;\n    });\n  }, [data, sortConfig]);\n\n  const handleRowClick = (rowData: any) => {\n    if (onRowClick) {\n      onRowClick(rowData.trainerName, {\n        ...rowData,\n        monthYear: rowData.monthYear || rowData.month || '',\n        location: rowData.location || '',\n        type: 'trainer-performance'\n      });\n    }\n  };\n\n  const columns = [\n    {\n      key: 'trainerName' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Trainer</TooltipTrigger>\n            <TooltipContent>Trainer name and location</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      className: 'min-w-[180px]',\n      render: (value: string, row: any) => (\n        <div className=\"flex flex-col gap-1\">\n          <TrainerNameCell name={value} className=\"text-nowrap\" />\n          <div className=\"text-xs text-slate-500 ml-10\">{row.location}</div>\n        </div>\n      )\n    },\n    {\n      key: 'totalSessions' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Sessions</TooltipTrigger>\n            <TooltipContent>Total sessions across selected period</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <div className=\"flex flex-col items-center\">\n          <span className=\"font-medium text-slate-800 text-sm\">{formatNumber(value)}</span>\n          <Activity className=\"w-3 h-3 text-slate-400 mt-0.5\" />\n        </div>\n      )\n    },\n    {\n      key: 'totalCustomers' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Customers</TooltipTrigger>\n            <TooltipContent>Total check-ins across sessions</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <div className=\"flex flex-col items-center\">\n          <span className=\"font-medium text-slate-800 text-sm\">{formatNumber(value)}</span>\n          <Users className=\"w-3 h-3 text-slate-400 mt-0.5\" />\n        </div>\n      )\n    },\n    {\n      key: 'totalRevenue' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Revenue</TooltipTrigger>\n            <TooltipContent>Total revenue across selected period</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <div className=\"flex flex-col items-center\">\n          <span className=\"font-medium text-slate-800 text-sm\">{formatCurrency(value)}</span>\n          <div className=\"text-xs text-slate-500 mt-0.5\">Total</div>\n        </div>\n      )\n    },\n    {\n      key: 'avgClassSize' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Avg Class Size</TooltipTrigger>\n            <TooltipContent>Customers per session on average</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <span className=\"font-medium text-slate-800 text-sm\">{value.toFixed(1)}</span>\n      )\n    },\n    {\n      key: 'revenuePerSession' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Revenue/Session</TooltipTrigger>\n            <TooltipContent>Average revenue per session</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <span className=\"font-medium text-slate-800 text-sm\">{formatCurrency(value)}</span>\n      )\n    },\n    {\n      key: 'topFormat' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Top Format</TooltipTrigger>\n            <TooltipContent>Format with highest revenue for the trainer</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      align: 'center' as const,\n      render: (value: string, row: any) => (\n        <div className=\"flex flex-col items-center\">\n          <Badge className={`\n            ${value === 'Cycle' ? 'bg-blue-100 text-blue-800' : \n              value === 'Barre' ? 'bg-pink-100 text-pink-800' : \n              'bg-green-100 text-green-800'}\n          `}>\n            {value}\n          </Badge>\n          <div className=\"text-xs text-slate-500 mt-1\">\n            {value === 'Cycle' ? row.cycleSessions : \n             value === 'Barre' ? row.barreSessions : \n             row.strengthSessions} sessions\n          </div>\n        </div>\n      )\n    },\n    {\n      key: 'fillRate' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Fill Rate</TooltipTrigger>\n            <TooltipContent>Customers / capacity across sessions (%)</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <div className=\"flex flex-col items-center\">\n          <span className={`font-semibold ${\n            value >= 85 ? 'text-green-600' : \n            value >= 70 ? 'text-yellow-600' : \n            'text-red-600'\n          }`}>\n            {value.toFixed(1)}%\n          </span>\n          <Target className=\"w-3 h-3 text-slate-400 mt-1\" />\n        </div>\n      )\n    },\n    {\n      key: 'conversionRate' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Conversion</TooltipTrigger>\n            <TooltipContent>Converted / new members (%)</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <span className={`font-semibold ${\n          value >= 80 ? 'text-green-600' : \n          value >= 65 ? 'text-yellow-600' : \n          'text-red-600'\n        }`}>\n          {value.toFixed(1)}%\n        </span>\n      )\n    },\n    {\n      key: 'performanceRating' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Rating</TooltipTrigger>\n            <TooltipContent>Performance rating based on revenue thresholds</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: string, row: any) => (\n        <div className=\"flex flex-col items-center\">\n          <Badge className={`\n            ${value === 'Excellent' ? 'bg-green-100 text-green-800' :\n              value === 'Good' ? 'bg-blue-100 text-blue-800' :\n              value === 'Average' ? 'bg-yellow-100 text-yellow-800' :\n              'bg-red-100 text-red-800'}\n          `}>\n            {value}\n          </Badge>\n          <div className=\"text-xs text-slate-500 mt-1 flex items-center gap-1\">\n            {row.growthTrend >= 0 ? (\n              <TrendingUp className=\"w-3 h-3 text-green-500\" />\n            ) : (\n              <TrendingUp className=\"w-3 h-3 text-red-500 rotate-180\" />\n            )}\n            {Math.abs(row.growthTrend).toFixed(0)}%\n          </div>\n        </div>\n      )\n    }\n  ];\n\n  const handleSort = (key: string) => {\n    setSortConfig(prev => ({\n      key,\n      direction: prev.key === key && prev.direction === 'desc' ? 'asc' : 'desc'\n    }));\n  };\n\n  return (\n    <ModernTableWrapper\n      title=\"Trainer Performance Detail Analysis\"\n      description={`Comprehensive performance metrics for ${processedTableData.length} trainers`}\n      icon={<UserCheck className=\"w-5 h-5\" />}\n      totalItems={processedTableData.length}\n    >\n      <div className=\"overflow-hidden rounded-lg border border-gray-200 bg-white shadow-sm\">\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-black text-white\">\n              <tr>\n                {columns.map((column, index) => (\n                  <th\n                    key={column.key}\n                    className={`px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider whitespace-nowrap cursor-pointer hover:bg-white/10 transition-colors ${\n                      column.className || ''\n                    } ${index === 0 ? 'bg-gradient-to-r from-blue-800 via-blue-900 to-blue-800' : 'bg-black'}`}\n                    onClick={() => column.sortable !== false && handleSort(column.key)}\n                    style={{ height: '35px', maxHeight: '35px' }}\n                  >\n                    <div className=\"flex items-center gap-1\">\n                      {column.header}\n                      {sortConfig.key === column.key && (\n                        sortConfig.direction === 'asc' ? (\n                          <TrendingUp className=\"w-3 h-3\" />\n                        ) : (\n                          <TrendingDown className=\"w-3 h-3\" />\n                        )\n                      )}\n                    </div>\n                  </th>\n                ))}\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {processedTableData.map((row, index) => (\n                <tr\n                  key={index}\n                  className=\"hover:bg-gray-50 cursor-pointer transition-colors\"\n                  onClick={() => handleRowClick(row)}\n                  style={{ height: '35px', maxHeight: '35px' }}\n                >\n                  {columns.map((column) => (\n                    <td\n                      key={column.key}\n                      className={`px-4 py-2 text-sm whitespace-nowrap ${\n                        column.align === 'center' ? 'text-center' : column.align === 'right' ? 'text-right' : 'text-left'\n                      }`}\n                    >\n                      {column.render ? column.render(row[column.key], row) : row[column.key]}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </ModernTableWrapper>\n  );\n};","import React, { useState, useMemo } from 'react';\nimport { ModernTableWrapper } from './ModernTableWrapper';\nimport { ProcessedTrainerData } from './TrainerDataProcessor';\nimport { formatCurrency, formatNumber } from '@/utils/formatters';\nimport { Zap, Clock, Target, TrendingUp, TrendingDown, Award } from 'lucide-react';\nimport { Tooltip, TooltipContent, TooltipProvider, TooltipTrigger } from '@/components/ui/tooltip';\nimport { Badge } from '@/components/ui/badge';\nimport { TrainerNameCell } from '@/components/ui/TrainerAvatar';\n\ninterface TrainerEfficiencyAnalysisTableProps {\n  data: ProcessedTrainerData[];\n  onRowClick?: (trainer: string, data: any) => void;\n}\n\nexport const TrainerEfficiencyAnalysisTable: React.FC<TrainerEfficiencyAnalysisTableProps> = ({ \n  data, \n  onRowClick \n}) => {\n  const [sortConfig, setSortConfig] = useState<{ key: string; direction: 'asc' | 'desc' }>({\n    key: 'efficiencyScore',\n    direction: 'desc'\n  });\n\n  const efficiencyData = useMemo(() => {\n    // Aggregate and calculate efficiency metrics by trainer\n    const trainerEfficiency = data.reduce((acc, record) => {\n      const key = record.trainerName;\n      \n      if (!acc[key]) {\n        acc[key] = {\n          trainerName: record.trainerName,\n          location: record.location,\n          totalSessions: 0,\n          nonEmptySessions: 0,\n          emptySessions: 0,\n          totalCustomers: 0,\n          totalRevenue: 0,\n          cycleSessions: 0,\n          barreSessions: 0,\n          strengthSessions: 0,\n          monthsActive: 0,\n          capacityUtilization: 0,\n          revenuePerHour: 0,\n          customerRetention: 0,\n          avgClassFill: 0,\n          efficiencyScore: 0,\n          productivityRank: 'A',\n          timeOptimization: 0,\n          resourceUtilization: 0,\n          impactScore: 0,\n          qualityIndex: 0,\n          growthMomentum: 0,\n          consistencyFactor: 0\n        };\n      }\n\n      acc[key].totalSessions += record.totalSessions;\n      acc[key].nonEmptySessions += record.nonEmptySessions;\n      acc[key].emptySessions += record.emptySessions;\n      acc[key].totalCustomers += record.totalCustomers;\n      acc[key].totalRevenue += record.totalPaid;\n      acc[key].cycleSessions += record.cycleSessions;\n      acc[key].barreSessions += record.barreSessions;\n      acc[key].strengthSessions += record.strengthSessions;\n      acc[key].monthsActive += 1;\n\n      return acc;\n    }, {} as Record<string, any>);\n\n    // Calculate efficiency metrics\n    return Object.values(trainerEfficiency).map((trainer: any) => {\n      // Basic efficiency calculations\n      trainer.capacityUtilization = trainer.totalSessions > 0 \n        ? (trainer.nonEmptySessions / trainer.totalSessions) * 100 \n        : 0;\n      \n      trainer.avgClassFill = trainer.nonEmptySessions > 0 \n        ? trainer.totalCustomers / trainer.nonEmptySessions \n        : 0;\n\n      // Data-based metrics\n      trainer.revenuePerHour = trainer.totalSessions > 0 \n        ? trainer.totalRevenue / trainer.totalSessions // assume 1 hour per session\n        : 0;\n\n      // Derive customer retention from aggregated weighted rate across months for this trainer\n      const records = data.filter(r => r.trainerName === trainer.trainerName);\n      const totalNew = records.reduce((s, r) => s + (r.newMembers || 0), 0);\n      const totalRetained = records.reduce((s, r) => s + (r.retainedMembers || 0), 0);\n      trainer.customerRetention = totalNew > 0 ? (totalRetained / totalNew) * 100 : 0;\n\n      // Time optimization proxy: ratio of non-empty to total (same as utilization)\n      trainer.timeOptimization = trainer.capacityUtilization;\n      trainer.resourceUtilization = trainer.capacityUtilization;\n\n      // Impact/quality/consistency: compute simple scaled indices from existing metrics\n      // Impact: revenue per session relative to cohort\n      const cohort = Object.values(trainerEfficiency) as any[];\n      const rpsValues = cohort.map(t => (t.totalSessions > 0 ? t.totalRevenue / t.totalSessions : 0));\n      const rpsMax = Math.max(...rpsValues, 1);\n      trainer.impactScore = Math.min(100, (trainer.revenuePerHour / rpsMax) * 100);\n\n      // Quality: average class fill normalized to a 0100 band assuming 20 as a practical ceiling\n      trainer.qualityIndex = Math.min(100, (trainer.avgClassFill / 20) * 100);\n\n      // Consistency: based on variability in monthly sessions\n      if (records.length > 1) {\n        const monthly = records.map(r => r.totalSessions || 0);\n        const avg = monthly.reduce((s, v) => s + v, 0) / monthly.length;\n        const variance = monthly.reduce((s, v) => s + Math.pow(v - avg, 2), 0) / monthly.length;\n        const stddev = Math.sqrt(variance);\n        trainer.consistencyFactor = avg > 0 ? Math.max(0, 100 - (stddev / avg) * 100) : 100;\n      } else {\n        trainer.consistencyFactor = 100;\n      }\n\n      // Growth momentum: last vs previous month sessions\n      const sortedRecs = [...records].sort((a, b) => (a.monthKey || '').localeCompare(b.monthKey || ''));\n      const last = sortedRecs[sortedRecs.length - 1]?.totalSessions || 0;\n      const prev = sortedRecs[sortedRecs.length - 2]?.totalSessions || 0;\n      trainer.growthMomentum = prev > 0 ? ((last - prev) / prev) * 100 : (last > 0 ? 100 : 0);\n\n      // Overall efficiency score: weighted composite of real metrics\n      trainer.efficiencyScore = (\n        trainer.capacityUtilization * 0.35 +\n        trainer.revenuePerHour * 0.02 + // scale-down factor\n        trainer.customerRetention * 0.15 +\n        trainer.impactScore * 0.15 +\n        trainer.qualityIndex * 0.1 +\n        trainer.consistencyFactor * 0.13\n      );\n\n  // Determine productivity rank\n      if (trainer.efficiencyScore >= 90) trainer.productivityRank = 'S+';\n      else if (trainer.efficiencyScore >= 85) trainer.productivityRank = 'A+';\n      else if (trainer.efficiencyScore >= 80) trainer.productivityRank = 'A';\n      else if (trainer.efficiencyScore >= 75) trainer.productivityRank = 'B+';\n      else if (trainer.efficiencyScore >= 70) trainer.productivityRank = 'B';\n      else trainer.productivityRank = 'C';\n\n      return trainer;\n    }).sort((a, b) => {\n      if (sortConfig.key === 'trainerName') {\n        return sortConfig.direction === 'asc' \n          ? a.trainerName.localeCompare(b.trainerName)\n          : b.trainerName.localeCompare(a.trainerName);\n      }\n      const aValue = a[sortConfig.key] || 0;\n      const bValue = b[sortConfig.key] || 0;\n      return sortConfig.direction === 'asc' ? aValue - bValue : bValue - aValue;\n    });\n  }, [data, sortConfig]);\n\n  const handleRowClick = (rowData: any) => {\n    if (onRowClick) {\n      // Find the most recent month data for this trainer to provide specific context\n      const trainerRecords = data.filter(r => r.trainerName === rowData.trainerName);\n      const mostRecentRecord = trainerRecords.sort((a, b) => \n        (b.monthKey || '').localeCompare(a.monthKey || '')\n      )[0];\n      \n      onRowClick(rowData.trainerName, {\n        // Use the most recent month's specific data instead of aggregated totals\n        ...mostRecentRecord,\n        // Add efficiency metrics from aggregated data\n        efficiencyScore: rowData.efficiencyScore,\n        capacityUtilization: rowData.capacityUtilization,\n        revenuePerHour: rowData.revenuePerHour,\n        avgClassFill: rowData.avgClassFill,\n        customerRetention: rowData.customerRetention,\n        productivityRank: rowData.productivityRank,\n        monthYear: mostRecentRecord?.monthYear || mostRecentRecord?.month || '',\n        location: mostRecentRecord?.location || rowData.location || '',\n        type: 'trainer-efficiency',\n        contextFilters: {\n          location: mostRecentRecord?.location || rowData.location || '',\n          month: mostRecentRecord?.monthYear || mostRecentRecord?.month || ''\n        }\n      });\n    }\n  };\n\n  const columns = [\n    {\n      key: 'trainerName' as const,\n      header: 'Trainer',\n      sortable: true,\n      className: 'min-w-[160px]',\n      render: (value: string, row: any) => (\n        <div className=\"flex flex-col gap-1\">\n          <TrainerNameCell name={value} className=\"text-nowrap\" />\n          <div className=\"text-xs text-slate-500 ml-10\">{row.location}</div>\n          <Badge className={`mt-1 text-xs ml-10 w-fit ${\n            row.productivityRank === 'S+' ? 'bg-purple-100 text-purple-800' :\n            row.productivityRank === 'A+' ? 'bg-green-100 text-green-800' :\n            row.productivityRank === 'A' ? 'bg-blue-100 text-blue-800' :\n            row.productivityRank === 'B+' ? 'bg-yellow-100 text-yellow-800' :\n            row.productivityRank === 'B' ? 'bg-orange-100 text-orange-800' :\n            'bg-red-100 text-red-800'\n          }`}>\n            Rank {row.productivityRank}\n          </Badge>\n        </div>\n      )\n    },\n    {\n      key: 'efficiencyScore' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Efficiency Score</TooltipTrigger>\n            <TooltipContent>Composite score from utilization, retention, impact, quality, and consistency</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <div className=\"flex flex-col items-center\">\n          <div className={`text-2xl font-bold ${\n            value >= 85 ? 'text-green-600' :\n            value >= 75 ? 'text-blue-600' :\n            value >= 65 ? 'text-yellow-600' :\n            'text-red-600'\n          }`}>\n            {value.toFixed(0)}\n          </div>\n          <div className=\"flex items-center gap-1 mt-1\">\n            <Zap className=\"w-3 h-3 text-yellow-500\" />\n            <span className=\"text-xs text-slate-500\">Score</span>\n          </div>\n        </div>\n      )\n    },\n    {\n      key: 'capacityUtilization' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Capacity Usage</TooltipTrigger>\n            <TooltipContent>Non-empty sessions divided by total sessions</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number, row: any) => (\n        <div className=\"flex flex-col items-center\">\n          <div className={`font-semibold ${\n            value >= 90 ? 'text-green-600' :\n            value >= 80 ? 'text-blue-600' :\n            value >= 70 ? 'text-yellow-600' :\n            'text-red-600'\n          }`}>\n            {value.toFixed(1)}%\n          </div>\n          <div className=\"text-xs text-slate-500 mt-1\">\n            {row.nonEmptySessions}/{row.totalSessions}\n          </div>\n          <div className=\"w-12 h-1 bg-slate-200 rounded-full mt-1\">\n            <div \n              className={`h-full rounded-full ${\n                value >= 90 ? 'bg-green-500' :\n                value >= 80 ? 'bg-blue-500' :\n                value >= 70 ? 'bg-yellow-500' :\n                'bg-red-500'\n              }`}\n              style={{ width: `${Math.min(value, 100)}%` }}\n            />\n          </div>\n        </div>\n      )\n    },\n    {\n      key: 'revenuePerHour' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Revenue/Hour</TooltipTrigger>\n            <TooltipContent>Revenue per session (assumes 1 hour per session)</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <div className=\"flex flex-col items-center\">\n          <span className=\"font-semibold text-green-600\">{formatCurrency(value)}</span>\n          <Clock className=\"w-3 h-3 text-green-400 mt-1\" />\n        </div>\n      )\n    },\n    {\n      key: 'avgClassFill' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Avg Fill</TooltipTrigger>\n            <TooltipContent>Average customers per non-empty session</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <div className=\"flex flex-col items-center\">\n          <span className=\"font-semibold text-purple-600\">{value.toFixed(1)}</span>\n          <div className=\"text-xs text-purple-500 mt-1\">customers</div>\n        </div>\n      )\n    },\n    {\n      key: 'customerRetention' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Retention</TooltipTrigger>\n            <TooltipContent>Weighted retained/new members (%) across months</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <div className=\"flex flex-col items-center\">\n          <span className={`font-semibold ${\n            value >= 90 ? 'text-green-600' :\n            value >= 80 ? 'text-blue-600' :\n            value >= 70 ? 'text-yellow-600' :\n            'text-red-600'\n          }`}>\n            {value.toFixed(1)}%\n          </span>\n          <Target className=\"w-3 h-3 text-slate-400 mt-1\" />\n        </div>\n      )\n    },\n    {\n      key: 'timeOptimization' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Time Opt.</TooltipTrigger>\n            <TooltipContent>Proxy equals capacity usage (%)</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <span className={`font-semibold ${\n          value >= 90 ? 'text-green-600' :\n          value >= 85 ? 'text-blue-600' :\n          value >= 80 ? 'text-yellow-600' :\n          'text-red-600'\n        }`}>\n          {value.toFixed(0)}%\n        </span>\n      )\n    },\n    {\n      key: 'qualityIndex' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Quality Index</TooltipTrigger>\n            <TooltipContent>Avg fill normalized to 0-100 (20 assumed ceiling)</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <div className=\"flex flex-col items-center\">\n          <span className={`font-semibold ${\n            value >= 90 ? 'text-green-600' :\n            value >= 85 ? 'text-blue-600' :\n            value >= 80 ? 'text-yellow-600' :\n            'text-red-600'\n          }`}>\n            {value.toFixed(0)}\n          </span>\n          <Award className=\"w-3 h-3 text-slate-400 mt-1\" />\n        </div>\n      )\n    },\n    {\n      key: 'growthMomentum' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Growth</TooltipTrigger>\n            <TooltipContent>Last vs previous month sessions (%)</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <div className=\"flex items-center justify-center gap-1\">\n          {value >= 0 ? (\n            <TrendingUp className=\"w-3 h-3 text-green-500\" />\n          ) : (\n            <TrendingDown className=\"w-3 h-3 text-red-500\" />\n          )}\n          <span className={`font-semibold ${\n            value >= 0 ? 'text-green-600' : 'text-red-600'\n          }`}>\n            {value >= 0 ? '+' : ''}{value.toFixed(1)}%\n          </span>\n        </div>\n      )\n    },\n    {\n      key: 'impactScore' as const,\n      header: (\n        <TooltipProvider>\n          <Tooltip>\n            <TooltipTrigger className=\"cursor-help\">Impact</TooltipTrigger>\n            <TooltipContent>Revenue per session relative to cohort (0-100)</TooltipContent>\n          </Tooltip>\n        </TooltipProvider>\n      ),\n      sortable: true,\n      align: 'center' as const,\n      render: (value: number) => (\n        <div className=\"flex flex-col items-center\">\n          <div className={`font-bold ${\n            value >= 90 ? 'text-purple-600' :\n            value >= 80 ? 'text-blue-600' :\n            value >= 70 ? 'text-green-600' :\n            'text-yellow-600'\n          }`}>\n            {value.toFixed(0)}\n          </div>\n          <div className=\"text-xs text-slate-500\">score</div>\n        </div>\n      )\n    }\n  ];\n\n  const handleSort = (key: string) => {\n    setSortConfig(prev => ({\n      key,\n      direction: prev.key === key && prev.direction === 'desc' ? 'asc' : 'desc'\n    }));\n  };\n\n  // Calculate summary stats\n  const summaryStats = useMemo(() => {\n    const avgEfficiency = efficiencyData.reduce((sum, trainer) => sum + trainer.efficiencyScore, 0) / efficiencyData.length;\n    const topPerformers = efficiencyData.filter(trainer => trainer.efficiencyScore >= 85).length;\n    const avgCapacityUtilization = efficiencyData.reduce((sum, trainer) => sum + trainer.capacityUtilization, 0) / efficiencyData.length;\n    \n    return { avgEfficiency, topPerformers, avgCapacityUtilization };\n  }, [efficiencyData]);\n\n  return (\n    <ModernTableWrapper\n      title=\"Trainer Efficiency & Productivity Analysis\"\n      description={`Efficiency analysis for ${efficiencyData.length} trainers with productivity ranking system`}\n      icon={<Zap className=\"w-5 h-5\" />}\n      totalItems={efficiencyData.length}\n    >\n      <div className=\"bg-white rounded-lg border border-gray-200 shadow-sm\">\n        {/* Summary Stats Header */}\n        <div className=\"bg-gradient-to-r from-blue-800 via-blue-900 to-slate-900 text-white p-4 rounded-t-lg\">\n          <div className=\"grid grid-cols-3 gap-4 text-sm\">\n            <div className=\"bg-white/10 rounded-lg p-3\">\n              <div className=\"text-white/80\">Avg Efficiency</div>\n              <div className=\"text-xl font-bold\">{summaryStats.avgEfficiency.toFixed(0)}</div>\n            </div>\n            <div className=\"bg-white/10 rounded-lg p-3\">\n              <div className=\"text-white/80\">Top Performers</div>\n              <div className=\"text-xl font-bold\">{summaryStats.topPerformers}</div>\n            </div>\n            <div className=\"bg-white/10 rounded-lg p-3\">\n              <div className=\"text-white/80\">Avg Utilization</div>\n              <div className=\"text-xl font-bold\">{summaryStats.avgCapacityUtilization.toFixed(1)}%</div>\n            </div>\n          </div>\n        </div>\n\n        {/* Table */}\n        <div className=\"overflow-x-auto\">\n          <table className=\"w-full\">\n            <thead className=\"bg-black text-white\">\n              <tr>\n                {columns.map((column, index) => (\n                  <th\n                    key={column.key}\n                    className={`px-4 py-3 text-left text-xs font-semibold uppercase tracking-wider whitespace-nowrap cursor-pointer hover:bg-white/10 transition-colors ${\n                      column.className || ''\n                    } ${column.align === 'center' ? 'text-center' : column.align === 'right' ? 'text-right' : 'text-left'} ${\n                      index === 0 ? 'bg-gradient-to-r from-blue-800 via-blue-900 to-blue-800' : 'bg-black'\n                    }`}\n                    onClick={() => column.sortable !== false && handleSort(column.key)}\n                    style={{ height: '35px', maxHeight: '35px' }}\n                  >\n                    <div className=\"flex items-center gap-1\">\n                      {column.header}\n                      {sortConfig.key === column.key && (\n                        sortConfig.direction === 'asc' ? (\n                          <TrendingUp className=\"w-3 h-3\" />\n                        ) : (\n                          <TrendingDown className=\"w-3 h-3\" />\n                        )\n                      )}\n                    </div>\n                  </th>\n                ))}\n              </tr>\n            </thead>\n            <tbody className=\"bg-white divide-y divide-gray-200\">\n              {efficiencyData.map((row, index) => (\n                <tr\n                  key={index}\n                  className=\"hover:bg-gray-50 cursor-pointer transition-colors\"\n                  onClick={() => handleRowClick(row)}\n                  style={{ height: '35px', maxHeight: '35px' }}\n                >\n                  {columns.map((column) => (\n                    <td\n                      key={column.key}\n                      className={`px-4 py-2 text-sm whitespace-nowrap ${\n                        column.align === 'center' ? 'text-center' : column.align === 'right' ? 'text-right' : 'text-left'\n                      }`}\n                    >\n                      {column.render ? column.render(row[column.key], row) : row[column.key]}\n                    </td>\n                  ))}\n                </tr>\n              ))}\n            </tbody>\n          </table>\n        </div>\n      </div>\n    </ModernTableWrapper>\n  );\n};","\nimport React from 'react';\nimport { Tabs, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { TrainerMetricType } from '@/types/dashboard';\n\ninterface TrainerMetricTabsProps {\n  value: TrainerMetricType;\n  onValueChange: (value: TrainerMetricType) => void;\n  className?: string;\n}\n\nexport const TrainerMetricTabs: React.FC<TrainerMetricTabsProps> = ({\n  value,\n  onValueChange,\n  className = \"\"\n}) => {\n  return (\n    <Tabs value={value} onValueChange={onValueChange} className={className}>\n      <TabsList className=\"grid w-full grid-cols-4 md:grid-cols-8 gap-1 h-auto p-2\">\n        <TabsTrigger\n          value=\"totalSessions\"\n          className=\"text-xs px-3 py-3 h-auto flex-col gap-1\"\n        >\n          <span className=\"font-semibold\">Total</span>\n          <span className=\"text-[10px] opacity-80\">Sessions</span>\n        </TabsTrigger>\n        <TabsTrigger\n          value=\"totalCustomers\"\n          className=\"text-xs px-3 py-3 h-auto flex-col gap-1\"\n        >\n          <span className=\"font-semibold\">Total</span>\n          <span className=\"text-[10px] opacity-80\">Members</span>\n        </TabsTrigger>\n        <TabsTrigger\n          value=\"totalPaid\"\n          className=\"text-xs px-3 py-3 h-auto flex-col gap-1\"\n        >\n          <span className=\"font-semibold\">Total</span>\n          <span className=\"text-[10px] opacity-80\">Revenue</span>\n        </TabsTrigger>\n        <TabsTrigger\n          value=\"classAverageExclEmpty\"\n          className=\"text-xs px-3 py-3 h-auto flex-col gap-1\"\n        >\n          <span className=\"font-semibold\">Class</span>\n          <span className=\"text-[10px] opacity-80\">Average</span>\n        </TabsTrigger>\n        <TabsTrigger\n          value=\"emptySessions\"\n          className=\"text-xs px-3 py-3 h-auto flex-col gap-1\"\n        >\n          <span className=\"font-semibold\">Empty</span>\n          <span className=\"text-[10px] opacity-80\">Sessions</span>\n        </TabsTrigger>\n        <TabsTrigger\n          value=\"conversionRate\"\n          className=\"text-xs px-3 py-3 h-auto flex-col gap-1\"\n        >\n          <span className=\"font-semibold\">Conversion</span>\n          <span className=\"text-[10px] opacity-80\">Rate</span>\n        </TabsTrigger>\n        <TabsTrigger\n          value=\"retentionRate\"\n          className=\"text-xs px-3 py-3 h-auto flex-col gap-1\"\n        >\n          <span className=\"font-semibold\">Retention</span>\n          <span className=\"text-[10px] opacity-80\">Rate</span>\n        </TabsTrigger>\n        <TabsTrigger\n          value=\"newMembers\"\n          className=\"text-xs px-3 py-3 h-auto flex-col gap-1\"\n        >\n          <span className=\"font-semibold\">New</span>\n          <span className=\"text-[10px] opacity-80\">Members</span>\n        </TabsTrigger>\n      </TabsList>\n    </Tabs>\n  );\n};\n","import { PayrollData } from '@/types/dashboard';\n\nexport interface ProcessedTrainerData {\n  trainerId: string;\n  trainerName: string;\n  trainerEmail: string;\n  location: string;\n  monthYear: string;\n  monthKey?: string; // YYYY-MM\n  monthLabel?: string; // Mon YYYY\n\n  // Session breakdown\n  totalSessions: number;\n  emptySessions: number;\n  nonEmptySessions: number;\n  totalCustomers: number;\n  totalPaid: number;\n\n  cycleSessions: number;\n  emptyCycleSessions: number;\n  nonEmptyCycleSessions: number;\n  cycleCustomers: number;\n  cycleRevenue: number;\n\n  strengthSessions: number;\n  emptyStrengthSessions: number;\n  nonEmptyStrengthSessions: number;\n  strengthCustomers: number;\n  strengthRevenue: number;\n\n  barreSessions: number;\n  emptyBarreSessions: number;\n  nonEmptyBarreSessions: number;\n  barreCustomers: number;\n  barreRevenue: number;\n\n  // Calculated metrics\n  classAverageExclEmpty: number;\n  classAverageInclEmpty: number;\n  conversion: number;\n  retention: number;\n\n  // Enhanced metrics\n  fillRate: number;\n  capacity: number;\n  utilizationRate: number;\n  topFormat: string;\n  formatDistribution: { [format: string]: number };\n  revenuePerSession: number;\n  revenuePerCustomer: number;\n  growthRate: number;\n  consistencyScore: number;\n\n  // New data points\n  uniqueKey: string;\n  newMembers: number;\n  convertedMembers: number;\n  retainedMembers: number;\n  conversionRate: number;\n  retentionRate: number;\n}\n\nexport const processTrainerData = (payrollData: PayrollData[]): ProcessedTrainerData[] => {\n  const parseMonth = (monthStr: string) => {\n    if (!monthStr) return { monthKey: '', monthLabel: '' };\n    // Accept formats: \"Feb-2024\", \"Feb 2024\", \"2/2024\"\n    let d: Date | null = null;\n    if (monthStr.includes('/')) {\n      const [m, y] = monthStr.split('/').map(s => s.trim());\n      const mi = parseInt(m) - 1;\n      const yi = parseInt(y);\n      if (!isNaN(mi) && !isNaN(yi)) d = new Date(yi, mi, 1);\n    } else if (monthStr.includes('-') || monthStr.includes(' ')) {\n      const parts = monthStr.replace('-', ' ').split(' ').filter(Boolean);\n      const mon = parts[0];\n      const yi = parseInt(parts[1]);\n      const names = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\n      const mi = names.indexOf(mon);\n      if (mi >= 0 && !isNaN(yi)) d = new Date(yi, mi, 1);\n    }\n    if (!d || isNaN(d.getTime())) return { monthKey: '', monthLabel: monthStr };\n    const monthKey = `${d.getFullYear()}-${String(d.getMonth()+1).padStart(2,'0')}`;\n    const names = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\n    const monthLabel = `${names[d.getMonth()]} ${d.getFullYear()}`;\n    return { monthKey, monthLabel };\n  };\n\n  return payrollData.map(record => {\n    const totalSessions = record.totalSessions || 0;\n    const emptySessions = record.totalEmptySessions || 0;\n    const nonEmptySessions = record.totalNonEmptySessions || 0;\n    const totalCustomers = record.totalCustomers || 0;\n    const totalPaid = record.totalPaid || 0;\n\n    const cycleSessions = record.cycleSessions || 0;\n    const barreSessions = record.barreSessions || 0;\n  const strengthSessions = record.strengthSessions || 0;\n\n    // Class averages\n    const classAverageExclEmpty = nonEmptySessions > 0 ? totalCustomers / nonEmptySessions : 0;\n    const classAverageInclEmpty = totalSessions > 0 ? totalCustomers / totalSessions : 0;\n\n    // Conversion & Retention - extract numeric values from percentage strings\n    const conversionRate = typeof record.conversion === 'string' \n      ? parseFloat(record.conversion.replace('%', '')) || 0\n      : Number(record.conversion) || 0;\n    const retentionRate = typeof record.retention === 'string' \n      ? parseFloat(record.retention.replace('%', '')) || 0\n      : Number(record.retention) || 0;\n\n    // Enhanced metrics calculations\n  const capacity = totalSessions * 20; // Approximated capacity per session\n    const fillRate = capacity > 0 ? (totalCustomers / capacity) * 100 : 0;\n    const utilizationRate = totalSessions > 0 ? (nonEmptySessions / totalSessions) * 100 : 0;\n    \n    // Determine top format\n    const formatStats = {\n      'Cycle': cycleSessions,\n      'Barre': barreSessions,\n      'Strength': strengthSessions\n    };\n    const topFormat = Object.entries(formatStats).reduce((a, b) => formatStats[a[0]] > formatStats[b[0]] ? a : b)[0];\n    \n    // Format distribution\n    const formatDistribution = {\n      'Cycle': cycleSessions > 0 ? (cycleSessions / totalSessions) * 100 : 0,\n      'Barre': barreSessions > 0 ? (barreSessions / totalSessions) * 100 : 0,\n      'Strength': strengthSessions > 0 ? (strengthSessions / totalSessions) * 100 : 0\n    };\n\n    // Revenue metrics\n    const revenuePerSession = totalSessions > 0 ? totalPaid / totalSessions : 0;\n    const revenuePerCustomer = totalCustomers > 0 ? totalPaid / totalCustomers : 0;\n\n    // Growth rate and consistency score calculations\n    // Note: These require historical data for accurate calculation\n    const growthRate = 0; // Set to 0 until historical data is available\n    const consistencyScore = Math.min(100, ((nonEmptySessions / Math.max(totalSessions, 1)) * 100)); // Based on fill rate\n\n    const { monthKey, monthLabel } = parseMonth(record.monthYear || '');\n    return {\n      trainerId: record.teacherId,\n      trainerName: record.teacherName,\n      trainerEmail: record.teacherEmail,\n      location: record.location,\n      monthYear: record.monthYear || '',\n      monthKey,\n      monthLabel,\n\n      totalSessions,\n      emptySessions,\n      nonEmptySessions,\n      totalCustomers,\n      totalPaid,\n\n      cycleSessions,\n      emptyCycleSessions: record.emptyCycleSessions || 0,\n      nonEmptyCycleSessions: record.nonEmptyCycleSessions || 0,\n      cycleCustomers: record.cycleCustomers || 0,\n      cycleRevenue: record.cyclePaid || 0,\n\n  strengthSessions,\n  emptyStrengthSessions: record.emptyStrengthSessions || 0,\n  nonEmptyStrengthSessions: record.nonEmptyStrengthSessions || 0,\n  strengthCustomers: record.strengthCustomers || 0,\n  strengthRevenue: record.strengthPaid || 0,\n\n      barreSessions,\n      emptyBarreSessions: record.emptyBarreSessions || 0,\n      nonEmptyBarreSessions: record.nonEmptyBarreSessions || 0,\n      barreCustomers: record.barreCustomers || 0,\n      barreRevenue: record.barrePaid || 0,\n\n      classAverageExclEmpty,\n      classAverageInclEmpty,\n\n      // Enhanced metrics\n      fillRate,\n      capacity,\n      utilizationRate,\n      topFormat,\n      formatDistribution,\n      revenuePerSession,\n      revenuePerCustomer,\n      growthRate,\n      consistencyScore,\n\n  conversion: record.converted || 0,\n  retention: record.retained || 0,\n\n      uniqueKey: record.unique || '',\n      newMembers: record.new || 0,\n      convertedMembers: record.converted || 0,\n      retainedMembers: record.retained || 0,\n      conversionRate,\n      retentionRate,\n    };\n  });\n};\n\nexport const getMetricValue = (data: ProcessedTrainerData, metric: string): number => {\n  switch (metric) {\n    case 'totalSessions': return data.totalSessions;\n    case 'totalCustomers': return data.totalCustomers;\n    case 'totalPaid': return data.totalPaid;\n    case 'classAverageExclEmpty': return data.classAverageExclEmpty;\n    case 'classAverageInclEmpty': return data.classAverageInclEmpty;\n    case 'emptySessions': return data.emptySessions;\n    case 'nonEmptySessions': return data.nonEmptySessions;\n    case 'cycleSessions': return data.cycleSessions;\n    case 'cycleRevenue': return data.cycleRevenue;\n    case 'barreSessions': return data.barreSessions;\n    case 'barreRevenue': return data.barreRevenue;\n    case 'strengthSessions': return data.strengthSessions;\n    case 'strengthRevenue': return data.strengthRevenue;\n    case 'conversion': return data.conversion;\n    case 'retention': return data.retention;\n    case 'conversionRate': return data.conversionRate;\n    case 'retentionRate': return data.retentionRate;\n    case 'newMembers': return data.newMembers;\n    case 'convertedMembers': return data.convertedMembers;\n    case 'retainedMembers': return data.retainedMembers;\n    case 'fillRate': return data.fillRate;\n    case 'capacity': return data.capacity;\n    case 'utilizationRate': return data.utilizationRate;\n    case 'revenuePerSession': return data.revenuePerSession;\n    case 'revenuePerCustomer': return data.revenuePerCustomer;\n    case 'growthRate': return data.growthRate;\n    case 'consistencyScore': return data.consistencyScore;\n    default: return 0;\n  }\n};\n","\nimport React, { useState, useMemo, useRef, useEffect } from 'react';\nimport { ModernTableWrapper } from './ModernTableWrapper';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { TrendingUp, TrendingDown, Calendar, ChevronDown, ChevronRight, Info, BarChart3, Star } from 'lucide-react';\nimport { Tooltip, TooltipProvider, TooltipTrigger, TooltipContent } from '@/components/ui/tooltip';\nimport { TrainerMetricType } from '@/types/dashboard';\nimport { formatCurrency, formatNumber } from '@/utils/formatters';\nimport { cn } from '@/lib/utils';\nimport { TrainerMetricTabs } from './TrainerMetricTabs';\nimport CopyTableButton from '@/components/ui/CopyTableButton';\nimport { useMetricsTablesRegistry } from '@/contexts/MetricsTablesRegistryContext';\nimport { ProcessedTrainerData, getMetricValue } from './TrainerDataProcessor';\nimport { TrainerNameCell } from '@/components/ui/TrainerAvatar';\n\ninterface MonthOnMonthTrainerTableProps {\n  data: ProcessedTrainerData[];\n  defaultMetric?: TrainerMetricType;\n  onRowClick?: (trainer: string, data: any) => void;\n}\n\nexport const MonthOnMonthTrainerTable = ({ \n  data, \n  defaultMetric = 'totalSessions',\n  onRowClick \n}: MonthOnMonthTrainerTableProps) => {\n  const [selectedMetric, setSelectedMetric] = useState<TrainerMetricType>(defaultMetric);\n  const [expandedRows, setExpandedRows] = useState<Set<string>>(new Set());\n\n  const processedData = useMemo(() => {\n    const trainerGroups: Record<string, Record<string, ProcessedTrainerData>> = {};\n    \n    // Group data by trainer\n    data.forEach(record => {\n      if (!trainerGroups[record.trainerName]) {\n        trainerGroups[record.trainerName] = {};\n      }\n      trainerGroups[record.trainerName][record.monthYear] = record;\n    });\n\n    // Generate all months from Jan 2024 to current month\n    const months: string[] = [];\n    const monthNames = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\n    const now = new Date();\n    const currentYear = now.getFullYear();\n    const currentMonth = now.getMonth(); // 0-indexed\n    \n    // Start from January 2024\n    for (let year = 2024; year <= currentYear; year++) {\n      const startMonth = year === 2024 ? 0 : 0; // Start from January for all years\n      const endMonth = year === currentYear ? currentMonth : 11;\n      \n      for (let month = startMonth; month <= endMonth; month++) {\n        const monthKey = `${monthNames[month]}-${year}`;\n        months.push(monthKey);\n      }\n    }\n    \n    // Reverse to show most recent first\n    months.reverse();\n\n    return { trainerGroups, months };\n  }, [data]);\n\n  const formatValue = (value: number, metric: TrainerMetricType) => {\n    switch (metric) {\n      case 'totalPaid':\n      case 'cycleRevenue':\n      case 'barreRevenue':\n        return formatCurrency(value);\n      case 'retentionRate':\n      case 'conversionRate':\n        return `${value.toFixed(1)}%`;\n      case 'classAverageExclEmpty':\n      case 'classAverageInclEmpty':\n        return value.toFixed(1);\n      default:\n        return formatNumber(value);\n    }\n  };\n\n  const getChangePercentage = (current: number, previous: number) => {\n    if (previous === 0) return current > 0 ? 100 : 0;\n    return ((current - previous) / previous) * 100;\n  };\n\n  const toggleRowExpansion = (trainer: string) => {\n    const newExpanded = new Set(expandedRows);\n    if (newExpanded.has(trainer)) {\n      newExpanded.delete(trainer);\n    } else {\n      newExpanded.add(trainer);\n    }\n    setExpandedRows(newExpanded);\n  };\n\n  const handleRowClick = (trainer: string) => {\n    const trainerData = processedData.trainerGroups[trainer];\n    const months = processedData.months;\n    const recs = Object.values(trainerData || {}) as any[];\n    const totalSessions = recs.reduce((s, r) => s + (r.totalSessions || 0), 0);\n    const totalRevenue = recs.reduce((s, r) => s + (r.totalPaid || 0), 0);\n    const totalCustomers = recs.reduce((s, r) => s + (r.totalCustomers || 0), 0);\n    const cycleSessions = recs.reduce((s, r) => s + (r.cycleSessions || 0), 0);\n    const barreSessions = recs.reduce((s, r) => s + (r.barreSessions || 0), 0);\n    const strengthSessions = recs.reduce((s, r) => s + (r.strengthSessions || 0), 0);\n  const lastRec: any = (trainerData as any)[months[0]] || {};\n  const prevRec: any = (trainerData as any)[months[1]] || {};\n  const previousSessions = (prevRec as any).totalSessions || 0;\n  const previousRevenue = (prevRec as any).totalPaid || 0;\n  const previousCustomers = (prevRec as any).totalCustomers || 0;\n  const location = (lastRec as any).location || (recs[0] as any)?.location || '';\n\n    if (onRowClick) {\n      onRowClick(trainer, {\n        name: trainer,\n        location,\n        // Monthly mapping and order for trend charts\n        monthlyData: trainerData,\n        months,\n        // Aggregates used by the drill-down modal\n        totalSessions,\n        totalRevenue,\n        totalCustomers,\n        previousSessions,\n        previousRevenue,\n        previousCustomers,\n        cycleSessions,\n        barreSessions,\n        strengthSessions\n      });\n    }\n  };\n\n  // Calculate totals for each month (for class averages, compute weighted average by sessions)\n  const monthlyTotals = useMemo(() => {\n    const totals: Record<string, number> = {};\n    const isClassAvg = selectedMetric === 'classAverageExclEmpty' || selectedMetric === 'classAverageInclEmpty';\n    const isRate = selectedMetric === 'conversionRate' || selectedMetric === 'retentionRate';\n    processedData.months.forEach(month => {\n      if (!isClassAvg && !isRate) {\n        let sum = 0;\n        Object.values(processedData.trainerGroups).forEach(trainerData => {\n          if (trainerData[month]) sum += getMetricValue(trainerData[month], selectedMetric);\n        });\n        totals[month] = sum;\n      } else if (isClassAvg) {\n        let numerator = 0; // attendees\n        let denom = 0; // sessions (non-empty for exclEmpty)\n        Object.values(processedData.trainerGroups).forEach(trainerData => {\n          const rec = trainerData[month];\n          if (!rec) return;\n          const sessions = selectedMetric === 'classAverageExclEmpty' ? (rec.nonEmptySessions || 0) : (rec.totalSessions || 0);\n          const customers = rec.totalCustomers || 0;\n          numerator += customers;\n          denom += sessions;\n        });\n        totals[month] = denom > 0 ? numerator / denom : 0;\n      } else if (isRate) {\n        // Weighted average of rates by new members for the month\n        let numerator = 0; // converted or retained members\n        let denom = 0; // new members\n        Object.values(processedData.trainerGroups).forEach(trainerData => {\n          const rec: any = trainerData[month];\n          if (!rec) return;\n          if (selectedMetric === 'conversionRate') {\n            numerator += (rec.convertedMembers || 0);\n            denom += (rec.newMembers || 0);\n          } else if (selectedMetric === 'retentionRate') {\n            numerator += (rec.retainedMembers || 0);\n            denom += (rec.newMembers || 0);\n          }\n        });\n        totals[month] = denom > 0 ? (numerator / denom) * 100 : 0;\n      }\n    });\n    return totals;\n  }, [processedData, selectedMetric]);\n\n  // Calculate summary statistics\n  const summaryStats = useMemo(() => {\n    const allValues = Object.values(monthlyTotals);\n    const isClassAvg = selectedMetric === 'classAverageExclEmpty' || selectedMetric === 'classAverageInclEmpty';\n    const isRate = selectedMetric === 'conversionRate' || selectedMetric === 'retentionRate';\n    let total = 0;\n    if (!isClassAvg && !isRate) {\n      total = allValues.reduce((sum, val) => sum + val, 0);\n    } else if (isClassAvg) {\n      // Compute overall weighted average across months\n      let numerator = 0;\n      let denom = 0;\n      processedData.months.forEach(month => {\n        Object.values(processedData.trainerGroups).forEach(trainerData => {\n          const rec = (trainerData as any)[month];\n          if (!rec) return;\n          const sessions = selectedMetric === 'classAverageExclEmpty' ? (rec.nonEmptySessions || 0) : (rec.totalSessions || 0);\n          const customers = rec.totalCustomers || 0;\n          numerator += customers;\n          denom += sessions;\n        });\n      });\n      total = denom > 0 ? (numerator / denom) : 0;\n    } else if (isRate) {\n      // Weighted average across all months by new members\n      let numerator = 0;\n      let denom = 0;\n      processedData.months.forEach(month => {\n        Object.values(processedData.trainerGroups).forEach(trainerData => {\n          const rec: any = (trainerData as any)[month];\n          if (!rec) return;\n          if (selectedMetric === 'conversionRate') {\n            numerator += (rec.convertedMembers || 0);\n            denom += (rec.newMembers || 0);\n          } else if (selectedMetric === 'retentionRate') {\n            numerator += (rec.retainedMembers || 0);\n            denom += (rec.newMembers || 0);\n          }\n        });\n      });\n      total = denom > 0 ? (numerator / denom) * 100 : 0;\n    }\n    const average = allValues.length > 0 && !isClassAvg && !isRate ? total / allValues.length : total; // for class avg & rates, show the weighted average as \"total\"\n    const growth = allValues.length >= 2 ? getChangePercentage(allValues[0], allValues[1]) : 0;\n    return { total, average, growth };\n  }, [monthlyTotals, processedData, selectedMetric]);\n\n  if (!data.length) {\n    return (\n      <ModernTableWrapper\n        title=\"Month-on-Month Trainer Analysis\"\n        description=\"No trainer data available for month-on-month comparison\"\n        icon={<BarChart3 className=\"w-5 h-5\" />}\n        totalItems={0}\n      >\n        <div className=\"p-8 text-center text-slate-600\">\n          No trainer data available for analysis\n        </div>\n      </ModernTableWrapper>\n    );\n  }\n\n  const containerRef = useRef<HTMLDivElement>(null);\n  const registry = useMetricsTablesRegistry();\n  const tableId = 'Month-on-Month Trainer Analysis';\n  useEffect(() => {\n    if (!registry) return;\n    const el = containerRef.current;\n    if (!el) return;\n    const getTextContent = () => {\n      const table = el.querySelector('table') || el;\n      let text = `${tableId}\\n`;\n      const headerCells = table.querySelectorAll('thead th');\n      const headers: string[] = [];\n      headerCells.forEach(cell => { const t = cell.textContent?.trim(); if (t) headers.push(t); });\n      if (headers.length) {\n        text += headers.join('\\t') + '\\n';\n        text += headers.map(() => '---').join('\\t') + '\\n';\n      }\n      const rows = table.querySelectorAll('tbody tr');\n      rows.forEach(row => {\n        const cells = row.querySelectorAll('td');\n        const rowData: string[] = [];\n        cells.forEach(c => rowData.push((c.textContent || '').trim()));\n        if (rowData.length) text += rowData.join('\\t') + '\\n';\n      });\n      return text.trim();\n    };\n    registry.register({ id: tableId, getTextContent });\n    return () => registry.unregister(tableId);\n  }, [registry]);\n\n  // Generate \"All Tabs\" content across all trainer metrics, regardless of the active tab\n  const generateAllTabsContent = useMemo(() => {\n    const allMetrics: TrainerMetricType[] = [\n      'totalSessions',\n      'totalCustomers',\n      'totalPaid',\n      'classAverageExclEmpty',\n      'emptySessions',\n      'conversionRate',\n      'retentionRate',\n      'newMembers'\n    ];\n\n    const metricLabel = (m: TrainerMetricType) => {\n      switch (m) {\n        case 'totalSessions': return 'Total Sessions';\n        case 'totalCustomers': return 'Total Members';\n        case 'totalPaid': return 'Total Revenue';\n        case 'classAverageExclEmpty': return 'Class Average';\n        case 'emptySessions': return 'Empty Sessions';\n        case 'conversionRate': return 'Conversion Rate';\n        case 'retentionRate': return 'Retention Rate';\n        case 'newMembers': return 'New Members';\n        default: return m;\n      }\n    };\n\n    const lines: string[] = [];\n    lines.push(`${tableId}  All Metrics`);\n    lines.push(`Trainers: ${Object.keys(processedData.trainerGroups).length} | Months: ${processedData.months.length}`);\n\n    allMetrics.forEach(metric => {\n      lines.push('');\n      lines.push(`=== ${metricLabel(metric)} ===`);\n      // Header row\n      const headers = ['Trainer', ...processedData.months, 'MoM Change', metric === 'classAverageExclEmpty' || metric === 'classAverageInclEmpty' || metric === 'conversionRate' || metric === 'retentionRate' ? 'Weighted Avg' : 'Total'];\n      lines.push(headers.join('\\t'));\n\n      // Totals row (for class avg / rates use weighted average)\n      const isClassAvg = metric === 'classAverageExclEmpty' || metric === 'classAverageInclEmpty';\n      const isRate = metric === 'conversionRate' || metric === 'retentionRate';\n\n      const monthlyTotals = processedData.months.map(month => {\n        if (!isClassAvg && !isRate) {\n          let sum = 0;\n          Object.values(processedData.trainerGroups).forEach(trainerData => {\n            if ((trainerData as any)[month]) sum += getMetricValue((trainerData as any)[month], metric);\n          });\n          return sum;\n        } else if (isClassAvg) {\n          let num = 0; let den = 0;\n          Object.values(processedData.trainerGroups).forEach(trainerData => {\n            const rec: any = (trainerData as any)[month];\n            if (!rec) return;\n            const sessions = metric === 'classAverageExclEmpty' ? (rec.nonEmptySessions || 0) : (rec.totalSessions || 0);\n            const customers = rec.totalCustomers || 0;\n            num += customers;\n            den += sessions;\n          });\n          return den > 0 ? (num / den) : 0;\n        } else { // isRate\n          let num = 0; let den = 0;\n          Object.values(processedData.trainerGroups).forEach(trainerData => {\n            const rec: any = (trainerData as any)[month];\n            if (!rec) return;\n            if (metric === 'conversionRate') { num += (rec.convertedMembers || 0); den += (rec.newMembers || 0); }\n            else { num += (rec.retainedMembers || 0); den += (rec.newMembers || 0); }\n          });\n          return den > 0 ? (num / den) * 100 : 0;\n        }\n      });\n      const totalsAllValues = monthlyTotals;\n      const totalsGrowth = totalsAllValues.length >= 2 ? getChangePercentage(totalsAllValues[0], totalsAllValues[1]) : 0;\n      const totalsOverall = (() => {\n        if (!isClassAvg && !isRate) return totalsAllValues.reduce((s, v) => s + v, 0);\n        // weighted avg across all months\n        if (isClassAvg) {\n          let num = 0; let den = 0;\n          processedData.months.forEach(month => {\n            Object.values(processedData.trainerGroups).forEach(trainerData => {\n              const rec: any = (trainerData as any)[month];\n              if (!rec) return;\n              const sessions = metric === 'classAverageExclEmpty' ? (rec.nonEmptySessions || 0) : (rec.totalSessions || 0);\n              const customers = rec.totalCustomers || 0;\n              num += customers; den += sessions;\n            });\n          });\n          return den > 0 ? (num / den) : 0;\n        }\n        // isRate\n        let num = 0; let den = 0;\n        processedData.months.forEach(month => {\n          Object.values(processedData.trainerGroups).forEach(trainerData => {\n            const rec: any = (trainerData as any)[month];\n            if (!rec) return;\n            if (metric === 'conversionRate') { num += (rec.convertedMembers || 0); den += (rec.newMembers || 0); }\n            else { num += (rec.retainedMembers || 0); den += (rec.newMembers || 0); }\n          });\n        });\n        return den > 0 ? (num / den) * 100 : 0;\n      })();\n\n      const totalsRow = [\n        'TOTAL',\n        ...monthlyTotals.map(v => formatValue(v, metric)),\n        `${totalsGrowth >= 0 ? '' : ''}${Math.abs(totalsGrowth).toFixed(1)}%`,\n        formatValue(totalsOverall as number, metric)\n      ];\n      lines.push(totalsRow.join('\\t'));\n\n      // Trainer rows\n      Object.entries(processedData.trainerGroups).forEach(([trainer, trainerData]) => {\n        const values = processedData.months.map(month => (trainerData as any)[month] ? getMetricValue((trainerData as any)[month], metric) : 0);\n        const growth = values.length >= 2 ? getChangePercentage(values[0], values[1]) : 0;\n        const total = (() => {\n          if (!isClassAvg && !isRate) return values.reduce((s, v) => s + v, 0);\n          if (isClassAvg) {\n            let num = 0; let den = 0;\n            processedData.months.forEach(month => {\n              const rec: any = (trainerData as any)[month];\n              if (!rec) return;\n              const sessions = metric === 'classAverageExclEmpty' ? (rec.nonEmptySessions || 0) : (rec.totalSessions || 0);\n              const customers = rec.totalCustomers || 0;\n              num += customers; den += sessions;\n            });\n            return den > 0 ? (num / den) : 0;\n          }\n          // isRate\n          let num = 0; let den = 0;\n          processedData.months.forEach(month => {\n            const rec: any = (trainerData as any)[month];\n            if (!rec) return;\n            if (metric === 'conversionRate') { num += (rec.convertedMembers || 0); den += (rec.newMembers || 0); }\n            else { num += (rec.retainedMembers || 0); den += (rec.newMembers || 0); }\n          });\n          return den > 0 ? (num / den) * 100 : 0;\n        })();\n\n        const row = [\n          trainer,\n          ...values.map(v => formatValue(v, metric)),\n          `${growth >= 0 ? '' : ''}${Math.abs(growth).toFixed(1)}%`,\n          formatValue(total as number, metric)\n        ];\n        lines.push(row.join('\\t'));\n      });\n    });\n\n    return lines.join('\\n');\n  }, [processedData]);\n\n  return (\n    <ModernTableWrapper\n      title=\"Month-on-Month Trainer Analysis\"\n      description={`Individual month performance for ${Object.keys(processedData.trainerGroups).length} trainers  ${processedData.months.length} months tracked  Sorted by most recent`}\n      icon={<BarChart3 className=\"w-5 h-5\" />}\n      totalItems={Object.keys(processedData.trainerGroups).length}\n    >\n      <div ref={containerRef} className=\"bg-white rounded-lg shadow-sm border border-gray-200\">\n        {/* Metrics Tabs and Controls Header */}\n        <div className=\"pb-4 bg-white rounded-t-lg p-4\">\n          <div className=\"flex flex-col gap-4\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <Badge className=\"bg-purple-100 text-purple-800 border-purple-200\">\n                  Individual Monthly Columns\n                </Badge>\n                <CopyTableButton\n                  tableRef={containerRef as any}\n                  tableName={tableId}\n                  size=\"sm\"\n                  onCopyAllTabs={async () => generateAllTabsContent}\n                />\n              </div>\n            </div>\n            <TrainerMetricTabs value={selectedMetric} onValueChange={setSelectedMetric} />\n          </div>\n        </div>\n        <div className=\"overflow-x-auto\">\n          <Table>\n            <TableHeader className=\"sticky top-0 z-20\">\n              <TableRow className=\"border-none bg-black\" style={{ height: '35px', maxHeight: '35px' }}>\n                <TableHead className=\"font-bold text-white sticky left-0 bg-gradient-to-r from-blue-800 via-blue-900 to-blue-800 backdrop-blur-sm z-30 min-w-[240px] border-r border-white/20\" style={{ height: '35px' }}>\n                  <div className=\"flex items-center justify-center\">\n                    <span className=\"text-white font-bold\">Trainer</span>\n                  </div>\n                </TableHead>\n                {processedData.months.map((month, index) => {\n                  // Get the current previous month for highlighting - fix logic to properly identify main month\n                  const now = new Date();\n                  const currentMonth = now.getMonth(); // 0-indexed (0=Jan, 11=Dec)\n                  const currentYear = now.getFullYear();\n                  const monthNames = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\n                  \n                  // Previous month calculation\n                  let prevMonth = currentMonth - 1;\n                  let prevYear = currentYear;\n                  if (prevMonth < 0) {\n                    prevMonth = 11;\n                    prevYear = currentYear - 1;\n                  }\n                  \n                  const previousMonthKey = `${monthNames[prevMonth]}-${prevYear}`;\n                  const isMainMonth = month === previousMonthKey;\n                  \n                  return (\n                    <TableHead \n                      key={month} \n                      className={cn(\n                        \"text-center font-bold min-w-[140px] whitespace-nowrap text-white bg-black\",\n                        isMainMonth ? \"border-b-2 border-yellow-400\" : \"\"\n                      )}\n                      style={{ height: '35px' }}\n                    >\n                      <div className=\"flex items-center justify-center gap-1\">\n                        {isMainMonth && <Star className=\"w-3 h-3 text-yellow-400\" />}\n                        <span className=\"text-sm font-bold\">\n                          {month.replace('-', ' ')}\n                        </span>\n                      </div>\n                    </TableHead>\n                  );\n                })}\n                <TableHead className=\"text-center font-bold text-white bg-black min-w-[120px]\" style={{ height: '35px' }}>\n                  <TooltipProvider>\n                    <Tooltip>\n                      <TooltipTrigger className=\"cursor-help\">MoM Change</TooltipTrigger>\n                      <TooltipContent>Month-over-month change for the selected metric</TooltipContent>\n                    </Tooltip>\n                  </TooltipProvider>\n                </TableHead>\n                <TableHead className=\"text-center font-bold text-white min-w-[140px]\" style={{ height: '35px' }}>\n                  <TooltipProvider>\n                    <Tooltip>\n                      <TooltipTrigger className=\"cursor-help\">Total</TooltipTrigger>\n                      <TooltipContent>\n                        {selectedMetric === 'classAverageExclEmpty' || selectedMetric === 'classAverageInclEmpty'\n                          ? 'Weighted average across visible months (by sessions)'\n                          : selectedMetric === 'conversionRate' || selectedMetric === 'retentionRate'\n                            ? 'Weighted average across visible months (by new members)'\n                            : 'Sum across all visible months for each trainer'}\n                      </TooltipContent>\n                    </Tooltip>\n                  </TooltipProvider>\n                </TableHead>\n                <TableHead className=\"text-right font-bold text-white min-w-[60px]\" style={{ height: '35px' }}>\n                  <CopyTableButton\n                    tableRef={containerRef as any}\n                    tableName={tableId}\n                    size=\"sm\"\n                    onCopyAllTabs={async () => generateAllTabsContent}\n                  />\n                </TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {/* Totals Row */}\n              <TableRow className=\"bg-slate-100 font-bold h-9 max-h-9\" style={{ height: '35px', maxHeight: '35px' }}>\n                <TableCell className=\"font-bold text-slate-900 sticky left-0 bg-slate-100 z-10 whitespace-nowrap\" style={{ height: '35px', maxHeight: '35px' }}>\n                  TOTAL\n                </TableCell>\n                {processedData.months.map((month) => (\n                  <TableCell key={`total-${month}`} className=\"text-center font-bold text-slate-900 whitespace-nowrap\" style={{ height: '35px', maxHeight: '35px' }}>\n                    {formatValue(monthlyTotals[month] || 0, selectedMetric)}\n                  </TableCell>\n                ))}\n                <TableCell className=\"text-center\">\n                  <Badge className={cn(\n                    \"flex items-center gap-1 text-xs px-2 py-1\",\n                    summaryStats.growth >= 0 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                  )}>\n                    {summaryStats.growth >= 0 ? (\n                      <TrendingUp className=\"w-3 h-3\" />\n                    ) : (\n                      <TrendingDown className=\"w-3 h-3\" />\n                    )}\n                    {Math.abs(summaryStats.growth).toFixed(1)}%\n                  </Badge>\n                </TableCell>\n                <TableCell className=\"text-center font-bold text-slate-900\">\n                  {formatValue(summaryStats.total, selectedMetric)}\n                </TableCell>\n              </TableRow>\n\n              {/* Trainer Rows */}\n              {Object.entries(processedData.trainerGroups).map(([trainer, trainerData]) => {\n                const isExpanded = expandedRows.has(trainer);\n                const values = processedData.months.map(month => \n                  trainerData[month] ? getMetricValue(trainerData[month], selectedMetric) : 0\n                );\n                \n                const trainerTotal = (() => {\n                  if (selectedMetric === 'classAverageExclEmpty' || selectedMetric === 'classAverageInclEmpty') {\n                    // Weighted average across months per trainer\n                    let num = 0; let den = 0;\n                    processedData.months.forEach((month, i) => {\n                      const rec: any = (trainerData as any)[month];\n                      if (!rec) return;\n                      const sessions = selectedMetric === 'classAverageExclEmpty' ? (rec.nonEmptySessions || 0) : (rec.totalSessions || 0);\n                      const customers = rec.totalCustomers || 0;\n                      num += customers;\n                      den += sessions;\n                    });\n                    return den > 0 ? (num / den) : 0;\n                  } else if (selectedMetric === 'conversionRate' || selectedMetric === 'retentionRate') {\n                    // Weighted average of rates by new members across months for this trainer\n                    let num = 0; let den = 0;\n                    processedData.months.forEach((month) => {\n                      const rec: any = (trainerData as any)[month];\n                      if (!rec) return;\n                      if (selectedMetric === 'conversionRate') {\n                        num += (rec.convertedMembers || 0);\n                        den += (rec.newMembers || 0);\n                      } else {\n                        num += (rec.retainedMembers || 0);\n                        den += (rec.newMembers || 0);\n                      }\n                    });\n                    return den > 0 ? (num / den) * 100 : 0;\n                  }\n                  return values.reduce((sum, val) => sum + val, 0);\n                })();\n                const growth = values.length >= 2 ? getChangePercentage(values[0], values[1]) : 0;\n                \n                return (\n                  <React.Fragment key={trainer}>\n                    <TableRow \n                      className=\"hover:bg-slate-50/50 transition-colors border-b cursor-pointer h-9 max-h-9\"\n                      onClick={() => handleRowClick(trainer)}\n                      style={{ height: '35px' }}\n                    >\n                      <TableCell className=\"font-medium text-slate-800 sticky left-0 bg-white z-10 border-r min-w-[240px] whitespace-nowrap overflow-hidden text-ellipsis\" style={{ height: '35px' }}>\n                        <div className=\"flex items-center gap-2\">\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={(e) => {\n                              e.stopPropagation();\n                              toggleRowExpansion(trainer);\n                            }}\n                            className=\"p-1 h-6 w-6\"\n                          >\n                            {isExpanded ? <ChevronDown className=\"w-3 h-3\" /> : <ChevronRight className=\"w-3 h-3\" />}\n                          </Button>\n                          <TrainerNameCell name={trainer} className=\"text-nowrap\" />\n                        </div>\n                      </TableCell>\n                      {values.map((value, index) => (\n                        <TableCell \n                          key={`${trainer}-${index}`} \n                          className=\"text-center text-sm font-medium text-slate-800 hover:bg-slate-50 cursor-pointer\" \n                          style={{ height: '35px', maxHeight: '35px' }}\n                          onClick={(e) => {\n                            e.stopPropagation();\n                            if (!onRowClick) return;\n                            const month = processedData.months[index];\n                            const trainerMonthMap = (processedData.trainerGroups as any)[trainer] || {};\n                            const rec = trainerMonthMap[month] || {};\n                            const payload = {\n                              ...rec,\n                              trainerName: trainer,\n                              monthYear: month,\n                              location: rec.location || (values.length ? (trainerMonthMap[processedData.months[0]]?.location || '') : ''),\n                              type: 'trainer-month-cell'\n                            };\n                            onRowClick(trainer, payload);\n                          }}\n                        >\n                          <TooltipProvider>\n                            <Tooltip>\n                              <TooltipTrigger className=\"cursor-help\">{formatValue(value, selectedMetric)}</TooltipTrigger>\n                              <TooltipContent>\n                                {processedData.months[index]}  {selectedMetric}\n                              </TooltipContent>\n                            </Tooltip>\n                          </TooltipProvider>\n                        </TableCell>\n                      ))}\n                      <TableCell className=\"text-center\">\n                        <Badge\n                          className={cn(\n                            \"flex items-center gap-1 w-fit mx-auto\",\n                            growth >= 0 ? 'bg-green-100 text-green-800' : 'bg-red-100 text-red-800'\n                          )}\n                        >\n                          {growth >= 0 ? (\n                            <TrendingUp className=\"w-3 h-3\" />\n                          ) : (\n                            <TrendingDown className=\"w-3 h-3\" />\n                          )}\n                          {Math.abs(growth).toFixed(1)}%\n                        </Badge>\n                      </TableCell>\n                      <TableCell className=\"text-center font-bold text-slate-700\">\n                        {formatValue(trainerTotal, selectedMetric)}\n                      </TableCell>\n                    </TableRow>\n                    \n                     {/* Expanded Row Details */}\n                     {isExpanded && (\n                       <TableRow className=\"bg-slate-50/50 hover:bg-slate-50 animate-fade-in\">\n                         <TableCell colSpan={processedData.months.length + 4} className=\"p-6\" style={{ minHeight: '200px' }}>\n                           <div className=\"space-y-6\">\n                             {/* Key Metrics Grid */}\n                             <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm\">\n                               <div className=\"bg-white p-4 rounded-lg shadow-sm border hover:shadow-md transition-shadow\">\n                                 <p className=\"text-slate-600 text-xs font-medium\">Average per Month</p>\n                                 <p className=\"font-bold text-slate-800 text-lg\">\n                                   {formatValue(trainerTotal / processedData.months.length, selectedMetric)}\n                                 </p>\n                               </div>\n                               <div className=\"bg-white p-4 rounded-lg shadow-sm border hover:shadow-md transition-shadow\">\n                                 <p className=\"text-slate-600 text-xs font-medium\">Best Month</p>\n                                 <p className=\"font-bold text-green-600 text-lg\">\n                                   {formatValue(Math.max(...values), selectedMetric)}\n                                 </p>\n                               </div>\n                               <div className=\"bg-white p-4 rounded-lg shadow-sm border hover:shadow-md transition-shadow\">\n                                 <p className=\"text-slate-600 text-xs font-medium\">Consistency Score</p>\n                                 <p className=\"font-bold text-blue-600 text-lg\">\n                                   {values.length > 1 ? \n                                     (100 - (values.reduce((acc, val, i) => {\n                                       if (i === 0) return acc;\n                                       const change = Math.abs((val - values[i-1]) / Math.max(values[i-1], 1)) * 100;\n                                       return acc + change;\n                                     }, 0) / (values.length - 1))).toFixed(0) \n                                     : '100'\n                                   }%\n                                 </p>\n                               </div>\n                               <div className=\"bg-white p-4 rounded-lg shadow-sm border hover:shadow-md transition-shadow\">\n                                 <p className=\"text-slate-600 text-xs font-medium\">Growth Trend</p>\n                                 <p className={cn(\n                                   \"font-bold text-lg\",\n                                   growth >= 0 ? \"text-green-600\" : \"text-red-600\"\n                                 )}>\n                                   {growth >= 0 ? '+' : ''}{growth.toFixed(1)}%\n                                 </p>\n                               </div>\n                             </div>\n\n                             {/* Enhanced Metrics */}\n                             <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                               <div className=\"bg-gradient-to-br from-blue-50 to-blue-100 p-4 rounded-lg border\">\n                                 <h4 className=\"font-semibold text-blue-800 mb-3\">Performance Metrics</h4>\n                                 <div className=\"space-y-2 text-sm\">\n                                   <div className=\"flex justify-between\">\n                                     <span className=\"text-blue-600\">Total:</span>\n                                     <span className=\"font-bold\">{formatValue(trainerTotal, selectedMetric)}</span>\n                                   </div>\n                                   <div className=\"flex justify-between\">\n                                     <span className=\"text-blue-600\">Average:</span>\n                                     <span className=\"font-bold\">{formatValue(trainerTotal / processedData.months.length, selectedMetric)}</span>\n                                   </div>\n                                   <div className=\"flex justify-between\">\n                                     <span className=\"text-blue-600\">Best:</span>\n                                     <span className=\"font-bold\">{formatValue(Math.max(...values), selectedMetric)}</span>\n                                   </div>\n                                 </div>\n                               </div>\n\n                               <div className=\"bg-gradient-to-br from-green-50 to-green-100 p-4 rounded-lg border\">\n                                 <h4 className=\"font-semibold text-green-800 mb-3\">Class Formats</h4>\n                                 <div className=\"space-y-2 text-sm\">\n                                   {(() => {\n                                     const recsLocal = Object.values(trainerData || {}) as any[];\n                                     const cyc = recsLocal.reduce((s, r) => s + (r.cycleSessions || 0), 0) as number;\n                                     const bar = recsLocal.reduce((s, r) => s + (r.barreSessions || 0), 0) as number;\n                                     const str = recsLocal.reduce((s, r) => s + (r.strengthSessions || 0), 0) as number;\n                                     return (\n                                       <>\n                                         <div className=\"flex justify-between\">\n                                           <span className=\"text-green-600\">Cycle Sessions:</span>\n                                           <span className=\"font-bold\">{formatNumber(cyc)}</span>\n                                         </div>\n                                         <div className=\"flex justify-between\">\n                                           <span className=\"text-green-600\">Barre Sessions:</span>\n                                           <span className=\"font-bold\">{formatNumber(bar)}</span>\n                                         </div>\n                                         <div className=\"flex justify-between\">\n                                           <span className=\"text-green-600\">Strength Sessions:</span>\n                                           <span className=\"font-bold\">{formatNumber(str)}</span>\n                                         </div>\n                                       </>\n                                     );\n                                   })()}\n                                 </div>\n                               </div>\n\n                               <div className=\"bg-gradient-to-br from-purple-50 to-purple-100 p-4 rounded-lg border\">\n                                 <h4 className=\"font-semibold text-purple-800 mb-3\">Member Engagement</h4>\n                                 <div className=\"space-y-2 text-sm\">\n                                   <div className=\"flex justify-between\">\n                                     <span className=\"text-purple-600\">Retention:</span>\n                                     <span className=\"font-bold\">{\n                                       (() => {\n                                         const recs = Object.values(trainerData as any) as any[];\n                                         const totalNew = recs.reduce((s, r) => s + (r.newMembers || 0), 0);\n                                         const totalRetained = recs.reduce((s, r) => s + (r.retainedMembers || 0), 0);\n                                         const rate = totalNew > 0 ? (totalRetained / totalNew) * 100 : 0;\n                                         return `${rate.toFixed(1)}%`;\n                                       })()\n                                     }</span>\n                                   </div>\n                                   <div className=\"flex justify-between\">\n                                     <span className=\"text-purple-600\">Conversion:</span>\n                                     <span className=\"font-bold\">{\n                                       (() => {\n                                         const recs = Object.values(trainerData as any) as any[];\n                                         const totalNew = recs.reduce((s, r) => s + (r.newMembers || 0), 0);\n                                         const totalConverted = recs.reduce((s, r) => s + (r.convertedMembers || 0), 0);\n                                         const rate = totalNew > 0 ? (totalConverted / totalNew) * 100 : 0;\n                                         return `${rate.toFixed(1)}%`;\n                                       })()\n                                     }</span>\n                                   </div>\n                                   <div className=\"flex justify-between\">\n                                     <span className=\"text-purple-600\">Revenue/Session:</span>\n                                     <span className=\"font-bold\">{\n                                       (() => {\n                                         const recs = Object.values(trainerData as any) as any[];\n                                         const totRev = recs.reduce((s, r) => s + (r.totalPaid || 0), 0);\n                                         const totSess = recs.reduce((s, r) => s + (r.totalSessions || 0), 0);\n                                         return formatCurrency(totSess > 0 ? totRev / totSess : 0);\n                                       })()\n                                     }</span>\n                                   </div>\n                                 </div>\n                               </div>\n                             </div>\n                           </div>\n                         </TableCell>\n                       </TableRow>\n                     )}\n                  </React.Fragment>\n                );\n              })}\n            </TableBody>\n          </Table>\n        </div>\n\n        {/* Footer Summary Section */}\n        <div className=\"bg-gradient-to-r from-slate-50 to-white border-t p-6\">\n          <div className=\"flex items-center justify-between mb-4\">\n            <h4 className=\"text-lg font-semibold text-slate-800 flex items-center gap-2\">\n              <Info className=\"w-5 h-5 text-blue-600\" />\n              Monthly Performance Summary\n            </h4>\n          </div>\n          \n          <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-blue-600\">\n                {Object.keys(processedData.trainerGroups).length}\n              </div>\n              <div className=\"text-sm text-slate-600\">Active Trainers</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-emerald-600\">\n                {formatValue(summaryStats.total, selectedMetric)}\n              </div>\n              <div className=\"text-sm text-slate-600\">Total {selectedMetric}</div>\n            </div>\n            <div className=\"text-center\">\n              <div className=\"text-2xl font-bold text-purple-600\">\n                {formatValue(summaryStats.average, selectedMetric)}\n              </div>\n              <div className=\"text-sm text-slate-600\">Monthly Average</div>\n            </div>\n            <div className=\"text-center\">\n              <div className={cn(\n                \"text-2xl font-bold\",\n                summaryStats.growth >= 0 ? \"text-green-600\" : \"text-red-600\"\n              )}>\n                {summaryStats.growth >= 0 ? '+' : ''}{summaryStats.growth.toFixed(1)}%\n              </div>\n              <div className=\"text-sm text-slate-600\">Recent Growth</div>\n            </div>\n          </div>\n        </div>\n      </div>\n    </ModernTableWrapper>\n  );\n};\n","import React, { useMemo, useState } from 'react';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogDescription } from '@/components/ui/dialog';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Progress } from '@/components/ui/progress';\nimport { Separator } from '@/components/ui/separator';\nimport { ScrollArea } from '@/components/ui/scroll-area';\nimport { getTrainerImage, getTrainerInitials } from '@/components/ui/TrainerAvatar';\nimport {\n  BarChart,\n  Bar,\n  LineChart,\n  Line,\n  PieChart,\n  Pie,\n  Cell,\n  XAxis,\n  YAxis,\n  CartesianGrid,\n  Tooltip,\n  ResponsiveContainer,\n  Legend,\n  AreaChart,\n  Area,\n  RadarChart,\n  PolarGrid,\n  PolarAngleAxis,\n  PolarRadiusAxis,\n  Radar,\n} from 'recharts';\nimport {\n  X,\n  TrendingUp,\n  TrendingDown,\n  Users,\n  DollarSign,\n  Activity,\n  Target,\n  Calendar,\n  Award,\n  Star,\n  Clock,\n  MapPin,\n  Zap,\n  BarChart3,\n  PieChartIcon,\n  Download,\n  ArrowUp,\n  ArrowDown,\n  Minus,\n  Bike,\n  Dumbbell,\n  Music,\n  CheckCircle2,\n  XCircle,\n  AlertCircle,\n  Sparkles,\n} from 'lucide-react';\nimport { formatCurrency, formatNumber } from '@/utils/formatters';\nimport { cn } from '@/lib/utils';\n\ninterface ComprehensiveTrainerDrillDownProps {\n  isOpen: boolean;\n  onClose: () => void;\n  trainerName: string;\n  trainerData: any;\n  allPayrollData?: any[];\n  allSessionsData?: any[];\n  filters?: { location?: string; month?: string };\n}\n\nconst COLORS = {\n  primary: '#3B82F6',\n  success: '#10B981',\n  warning: '#F59E0B',\n  danger: '#EF4444',\n  purple: '#8B5CF6',\n  cyan: '#06B6D4',\n  pink: '#EC4899',\n  indigo: '#6366F1',\n};\n\nconst CHART_COLORS = [COLORS.primary, COLORS.success, COLORS.warning, COLORS.purple, COLORS.cyan, COLORS.pink];\n\n// Metric Card Component\nconst MetricCard = ({ \n  title, \n  value, \n  subtitle, \n  icon: Icon, \n  trend, \n  trendValue,\n  color = 'blue',\n  size = 'default'\n}: {\n  title: string;\n  value: string | number;\n  subtitle?: string;\n  icon: any;\n  trend?: 'up' | 'down' | 'neutral';\n  trendValue?: string;\n  color?: 'blue' | 'green' | 'purple' | 'amber' | 'rose' | 'cyan';\n  size?: 'default' | 'large';\n}) => {\n  const colorClasses = {\n    blue: 'from-blue-700 to-blue-800 text-white',\n    green: 'from-white to-gray-50 text-gray-900 border-2 border-gray-200',\n    purple: 'from-white to-gray-50 text-gray-900 border-2 border-gray-200',\n    amber: 'from-white to-gray-50 text-gray-900 border-2 border-gray-200',\n    rose: 'from-white to-gray-50 text-gray-900 border-2 border-gray-200',\n    cyan: 'from-white to-gray-50 text-gray-900 border-2 border-gray-200',\n  };\n\n  const TrendIcon = trend === 'up' ? ArrowUp : trend === 'down' ? ArrowDown : Minus;\n  const trendColor = trend === 'up' ? 'text-emerald-400' : trend === 'down' ? 'text-rose-400' : 'text-slate-400';\n\n  return (\n    <div className={cn(\n      \"relative overflow-hidden rounded-xl bg-gradient-to-br p-4 shadow-lg transition-all hover:shadow-xl\",\n      colorClasses[color],\n      size === 'large' && 'p-6'\n    )}>\n      <div className=\"absolute top-0 right-0 w-24 h-24 bg-white/10 rounded-full -translate-y-1/2 translate-x-1/2\" />\n      <div className=\"relative z-10\">\n        <div className=\"flex items-center justify-between mb-2\">\n          <div className={cn(\n            \"p-2 rounded-lg backdrop-blur-sm\",\n            color === 'blue' ? 'bg-white/20' : 'bg-blue-600'\n          )}>\n            <Icon className={cn(\n              size === 'large' ? 'w-6 h-6' : 'w-5 h-5',\n              color === 'blue' ? 'text-white' : 'text-white'\n            )} />\n          </div>\n          {trend && (\n            <div className={cn(\"flex items-center gap-1 text-xs font-medium\", trendColor)}>\n              <TrendIcon className=\"w-3 h-3\" />\n              {trendValue}\n            </div>\n          )}\n        </div>\n        <p className={cn(\n          \"font-bold\",\n          size === 'large' ? 'text-3xl' : 'text-2xl',\n          color === 'blue' ? 'text-white' : 'text-gray-900'\n        )}>\n          {value}\n        </p>\n        <p className={cn(\n          \"text-sm font-medium\",\n          color === 'blue' ? 'text-white/90' : 'text-gray-700'\n        )}>{title}</p>\n        {subtitle && <p className={cn(\n          \"text-xs mt-1\",\n          color === 'blue' ? 'text-white/70' : 'text-gray-600'\n        )}>{subtitle}</p>}\n      </div>\n    </div>\n  );\n};\n\n// Format Distribution Mini Chart\nconst FormatDistributionChart = ({ data }: { data: { name: string; value: number; sessions: number }[] }) => {\n  if (!data || data.length === 0) return null;\n  \n  return (\n    <div className=\"space-y-3\">\n      {data.map((item, idx) => (\n        <div key={item.name} className=\"space-y-1\">\n          <div className=\"flex items-center justify-between text-sm\">\n            <div className=\"flex items-center gap-2\">\n              {item.name === 'Cycle' && <Bike className=\"w-4 h-4 text-blue-500\" />}\n              {item.name === 'Strength' && <Dumbbell className=\"w-4 h-4 text-purple-500\" />}\n              {item.name === 'Barre' && <Music className=\"w-4 h-4 text-pink-500\" />}\n              <span className=\"font-medium text-slate-700\">{item.name}</span>\n            </div>\n            <span className=\"text-slate-600\">{item.sessions} sessions</span>\n          </div>\n          <div className=\"h-2 bg-slate-100 rounded-full overflow-hidden\">\n            <div \n              className={cn(\n                \"h-full rounded-full transition-all duration-500\",\n                item.name === 'Cycle' && 'bg-gradient-to-r from-blue-400 to-blue-600',\n                item.name === 'Strength' && 'bg-gradient-to-r from-purple-400 to-purple-600',\n                item.name === 'Barre' && 'bg-gradient-to-r from-pink-400 to-pink-600'\n              )}\n              style={{ width: `${Math.min(item.value, 100)}%` }}\n            />\n          </div>\n        </div>\n      ))}\n    </div>\n  );\n};\n\n// Performance Indicator\nconst PerformanceIndicator = ({ score, label }: { score: number; label: string }) => {\n  const getColor = () => {\n    if (score >= 80) return 'text-emerald-500';\n    if (score >= 60) return 'text-amber-500';\n    return 'text-rose-500';\n  };\n\n  const getIcon = () => {\n    if (score >= 80) return CheckCircle2;\n    if (score >= 60) return AlertCircle;\n    return XCircle;\n  };\n\n  const Icon = getIcon();\n\n  return (\n    <div className=\"flex items-center gap-2\">\n      <Icon className={cn(\"w-5 h-5\", getColor())} />\n      <div>\n        <span className={cn(\"font-bold text-lg\", getColor())}>{score.toFixed(0)}</span>\n        <span className=\"text-slate-500 text-sm ml-1\">/100</span>\n      </div>\n      <span className=\"text-slate-600 text-sm\">{label}</span>\n    </div>\n  );\n};\n\nexport function ComprehensiveTrainerDrillDown({\n  isOpen,\n  onClose,\n  trainerName,\n  trainerData,\n  allPayrollData = [],\n  allSessionsData = [],\n  filters = {},\n}: ComprehensiveTrainerDrillDownProps) {\n  const [activeTab, setActiveTab] = useState('overview');\n\n  // Process all the data comprehensively\n  const processedData = useMemo(() => {\n    console.log(' [Modal] Processing drill-down', {\n      trainerName,\n      filters,\n      trainerDataKeys: Object.keys(trainerData || {}),\n      trainerDataSample: trainerData\n    });\n\n    if (!trainerData) {\n      return {\n        hasData: false,\n        summary: null,\n        byMonth: [],\n        byFormat: [],\n        performanceScore: 0,\n        insights: [],\n        comparisons: null,\n      };\n    }\n\n    const locationMatches = (recordLoc: string, filterLoc?: string) => {\n      if (!filterLoc || filterLoc === 'All Locations') return true;\n      const rl = (recordLoc || '').toLowerCase();\n      const fl = filterLoc.toLowerCase();\n      if (fl.includes('kenkere')) return rl.includes('kenkere');\n      if (fl.includes('kwality')) return rl.includes('kwality') || rl.includes('kemps');\n      if (fl.includes('supreme')) return rl.includes('supreme') || rl.includes('bandra');\n      return recordLoc === filterLoc;\n    };\n\n    // Contextual records for the clicked trainer + location + month (overview/revenue)\n    const trainerRecordsContext = allPayrollData.filter(\n      (r) => r.teacherName === trainerName &&\n        locationMatches(r.location, filters.location) &&\n        (!filters.month || r.monthYear === filters.month)\n    );\n\n    // Records for trends: ignore the month filter, keep trainer + location\n    const trainerRecordsAllMonths = allPayrollData.filter(\n      (r) => r.teacherName === trainerName &&\n        locationMatches(r.location, filters.location)\n    );\n\n    // Robust date parsing to normalize to MMM-YYYY (tries multiple formats)\n    const toMonthYear = (dStr: string) => {\n      if (!dStr && dStr !== 0) return '';\n      const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\n\n      // If already in MMM-YYYY, return as-is\n      if (typeof dStr === 'string' && /^[A-Za-z]{3}-\\d{4}$/.test(dStr.trim())) {\n        return dStr.trim();\n      }\n\n      // Try native Date parsing first\n      const tryNative = (s: string) => {\n        const dt = new Date(s);\n        if (!isNaN(dt.getTime())) return `${months[dt.getMonth()]}-${dt.getFullYear()}`;\n        return '';\n      };\n\n      // Common patterns: YYYY-MM-DD, MM/DD/YYYY, DD-MM-YYYY, DD/MM/YYYY\n      const s = String(dStr).trim();\n      let out = tryNative(s);\n      if (out) return out;\n\n      // YYYY-MM-DD or YYYY/MM/DD\n      const iso = s.match(/^(\\d{4})[-\\/](\\d{1,2})[-\\/](\\d{1,2})$/);\n      if (iso) {\n        const y = Number(iso[1]);\n        const m = Number(iso[2]) - 1;\n        if (!isNaN(y) && !isNaN(m)) return `${months[m]}-${y}`;\n      }\n\n      // MM/DD/YYYY or MM-DD-YYYY\n      const mdy = s.match(/^(\\d{1,2})[-\\/](\\d{1,2})[-\\/](\\d{4})$/);\n      if (mdy) {\n        const y = Number(mdy[3]);\n        const m = Number(mdy[1]) - 1;\n        if (!isNaN(y) && !isNaN(m)) return `${months[m]}-${y}`;\n      }\n\n      // DD-MM-YYYY or DD/MM/YYYY\n      const dmy = s.match(/^(\\d{1,2})[-\\/](\\d{1,2})[-\\/](\\d{4})$/);\n      if (dmy) {\n        const y = Number(dmy[3]);\n        const m = Number(dmy[2]) - 1;\n        if (!isNaN(y) && !isNaN(m)) return `${months[m]}-${y}`;\n      }\n\n      // Fallback: try Date.parse numeric\n      const parsed = Date.parse(s);\n      if (!isNaN(parsed)) {\n        const dt = new Date(parsed);\n        return `${months[dt.getMonth()]}-${dt.getFullYear()}`;\n      }\n\n      return '';\n    };\n\n    const trainerSessionsAll = (allSessionsData || []).filter((s: any) => {\n      const sessionMonthYear = toMonthYear(String(s.date || ''));\n      const nameMatch = (s.trainerName === trainerName || s.teacherName === trainerName);\n      const locMatch = locationMatches(s.location, filters.location);\n      const monthMatch = !filters.month || sessionMonthYear === filters.month;\n      return nameMatch && locMatch && monthMatch;\n    });\n\n    // Current period data (aggregate contextual records filtered by trainer + location + month)\n    console.log(' [Modal] Context filtering', {\n      trainerName,\n      filters,\n      contextRecordCount: trainerRecordsContext.length,\n      allMonthsCount: trainerRecordsAllMonths.length,\n      contextRecordsSample: trainerRecordsContext.slice(0, 2),\n      trainerDataPassed: trainerData\n    });\n\n    // Use trainerData directly as the source for the clicked context\n    // Only aggregate from payroll if trainerData is missing key fields\n    const hasDirectData = trainerData && (\n      trainerData.totalSessions !== undefined || \n      trainerData.currentSessions !== undefined ||\n      trainerData.sessions !== undefined\n    );\n\n    const source = hasDirectData ? trainerData : (\n      trainerRecordsContext.length > 0\n        ? trainerRecordsContext.reduce((acc: any, r: any) => {\n            acc.totalSessions = (acc.totalSessions || 0) + (r.totalSessions || 0);\n            acc.totalCustomers = (acc.totalCustomers || 0) + (r.totalCustomers || 0);\n            acc.totalPaid = (acc.totalPaid || 0) + (r.totalPaid || 0);\n            acc.emptySessions = (acc.emptySessions || 0) + (r.emptySessions || 0);\n            acc.nonEmptySessions = (acc.nonEmptySessions || 0) + (r.nonEmptySessions || 0);\n            acc.cycleSessions = (acc.cycleSessions || 0) + (r.cycleSessions || 0);\n            acc.cycleCustomers = (acc.cycleCustomers || 0) + (r.cycleCustomers || 0);\n            acc.cycleRevenue = (acc.cycleRevenue || 0) + (r.cycleRevenue || r.cyclePaid || 0);\n            acc.strengthSessions = (acc.strengthSessions || 0) + (r.strengthSessions || 0);\n            acc.strengthCustomers = (acc.strengthCustomers || 0) + (r.strengthCustomers || 0);\n            acc.strengthRevenue = (acc.strengthRevenue || 0) + (r.strengthRevenue || r.strengthPaid || 0);\n            acc.barreSessions = (acc.barreSessions || 0) + (r.barreSessions || 0);\n            acc.barreCustomers = (acc.barreCustomers || 0) + (r.barreCustomers || 0);\n            acc.barreRevenue = (acc.barreRevenue || 0) + (r.barreRevenue || r.barrePaid || 0);\n            acc.newMembers = (acc.newMembers || 0) + (r.newMembers || 0);\n            acc.convertedMembers = (acc.convertedMembers || 0) + (r.convertedMembers || 0);\n            acc.retainedMembers = (acc.retainedMembers || 0) + (r.retainedMembers || 0);\n            if (!acc.location) acc.location = r.location;\n            if (!acc.monthYear) acc.monthYear = r.monthYear;\n            if (!acc.conversionRate && r.conversionRate) acc.conversionRate = r.conversionRate;\n            if (!acc.retentionRate && r.retentionRate) acc.retentionRate = r.retentionRate;\n            return acc;\n          }, {})\n        : {}\n    );\n\n    console.log(' [Modal] Data source selected', {\n      hasDirectData,\n      trainerDataSessions: trainerData?.totalSessions || trainerData?.currentSessions || trainerData?.sessions,\n      sourceUsed: hasDirectData ? 'trainerData' : 'aggregated payroll',\n      sourceTotalSessions: source.totalSessions || source.currentSessions || source.sessions\n    });\n\n    // clicked-cell authoritative count (if provided by the table click)\n    const clickedCellSessions = Number(trainerData?.totalSessions || trainerData?.currentSessions || trainerData?.sessions || 0);\n\n    const current = {\n      totalSessions: source.totalSessions || source.currentSessions || source.sessions || 0,\n      totalCustomers: source.totalCustomers || source.currentCustomers || source.customers || 0,\n      totalRevenue: source.totalPaid || source.totalRevenue || source.currentRevenue || source.revenue || 0,\n      emptySessions: source.emptySessions || source.totalEmptySessions || 0,\n      nonEmptySessions: source.nonEmptySessions || source.totalNonEmptySessions || 0,\n      cycleSessions: source.cycleSessions || 0,\n      cycleCustomers: source.cycleCustomers || 0,\n      cycleRevenue: source.cycleRevenue || source.cyclePaid || 0,\n      strengthSessions: source.strengthSessions || 0,\n      strengthCustomers: source.strengthCustomers || 0,\n      strengthRevenue: source.strengthRevenue || source.strengthPaid || 0,\n      barreSessions: source.barreSessions || 0,\n      barreCustomers: source.barreCustomers || 0,\n      barreRevenue: source.barreRevenue || source.barrePaid || 0,\n      conversionRate: typeof source.conversionRate === 'number' \n        ? source.conversionRate \n        : parseFloat(String(source.conversion || source.conversionRate || '0').replace('%', '')) || 0,\n      retentionRate: typeof source.retentionRate === 'number'\n        ? source.retentionRate\n        : parseFloat(String(source.retention || source.retentionRate || '0').replace('%', '')) || 0,\n      newMembers: source.newMembers || source.new || 0,\n      location: source.location || filters.location || '',\n      monthYear: source.monthYear || filters.month || '',\n      classAverageExclEmpty: source.classAverageExclEmpty || source.currentAvgClassSize || 0,\n      classAverageInclEmpty: source.classAverageInclEmpty || 0,\n      convertedMembers: source.convertedMembers || source.converted || 0,\n      retainedMembers: source.retainedMembers || source.retained || 0,\n      // attach clicked vs sheet counts for diagnostics\n      clickedCellSessions,\n      sessionsSheetCount: 0, // to be filled after sessionMetrics computation\n    };\n\n    // Calculate derived metrics\n    const avgClassSize = current.totalSessions > 0 ? current.totalCustomers / current.totalSessions : 0;\n    const avgClassSizeExclEmpty = current.nonEmptySessions > 0 ? current.totalCustomers / current.nonEmptySessions : 0;\n    const fillRate = current.totalSessions > 0 \n      ? ((current.totalSessions - current.emptySessions) / current.totalSessions) * 100 \n      : 0;\n    const revenuePerSession = current.totalSessions > 0 ? current.totalRevenue / current.totalSessions : 0;\n    const revenuePerCustomer = current.totalCustomers > 0 ? current.totalRevenue / current.totalCustomers : 0;\n\n    // Build session metrics from sessions sheet\n    const sessionMetrics = (() => {\n      const sessions = trainerSessionsAll;\n      console.log(' [Modal] Sessions filter result', {\n        trainerName,\n        filters,\n        matchedSessions: sessions.length,\n        sampleDates: sessions.slice(0, 3).map((s: any) => ({ date: s.date, parsed: toMonthYear(s.date) })),\n      });\n      const totals = sessions.reduce((acc: any, s: any) => {\n        const isCancelled = (s.lateCancelledCount || 0) > 0 && (s.checkedInCount || 0) === 0;\n        const paid = Number(s.totalPaid || s.revenue || 0);\n        const attendees = Number(s.checkedInCount || s.totalCustomers || s.attendees || 0);\n        acc.count += 1;\n        acc.attendance += attendees;\n        acc.cancelled += isCancelled ? 1 : 0;\n        acc.revenue += paid;\n        acc.capacity += Number(s.capacity || 0);\n        acc.booked += Number(s.bookedCount || 0);\n        acc.complimentary += Number(s.complimentaryCount || 0);\n        return acc;\n      }, { count: 0, attendance: 0, cancelled: 0, revenue: 0, capacity: 0, booked: 0, complimentary: 0 });\n\n      const byType = ['Barre', 'Power Cycle', 'Strength Lab'];\n      const split = byType.map(type => {\n        const group = sessions.filter((s: any) => (s.cleanedClass || s.classType || '').toLowerCase().includes(type.toLowerCase()));\n        const gTotals = group.reduce((acc: any, s: any) => {\n          acc.sessions += 1;\n          acc.attendance += Number(s.checkedInCount || 0);\n          acc.revenue += Number(s.totalPaid || s.revenue || 0);\n          return acc;\n        }, { sessions: 0, attendance: 0, revenue: 0 });\n        return {\n          name: type,\n          sessions: gTotals.sessions,\n          customers: gTotals.attendance,\n          revenue: gTotals.revenue,\n          avgAttendance: gTotals.sessions > 0 ? gTotals.attendance / gTotals.sessions : 0,\n        };\n      });\n\n      return {\n        list: sessions,\n        totals,\n        split,\n        avgAttendance: totals.count > 0 ? totals.attendance / totals.count : 0,\n        avgRevenuePerSession: totals.count > 0 ? totals.revenue / totals.count : 0,\n        fillRate: totals.capacity > 0 ? (totals.attendance / totals.capacity) * 100 : 0,\n      };\n    })();\n\n      // populate diagnostic counts\n      current.sessionsSheetCount = sessionMetrics.list ? sessionMetrics.list.length : 0;\n\n      // Add a simple discrepancy flag\n      const discrepancy = current.clickedCellSessions !== 0 && (current.clickedCellSessions !== current.sessionsSheetCount);\n      console.log(' [Modal] Clicked vs Sheet', { clickedCellSessions: current.clickedCellSessions, sessionsSheetCount: current.sessionsSheetCount, discrepancy });\n\n    // Format breakdown\n    const byFormat = [\n      {\n        name: 'Cycle',\n        sessions: current.cycleSessions,\n        customers: current.cycleCustomers,\n        revenue: current.cycleRevenue,\n        value: current.totalSessions > 0 ? (current.cycleSessions / current.totalSessions) * 100 : 0,\n        avgAttendance: current.cycleSessions > 0 ? current.cycleCustomers / current.cycleSessions : 0,\n      },\n      {\n        name: 'Strength',\n        sessions: current.strengthSessions,\n        customers: current.strengthCustomers,\n        revenue: current.strengthRevenue,\n        value: current.totalSessions > 0 ? (current.strengthSessions / current.totalSessions) * 100 : 0,\n        avgAttendance: current.strengthSessions > 0 ? current.strengthCustomers / current.strengthSessions : 0,\n      },\n      {\n        name: 'Barre',\n        sessions: current.barreSessions,\n        customers: current.barreCustomers,\n        revenue: current.barreRevenue,\n        value: current.totalSessions > 0 ? (current.barreSessions / current.totalSessions) * 100 : 0,\n        avgAttendance: current.barreSessions > 0 ? current.barreCustomers / current.barreSessions : 0,\n      },\n    ].filter(f => f.sessions > 0);\n\n    // Monthly trends from all records\n    const byMonth = trainerRecordsAllMonths\n      .map((r: any) => ({\n        month: r.monthYear,\n        sessions: r.totalSessions || 0,\n        customers: r.totalCustomers || 0,\n        revenue: r.totalPaid || 0,\n        avgAttendance: r.totalSessions > 0 ? (r.totalCustomers / r.totalSessions) : 0,\n        conversionRate: typeof r.conversionRate === 'number' \n          ? r.conversionRate \n          : parseFloat(String(r.conversion || '0').replace('%', '')) || 0,\n        retentionRate: typeof r.retentionRate === 'number'\n          ? r.retentionRate\n          : parseFloat(String(r.retention || '0').replace('%', '')) || 0,\n      }))\n      .sort((a, b) => {\n        // Sort by month chronologically\n        const parseMonth = (str: string) => {\n          const parts = str.replace('-', ' ').split(' ');\n          const months = ['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];\n          const mi = months.indexOf(parts[0]);\n          const yi = parseInt(parts[1]) || 2024;\n          return new Date(yi, mi, 1).getTime();\n        };\n        return parseMonth(a.month) - parseMonth(b.month);\n      });\n\n    // Performance score calculation\n    const performanceScore = Math.min(100, Math.round(\n      (fillRate * 0.25) +\n      (Math.min(avgClassSizeExclEmpty / 15, 1) * 25) +\n      (Math.min(current.conversionRate / 50, 1) * 25) +\n      (Math.min(current.retentionRate / 80, 1) * 25)\n    ));\n\n    // Generate insights\n    const insights: { type: 'success' | 'warning' | 'info'; message: string }[] = [];\n    \n    if (fillRate >= 85) {\n      insights.push({ type: 'success', message: `Excellent fill rate of ${fillRate.toFixed(1)}% - almost no empty classes!` });\n    } else if (fillRate < 70) {\n      insights.push({ type: 'warning', message: `Fill rate of ${fillRate.toFixed(1)}% could be improved - ${current.emptySessions} empty classes` });\n    }\n    \n    if (avgClassSizeExclEmpty >= 12) {\n      insights.push({ type: 'success', message: `Strong class attendance averaging ${avgClassSizeExclEmpty.toFixed(1)} students per class` });\n    } else if (avgClassSizeExclEmpty < 8 && avgClassSizeExclEmpty > 0) {\n      insights.push({ type: 'warning', message: `Average class size of ${avgClassSizeExclEmpty.toFixed(1)} is below target` });\n    }\n    \n    if (current.conversionRate >= 40) {\n      insights.push({ type: 'success', message: `Great conversion rate of ${current.conversionRate.toFixed(1)}% (${current.convertedMembers} members converted)` });\n    } else if (current.conversionRate > 0 && current.conversionRate < 25) {\n      insights.push({ type: 'warning', message: `Conversion rate of ${current.conversionRate.toFixed(1)}% could be improved` });\n    }\n    \n    if (current.retentionRate >= 70) {\n      insights.push({ type: 'success', message: `Excellent client retention at ${current.retentionRate.toFixed(1)}% (${current.retainedMembers} retained)` });\n    } else if (current.retentionRate > 0 && current.retentionRate < 50) {\n      insights.push({ type: 'warning', message: `Retention rate of ${current.retentionRate.toFixed(1)}% needs attention` });\n    }\n    \n    if (current.newMembers > 0) {\n      insights.push({ type: 'info', message: `${current.newMembers} new members joined classes this period` });\n    }\n\n    // Top performing format\n    const topFormat = byFormat.length > 0 \n      ? byFormat.reduce((a, b) => (a.revenue > b.revenue ? a : b), byFormat[0])\n      : null;\n    if (topFormat && topFormat.revenue > 0) {\n      insights.push({ type: 'info', message: `${topFormat.name} is the top revenue format (${formatCurrency(topFormat.revenue)})` });\n    }\n\n    // Radar chart data\n    const radarData = [\n      { metric: 'Fill Rate', value: fillRate, fullMark: 100 },\n      { metric: 'Attendance', value: Math.min(avgClassSizeExclEmpty * 6.67, 100), fullMark: 100 },\n      { metric: 'Conversion', value: Math.min(current.conversionRate * 2, 100), fullMark: 100 },\n      { metric: 'Retention', value: Math.min(current.retentionRate * 1.25, 100), fullMark: 100 },\n      { metric: 'Revenue', value: Math.min(revenuePerSession / 20, 100), fullMark: 100 },\n    ];\n\n    return {\n      hasData: true,\n      summary: {\n        ...current,\n        avgClassSize,\n        avgClassSizeExclEmpty,\n        fillRate,\n        revenuePerSession,\n        revenuePerCustomer,\n        newMembers: current.newMembers,\n        convertedMembers: current.convertedMembers,\n        retainedMembers: current.retainedMembers,\n      },\n      byMonth,\n      byFormat,\n      sessionMetrics,\n      performanceScore,\n      insights,\n      radarData,\n    };\n  }, [trainerData, trainerName, allPayrollData, allSessionsData, filters]);\n\n  if (!processedData.hasData || !processedData.summary) {\n    return (\n      <Dialog open={isOpen} onOpenChange={onClose}>\n        <DialogContent className=\"max-w-lg\">\n          <div className=\"flex flex-col items-center justify-center py-12 text-center\">\n            <AlertCircle className=\"w-16 h-16 text-slate-300 mb-4\" />\n            <h3 className=\"text-xl font-semibold text-slate-700\">No Data Available</h3>\n            <p className=\"text-slate-500 mt-2\">Could not load trainer performance data</p>\n            <Button onClick={onClose} className=\"mt-6\">Close</Button>\n          </div>\n        </DialogContent>\n      </Dialog>\n    );\n  }\n\n  const { summary, byMonth, byFormat, performanceScore, insights, radarData, sessionMetrics } = processedData;\n\n  return (\n    <Dialog open={isOpen} onOpenChange={onClose}>\n      <DialogContent className=\"max-w-[95vw] w-[1400px] max-h-[95vh] p-0 bg-slate-50 overflow-hidden\">\n        <DialogHeader className=\"sr-only\">\n          <DialogTitle>Trainer drilldown  {trainerName}</DialogTitle>\n          <DialogDescription>{summary?.monthYear ? `Data for ${summary.monthYear}` : 'All periods'}{filters?.location ? `  ${filters.location}` : ''}</DialogDescription>\n        </DialogHeader>\n        <div className=\"flex h-[90vh]\">\n          {/* Left Sidebar - Trainer Profile */}\n          <div className=\"w-80 bg-gray-900 text-white flex flex-col border-r-2 border-gray-700\">\n            {/* Close Button */}\n            <Button\n              onClick={onClose}\n              size=\"sm\"\n              variant=\"ghost\"\n              className=\"absolute top-4 right-4 z-50 text-slate-400 hover:text-white hover:bg-white/10\"\n            >\n              <X className=\"w-5 h-5\" />\n            </Button>\n\n            <ScrollArea className=\"flex-1\">\n              <div className=\"p-6\">\n                {/* Trainer Avatar */}\n                <div className=\"text-center mb-6\">\n                  <div className=\"relative w-32 h-32 mx-auto mb-4\">\n                    <div className=\"w-full h-full rounded-full overflow-hidden border-4 border-white/20 shadow-2xl\">\n                      <img\n                        src={getTrainerImage(trainerName)}\n                        alt={trainerName}\n                        className=\"w-full h-full object-cover\"\n                        onError={(e) => {\n                          const target = e.target as HTMLImageElement;\n                          target.style.display = 'none';\n                          target.parentElement!.innerHTML = `\n                            <div class=\"w-full h-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-3xl font-bold\">\n                              ${getTrainerInitials(trainerName)}\n                            </div>\n                          `;\n                        }}\n                      />\n                    </div>\n                    {performanceScore >= 80 && (\n                      <div className=\"absolute -bottom-1 -right-1 bg-gradient-to-r from-amber-400 to-amber-500 rounded-full p-2 shadow-lg\">\n                        <Award className=\"w-5 h-5 text-white\" />\n                      </div>\n                    )}\n                  </div>\n                  <h2 className=\"text-2xl font-bold\">{trainerName}</h2>\n                  <div className=\"flex items-center justify-center gap-2 mt-2 text-slate-400\">\n                    <MapPin className=\"w-4 h-4\" />\n                    <span className=\"text-sm\">{summary.location || 'All Locations'}</span>\n                  </div>\n                  {summary.monthYear && (\n                    <Badge className=\"mt-2 bg-white/10 text-white/80\">\n                      <Calendar className=\"w-3 h-3 mr-1\" />\n                      {summary.monthYear}\n                    </Badge>\n                  )}\n                </div>\n\n                {/* Performance Score */}\n                <Card className=\"bg-gray-800 border-gray-700 mb-6\">\n                  <CardContent className=\"p-4\">\n                    <div className=\"flex items-center justify-between mb-3\">\n                      <span className=\"text-sm font-medium text-white\">Performance Score</span>\n                      <span className=\"text-3xl font-bold text-white\">{performanceScore}</span>\n                    </div>\n                    <Progress value={performanceScore} className=\"h-2 bg-gray-700\" />\n                    <p className=\"text-xs text-gray-300 mt-2\">\n                      {performanceScore >= 80 ? ' Outstanding' : \n                       performanceScore >= 60 ? ' Great' : \n                       performanceScore >= 40 ? ' Good' : ' Needs Work'}\n                    </p>\n                  </CardContent>\n                </Card>\n\n                {/* Quick Stats */}\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between p-3 bg-gray-800 rounded-lg border border-gray-700\">\n                    <div className=\"flex items-center gap-3\">\n                      <Activity className=\"w-5 h-5 text-blue-400\" />\n                      <span className=\"text-sm text-white\">Total Sessions</span>\n                    </div>\n                    <div className=\"text-right\">\n                      <div className=\"font-bold text-lg text-white\">{summary.clickedCellSessions || summary.totalSessions}</div>\n                      <div className=\"text-xs text-gray-300\">\n                        Sheet: {summary.sessionsSheetCount} {summary.clickedCellSessions && summary.clickedCellSessions !== summary.sessionsSheetCount && (\n                          <span className=\"text-amber-400\"> Clicked value differs</span>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"flex items-center justify-between p-3 bg-gray-800 rounded-lg border border-gray-700\">\n                    <div className=\"flex items-center gap-3\">\n                      <Users className=\"w-5 h-5 text-emerald-400\" />\n                      <span className=\"text-sm text-white\">Total Attendees</span>\n                    </div>\n                    <span className=\"font-bold text-lg text-white\">{formatNumber(summary.totalCustomers)}</span>\n                  </div>\n                  \n                  <div className=\"flex items-center justify-between p-3 bg-gray-800 rounded-lg border border-gray-700\">\n                    <div className=\"flex items-center gap-3\">\n                      <DollarSign className=\"w-5 h-5 text-amber-400\" />\n                      <span className=\"text-sm text-white\">Total Revenue</span>\n                    </div>\n                    <span className=\"font-bold text-lg text-white\">{formatCurrency(summary.totalRevenue)}</span>\n                  </div>\n                  \n                  <div className=\"flex items-center justify-between p-3 bg-gray-800 rounded-lg border border-gray-700\">\n                    <div className=\"flex items-center gap-3\">\n                      <Target className=\"w-5 h-5 text-purple-400\" />\n                      <span className=\"text-sm text-white\">Fill Rate</span>\n                    </div>\n                    <span className=\"font-bold text-lg text-white\">{summary.fillRate.toFixed(1)}%</span>\n                  </div>\n                </div>\n\n                {/* Format Distribution */}\n                {byFormat.length > 0 && (\n                  <div className=\"mt-6\">\n                    <h4 className=\"text-sm font-semibold text-white mb-3\">Class Format Mix</h4>\n                    <div className=\"space-y-2\">\n                      {byFormat.map((format) => (\n                        <div key={format.name} className=\"flex items-center gap-2\">\n                          <div className=\"flex-1 h-2 bg-gray-700 rounded-full overflow-hidden\">\n                            <div\n                              className={cn(\n                                \"h-full rounded-full\",\n                                format.name === 'Cycle' && 'bg-blue-500',\n                                format.name === 'Strength' && 'bg-purple-500',\n                                format.name === 'Barre' && 'bg-pink-500'\n                              )}\n                              style={{ width: `${format.value}%` }}\n                            />\n                          </div>\n                          <span className=\"text-xs text-gray-300 w-16\">\n                            {format.name} {format.value.toFixed(0)}%\n                          </span>\n                        </div>\n                      ))}\n                    </div>\n                  </div>\n                )}\n              </div>\n            </ScrollArea>\n          </div>\n\n          {/* Main Content Area */}\n          <div className=\"flex-1 flex flex-col overflow-hidden\">\n            <div className=\"p-6 border-b bg-white\">\n              <h3 className=\"text-2xl font-bold text-slate-900\">Performance Analytics</h3>\n              <p className=\"text-slate-500 mt-1\">Comprehensive breakdown for {trainerName}</p>\n            </div>\n\n            <Tabs value={activeTab} onValueChange={setActiveTab} className=\"flex-1 flex flex-col overflow-hidden\">\n              <div className=\"px-6 pt-4 bg-white border-b\">\n                <TabsList className=\"bg-slate-100 p-1\">\n                  <TabsTrigger value=\"overview\" className=\"data-[state=active]:bg-white\">\n                    <BarChart3 className=\"w-4 h-4 mr-2\" />\n                    Overview\n                  </TabsTrigger>\n                  <TabsTrigger value=\"sessions\" className=\"data-[state=active]:bg-white\">\n                    <Activity className=\"w-4 h-4 mr-2\" />\n                    Sessions\n                  </TabsTrigger>\n                  <TabsTrigger value=\"revenue\" className=\"data-[state=active]:bg-white\">\n                    <DollarSign className=\"w-4 h-4 mr-2\" />\n                    Revenue\n                  </TabsTrigger>\n                  <TabsTrigger value=\"trends\" className=\"data-[state=active]:bg-white\">\n                    <TrendingUp className=\"w-4 h-4 mr-2\" />\n                    Trends\n                  </TabsTrigger>\n                  <TabsTrigger value=\"insights\" className=\"data-[state=active]:bg-white\">\n                    <Sparkles className=\"w-4 h-4 mr-2\" />\n                    Insights\n                  </TabsTrigger>\n                </TabsList>\n              </div>\n\n              <ScrollArea className=\"flex-1\">\n                <div className=\"p-6\">\n                  {/* Overview Tab */}\n                  <TabsContent value=\"overview\" className=\"mt-0 space-y-6\">\n                    {/* Key Metrics Grid */}\n                    <div className=\"grid grid-cols-4 gap-4\">\n                      <MetricCard\n                        title=\"Total Sessions\"\n                        value={summary.totalSessions}\n                        subtitle={`${summary.emptySessions} empty`}\n                        icon={Activity}\n                        color=\"blue\"\n                      />\n                      <MetricCard\n                        title=\"Total Attendees\"\n                        value={formatNumber(summary.totalCustomers)}\n                        subtitle={`Avg ${summary.avgClassSizeExclEmpty.toFixed(1)}/class`}\n                        icon={Users}\n                        color=\"green\"\n                      />\n                      <MetricCard\n                        title=\"Total Revenue\"\n                        value={formatCurrency(summary.totalRevenue)}\n                        subtitle={`${formatCurrency(summary.revenuePerSession)}/session`}\n                        icon={DollarSign}\n                        color=\"purple\"\n                      />\n                      <MetricCard\n                        title=\"Fill Rate\"\n                        value={`${summary.fillRate.toFixed(1)}%`}\n                        subtitle={`${summary.nonEmptySessions || summary.totalSessions - summary.emptySessions} active classes`}\n                        icon={Target}\n                        color=\"amber\"\n                      />\n                    </div>\n\n                    {/* Charts Row */}\n                    <div className=\"grid grid-cols-2 gap-6\">\n                      {/* Performance Radar */}\n                      <Card className=\"border-0 shadow-md\">\n                        <CardHeader className=\"pb-2\">\n                          <CardTitle className=\"text-lg flex items-center gap-2\">\n                            <Star className=\"w-5 h-5 text-amber-500\" />\n                            Performance Radar\n                          </CardTitle>\n                        </CardHeader>\n                        <CardContent>\n                          <ResponsiveContainer width=\"100%\" height={280}>\n                            <RadarChart data={radarData}>\n                              <PolarGrid stroke=\"#e2e8f0\" />\n                              <PolarAngleAxis dataKey=\"metric\" tick={{ fontSize: 12, fill: '#64748b' }} />\n                              <PolarRadiusAxis angle={30} domain={[0, 100]} tick={{ fontSize: 10 }} />\n                              <Radar\n                                name=\"Performance\"\n                                dataKey=\"value\"\n                                stroke={COLORS.primary}\n                                fill={COLORS.primary}\n                                fillOpacity={0.4}\n                                strokeWidth={2}\n                              />\n                            </RadarChart>\n                          </ResponsiveContainer>\n                        </CardContent>\n                      </Card>\n\n                      {/* Format Breakdown */}\n                      <Card className=\"border-0 shadow-md\">\n                        <CardHeader className=\"pb-2\">\n                          <CardTitle className=\"text-lg flex items-center gap-2\">\n                            <PieChartIcon className=\"w-5 h-5 text-purple-500\" />\n                            Class Format Breakdown\n                          </CardTitle>\n                        </CardHeader>\n                        <CardContent>\n                          {byFormat.length > 0 ? (\n                            <div className=\"flex items-center gap-6\">\n                              <ResponsiveContainer width=\"50%\" height={200}>\n                                <PieChart>\n                                  <Pie\n                                    data={byFormat}\n                                    dataKey=\"sessions\"\n                                    nameKey=\"name\"\n                                    cx=\"50%\"\n                                    cy=\"50%\"\n                                    innerRadius={40}\n                                    outerRadius={80}\n                                    paddingAngle={4}\n                                  >\n                                    {byFormat.map((entry, index) => (\n                                      <Cell \n                                        key={entry.name} \n                                        fill={\n                                          entry.name === 'Cycle' ? COLORS.primary :\n                                          entry.name === 'Strength' ? COLORS.purple :\n                                          COLORS.pink\n                                        } \n                                      />\n                                    ))}\n                                  </Pie>\n                                  <Tooltip formatter={(value: any, name) => [`${value} sessions`, name]} />\n                                </PieChart>\n                              </ResponsiveContainer>\n                              <div className=\"flex-1 space-y-4\">\n                                {byFormat.map((format) => (\n                                  <div key={format.name} className=\"space-y-1\">\n                                    <div className=\"flex items-center justify-between\">\n                                      <div className=\"flex items-center gap-2\">\n                                        <div className={cn(\n                                          \"w-3 h-3 rounded-full\",\n                                          format.name === 'Cycle' && 'bg-blue-500',\n                                          format.name === 'Strength' && 'bg-purple-500',\n                                          format.name === 'Barre' && 'bg-pink-500'\n                                        )} />\n                                        <span className=\"font-medium text-sm\">{format.name}</span>\n                                      </div>\n                                      <span className=\"text-sm text-slate-600\">{format.sessions} sessions</span>\n                                    </div>\n                                    <div className=\"text-xs text-slate-500 pl-5\">\n                                      {formatCurrency(format.revenue)}  {format.customers} attendees\n                                    </div>\n                                  </div>\n                                ))}\n                              </div>\n                            </div>\n                          ) : (\n                            <div className=\"h-[200px] flex items-center justify-center text-slate-400\">\n                              No format breakdown available\n                            </div>\n                          )}\n                        </CardContent>\n                      </Card>\n                    </div>\n\n                    {/* Conversion & Retention */}\n                    <div className=\"grid grid-cols-2 gap-6\">\n                      <Card className=\"border-0 shadow-md bg-gradient-to-br from-emerald-50 to-teal-50\">\n                        <CardContent className=\"p-6\">\n                          <div className=\"flex items-start justify-between\">\n                            <div>\n                              <p className=\"text-sm font-medium text-emerald-700\">Conversion Rate</p>\n                              <p className=\"text-4xl font-bold text-emerald-600 mt-2\">\n                                {summary.conversionRate.toFixed(1)}%\n                              </p>\n                              <p className=\"text-sm text-emerald-600/70 mt-1\">\n                                New clients converted to members\n                              </p>\n                            </div>\n                            <div className=\"p-3 bg-emerald-500/20 rounded-xl\">\n                              <TrendingUp className=\"w-8 h-8 text-emerald-600\" />\n                            </div>\n                          </div>\n                        </CardContent>\n                      </Card>\n\n                      <Card className=\"border-0 shadow-md bg-gradient-to-br from-blue-50 to-indigo-50\">\n                        <CardContent className=\"p-6\">\n                          <div className=\"flex items-start justify-between\">\n                            <div>\n                              <p className=\"text-sm font-medium text-blue-700\">Retention Rate</p>\n                              <p className=\"text-4xl font-bold text-blue-600 mt-2\">\n                                {summary.retentionRate.toFixed(1)}%\n                              </p>\n                              <p className=\"text-sm text-blue-600/70 mt-1\">\n                                Members returning for classes\n                              </p>\n                            </div>\n                            <div className=\"p-3 bg-blue-500/20 rounded-xl\">\n                              <Users className=\"w-8 h-8 text-blue-600\" />\n                            </div>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    </div>\n                  </TabsContent>\n\n                  {/* Sessions Tab */}\n                  <TabsContent value=\"sessions\" className=\"mt-0 space-y-6\">\n                    <div className=\"grid grid-cols-3 gap-4\">\n                      <MetricCard\n                        title=\"Total Sessions (Clicked)\"\n                        value={summary.clickedCellSessions || summary.totalSessions}\n                        subtitle={summary.sessionsSheetCount ? `Sheet: ${summary.sessionsSheetCount}${(summary.clickedCellSessions && summary.clickedCellSessions !== summary.sessionsSheetCount) ? '  Mismatch' : ''}` : undefined}\n                        icon={Activity}\n                        color=\"blue\"\n                        size=\"large\"\n                      />\n                      <MetricCard\n                        title=\"Active Sessions\"\n                        value={summary.totalSessions - summary.emptySessions}\n                        subtitle={`${summary.fillRate.toFixed(1)}% fill rate`}\n                        icon={CheckCircle2}\n                        color=\"green\"\n                        size=\"large\"\n                      />\n                      <MetricCard\n                        title=\"Empty Sessions\"\n                        value={summary.emptySessions}\n                        subtitle={`${((summary.emptySessions / summary.totalSessions) * 100).toFixed(1)}% of total`}\n                        icon={XCircle}\n                        color=\"rose\"\n                        size=\"large\"\n                      />\n                    </div>\n\n                    {/* Sessions by Format */}\n                    <Card className=\"border-0 shadow-md\">\n                      <CardHeader>\n                        <CardTitle className=\"text-lg\">Sessions by Format</CardTitle>\n                        <CardDescription>Breakdown of classes by type</CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                        {byFormat.length > 0 ? (\n                          <ResponsiveContainer width=\"100%\" height={300}>\n                            <BarChart data={byFormat} layout=\"vertical\">\n                              <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e2e8f0\" />\n                              <XAxis type=\"number\" />\n                              <YAxis type=\"category\" dataKey=\"name\" width={80} />\n                              <Tooltip \n                                formatter={(value: any, name) => {\n                                  if (name === 'sessions') return [value, 'Sessions'];\n                                  if (name === 'customers') return [value, 'Attendees'];\n                                  return [value, name];\n                                }}\n                              />\n                              <Legend />\n                              <Bar dataKey=\"sessions\" fill={COLORS.primary} name=\"Sessions\" radius={[0, 4, 4, 0]} />\n                              <Bar dataKey=\"customers\" fill={COLORS.success} name=\"Attendees\" radius={[0, 4, 4, 0]} />\n                            </BarChart>\n                          </ResponsiveContainer>\n                        ) : (\n                          <div className=\"h-[300px] flex items-center justify-center text-slate-400\">\n                            <div className=\"text-center\">\n                              <Activity className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n                              <p>No session format data available</p>\n                            </div>\n                          </div>\n                        )}\n                      </CardContent>\n                    </Card>\n\n                    {/* Sessions Summary & List */}\n                    <Card className=\"border-0 shadow-md\">\n                      <CardHeader>\n                        <CardTitle className=\"text-lg\">Session Metrics (Filtered)</CardTitle>\n                        <CardDescription>\n                          {filters?.month ? `Month: ${filters.month}` : 'All Months'}{filters?.location ? `  Location: ${filters.location}` : ''}\n                        </CardDescription>\n                      </CardHeader>\n                      <CardContent>\n                        {sessionMetrics?.list && sessionMetrics.list.length > 0 ? (\n                          <div className=\"space-y-6\">\n                            {/* Diagnostic: show mismatch warning if clicked vs sheet counts differ */}\n                            {(summary.clickedCellSessions && summary.clickedCellSessions !== summary.sessionsSheetCount) && (\n                              <div className=\"p-3 rounded-md bg-amber-50 border border-amber-200 text-amber-800\">\n                                <div className=\"font-medium\">Clicked cell value differs from sessions sheet</div>\n                                <div className=\"text-sm\">Clicked: {summary.clickedCellSessions}  Sheet rows: {summary.sessionsSheetCount}  Difference: {summary.clickedCellSessions - summary.sessionsSheetCount}</div>\n                              </div>\n                            )}\n                            <div className=\"grid grid-cols-5 gap-4\">\n                              <MetricCard\n                                title=\"Attendance\"\n                                value={formatNumber(sessionMetrics.totals.attendance)}\n                                subtitle={`Avg ${sessionMetrics.avgAttendance.toFixed(1)}/class`}\n                                icon={Users}\n                                color=\"green\"\n                              />\n                              <MetricCard\n                                title=\"Cancelled\"\n                                value={sessionMetrics.totals.cancelled}\n                                subtitle={`${((sessionMetrics.totals.cancelled / sessionMetrics.totals.count) * 100).toFixed(1)}% of classes`}\n                                icon={AlertCircle}\n                                color=\"amber\"\n                              />\n                              <MetricCard\n                                title=\"Revenue\"\n                                value={formatCurrency(sessionMetrics.totals.revenue)}\n                                subtitle={`${formatCurrency(sessionMetrics.avgRevenuePerSession)}/session`}\n                                icon={DollarSign}\n                                color=\"purple\"\n                              />\n                              <MetricCard\n                                title=\"Capacity\"\n                                value={formatNumber(sessionMetrics.totals.capacity)}\n                                subtitle={`Fill ${sessionMetrics.fillRate.toFixed(1)}%`}\n                                icon={Target}\n                                color=\"blue\"\n                              />\n                              <MetricCard\n                                title=\"Booked\"\n                                value={formatNumber(sessionMetrics.totals.booked)}\n                                subtitle={`Comp ${formatNumber(sessionMetrics.totals.complimentary)}`}\n                                icon={Calendar}\n                                color=\"cyan\"\n                              />\n                            </div>\n\n                            {/* Format Split Mini Cards */}\n                            {sessionMetrics.split && sessionMetrics.split.length > 0 && (\n                              <div className=\"grid grid-cols-3 gap-4\">\n                                {sessionMetrics.split.map((s: any) => (\n                                  <Card key={s.name} className=\"border bg-slate-50\">\n                                    <CardContent className=\"p-4\">\n                                      <div className=\"flex items-center justify-between mb-1\">\n                                        <span className=\"text-sm font-medium text-slate-700\">{s.name}</span>\n                                        <span className=\"text-xs text-slate-500\">{s.sessions} sessions</span>\n                                      </div>\n                                      <div className=\"text-slate-600 text-sm\">\n                                        {formatNumber(s.customers)} attendees  {formatCurrency(s.revenue)}\n                                      </div>\n                                      <div className=\"text-xs text-slate-500 mt-1\">Avg {s.avgAttendance.toFixed(1)}/class</div>\n                                    </CardContent>\n                                  </Card>\n                                ))}\n                              </div>\n                            )}\n\n                            {/* Detailed Sessions Table */}\n                            <div className=\"overflow-x-auto border rounded-lg bg-white\">\n                              <table className=\"w-full text-sm\">\n                                <thead className=\"bg-slate-100 text-slate-700\">\n                                  <tr>\n                                    <th className=\"p-2 text-left\">Date</th>\n                                    <th className=\"p-2 text-left\">Time</th>\n                                    <th className=\"p-2 text-left\">Class</th>\n                                    <th className=\"p-2 text-left\">Location</th>\n                                    <th className=\"p-2 text-right\">Attendees</th>\n                                    <th className=\"p-2 text-right\">Cancelled</th>\n                                    <th className=\"p-2 text-right\">Capacity</th>\n                                    <th className=\"p-2 text-right\">Fill %</th>\n                                    <th className=\"p-2 text-right\">Revenue</th>\n                                  </tr>\n                                </thead>\n                                <tbody>\n                                  {sessionMetrics.list.map((s: any, idx: number) => {\n                                    const attendees = Number(s.checkedInCount || s.totalCustomers || 0);\n                                    const capacity = Number(s.capacity || 0);\n                                    const fillPct = capacity > 0 ? (attendees / capacity) * 100 : 0;\n                                    const cancelled = (s.lateCancelledCount || 0) > 0 && (attendees === 0);\n                                    const cls = (s.cleanedClass || s.classType || '').trim();\n                                    const revenue = Number(s.totalPaid || s.revenue || 0);\n                                    return (\n                                      <tr key={idx} className=\"border-t\">\n                                        <td className=\"p-2\">{s.date || s.monthYear || ''}</td>\n                                        <td className=\"p-2\">{s.time || ''}</td>\n                                        <td className=\"p-2\">{cls}</td>\n                                        <td className=\"p-2\">{s.location || ''}</td>\n                                        <td className=\"p-2 text-right\">{attendees}</td>\n                                        <td className=\"p-2 text-right\">{cancelled ? 'Yes' : 'No'}</td>\n                                        <td className=\"p-2 text-right\">{capacity}</td>\n                                        <td className=\"p-2 text-right\">{fillPct.toFixed(1)}%</td>\n                                        <td className=\"p-2 text-right\">{formatCurrency(revenue)}</td>\n                                      </tr>\n                                    );\n                                  })}\n                                </tbody>\n                              </table>\n                            </div>\n                          </div>\n                        ) : (\n                          <div className=\"h-[200px] flex items-center justify-center text-slate-400\">\n                            <div className=\"text-center\">\n                              <Activity className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n                              <p>No sessions found for the selected filters.</p>\n                            </div>\n                          </div>\n                        )}\n                      </CardContent>\n                    </Card>\n\n                    {/* Class Size Distribution */}\n                    <Card className=\"border-0 shadow-md\">\n                      <CardHeader>\n                        <CardTitle className=\"text-lg\">Class Size Metrics</CardTitle>\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"grid grid-cols-2 gap-6\">\n                          <div className=\"space-y-4\">\n                            <div>\n                              <p className=\"text-sm text-slate-500 mb-1\">Avg Class Size (All Classes)</p>\n                              <p className=\"text-3xl font-bold text-slate-800\">\n                                {summary.avgClassSize.toFixed(1)}\n                              </p>\n                            </div>\n                            <div>\n                              <p className=\"text-sm text-slate-500 mb-1\">Avg Class Size (Excl. Empty)</p>\n                              <p className=\"text-3xl font-bold text-emerald-600\">\n                                {summary.avgClassSizeExclEmpty.toFixed(1)}\n                              </p>\n                            </div>\n                          </div>\n                          <div className=\"flex items-center justify-center\">\n                            <div className=\"w-40 h-40 rounded-full border-8 border-blue-100 flex items-center justify-center\">\n                              <div className=\"text-center\">\n                                <p className=\"text-4xl font-bold text-blue-600\">\n                                  {formatNumber(summary.totalCustomers)}\n                                </p>\n                                <p className=\"text-sm text-slate-500\">Total Attendees</p>\n                              </div>\n                            </div>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </TabsContent>\n\n                  {/* Revenue Tab */}\n                  <TabsContent value=\"revenue\" className=\"mt-0 space-y-6\">\n                    <div className=\"grid grid-cols-3 gap-4\">\n                      <MetricCard\n                        title=\"Total Revenue\"\n                        value={formatCurrency(summary.totalRevenue)}\n                        icon={DollarSign}\n                        color=\"blue\"\n                        size=\"large\"\n                      />\n                      <MetricCard\n                        title=\"Revenue per Session\"\n                        value={formatCurrency(summary.revenuePerSession)}\n                        icon={Activity}\n                        color=\"green\"\n                        size=\"large\"\n                      />\n                      <MetricCard\n                        title=\"Revenue per Customer\"\n                        value={formatCurrency(summary.revenuePerCustomer)}\n                        icon={Users}\n                        color=\"purple\"\n                        size=\"large\"\n                      />\n                    </div>\n\n                    {/* Revenue Breakdown Table */}\n                    <Card className=\"border-0 shadow-sm border border-slate-200\">\n                      <CardHeader className=\"bg-slate-50 border-b border-slate-200\">\n                        <CardTitle className=\"text-lg text-slate-800\">Revenue Breakdown by Session</CardTitle>\n                      </CardHeader>\n                      <CardContent className=\"p-0\">\n                        {byMonth.length > 0 ? (\n                          <div className=\"overflow-x-auto\">\n                            <table className=\"w-full\">\n                              <thead>\n                                <tr className=\"border-b border-slate-200 bg-black\">\n                                  <th className=\"text-left py-3 px-4 font-medium text-white bg-gradient-to-r from-blue-800 via-blue-900 to-blue-800\">Month</th>\n                                  <th className=\"text-right py-3 px-4 font-medium text-white bg-black\">Sessions</th>\n                                  <th className=\"text-right py-3 px-4 font-medium text-white bg-black\">Revenue</th>\n                                  <th className=\"text-right py-3 px-4 font-medium text-white bg-black\">Avg/Session</th>\n                                  <th className=\"text-right py-3 px-4 font-medium text-white bg-black\">Customers</th>\n                                  <th className=\"text-right py-3 px-4 font-medium text-white bg-black\">Avg/Customer</th>\n                                </tr>\n                              </thead>\n                              <tbody>\n                                {byMonth.map((month, index) => (\n                                  <tr key={month.month} className={cn(\n                                    \"border-b border-slate-100 hover:bg-slate-50\",\n                                    \"h-[35px] max-h-[35px]\"\n                                  )}>\n                                    <td className=\"py-2 px-4 font-medium text-slate-900 h-[35px]\">{month.month}</td>\n                                    <td className=\"py-2 px-4 text-right text-slate-700 h-[35px]\">{month.sessions}</td>\n                                    <td className=\"py-2 px-4 text-right font-semibold text-slate-900 h-[35px]\">{formatCurrency(month.revenue)}</td>\n                                    <td className=\"py-2 px-4 text-right text-slate-700 h-[35px]\">{formatCurrency(month.revenue / month.sessions)}</td>\n                                    <td className=\"py-2 px-4 text-right text-slate-700 h-[35px]\">{month.customers}</td>\n                                    <td className=\"py-2 px-4 text-right text-slate-700 h-[35px]\">{formatCurrency(month.revenue / month.customers)}</td>\n                                  </tr>\n                                ))}\n                              </tbody>\n                            </table>\n                          </div>\n                        ) : (\n                          <div className=\"h-[200px] flex items-center justify-center text-slate-400\">\n                            <div className=\"text-center\">\n                              <DollarSign className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n                              <p>No revenue data available</p>\n                            </div>\n                          </div>\n                        )}\n                      </CardContent>\n                    </Card>\n\n                    {/* Revenue by Format */}\n                    <Card className=\"border-0 shadow-sm border border-slate-200\">\n                      <CardHeader className=\"bg-slate-50 border-b border-slate-200\">\n                        <CardTitle className=\"text-lg text-slate-800\">Revenue by Class Format</CardTitle>\n                      </CardHeader>\n                      <CardContent>\n                        {byFormat.length > 0 ? (\n                          <div className=\"grid grid-cols-3 gap-6\">\n                            {byFormat.map((format) => (\n                              <div \n                                key={format.name}\n                                className=\"p-6 rounded-xl border-2 border-gray-900 bg-white text-gray-900 shadow-lg\"\n                              >\n                                <div className=\"flex items-center gap-2 mb-3\">\n                                  {format.name === 'Cycle' && <Bike className=\"w-6 h-6 text-blue-700\" />}\n                                  {format.name === 'Strength' && <Dumbbell className=\"w-6 h-6 text-blue-700\" />}\n                                  {format.name === 'Barre' && <Music className=\"w-6 h-6 text-blue-700\" />}\n                                  <span className=\"font-bold text-lg text-gray-900\">{format.name}</span>\n                                </div>\n                                <p className=\"text-3xl font-bold text-gray-900\">{formatCurrency(format.revenue)}</p>\n                                <p className=\"text-sm text-gray-600 mt-2 font-medium\">\n                                  {format.sessions} sessions  {format.customers} attendees\n                                </p>\n                              </div>\n                            ))}\n                          </div>\n                        ) : (\n                          <div className=\"h-[200px] flex items-center justify-center text-slate-400\">\n                            <div className=\"text-center\">\n                              <DollarSign className=\"w-12 h-12 mx-auto mb-2 opacity-50\" />\n                              <p>No revenue breakdown available</p>\n                            </div>\n                          </div>\n                        )}\n                      </CardContent>\n                    </Card>\n                  </TabsContent>\n\n                  {/* Trends Tab */}\n                  <TabsContent value=\"trends\" className=\"mt-0 space-y-6\">\n                    {byMonth.length > 1 ? (\n                      <>\n                        {/* Monthly Revenue Trend */}\n                        <Card className=\"border-0 shadow-md\">\n                          <CardHeader>\n                            <CardTitle className=\"text-lg\">Monthly Revenue Trend</CardTitle>\n                          </CardHeader>\n                          <CardContent>\n                            <ResponsiveContainer width=\"100%\" height={300}>\n                              <AreaChart data={byMonth}>\n                                <defs>\n                                  <linearGradient id=\"revenueGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                    <stop offset=\"5%\" stopColor={COLORS.success} stopOpacity={0.3} />\n                                    <stop offset=\"95%\" stopColor={COLORS.success} stopOpacity={0} />\n                                  </linearGradient>\n                                </defs>\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e2e8f0\" />\n                                <XAxis dataKey=\"month\" tick={{ fontSize: 12 }} />\n                                <YAxis tick={{ fontSize: 12 }} />\n                                <Tooltip \n                                  formatter={(value: any) => formatCurrency(value)}\n                                  labelStyle={{ fontWeight: 'bold' }}\n                                />\n                                <Area\n                                  type=\"monotone\"\n                                  dataKey=\"revenue\"\n                                  stroke={COLORS.success}\n                                  fill=\"url(#revenueGradient)\"\n                                  strokeWidth={2}\n                                />\n                              </AreaChart>\n                            </ResponsiveContainer>\n                          </CardContent>\n                        </Card>\n\n                        {/* Monthly Sessions & Attendance */}\n                        <Card className=\"border-0 shadow-md\">\n                          <CardHeader>\n                            <CardTitle className=\"text-lg\">Sessions & Attendance Trend</CardTitle>\n                          </CardHeader>\n                          <CardContent>\n                            <ResponsiveContainer width=\"100%\" height={300}>\n                              <LineChart data={byMonth}>\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e2e8f0\" />\n                                <XAxis dataKey=\"month\" tick={{ fontSize: 12 }} />\n                                <YAxis yAxisId=\"left\" tick={{ fontSize: 12 }} />\n                                <YAxis yAxisId=\"right\" orientation=\"right\" tick={{ fontSize: 12 }} />\n                                <Tooltip />\n                                <Legend />\n                                <Line\n                                  yAxisId=\"left\"\n                                  type=\"monotone\"\n                                  dataKey=\"sessions\"\n                                  stroke={COLORS.primary}\n                                  strokeWidth={2}\n                                  dot={{ fill: COLORS.primary }}\n                                  name=\"Sessions\"\n                                />\n                                <Line\n                                  yAxisId=\"right\"\n                                  type=\"monotone\"\n                                  dataKey=\"customers\"\n                                  stroke={COLORS.purple}\n                                  strokeWidth={2}\n                                  dot={{ fill: COLORS.purple }}\n                                  name=\"Attendees\"\n                                />\n                              </LineChart>\n                            </ResponsiveContainer>\n                          </CardContent>\n                        </Card>\n\n                        {/* Monthly Avg Attendance */}\n                        <Card className=\"border-0 shadow-md\">\n                          <CardHeader>\n                            <CardTitle className=\"text-lg\">Average Class Attendance Trend</CardTitle>\n                          </CardHeader>\n                          <CardContent>\n                            <ResponsiveContainer width=\"100%\" height={250}>\n                              <BarChart data={byMonth}>\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#e2e8f0\" />\n                                <XAxis dataKey=\"month\" tick={{ fontSize: 12 }} />\n                                <YAxis tick={{ fontSize: 12 }} domain={[0, 'auto']} />\n                                <Tooltip formatter={(value: any) => value.toFixed(1)} />\n                                <Bar\n                                  dataKey=\"avgAttendance\"\n                                  fill={COLORS.cyan}\n                                  name=\"Avg Attendance\"\n                                  radius={[4, 4, 0, 0]}\n                                />\n                              </BarChart>\n                            </ResponsiveContainer>\n                          </CardContent>\n                        </Card>\n                      </>\n                    ) : (\n                      <Card className=\"border-0 shadow-md\">\n                        <CardContent className=\"p-12\">\n                          <div className=\"text-center text-slate-400\">\n                            <TrendingUp className=\"w-16 h-16 mx-auto mb-4 opacity-50\" />\n                            <h3 className=\"text-lg font-medium text-slate-600 mb-2\">Single Period Data</h3>\n                            <p className=\"text-sm\">\n                              Trend analysis requires multiple months of data.\n                              <br />\n                              Currently showing data for: <span className=\"font-medium\">{summary.monthYear || 'All time'}</span>\n                            </p>\n                          </div>\n                        </CardContent>\n                      </Card>\n                    )}\n                  </TabsContent>\n\n                  {/* Insights Tab */}\n                  <TabsContent value=\"insights\" className=\"mt-0 space-y-6\">\n                    {/* Performance Summary */}\n                    <Card className=\"border-0 shadow-md\">\n                      <CardHeader>\n                        <CardTitle className=\"text-lg flex items-center gap-2\">\n                          <Star className=\"w-5 h-5 text-amber-500\" />\n                          Performance Summary\n                        </CardTitle>\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"flex items-center gap-8 mb-6\">\n                          <div className=\"w-32 h-32 rounded-full bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white\">\n                            <div className=\"text-center\">\n                              <p className=\"text-4xl font-bold\">{performanceScore}</p>\n                              <p className=\"text-sm text-white/80\">Score</p>\n                            </div>\n                          </div>\n                          <div className=\"flex-1 space-y-3\">\n                            <PerformanceIndicator score={summary.fillRate} label=\"Fill Rate\" />\n                            <PerformanceIndicator score={Math.min(summary.avgClassSizeExclEmpty * 6.67, 100)} label=\"Attendance\" />\n                            <PerformanceIndicator score={Math.min(summary.conversionRate * 2, 100)} label=\"Conversion\" />\n                            <PerformanceIndicator score={Math.min(summary.retentionRate * 1.25, 100)} label=\"Retention\" />\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n\n                    {/* AI Insights */}\n                    <Card className=\"border-0 shadow-md\">\n                      <CardHeader>\n                        <CardTitle className=\"text-lg flex items-center gap-2\">\n                          <Sparkles className=\"w-5 h-5 text-purple-500\" />\n                          Key Insights\n                        </CardTitle>\n                      </CardHeader>\n                      <CardContent>\n                        {insights.length > 0 ? (\n                          <div className=\"space-y-3\">\n                            {insights.map((insight, idx) => (\n                              <div\n                                key={idx}\n                                className={cn(\n                                  \"flex items-start gap-3 p-4 rounded-lg\",\n                                  insight.type === 'success' && 'bg-emerald-50 border border-emerald-200',\n                                  insight.type === 'warning' && 'bg-amber-50 border border-amber-200',\n                                  insight.type === 'info' && 'bg-blue-50 border border-blue-200'\n                                )}\n                              >\n                                {insight.type === 'success' && <CheckCircle2 className=\"w-5 h-5 text-emerald-500 flex-shrink-0 mt-0.5\" />}\n                                {insight.type === 'warning' && <AlertCircle className=\"w-5 h-5 text-amber-500 flex-shrink-0 mt-0.5\" />}\n                                {insight.type === 'info' && <Zap className=\"w-5 h-5 text-blue-500 flex-shrink-0 mt-0.5\" />}\n                                <p className={cn(\n                                  \"text-sm\",\n                                  insight.type === 'success' && 'text-emerald-800',\n                                  insight.type === 'warning' && 'text-amber-800',\n                                  insight.type === 'info' && 'text-blue-800'\n                                )}>\n                                  {insight.message}\n                                </p>\n                              </div>\n                            ))}\n                          </div>\n                        ) : (\n                          <p className=\"text-slate-500 text-center py-8\">No insights available</p>\n                        )}\n                      </CardContent>\n                    </Card>\n\n                    {/* Recommendations */}\n                    <Card className=\"border-0 shadow-md bg-gradient-to-br from-slate-800 to-slate-900 text-white\">\n                      <CardHeader>\n                        <CardTitle className=\"text-lg flex items-center gap-2\">\n                          <Target className=\"w-5 h-5 text-amber-400\" />\n                          Recommendations\n                        </CardTitle>\n                      </CardHeader>\n                      <CardContent>\n                        <div className=\"space-y-4\">\n                          {summary.emptySessions > 2 && (\n                            <div className=\"flex items-start gap-3 p-3 bg-white/10 rounded-lg\">\n                              <div className=\"p-1.5 bg-amber-500/20 rounded\">\n                                <AlertCircle className=\"w-4 h-4 text-amber-400\" />\n                              </div>\n                              <div>\n                                <p className=\"font-medium\">Reduce Empty Classes</p>\n                                <p className=\"text-sm text-white/70\">\n                                  Consider adjusting schedule or promotion for the {summary.emptySessions} classes with no attendance.\n                                </p>\n                              </div>\n                            </div>\n                          )}\n                          {summary.avgClassSizeExclEmpty < 10 && (\n                            <div className=\"flex items-start gap-3 p-3 bg-white/10 rounded-lg\">\n                              <div className=\"p-1.5 bg-blue-500/20 rounded\">\n                                <Users className=\"w-4 h-4 text-blue-400\" />\n                              </div>\n                              <div>\n                                <p className=\"font-medium\">Boost Class Attendance</p>\n                                <p className=\"text-sm text-white/70\">\n                                  Average class size is {summary.avgClassSizeExclEmpty.toFixed(1)}. Target 12+ for optimal revenue.\n                                </p>\n                              </div>\n                            </div>\n                          )}\n                          {summary.conversionRate < 30 && (\n                            <div className=\"flex items-start gap-3 p-3 bg-white/10 rounded-lg\">\n                              <div className=\"p-1.5 bg-emerald-500/20 rounded\">\n                                <TrendingUp className=\"w-4 h-4 text-emerald-400\" />\n                              </div>\n                              <div>\n                                <p className=\"font-medium\">Improve Conversion</p>\n                                <p className=\"text-sm text-white/70\">\n                                  Focus on converting trial members. Current rate: {summary.conversionRate.toFixed(1)}%\n                                </p>\n                              </div>\n                            </div>\n                          )}\n                          {performanceScore >= 70 && (\n                            <div className=\"flex items-start gap-3 p-3 bg-white/10 rounded-lg\">\n                              <div className=\"p-1.5 bg-amber-500/20 rounded\">\n                                <Award className=\"w-4 h-4 text-amber-400\" />\n                              </div>\n                              <div>\n                                <p className=\"font-medium\">Strong Performance</p>\n                                <p className=\"text-sm text-white/70\">\n                                  Keep up the great work! Consider mentoring other trainers.\n                                </p>\n                              </div>\n                            </div>\n                          )}\n                        </div>\n                      </CardContent>\n                    </Card>\n                  </TabsContent>\n                </div>\n              </ScrollArea>\n            </Tabs>\n          </div>\n        </div>\n      </DialogContent>\n    </Dialog>\n  );\n}\n","import React, { useState, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Badge } from '@/components/ui/badge';\nimport { Label } from '@/components/ui/label';\nimport { Calendar, MapPin, User, X, Filter, Search, DollarSign, Target, Activity } from 'lucide-react';\nimport { PayrollData } from '@/types/dashboard';\n\ninterface TrainerFilterSectionProps {\n  data: PayrollData[];\n  onFiltersChange: (filters: any) => void;\n  isCollapsed: boolean;\n  onToggleCollapse: () => void;\n}\n\ninterface EnhancedFilters {\n  location: string;\n  trainer: string;\n  month: string;\n  searchTerm: string;\n  minSessions: string;\n  maxSessions: string;\n  minRevenue: string;\n  maxRevenue: string;\n  performanceLevel: string;\n  classType: string;\n}\n\nexport const TrainerFilterSection: React.FC<TrainerFilterSectionProps> = ({\n  data,\n  onFiltersChange,\n  isCollapsed,\n  onToggleCollapse\n}) => {\n  const [filters, setFilters] = useState<EnhancedFilters>({\n    location: 'all',\n    trainer: 'all',\n    month: 'all',\n    searchTerm: '',\n    minSessions: '',\n    maxSessions: '',\n    minRevenue: '',\n    maxRevenue: '',\n    performanceLevel: 'all',\n    classType: 'all'\n  });\n\n  // Extract unique values from data\n  const locations = Array.from(new Set(data.map(item => item.location))).filter(Boolean);\n  const trainers = Array.from(new Set(data.map(item => item.teacherName))).filter(Boolean);\n  const months = Array.from(new Set(data.map(item => item.monthYear))).filter(Boolean).sort().reverse();\n\n  // Set defaults when data is available\n  useEffect(() => {\n    if (months.length > 0 && locations.length > 0) {\n      // Calculate previous month\n      const now = new Date();\n      const prev = new Date(now.getFullYear(), now.getMonth() - 1, 1);\n      const monthShort = prev.toLocaleDateString('en-US', { month: 'short' });\n      const year = prev.getFullYear();\n      const expectedMonth = `${monthShort}-${year}`;\n      \n      // Find matching month in data\n      const matchingMonth = months.find(m => m === expectedMonth) || months[0] || 'all';\n      \n      // Find Kwality House location\n      const kwalityLocation = locations.find(loc => \n        loc.toLowerCase().includes('kwality')\n      ) || 'all';\n      \n      // Only set defaults if currently set to 'all' (initial state)\n      if (filters.month === 'all' && filters.location === 'all') {\n        const defaultFilters = {\n          ...filters,\n          month: matchingMonth,\n          location: kwalityLocation\n        };\n        setFilters(defaultFilters);\n        updateFilters(defaultFilters);\n      }\n    }\n  }, [months, locations]);\n\n  // Performance levels for filtering\n  const performanceLevels = [\n    { value: 'all', label: 'All Performance Levels' },\n    { value: 'high', label: 'High Performers (Top 25%)' },\n    { value: 'medium', label: 'Medium Performers (25-75%)' },\n    { value: 'low', label: 'Low Performers (Bottom 25%)' }\n  ];\n\n  // Class types (basic categorization)\n  const classTypes = [\n    { value: 'all', label: 'All Class Types' },\n    { value: 'cycle', label: 'Cycle Classes' },\n    { value: 'barre', label: 'Barre Classes' },\n    { value: 'strength', label: 'Strength Classes' }\n  ];\n\n  // Update filters and notify parent\n  const updateFilters = (newFilters: Partial<EnhancedFilters>) => {\n    const updatedFilters = { ...filters, ...newFilters };\n    setFilters(updatedFilters);\n    \n    // Convert to format expected by parent\n    const parentFilters = {\n      location: updatedFilters.location === 'all' ? '' : updatedFilters.location,\n      trainer: updatedFilters.trainer === 'all' ? '' : updatedFilters.trainer,\n      month: updatedFilters.month === 'all' ? '' : updatedFilters.month,\n      searchTerm: updatedFilters.searchTerm || '',\n      performanceLevel: updatedFilters.performanceLevel === 'all' ? '' : updatedFilters.performanceLevel,\n      classType: updatedFilters.classType === 'all' ? '' : updatedFilters.classType,\n      minSessions: updatedFilters.minSessions ? Number(updatedFilters.minSessions) : null,\n      maxSessions: updatedFilters.maxSessions ? Number(updatedFilters.maxSessions) : null,\n      minRevenue: updatedFilters.minRevenue ? Number(updatedFilters.minRevenue) : null,\n      maxRevenue: updatedFilters.maxRevenue ? Number(updatedFilters.maxRevenue) : null\n    };\n    \n    onFiltersChange(parentFilters);\n  };\n\n  // Clear all filters\n  const clearAllFilters = () => {\n    const clearedFilters: EnhancedFilters = {\n      location: 'all',\n      trainer: 'all',\n      month: 'all',\n      searchTerm: '',\n      minSessions: '',\n      maxSessions: '',\n      minRevenue: '',\n      maxRevenue: '',\n      performanceLevel: 'all',\n      classType: 'all'\n    };\n    setFilters(clearedFilters);\n    updateFilters(clearedFilters);\n  };\n\n  // Check if any filters are active\n  const hasActiveFilters = Object.entries(filters).some(([key, value]) => {\n    if (key === 'searchTerm' || key.includes('min') || key.includes('max')) {\n      return value !== '';\n    }\n    return value !== '' && value !== 'all';\n  });\n\n  // Get active filter count\n  const activeFilterCount = Object.entries(filters).filter(([key, value]) => {\n    if (key === 'searchTerm' || key.includes('min') || key.includes('max')) {\n      return value !== '';\n    }\n    return value !== '' && value !== 'all';\n  }).length;\n\n  if (isCollapsed) {\n    return (\n      <Card className=\"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl\">\n        <CardContent className=\"p-4\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-2\">\n              <Filter className=\"w-4 h-4 text-blue-600\" />\n              <span className=\"text-sm font-medium text-slate-700\">Enhanced Filters</span>\n              {hasActiveFilters && (\n                <Badge variant=\"secondary\" className=\"text-xs\">\n                  {activeFilterCount} active\n                </Badge>\n              )}\n            </div>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={onToggleCollapse}\n              className=\"text-blue-600 hover:text-blue-700\"\n            >\n              Show Filters\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <Card className=\"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl\">\n      <CardHeader className=\"pb-4\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-lg font-bold text-slate-800 flex items-center gap-2\">\n            <Filter className=\"w-5 h-5 text-blue-600\" />\n            Enhanced Trainer Filters\n          </CardTitle>\n          <div className=\"flex items-center gap-2\">\n            {hasActiveFilters && (\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={clearAllFilters}\n                className=\"text-slate-600 hover:text-slate-700\"\n              >\n                <X className=\"w-3 h-3 mr-1\" />\n                Clear All\n              </Button>\n            )}\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={onToggleCollapse}\n              className=\"text-blue-600 hover:text-blue-700\"\n            >\n              Hide Filters\n            </Button>\n          </div>\n        </div>\n      </CardHeader>\n      \n      <CardContent className=\"space-y-6\">\n        {/* Basic Filters Row */}\n        <div className=\"grid grid-cols-1 md:grid-cols-4 gap-4\">\n          {/* Search */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm font-medium text-slate-700 flex items-center gap-2\">\n              <Search className=\"w-4 h-4 text-blue-600\" />\n              Search Trainers\n            </Label>\n            <Input\n              placeholder=\"Search by name...\"\n              value={filters.searchTerm}\n              onChange={(e) => updateFilters({ searchTerm: e.target.value })}\n              className=\"h-9\"\n            />\n          </div>\n\n          {/* Location */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm font-medium text-slate-700 flex items-center gap-2\">\n              <MapPin className=\"w-4 h-4 text-blue-600\" />\n              Location\n            </Label>\n            <Select value={filters.location} onValueChange={(value) => updateFilters({ location: value })}>\n              <SelectTrigger className=\"h-9\">\n                <SelectValue placeholder=\"All Locations\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Locations</SelectItem>\n                {locations.map((location) => (\n                  <SelectItem key={location} value={location}>\n                    {location}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Trainer */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm font-medium text-slate-700 flex items-center gap-2\">\n              <User className=\"w-4 h-4 text-blue-600\" />\n              Trainer\n            </Label>\n            <Select value={filters.trainer} onValueChange={(value) => updateFilters({ trainer: value })}>\n              <SelectTrigger className=\"h-9\">\n                <SelectValue placeholder=\"All Trainers\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Trainers</SelectItem>\n                {trainers.map((trainer) => (\n                  <SelectItem key={trainer} value={trainer}>\n                    {trainer}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Month */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm font-medium text-slate-700 flex items-center gap-2\">\n              <Calendar className=\"w-4 h-4 text-blue-600\" />\n              Month\n            </Label>\n            <Select value={filters.month} onValueChange={(value) => updateFilters({ month: value })}>\n              <SelectTrigger className=\"h-9\">\n                <SelectValue placeholder=\"All Months\" />\n              </SelectTrigger>\n              <SelectContent>\n                <SelectItem value=\"all\">All Months</SelectItem>\n                {months.map((month) => (\n                  <SelectItem key={month} value={month}>\n                    {month}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        {/* Advanced Filters Row */}\n        <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n          {/* Performance Level */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm font-medium text-slate-700 flex items-center gap-2\">\n              <Target className=\"w-4 h-4 text-blue-600\" />\n              Performance Level\n            </Label>\n            <Select value={filters.performanceLevel} onValueChange={(value) => updateFilters({ performanceLevel: value })}>\n              <SelectTrigger className=\"h-9\">\n                <SelectValue placeholder=\"All Performance Levels\" />\n              </SelectTrigger>\n              <SelectContent>\n                {performanceLevels.map((level) => (\n                  <SelectItem key={level.value} value={level.value}>\n                    {level.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Class Type */}\n          <div className=\"space-y-2\">\n            <Label className=\"text-sm font-medium text-slate-700 flex items-center gap-2\">\n              <Activity className=\"w-4 h-4 text-blue-600\" />\n              Class Type\n            </Label>\n            <Select value={filters.classType} onValueChange={(value) => updateFilters({ classType: value })}>\n              <SelectTrigger className=\"h-9\">\n                <SelectValue placeholder=\"All Class Types\" />\n              </SelectTrigger>\n              <SelectContent>\n                {classTypes.map((type) => (\n                  <SelectItem key={type.value} value={type.value}>\n                    {type.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n        </div>\n\n        {/* Range Filters Row */}\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          {/* Sessions Range */}\n          <div className=\"space-y-3\">\n            <Label className=\"text-sm font-medium text-slate-700 flex items-center gap-2\">\n              <Activity className=\"w-4 h-4 text-blue-600\" />\n              Sessions Range\n            </Label>\n            <div className=\"grid grid-cols-2 gap-2\">\n              <div>\n                <Input\n                  placeholder=\"Min sessions\"\n                  type=\"number\"\n                  value={filters.minSessions}\n                  onChange={(e) => updateFilters({ minSessions: e.target.value })}\n                  className=\"h-9\"\n                />\n              </div>\n              <div>\n                <Input\n                  placeholder=\"Max sessions\"\n                  type=\"number\"\n                  value={filters.maxSessions}\n                  onChange={(e) => updateFilters({ maxSessions: e.target.value })}\n                  className=\"h-9\"\n                />\n              </div>\n            </div>\n          </div>\n\n          {/* Revenue Range */}\n          <div className=\"space-y-3\">\n            <Label className=\"text-sm font-medium text-slate-700 flex items-center gap-2\">\n              <DollarSign className=\"w-4 h-4 text-blue-600\" />\n              Revenue Range\n            </Label>\n            <div className=\"grid grid-cols-2 gap-2\">\n              <div>\n                <Input\n                  placeholder=\"Min revenue\"\n                  type=\"number\"\n                  value={filters.minRevenue}\n                  onChange={(e) => updateFilters({ minRevenue: e.target.value })}\n                  className=\"h-9\"\n                />\n              </div>\n              <div>\n                <Input\n                  placeholder=\"Max revenue\"\n                  type=\"number\"\n                  value={filters.maxRevenue}\n                  onChange={(e) => updateFilters({ maxRevenue: e.target.value })}\n                  className=\"h-9\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Active Filters Display */}\n        {hasActiveFilters && (\n          <div className=\"pt-4 border-t border-slate-200\">\n            <div className=\"flex items-center gap-2 flex-wrap\">\n              <span className=\"text-sm font-medium text-slate-600\">Active Filters:</span>\n              {Object.entries(filters).map(([key, value]) => {\n                // Don't show inactive filters\n                if (key === 'searchTerm' || key.includes('min') || key.includes('max')) {\n                  if (!value) return null;\n                } else {\n                  if (!value || value === 'all') return null;\n                }\n                \n                const displayValue = key.includes('min') || key.includes('max') ? \n                  `${key.replace(/([A-Z])/g, ' $1').toLowerCase()}: ${value}` : \n                  `${key.replace(/([A-Z])/g, ' $1').toLowerCase()}: ${value}`;\n                return (\n                  <Badge key={key} variant=\"secondary\" className=\"text-xs\">\n                    {displayValue}\n                    <button\n                      onClick={() => {\n                        const resetValue = (key === 'searchTerm' || key.includes('min') || key.includes('max')) ? '' : 'all';\n                        updateFilters({ [key]: resetValue } as Partial<EnhancedFilters>);\n                      }}\n                      className=\"ml-1 hover:text-blue-600\"\n                    >\n                      <X className=\"w-3 h-3\" />\n                    </button>\n                  </Badge>\n                );\n              })}\n            </div>\n          </div>\n        )}\n      </CardContent>\n    </Card>\n  );\n};","import React from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { TrainerNameCell } from '@/components/ui/TrainerAvatar';\nimport { \n  Users, \n  Activity, \n  DollarSign, \n  Target, \n  TrendingUp, \n  TrendingDown, \n  Zap,\n  Award,\n  Calendar,\n  BarChart3\n} from 'lucide-react';\nimport { formatCurrency, formatNumber } from '@/utils/formatters';\nimport { ProcessedTrainerData } from './TrainerDataProcessor';\nimport { cn } from '@/lib/utils';\n\ninterface EnhancedTrainerMetricCardsProps {\n  data: ProcessedTrainerData[];\n  onCardClick?: (title: string, data: any) => void;\n}\n\nexport const EnhancedTrainerMetricCards: React.FC<EnhancedTrainerMetricCardsProps> = ({ data, onCardClick }) => {\n  const summaryStats = React.useMemo(() => {\n    if (!data.length) return null;\n\n    const totalTrainers = new Set(data.map(d => d.trainerName)).size;\n    const totalSessions = data.reduce((sum, d) => sum + d.totalSessions, 0);\n    const totalRevenue = data.reduce((sum, d) => sum + d.totalPaid, 0);\n    const totalCustomers = data.reduce((sum, d) => sum + d.totalCustomers, 0);\n    const avgClassSize = totalSessions > 0 ? totalCustomers / totalSessions : 0;\n    const avgRevenue = totalTrainers > 0 ? totalRevenue / totalTrainers : 0;\n    const avgRevenuePerSession = totalSessions > 0 ? totalRevenue / totalSessions : 0;\n    \n    // Calculate utilization rate (non-empty sessions / total sessions)\n    const totalNonEmptySessions = data.reduce((sum, d) => sum + d.nonEmptySessions, 0);\n    const utilizationRate = totalSessions > 0 ? (totalNonEmptySessions / totalSessions) * 100 : 0;\n\n    // Calculate weighted conversion and retention rates (by new members)\n    const totalNewMembers = data.reduce((sum, d) => sum + (d.newMembers || 0), 0);\n    const totalConverted = data.reduce((sum, d) => sum + (d.convertedMembers || 0), 0);\n    const totalRetained = data.reduce((sum, d) => sum + (d.retainedMembers || 0), 0);\n    const avgConversionRate = totalNewMembers > 0 ? (totalConverted / totalNewMembers) * 100 : 0;\n    const avgRetentionRate = totalNewMembers > 0 ? (totalRetained / totalNewMembers) * 100 : 0;\n\n    return {\n      totalTrainers,\n      totalSessions,\n      totalRevenue,\n      totalCustomers,\n      avgClassSize,\n      avgRevenue,\n      avgRevenuePerSession,\n      utilizationRate,\n      avgConversionRate,\n      avgRetentionRate\n    };\n  }, [data]);\n\n  if (!summaryStats) {\n    return null;\n  }\n\n  const metricCards = [\n    {\n      title: 'Active Trainers',\n      value: formatNumber(summaryStats.totalTrainers),\n      subtitle: 'Total instructors',\n      icon: Users,\n      gradient: 'from-blue-500 to-cyan-600',\n      bgGradient: 'from-blue-50 to-cyan-50',\n      borderColor: 'border-blue-200',\n      change: '+5.2%',\n      changeType: 'positive' as const,\n      details: [\n        { label: 'Avg Sessions/Trainer', value: (summaryStats.totalSessions / summaryStats.totalTrainers).toFixed(1) },\n        { label: 'Avg Revenue/Trainer', value: formatCurrency(summaryStats.avgRevenue) }\n      ]\n    },\n    {\n      title: 'Total Sessions',\n      value: formatNumber(summaryStats.totalSessions),\n      subtitle: 'Classes conducted',\n      icon: Activity,\n      gradient: 'from-green-500 to-emerald-600',\n      bgGradient: 'from-green-50 to-emerald-50',\n      borderColor: 'border-green-200',\n      change: '+12.8%',\n      changeType: 'positive' as const,\n      details: [\n        { label: 'Utilization Rate', value: `${summaryStats.utilizationRate.toFixed(1)}%` },\n        { label: 'Avg Class Size', value: summaryStats.avgClassSize.toFixed(1) }\n      ]\n    },\n    {\n      title: 'Total Revenue',\n      value: formatCurrency(summaryStats.totalRevenue),\n      subtitle: 'Generated income',\n      icon: DollarSign,\n      gradient: 'from-purple-500 to-violet-600',\n      bgGradient: 'from-purple-50 to-violet-50',\n      borderColor: 'border-purple-200',\n      change: '+8.7%',\n      changeType: 'positive' as const,\n      details: [\n        { label: 'Revenue/Session', value: formatCurrency(summaryStats.avgRevenuePerSession) },\n        { label: 'Revenue/Customer', value: formatCurrency(summaryStats.totalRevenue / summaryStats.totalCustomers) }\n      ]\n    },\n    {\n      title: 'Total Members',\n      value: formatNumber(summaryStats.totalCustomers),\n      subtitle: 'Class attendees',\n      icon: Target,\n      gradient: 'from-orange-500 to-red-500',\n      bgGradient: 'from-orange-50 to-red-50',\n      borderColor: 'border-orange-200',\n      change: '+15.3%',\n      changeType: 'positive' as const,\n      details: [\n        { label: 'Members/Session', value: summaryStats.avgClassSize.toFixed(1) },\n        { label: 'Total Unique', value: formatNumber(summaryStats.totalCustomers) }\n      ]\n    },\n    {\n      title: 'Efficiency Score',\n      value: `${summaryStats.utilizationRate.toFixed(1)}%`,\n      subtitle: 'Session utilization',\n      icon: Zap,\n      gradient: 'from-indigo-500 to-purple-600',\n      bgGradient: 'from-indigo-50 to-purple-50',\n      borderColor: 'border-indigo-200',\n      change: '+3.2%',\n      changeType: 'positive' as const,\n      details: [\n        { label: 'Fill Rate', value: `${summaryStats.utilizationRate.toFixed(1)}%` },\n        { label: 'Performance', value: 'Excellent' }\n      ]\n    },\n    {\n      title: 'Conversion Rate',\n      value: `${summaryStats.avgConversionRate.toFixed(1)}%`,\n      subtitle: 'Member conversion',\n      icon: TrendingUp,\n      gradient: 'from-teal-500 to-green-600',\n      bgGradient: 'from-teal-50 to-green-50',\n      borderColor: 'border-teal-200',\n      change: '+2.1%',\n      changeType: 'positive' as const,\n      details: [\n        { label: 'Retention Rate', value: `${summaryStats.avgRetentionRate.toFixed(1)}%` },\n        { label: 'Performance', value: 'Strong' }\n      ]\n    },\n    {\n      title: 'Revenue / Session',\n      value: formatCurrency(summaryStats.avgRevenuePerSession),\n      subtitle: 'Average per class',\n      icon: BarChart3,\n      gradient: 'from-fuchsia-500 to-pink-600',\n      bgGradient: 'from-fuchsia-50 to-pink-50',\n      borderColor: 'border-fuchsia-200',\n      change: '+1.2%',\n      changeType: 'positive' as const,\n      details: [\n        { label: 'Total Revenue', value: formatCurrency(summaryStats.totalRevenue) },\n        { label: 'Total Sessions', value: formatNumber(summaryStats.totalSessions) }\n      ]\n    },\n    {\n      title: 'Retention Rate',\n      value: `${summaryStats.avgRetentionRate.toFixed(1)}%`,\n      subtitle: 'Weighted across months',\n      icon: Award,\n      gradient: 'from-sky-500 to-blue-600',\n      bgGradient: 'from-sky-50 to-blue-50',\n      borderColor: 'border-sky-200',\n      change: '+0.8%',\n      changeType: 'positive' as const,\n      details: [\n        { label: 'Conversion Rate', value: `${summaryStats.avgConversionRate.toFixed(1)}%` },\n        { label: 'Utilization', value: `${summaryStats.utilizationRate.toFixed(1)}%` }\n      ]\n    }\n  ];\n\n  // Get top trainers for each metric (for avatars)\n  const topTrainers = React.useMemo(() => {\n    if (!data.length) return [];\n    \n    // Get top 3 trainers by revenue\n    const trainerRevenue = new Map<string, number>();\n    data.forEach(d => {\n      const current = trainerRevenue.get(d.trainerName) || 0;\n      trainerRevenue.set(d.trainerName, current + d.totalPaid);\n    });\n    \n    return Array.from(trainerRevenue.entries())\n      .sort((a, b) => b[1] - a[1])\n      .slice(0, 3)\n      .map(([name]) => name);\n  }, [data]);\n\n  // Helper to get trainer initials\n  const getInitials = (name: string) => {\n    return name.split(' ').map(n => n[0]).join('').toUpperCase().slice(0, 2);\n  };\n\n  return (\n    <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6\">\n      {metricCards.slice(0, 8).map((card, index) => {\n        const Icon = card.icon;\n        const isPositive = card.changeType === 'positive';\n        \n        return (\n          <Card\n            key={card.title}\n            onClick={() => onCardClick?.(card.title, { ...summaryStats, metric: card.title })}\n            className={cn(\n              \"group relative overflow-hidden cursor-pointer transition-all duration-700\",\n              \"bg-white hover:bg-gradient-to-br hover:from-gray-900 hover:via-slate-900 hover:to-slate-900\",\n              index % 4 === 0 && \"border-t-4 border-blue-700 hover:border-blue-700 shadow-lg\",\n              index % 4 === 1 && \"border-t-4 border-green-700 hover:border-green-700 shadow-lg\",\n              index % 4 === 2 && \"border-t-4 border-purple-700 hover:border-purple-700 shadow-lg\",\n              index % 4 === 3 && \"border-t-4 border-amber-700 hover:border-amber-700 shadow-lg\",\n              \"hover:shadow-2xl hover:shadow-slate-900/30\",\n              \"hover:-translate-y-2 hover:scale-[1.02]\"\n            )}\n          >\n            <CardContent className=\"p-6 relative\">\n              {/* Background Icon */}\n              <div className=\"absolute top-4 right-4 opacity-10 group-hover:opacity-20 transition-all duration-700\">\n                <Icon className={cn(\n                  \"w-12 h-12 transition-all duration-700\",\n                  index % 4 === 0 && \"text-blue-700\",\n                  index % 4 === 1 && \"text-green-700\",\n                  index % 4 === 2 && \"text-purple-700\",\n                  index % 4 === 3 && \"text-amber-700\",\n                  \"group-hover:text-white/40\"\n                )} />\n              </div>\n              \n              <div className=\"relative z-10\">\n                {/* Header */}\n                <div className=\"flex items-center justify-between mb-4\">\n                  <div className=\"flex items-center gap-6\">\n                    <div className={cn(\n                      \"p-4 rounded-2xl transition-all duration-700 border-1 shadow-md\",\n                      index % 4 === 0 && \"bg-gradient-to-br from-blue-700 to-blue-600 border-blue-900 text-white shadow-blue-200\",\n                      index % 4 === 1 && \"bg-gradient-to-br from-green-700 to-green-600 border-green-900 text-white shadow-green-200\",\n                      index % 4 === 2 && \"bg-gradient-to-br from-purple-700 to-purple-600 border-purple-900 text-white shadow-purple-200\",\n                      index % 4 === 3 && \"bg-gradient-to-br from-amber-700 to-amber-600 border-amber-900 text-white shadow-amber-200\",\n                      \"group-hover:bg-white/20 group-hover:border-white/40 group-hover:text-white group-hover:shadow-white/20\"\n                    )}>\n                      <Icon className=\"w-6 h-6 drop-shadow-sm\" />\n                    </div>\n                    <div className=\"flex items-center gap-2\">\n                      <h3 className=\"font-semibold text-lg text-slate-900 group-hover:text-white/95 transition-colors duration-700\">\n                        {card.title}\n                      </h3>\n                    </div>\n                  </div>\n                  \n                  {/* Change Badge */}\n                  <div className={cn(\n                    \"flex items-center space-x-1 px-3 py-1 rounded-full text-xs font-semibold transition-all duration-700\",\n                    isPositive\n                      ? \"bg-green-50 text-green-700 group-hover:bg-green-400/30 group-hover:text-green-100\"\n                      : \"bg-red-50 text-red-700 group-hover:bg-red-400/30 group-hover:text-red-100\"\n                  )}>\n                    {isPositive ? <TrendingUp className=\"w-3 h-3\" /> : <TrendingDown className=\"w-3 h-3\" />}\n                    <span>{card.change}</span>\n                  </div>\n                </div>\n\n                {/* Value */}\n                <div className=\"space-y-2 mb-4\">\n                  <p className={cn(\n                    \"text-4xl font-bold transition-all duration-700 text-slate-900 group-hover:text-white\"\n                  )}>\n                    {card.value}\n                  </p>\n                  <p className={cn(\n                    \"text-xs text-slate-500 group-hover:text-slate-200 transition-colors\"\n                  )}>\n                    {card.subtitle}\n                  </p>\n                </div>\n\n                {/* Top Trainers */}\n                <div className=\"flex items-center gap-2 mb-4\">\n                  <div className=\"flex -space-x-2\">\n                    {topTrainers.slice(0, 3).map((trainer, idx) => (\n                      <div \n                        key={trainer}\n                        className={cn(\n                          \"border-2 border-white group-hover:border-slate-800 transition-all duration-500\",\n                          \"hover:z-10 hover:scale-110\"\n                        )}\n                      >\n                        <TrainerNameCell \n                          name={trainer} \n                          className=\"w-8 h-8 text-xs\"\n                          showName={false}\n                        />\n                      </div>\n                    ))}\n                  </div>\n                  <span className=\"text-xs text-slate-600 group-hover:text-slate-300 transition-colors\">\n                    Top {topTrainers.length} Trainers\n                  </span>\n                </div>\n              </div>\n              \n              {/* Details Footer */}\n              <div className={cn(\n                \"mt-4 p-3 border-t border-l-4 transition-all duration-700\",\n                \"bg-slate-50 group-hover:bg-slate-800/50 border-t-slate-200 group-hover:border-t-white/10\",\n                index % 4 === 0 && \"border-l-blue-700\",\n                index % 4 === 1 && \"border-l-green-700\",\n                index % 4 === 2 && \"border-l-purple-700\",\n                index % 4 === 3 && \"border-l-amber-700\"\n              )}>\n                <div className=\"space-y-1.5\">\n                  {card.details.map((detail, idx) => (\n                    <div key={idx} className=\"flex items-center justify-between text-xs\">\n                      <span className=\"text-slate-600 group-hover:text-slate-300 transition-colors duration-700\">\n                        {detail.label}\n                      </span>\n                      <span className=\"font-semibold text-slate-900 group-hover:text-white transition-colors duration-700\">\n                        {detail.value}\n                      </span>\n                    </div>\n                  ))}\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        );\n      })}\n    </div>\n  );\n};","\nimport React, { useState, useMemo, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { usePayrollData } from '@/hooks/usePayrollData';\nimport { useSessionsData } from '@/hooks/useSessionsData';\nimport { useCheckinsData } from '@/hooks/useCheckinsData';\nimport { TrainerNameCell, getTrainerImage } from '@/components/ui/TrainerAvatar';\nimport { TrainerYearOnYearTable } from './TrainerYearOnYearTable';\nimport { TrainerPerformanceDetailTable } from './TrainerPerformanceDetailTable';\nimport { TrainerEfficiencyAnalysisTable } from './TrainerEfficiencyAnalysisTable';\nimport { MonthOnMonthTrainerTable } from './MonthOnMonthTrainerTable';\nimport { ComprehensiveTrainerDrillDown } from './ComprehensiveTrainerDrillDown';\nimport { TrainerFilterSection } from './TrainerFilterSection';\nimport { TrainerMetricTabs } from './TrainerMetricTabs';\nimport { EnhancedTrainerMetricCards } from './EnhancedTrainerMetricCards';\nimport { AdvancedExportButton } from '@/components/ui/AdvancedExportButton';\nimport { processTrainerData } from './TrainerDataProcessor';\nimport { formatCurrency, formatNumber, formatRevenue } from '@/utils/formatters';\nimport { Users, Calendar, TrendingUp, TrendingDown, AlertCircle, Award, Target, DollarSign, Activity, FileDown, Crown, Trophy, Medal, Maximize2, Download, RotateCcw } from 'lucide-react';\nimport { InfoPopover } from '@/components/ui/InfoSidebar';\nimport { StudioLocationTabs } from '@/components/ui/StudioLocationTabs';\nimport { BrandSpinner } from '@/components/ui/BrandSpinner';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, LineChart, Line, PieChart, Pie, Cell } from 'recharts';\n\nexport const EnhancedTrainerPerformanceSection = () => {\n  const { data: payrollData, isLoading, error } = usePayrollData();\n  const { data: sessionsData } = useSessionsData();\n  const { data: checkinsData } = useCheckinsData();\n  const [selectedTab, setSelectedTab] = useState('month-on-month');\n  const [selectedTrainer, setSelectedTrainer] = useState<string | null>(null);\n  const [drillDownData, setDrillDownData] = useState<any>(null);\n  const [clickedMetric, setClickedMetric] = useState<string | null>(null);\n  const [isFiltersCollapsed, setIsFiltersCollapsed] = useState(true);\n  const [selectedLocation, setSelectedLocation] = useState('Kwality House, Kemps Corner');\n  const [isRendering, setIsRendering] = useState(true);\n  const [filters, setFilters] = useState({\n    location: '',\n    trainer: '',\n    month: '',\n    searchTerm: '',\n    performanceLevel: '',\n    classType: '',\n    minSessions: null as number | null,\n    maxSessions: null as number | null,\n    minRevenue: null as number | null,\n    maxRevenue: null as number | null\n  });\n\n  // Base processed data\n  const baseProcessed = useMemo(() => {\n    if (!payrollData || payrollData.length === 0) return [];\n    return processTrainerData(payrollData);\n  }, [payrollData]);\n\n  // Data with all filters applied (including month) for cards, charts, efficiency, and detail tables\n  const processedData = useMemo(() => {\n    let data = [...baseProcessed];\n    \n    // Apply location (tabs) and explicit location filter\n    if (selectedLocation !== 'All Locations') {\n      const beforeCount = data.length;\n      data = data.filter(d => {\n        const location = d.location || '';\n        // Use exact match since we know the exact location names from diagnostic logging\n        return location === selectedLocation;\n      });\n      // Removed diagnostic logs about location filter to reduce console noise\n    }\n    // Remove the filters.location check - only use tab location selection\n    // if (filters.location) {\n    //   data = data.filter(d => d.location === filters.location);\n    // }\n    \n    // Apply trainer filter\n    if (filters.trainer) {\n      data = data.filter(d => d.trainerName === filters.trainer);\n    }\n    \n    // Apply month filter\n    if (filters.month) {\n      data = data.filter(d => d.monthYear === filters.month);\n    }\n    \n    // Apply enhanced filters from rebuilt TrainerFilterSection\n    if (filters.searchTerm) {\n      const searchLower = filters.searchTerm.toLowerCase();\n      data = data.filter(d => \n        d.trainerName.toLowerCase().includes(searchLower) ||\n        (d.location || '').toLowerCase().includes(searchLower)\n      );\n    }\n    \n    if (filters.minSessions !== null) {\n      data = data.filter(d => d.totalSessions >= filters.minSessions);\n    }\n    \n    if (filters.maxSessions !== null) {\n      data = data.filter(d => d.totalSessions <= filters.maxSessions);\n    }\n    \n    if (filters.minRevenue !== null) {\n      data = data.filter(d => d.totalPaid >= filters.minRevenue);\n    }\n    \n    if (filters.maxRevenue !== null) {\n      data = data.filter(d => d.totalPaid <= filters.maxRevenue);\n    }\n    \n    if (filters.performanceLevel) {\n      // Sort by total revenue to determine performance levels\n      const allData = [...data];\n      const sortedByRevenue = allData.sort((a, b) => b.totalPaid - a.totalPaid);\n      const total = sortedByRevenue.length;\n      const topQuartile = Math.ceil(total * 0.25);\n      const bottomQuartile = Math.ceil(total * 0.25);\n      \n      if (filters.performanceLevel === 'high') {\n        const highPerformers = sortedByRevenue.slice(0, topQuartile);\n        data = data.filter(d => highPerformers.some(hp => hp.trainerName === d.trainerName && hp.monthYear === d.monthYear));\n      } else if (filters.performanceLevel === 'low') {\n        const lowPerformers = sortedByRevenue.slice(total - bottomQuartile);\n        data = data.filter(d => lowPerformers.some(lp => lp.trainerName === d.trainerName && lp.monthYear === d.monthYear));\n      } else if (filters.performanceLevel === 'medium') {\n        const mediumPerformers = sortedByRevenue.slice(topQuartile, total - bottomQuartile);\n        data = data.filter(d => mediumPerformers.some(mp => mp.trainerName === d.trainerName && mp.monthYear === d.monthYear));\n      }\n    }\n    \n    if (filters.classType) {\n      // Filter based on class type dominance\n      if (filters.classType === 'cycle') {\n        data = data.filter(d => d.cycleSessions > d.barreSessions && d.cycleSessions > (d.strengthSessions || 0));\n      } else if (filters.classType === 'barre') {\n        data = data.filter(d => d.barreSessions > d.cycleSessions && d.barreSessions > (d.strengthSessions || 0));\n      } else if (filters.classType === 'strength') {\n        data = data.filter(d => (d.strengthSessions || 0) > d.cycleSessions && (d.strengthSessions || 0) > d.barreSessions);\n      }\n    }\n    \n    return data;\n  }, [baseProcessed, filters, selectedLocation]);\n\n  // Data that ignores the month filter (but respects location/trainer) for MoM/YoY\n  const processedDataNoMonth = useMemo(() => {\n    let data = [...baseProcessed];\n    \n    if (selectedLocation !== 'All Locations') {\n      data = data.filter(d => {\n        const location = d.location || '';\n        // Use exact match since we know the exact location names\n        return location === selectedLocation;\n      });\n    }\n    // Remove the filters.location check - only use tab location selection\n    // if (filters.location) {\n    //   data = data.filter(d => d.location === filters.location);\n    // }\n    if (filters.trainer) {\n      data = data.filter(d => d.trainerName === filters.trainer);\n    }\n    \n    // Apply enhanced filters except month filter\n    if (filters.searchTerm) {\n      const searchLower = filters.searchTerm.toLowerCase();\n      data = data.filter(d => \n        d.trainerName.toLowerCase().includes(searchLower) ||\n        (d.location || '').toLowerCase().includes(searchLower)\n      );\n    }\n    \n    if (filters.minSessions !== null) {\n      data = data.filter(d => d.totalSessions >= filters.minSessions);\n    }\n    \n    if (filters.maxSessions !== null) {\n      data = data.filter(d => d.totalSessions <= filters.maxSessions);\n    }\n    \n    if (filters.minRevenue !== null) {\n      data = data.filter(d => d.totalPaid >= filters.minRevenue);\n    }\n    \n    if (filters.maxRevenue !== null) {\n      data = data.filter(d => d.totalPaid <= filters.maxRevenue);\n    }\n    \n    if (filters.performanceLevel) {\n      // Sort by total revenue to determine performance levels\n      const allData = [...data];\n      const sortedByRevenue = allData.sort((a, b) => b.totalPaid - a.totalPaid);\n      const total = sortedByRevenue.length;\n      const topQuartile = Math.ceil(total * 0.25);\n      const bottomQuartile = Math.ceil(total * 0.25);\n      \n      if (filters.performanceLevel === 'high') {\n        const highPerformers = sortedByRevenue.slice(0, topQuartile);\n        data = data.filter(d => highPerformers.some(hp => hp.trainerName === d.trainerName && hp.monthYear === d.monthYear));\n      } else if (filters.performanceLevel === 'low') {\n        const lowPerformers = sortedByRevenue.slice(total - bottomQuartile);\n        data = data.filter(d => lowPerformers.some(lp => lp.trainerName === d.trainerName && lp.monthYear === d.monthYear));\n      } else if (filters.performanceLevel === 'medium') {\n        const mediumPerformers = sortedByRevenue.slice(topQuartile, total - bottomQuartile);\n        data = data.filter(d => mediumPerformers.some(mp => mp.trainerName === d.trainerName && mp.monthYear === d.monthYear));\n      }\n    }\n    \n    if (filters.classType) {\n      // Filter based on class type dominance\n      if (filters.classType === 'cycle') {\n        data = data.filter(d => d.cycleSessions > d.barreSessions && d.cycleSessions > (d.strengthSessions || 0));\n      } else if (filters.classType === 'barre') {\n        data = data.filter(d => d.barreSessions > d.cycleSessions && d.barreSessions > (d.strengthSessions || 0));\n      } else if (filters.classType === 'strength') {\n        data = data.filter(d => (d.strengthSessions || 0) > d.cycleSessions && (d.strengthSessions || 0) > d.barreSessions);\n      }\n    }\n    \n    // Intentionally DO NOT apply filters.month here\n    return data;\n  }, [baseProcessed, filters.location, filters.trainer, filters.searchTerm, filters.minSessions, filters.maxSessions, filters.minRevenue, filters.maxRevenue, filters.performanceLevel, filters.classType, selectedLocation]);\n\n  const handleRowClick = (trainer: string, data: any) => {\n    // Simply pass the data directly - the modal will handle processing\n    // The data object already contains all the processed trainer information\n    console.log(' Trainer clicked:', trainer, data);\n    // Determine context strictly by source type\n    const clickType = data?.type || 'generic';\n    const effectiveLocation = data.location || (filters.location || selectedLocation);\n    let effectiveMonth = '';\n    if (clickType === 'trainer-month-cell') {\n      // Only month-table cell clicks enforce a month context\n      effectiveMonth = data.monthYear || filters.month || '';\n    } else if (clickType === 'trainer-efficiency') {\n      // Efficiency table should show the most recent month data, not filtered month\n      effectiveMonth = data.monthYear || '';\n    } else {\n      // Other sources only use the globally selected month if explicitly set\n      effectiveMonth = filters.month || '';\n    }\n    \n    setSelectedTrainer(trainer);\n    setClickedMetric('overview');\n    setDrillDownData({\n      // Spread all existing processed data\n      ...data,\n      // Ensure trainerName is set\n      trainerName: trainer,\n      location: effectiveLocation,\n      monthYear: data.monthYear || effectiveMonth,\n      contextFilters: { location: effectiveLocation, month: effectiveMonth },\n      // Add raw payroll data for this trainer\n      rawPayrollRecords: (payrollData || []).filter(r => r.teacherName === trainer),\n    });\n  };\n\n  const closeDrillDown = () => {\n    setSelectedTrainer(null);\n    setDrillDownData(null);\n  };\n\n  // Calculate summary statistics and metrics\n  const summaryStats = useMemo(() => {\n    if (!processedData.length) return null;\n\n    const totalTrainers = new Set(processedData.map(d => d.trainerName)).size;\n    const totalSessions = processedData.reduce((sum, d) => sum + d.totalSessions, 0);\n    const totalRevenue = processedData.reduce((sum, d) => sum + d.totalPaid, 0);\n    const totalCustomers = processedData.reduce((sum, d) => sum + d.totalCustomers, 0);\n    const avgClassSize = totalSessions > 0 ? totalCustomers / totalSessions : 0;\n    const avgRevenue = totalTrainers > 0 ? totalRevenue / totalTrainers : 0;\n\n    return {\n      totalTrainers,\n      totalSessions,\n      totalRevenue,\n      totalCustomers,\n      avgClassSize,\n      avgRevenue\n    };\n  }, [processedData]);\n\n  // Interactive rankings controls (metric + show count)\n  const [rankingMetric, setRankingMetric] = useState<'revenue' | 'sessions' | 'customers' | 'efficiency' | 'classAvg' | 'conversion' | 'retention' | 'emptySessions' | 'fillRate'>('revenue');\n  const [rankingCount, setRankingCount] = useState<number>(5);\n\n  // Build ranked trainers based on selected metric\n  const rankedTrainers = useMemo(() => {\n    if (!processedData.length) return [] as any[];\n\n    const byTrainer = processedData.reduce((acc, r) => {\n      const key = r.trainerName;\n      if (!acc[key]) {\n        acc[key] = {\n          name: key,\n          location: r.location,\n          totalRevenue: 0,\n          totalSessions: 0,\n          totalCustomers: 0,\n          nonEmptySessions: 0,\n          totalConverted: 0,\n          totalNew: 0,\n          totalRetained: 0,\n          conversionSum: 0,\n          retentionSum: 0,\n          records: 0,\n          emptySessions: 0\n        } as any;\n      }\n      const t = acc[key];\n      t.totalRevenue += r.totalPaid || 0;\n      t.totalSessions += r.totalSessions || 0;\n      t.totalCustomers += r.totalCustomers || 0;\n      t.nonEmptySessions += r.nonEmptySessions || 0;\n      // processed data fields use `convertedMembers`, `newMembers`, `retainedMembers`, `conversionRate`\n      t.totalConverted += (r.convertedMembers ?? r.converted ?? 0);\n      t.totalNew += (r.newMembers ?? r.new ?? 0);\n      t.totalRetained += (r.retainedMembers ?? r.retained ?? 0);\n      t.conversionSum += (r.conversionRate ?? 0);\n      t.retentionSum += (r.retentionRate ?? 0);\n      t.emptySessions += (r.emptySessions ?? r.totalEmptySessions ?? 0);\n      t.records += 1;\n      return acc;\n    }, {} as Record<string, any>);\n\n    const trainers = Object.values(byTrainer).map((t: any) => {\n      const efficiency = t.totalSessions > 0 ? t.totalRevenue / t.totalSessions : 0;\n      const classAvg = t.totalSessions > 0 ? (t.nonEmptySessions > 0 ? (t.totalCustomers / t.nonEmptySessions) : (t.totalCustomers / t.totalSessions)) : 0;\n      const conversionRate = t.records > 0 ? t.conversionSum / t.records : 0;\n      const retentionRate = t.records > 0 ? t.retentionSum / t.records : 0;\n      // expose aggregated totals too\n      return { ...t, efficiency, classAvg, conversionRate, retentionRate, newMembers: t.totalNew, convertedMembers: t.totalConverted, retainedMembers: t.totalRetained, fillRate: t.totalSessions > 0 ? (t.totalCustomers / (t.totalSessions * 20)) * 100 : 0 };\n    });\n\n    const sortFn = (a: any, b: any) => {\n      switch (rankingMetric) {\n        case 'revenue': return b.totalRevenue - a.totalRevenue;\n        case 'sessions': return b.totalSessions - a.totalSessions;\n        case 'customers': return b.totalCustomers - a.totalCustomers;\n        case 'efficiency': return b.efficiency - a.efficiency;\n        case 'classAvg': return b.classAvg - a.classAvg;\n        case 'fillRate': return b.fillRate - a.fillRate;\n        case 'conversion': return b.conversionRate - a.conversionRate;\n        case 'retention': return b.retentionRate - a.retentionRate;\n        case 'emptySessions': return b.emptySessions - a.emptySessions;\n        default: return b.totalRevenue - a.totalRevenue;\n      }\n    };\n\n    return trainers.sort(sortFn);\n  }, [processedData, rankingMetric]);\n\n  const topList = rankedTrainers.slice(0, rankingCount);\n  const bottomList = rankedTrainers.slice(-rankingCount).reverse();\n\n  // Chart data\n  const chartData = useMemo(() => {\n    if (!processedData.length) return [];\n\n    const monthlyData = processedData.reduce((acc, trainer) => {\n      const month = trainer.monthYear;\n      if (!acc[month]) {\n        acc[month] = { month, sessions: 0, revenue: 0, customers: 0 };\n      }\n      acc[month].sessions += trainer.totalSessions;\n      acc[month].revenue += trainer.totalPaid;\n      acc[month].customers += trainer.totalCustomers;\n      return acc;\n    }, {} as Record<string, any>);\n\n    return Object.values(monthlyData).sort((a: any, b: any) => a.month.localeCompare(b.month));\n  }, [processedData]);\n\n  // Handle rendering state - wait for data to be processed before showing content\n  useEffect(() => {\n    if (!isLoading && payrollData && payrollData.length > 0 && processedData.length > 0) {\n      // Give a small delay to ensure all heavy computations are done\n      const timer = setTimeout(() => {\n        setIsRendering(false);\n      }, 100);\n      return () => clearTimeout(timer);\n    } else if (!isLoading && (!payrollData || payrollData.length === 0)) {\n      // If there's no data, stop rendering immediately\n      setIsRendering(false);\n    }\n  }, [isLoading, payrollData, processedData]);\n\n  if (isLoading || isRendering) {\n    return null; // Global loader handles this\n  }\n\n  if (error) {\n    return (\n      <Card className=\"bg-gradient-to-br from-red-50 to-red-100 border-red-200 shadow-xl\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center space-x-2 text-red-700\">\n            <AlertCircle className=\"w-5 h-5\" />\n            <span>Error loading trainer data: {error}</span>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  if (!processedData.length) {\n    return (\n      <Card className=\"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl\">\n        <CardContent className=\"p-6\">\n          <p className=\"text-center text-slate-600\">\n            No trainer performance data available for: {selectedLocation}\n          </p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Enhanced Location Tabs - matching Client Retention styling */}\n      <StudioLocationTabs \n        activeLocation={selectedLocation === 'All Locations' ? 'all' : \n          selectedLocation.toLowerCase().includes('kwality') ? 'kwality' : \n          selectedLocation.toLowerCase().includes('supreme') ? 'supreme' : \n          selectedLocation.toLowerCase().includes('kenkere') ? 'kenkere' : 'all'}\n        onLocationChange={(locationId) => {\n          const locationMap: Record<string, string> = {\n            'all': 'All Locations',\n            'kwality': 'Kwality House, Kemps Corner',\n            'supreme': 'Supreme HQ, Bandra',\n            'kenkere': 'Kenkere House'  // Match actual data: just 'Kenkere House'\n          };\n          const newLocation = locationMap[locationId] || 'All Locations';\n          console.log(` Location tab clicked: ${locationId}  ${newLocation}`);\n          setSelectedLocation(newLocation);\n          \n          // Clear the location filter in the filter section to avoid conflicts\n          setFilters(prevFilters => ({\n            ...prevFilters,\n            location: ''  // Reset location filter when tab changes\n          }));\n        }}\n        showInfoPopover={true}\n        infoPopoverContext=\"trainer-performance-overview\"\n      />\n\n      {/* Filter Section */}\n  <div className=\"glass-card modern-card-hover p-6 rounded-2xl mb-6\" id=\"filters\">\n\n        <TrainerFilterSection\n          data={baseProcessed.map(p => ({ \n            teacherName: p.trainerName, \n            location: p.location, \n            monthYear: p.monthYear,\n            totalSessions: p.totalSessions,\n            totalPaid: p.totalPaid\n          })) || []}\n          onFiltersChange={setFilters}\n          isCollapsed={isFiltersCollapsed}\n          onToggleCollapse={() => setIsFiltersCollapsed(!isFiltersCollapsed)}\n        />\n      </div>\n\n      {/* Enhanced Metric Cards - matching Sales styling */}\n  <div className=\"glass-card modern-card-hover rounded-2xl p-6 soft-bounce stagger-2\" id=\"metrics\">\n        <EnhancedTrainerMetricCards \n          data={processedData} \n          onCardClick={(title, data) => {\n            // Open drill-down modal with trainer data and remember clicked metric\n            const trainerName = title;\n            const effectiveLocation = data.location || (filters.location || selectedLocation);\n            const effectiveMonth = filters.month || '';\n            setSelectedTrainer(trainerName);\n            setClickedMetric(title);\n            setDrillDownData({ ...data, trainerName, location: effectiveLocation, monthYear: effectiveMonth, type: 'metric-card', contextFilters: { location: effectiveLocation, month: effectiveMonth } });\n          }}\n        />\n      </div>\n\n      {/* Charts Section - Enhanced 3D Interactive */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Monthly Performance Trends - 3D Line Chart */}\n        <Card className=\"group relative bg-gradient-to-br from-white via-blue-50/30 to-white border-0 shadow-xl hover:shadow-2xl transition-all duration-500 overflow-hidden\">\n          {/* Glow effect on hover */}\n          <div className=\"absolute -inset-1 bg-gradient-to-r from-blue-600/20 to-cyan-600/20 opacity-0 group-hover:opacity-100 blur-xl transition-opacity duration-500 -z-10\" />\n          \n          <CardHeader>\n            <CardTitle className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"p-2 bg-gradient-to-br from-blue-600 to-blue-700 rounded-lg text-white shadow-lg group-hover:scale-110 transition-transform duration-300\">\n                  <TrendingUp className=\"w-5 h-5\" />\n                </div>\n                <div>\n                  <div className=\"text-lg font-bold bg-gradient-to-r from-blue-600 to-blue-800 bg-clip-text text-transparent\">\n                    Monthly Performance Trends\n                  </div>\n                  <div className=\"text-xs text-slate-500 font-normal\">Revenue & session growth over time</div>\n                </div>\n              </div>\n              {/* Interactive Chart Controls */}\n              <div className=\"flex gap-2\">\n                <Button size=\"sm\" variant=\"outline\" className=\"bg-white/50 hover:bg-blue-50 border-blue-200\">\n                  <Maximize2 className=\"w-4 h-4\" />\n                </Button>\n                <Button size=\"sm\" variant=\"outline\" className=\"bg-white/50 hover:bg-blue-50 border-blue-200\">\n                  <Download className=\"w-4 h-4\" />\n                </Button>\n                <Button size=\"sm\" variant=\"outline\" className=\"bg-white/50 hover:bg-blue-50 border-blue-200\">\n                  <RotateCcw className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={350}>\n              <LineChart \n                data={chartData}\n                margin={{ top: 20, right: 30, left: 20, bottom: 20 }}\n              >\n                <defs>\n                  <linearGradient id=\"revenueGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"5%\" stopColor=\"#3B82F6\" stopOpacity={0.3}/>\n                    <stop offset=\"95%\" stopColor=\"#3B82F6\" stopOpacity={0}/>\n                  </linearGradient>\n                  <linearGradient id=\"sessionsGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"5%\" stopColor=\"#10B981\" stopOpacity={0.3}/>\n                    <stop offset=\"95%\" stopColor=\"#10B981\" stopOpacity={0}/>\n                  </linearGradient>\n                  <filter id=\"shadow\">\n                    <feDropShadow dx=\"0\" dy=\"2\" stdDeviation=\"3\" floodOpacity=\"0.3\"/>\n                  </filter>\n                </defs>\n                <CartesianGrid \n                  strokeDasharray=\"3 3\" \n                  stroke=\"#e2e8f0\" \n                  strokeOpacity={0.5}\n                />\n                <XAxis \n                  dataKey=\"month\" \n                  stroke=\"#64748b\"\n                  style={{ fontSize: '12px', fontWeight: 500 }}\n                  tick={{ fill: '#64748b' }}\n                />\n                <YAxis \n                  stroke=\"#64748b\"\n                  style={{ fontSize: '12px', fontWeight: 500 }}\n                  tick={{ fill: '#64748b' }}\n                />\n                <Tooltip \n                  contentStyle={{\n                    backgroundColor: 'rgba(15, 23, 42, 0.95)',\n                    border: 'none',\n                    borderRadius: '12px',\n                    boxShadow: '0 10px 40px rgba(0, 0, 0, 0.3)',\n                    padding: '12px 16px',\n                    backdropFilter: 'blur(10px)'\n                  }}\n                  labelStyle={{ color: '#f1f5f9', fontWeight: 600, marginBottom: '8px' }}\n                  itemStyle={{ color: '#e2e8f0', padding: '4px 0' }}\n                  cursor={{ stroke: '#3B82F6', strokeWidth: 2, strokeDasharray: '5 5' }}\n                />\n                <Line \n                  type=\"monotone\" \n                  dataKey=\"revenue\" \n                  stroke=\"#3B82F6\" \n                  strokeWidth={4}\n                  name=\"Revenue\"\n                  dot={{ fill: '#3B82F6', strokeWidth: 2, r: 6, stroke: '#fff', filter: 'url(#shadow)' }}\n                  activeDot={{ r: 8, fill: '#2563EB', stroke: '#fff', strokeWidth: 3 }}\n                  fill=\"url(#revenueGradient)\"\n                  animationDuration={1500}\n                  animationEasing=\"ease-in-out\"\n                />\n                <Line \n                  type=\"monotone\" \n                  dataKey=\"sessions\" \n                  stroke=\"#10B981\" \n                  strokeWidth={3}\n                  strokeDasharray=\"5 5\"\n                  name=\"Sessions\"\n                  dot={{ fill: '#10B981', strokeWidth: 2, r: 5, stroke: '#fff', filter: 'url(#shadow)' }}\n                  activeDot={{ r: 7, fill: '#059669', stroke: '#fff', strokeWidth: 3 }}\n                  animationDuration={1500}\n                  animationEasing=\"ease-in-out\"\n                />\n              </LineChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n\n        {/* Sessions vs Revenue - 3D Bar Chart */}\n        <Card className=\"group relative bg-gradient-to-br from-white via-green-50/30 to-white border-0 shadow-xl hover:shadow-2xl transition-all duration-500 overflow-hidden\">\n          {/* Glow effect on hover */}\n          <div className=\"absolute -inset-1 bg-gradient-to-r from-green-600/20 to-purple-600/20 opacity-0 group-hover:opacity-100 blur-xl transition-opacity duration-500 -z-10\" />\n          \n          <CardHeader>\n            <CardTitle className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-2\">\n                <div className=\"p-2 bg-gradient-to-br from-green-600 to-green-700 rounded-lg text-white shadow-lg group-hover:scale-110 transition-transform duration-300\">\n                  <Activity className=\"w-5 h-5\" />\n                </div>\n                <div>\n                  <div className=\"text-lg font-bold bg-gradient-to-r from-green-600 to-green-800 bg-clip-text text-transparent\">\n                    Sessions vs Members\n                  </div>\n                  <div className=\"text-xs text-slate-500 font-normal\">Comparative analysis by month</div>\n                </div>\n              </div>\n              {/* Interactive Chart Controls */}\n              <div className=\"flex gap-2\">\n                <Button size=\"sm\" variant=\"outline\" className=\"bg-white/50 hover:bg-green-50 border-green-200\">\n                  <Maximize2 className=\"w-4 h-4\" />\n                </Button>\n                <Button size=\"sm\" variant=\"outline\" className=\"bg-white/50 hover:bg-green-50 border-green-200\">\n                  <Download className=\"w-4 h-4\" />\n                </Button>\n                <Button size=\"sm\" variant=\"outline\" className=\"bg-white/50 hover:bg-green-50 border-green-200\">\n                  <RotateCcw className=\"w-4 h-4\" />\n                </Button>\n              </div>\n            </CardTitle>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={350}>\n              <BarChart \n                data={chartData}\n                margin={{ top: 20, right: 30, left: 20, bottom: 20 }}\n              >\n                <defs>\n                  <linearGradient id=\"sessionsBarGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"0%\" stopColor=\"#10B981\" stopOpacity={1}/>\n                    <stop offset=\"100%\" stopColor=\"#059669\" stopOpacity={0.8}/>\n                  </linearGradient>\n                  <linearGradient id=\"customersBarGradient\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                    <stop offset=\"0%\" stopColor=\"#8B5CF6\" stopOpacity={1}/>\n                    <stop offset=\"100%\" stopColor=\"#7C3AED\" stopOpacity={0.8}/>\n                  </linearGradient>\n                  <filter id=\"barShadow\">\n                    <feDropShadow dx=\"0\" dy=\"4\" stdDeviation=\"4\" floodOpacity=\"0.4\"/>\n                  </filter>\n                </defs>\n                <CartesianGrid \n                  strokeDasharray=\"3 3\" \n                  stroke=\"#e2e8f0\" \n                  strokeOpacity={0.5}\n                />\n                <XAxis \n                  dataKey=\"month\" \n                  stroke=\"#64748b\"\n                  style={{ fontSize: '12px', fontWeight: 500 }}\n                  tick={{ fill: '#64748b' }}\n                />\n                <YAxis \n                  stroke=\"#64748b\"\n                  style={{ fontSize: '12px', fontWeight: 500 }}\n                  tick={{ fill: '#64748b' }}\n                />\n                <Tooltip \n                  contentStyle={{\n                    backgroundColor: 'rgba(15, 23, 42, 0.95)',\n                    border: 'none',\n                    borderRadius: '12px',\n                    boxShadow: '0 10px 40px rgba(0, 0, 0, 0.3)',\n                    padding: '12px 16px',\n                    backdropFilter: 'blur(10px)'\n                  }}\n                  labelStyle={{ color: '#f1f5f9', fontWeight: 600, marginBottom: '8px' }}\n                  itemStyle={{ color: '#e2e8f0', padding: '4px 0' }}\n                  cursor={{ fill: 'rgba(148, 163, 184, 0.1)' }}\n                />\n                <Bar \n                  dataKey=\"sessions\" \n                  fill=\"url(#sessionsBarGradient)\" \n                  name=\"Sessions\"\n                  radius={[8, 8, 0, 0]}\n                  filter=\"url(#barShadow)\"\n                  animationDuration={1200}\n                  animationEasing=\"ease-out\"\n                />\n                <Bar \n                  dataKey=\"customers\" \n                  fill=\"url(#customersBarGradient)\" \n                  name=\"Members\"\n                  radius={[8, 8, 0, 0]}\n                  filter=\"url(#barShadow)\"\n                  animationDuration={1200}\n                  animationEasing=\"ease-out\"\n                />\n              </BarChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Top & Bottom Performers  styled like Sales with controls */}\n      <Card className=\"bg-gradient-to-br from-white via-slate-50/20 to-white border-0 shadow-xl\">\n        <CardHeader className=\"pb-3\">\n          <CardTitle className=\"text-2xl font-bold bg-gradient-to-r from-slate-700 via-slate-800 to-slate-900 bg-clip-text text-transparent\">\n            Trainer Top & Bottom Performers\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"flex flex-wrap items-center gap-2 mb-6\">\n            {/* Metric selection */}\n            <div className=\"flex flex-wrap bg-slate-50 border border-slate-200 rounded-lg p-1 gap-1\">\n                {[\n                { key: 'revenue', label: 'Revenue', icon: DollarSign },\n                { key: 'sessions', label: 'Sessions', icon: Activity },\n                { key: 'customers', label: 'Members', icon: Users },\n                { key: 'efficiency', label: 'Rev/Session', icon: DollarSign },\n                { key: 'classAvg', label: 'Class Avg', icon: Users },\n                { key: 'fillRate', label: 'Fill Rate', icon: Target },\n                { key: 'conversion', label: 'Conversion', icon: TrendingUp },\n                { key: 'retention', label: 'Retention', icon: Target },\n                { key: 'emptySessions', label: 'Empty', icon: Activity },\n              ].map(({ key, label, icon: Icon }: any) => (\n                <Button\n                  key={key}\n                  size=\"sm\"\n                  variant={rankingMetric === key ? 'default' : 'ghost'}\n                  className={rankingMetric === key ? 'bg-black text-white' : 'text-slate-700 hover:bg-slate-100'}\n                  onClick={() => setRankingMetric(key)}\n                >\n                  <Icon className=\"w-3 h-3 mr-1\" /> {label}\n                </Button>\n              ))}\n            </div>\n            {/* Count selection */}\n            <div className=\"flex bg-slate-50 border border-slate-200 rounded-lg p-1\">\n              {[5, 10, 15].map((n) => (\n                <Button\n                  key={n}\n                  size=\"sm\"\n                  variant={rankingCount === n ? 'default' : 'ghost'}\n                  className={rankingCount === n ? 'bg-purple-800 text-white' : 'text-slate-700 hover:bg-slate-100'}\n                  onClick={() => setRankingCount(n)}\n                >\n                  {n}\n                </Button>\n              ))}\n            </div>\n          </div>\n\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Top Performers Card */}\n            <Card className=\"bg-gradient-to-br from-white via-slate-50/50 to-white border-0 shadow-xl hover:shadow-2xl transition-all duration-500 flex flex-col\">\n              <CardHeader className=\"pb-4\">\n                <CardTitle className=\"flex items-center gap-3 text-xl\">\n                  <div className=\"p-2 rounded-full bg-gradient-to-r from-yellow-400 to-orange-500\">\n                    <Award className=\"w-5 h-5 text-white\" />\n                  </div>\n                  <div>\n                    <span className=\"bg-gradient-to-r from-yellow-600 to-orange-600 bg-clip-text text-transparent\">Top Trainers</span>\n                    <p className=\"text-sm text-slate-600 font-normal capitalize\">By {rankingMetric === 'efficiency' ? 'Revenue/Session' : rankingMetric === 'classAvg' ? 'Class Average' : rankingMetric === 'conversion' ? 'Conversion Rate' : rankingMetric}</p>\n                  </div>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 flex-1\">\n                {topList.map((t: any, index: number) => (\n                  <div\n                    key={t.name}\n                    className=\"group flex items-center justify-between p-4 rounded-xl bg-white shadow-sm border hover:shadow-md transition-all duration-300 cursor-pointer hover:border-emerald-200/70 min-h-[88px]\"\n                    onClick={() => handleRowClick(t.name, { ...t, type: 'ranking-item' })}\n                  >\n                    <div className=\"flex items-center gap-4 flex-1 min-w-0\">\n                      <div className=\"relative w-16 h-16 flex-shrink-0\">\n                        <div className=\"w-full h-full rounded-full overflow-hidden border-4 shadow-lg\" style={{\n                          borderColor: index === 0 ? '#f59e0b' : index === 1 ? '#9ca3af' : index === 2 ? '#d97706' : '#3b82f6'\n                        }}>\n                          <img \n                            src={getTrainerImage(t.name)}\n                            alt={t.name}\n                            className=\"w-full h-full object-cover\"\n                            onError={(e) => {\n                              const target = e.target as HTMLImageElement;\n                              target.style.display = 'none';\n                              const initials = t.name.split(' ').map((n: string) => n[0]).join('');\n                              target.parentElement!.innerHTML = `<div class=\"w-full h-full bg-gradient-to-br ${index === 0 ? 'from-yellow-400 to-orange-500' : index === 1 ? 'from-gray-300 to-gray-500' : index === 2 ? 'from-amber-400 to-amber-600' : 'from-blue-500 to-blue-700'} flex items-center justify-center text-white text-lg font-bold\">${initials}</div>`;\n                            }}\n                          />\n                        </div>\n                        <div className={\n                          `absolute -bottom-1 -right-1 w-7 h-7 rounded-full flex items-center justify-center shadow-md text-white text-xs font-bold border-2 border-white ` +\n                          (index === 0\n                            ? 'bg-gradient-to-br from-yellow-400 via-amber-500 to-orange-500'\n                            : index === 1\n                            ? 'bg-gradient-to-br from-gray-300 via-gray-400 to-gray-500'\n                            : index === 2\n                            ? 'bg-gradient-to-br from-amber-400 via-amber-500 to-amber-600'\n                            : 'bg-gradient-to-br from-blue-500 via-blue-600 to-blue-700')\n                        }>\n                          {index === 0 ? (\n                            <Crown className=\"w-4 h-4\" />\n                          ) : index === 1 ? (\n                            <Trophy className=\"w-4 h-4\" />\n                          ) : index === 2 ? (\n                            <Medal className=\"w-3 h-3\" />\n                          ) : (\n                            <span>{index + 1}</span>\n                          )}\n                        </div>\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"font-semibold text-slate-900 truncate group-hover:text-blue-600 transition-colors\" title={t.name}>{t.name}</p>\n                        <div className=\"flex gap-2 mt-2 overflow-x-auto no-scrollbar\">\n                          <Badge variant=\"secondary\" className=\"text-xs bg-blue-50 text-blue-700 border-blue-200 whitespace-nowrap\">\n                            {rankingMetric === 'conversion' ? `${formatNumber(t.totalNew || 0)} new` : `${formatNumber(t.totalSessions)} sessions`}\n                          </Badge>\n                          <Badge variant=\"outline\" className=\"text-xs border-green-200 text-green-700 whitespace-nowrap\">\n                            {rankingMetric === 'conversion' ? `${formatNumber(t.totalConverted || 0)} converted` : rankingMetric === 'fillRate' ? `${(t.fillRate ?? 0).toFixed(1)}% fill` : `Avg: ${(t.nonEmptySessions > 0 ? (t.totalCustomers / t.nonEmptySessions) : (t.totalSessions > 0 ? t.totalCustomers / t.totalSessions : 0)).toFixed(1)}`}\n                          </Badge>\n                          <Badge variant=\"outline\" className=\"text-xs border-purple-200 text-purple-700 whitespace-nowrap\">\n                            {rankingMetric === 'conversion' ? `${formatNumber(t.totalRetained || 0)} retained` : rankingMetric === 'fillRate' ? `${((t.nonEmptySessions / Math.max(t.totalSessions,1))*100).toFixed(1)}% utilization` : `${formatNumber(t.totalCustomers)} members`}\n                          </Badge>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"text-right flex-shrink-0 ml-4\">\n                      <p className=\"font-bold text-xl text-slate-900 group-hover:text-blue-600 transition-colors whitespace-nowrap\">\n                        {rankingMetric === 'revenue' ? formatRevenue(t.totalRevenue)\n                          : rankingMetric === 'sessions' ? formatNumber(t.totalSessions)\n                          : rankingMetric === 'customers' ? formatNumber(t.totalCustomers)\n                          : rankingMetric === 'efficiency' ? formatRevenue(t.efficiency)\n                          : rankingMetric === 'classAvg' ? (t.classAvg).toFixed(1)\n                          : rankingMetric === 'fillRate' ? `${(t.fillRate ?? 0).toFixed(1)}%`\n                          : rankingMetric === 'conversion' ? `${t.conversionRate.toFixed(1)}%`\n                          : rankingMetric === 'retention' ? `${t.retentionRate.toFixed(1)}%`\n                          : formatNumber(t.emptySessions)}\n                      </p>\n                      <p className=\"text-sm text-slate-500 truncate\" title={t.location}>\n                        {rankingMetric === 'conversion' ? `${t.totalConverted || 0}/${t.totalNew || 0} converted` : t.location}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </CardContent>\n            </Card>\n\n            {/* Bottom Performers Card */}\n            <Card className=\"bg-gradient-to-br from-white via-slate-50/50 to-white border-0 shadow-xl hover:shadow-2xl transition-all duration-500 flex flex-col\">\n              <CardHeader className=\"pb-4\">\n                <CardTitle className=\"flex items-center gap-3 text-xl\">\n                  <div className=\"p-2 rounded-full bg-gradient-to-r from-red-500 to-rose-600\">\n                    <TrendingDown className=\"w-5 h-5 text-white\" />\n                  </div>\n                  <div>\n                    <span className=\"bg-gradient-to-r from-red-600 to-rose-600 bg-clip-text text-transparent\">Bottom Trainers</span>\n                    <p className=\"text-sm text-slate-600 font-normal capitalize\">By {rankingMetric === 'efficiency' ? 'Revenue/Session' : rankingMetric === 'classAvg' ? 'Class Average' : rankingMetric === 'conversion' ? 'Conversion Rate' : rankingMetric}</p>\n                  </div>\n                </CardTitle>\n              </CardHeader>\n              <CardContent className=\"space-y-4 flex-1\">\n                {bottomList.map((t: any, index: number) => (\n                  <div\n                    key={t.name}\n                    className=\"group flex items-center justify-between p-4 rounded-xl bg-white shadow-sm border hover:shadow-md transition-all duration-300 cursor-pointer hover:border-rose-200/70 min-h-[88px]\"\n                    onClick={() => handleRowClick(t.name, { ...t, type: 'ranking-item' })}\n                  >\n                    <div className=\"flex items-center gap-4 flex-1 min-w-0\">\n                      <div className=\"relative w-14 h-14 flex-shrink-0\">\n                        <div className=\"w-full h-full rounded-full overflow-hidden border-4 border-red-500 shadow-lg\">\n                          <img \n                            src={getTrainerImage(t.name)}\n                            alt={t.name}\n                            className=\"w-full h-full object-cover\"\n                            onError={(e) => {\n                              const target = e.target as HTMLImageElement;\n                              target.style.display = 'none';\n                              const initials = t.name.split(' ').map((n: string) => n[0]).join('');\n                              target.parentElement!.innerHTML = `<div class=\"w-full h-full bg-gradient-to-br from-slate-500 to-slate-600 flex items-center justify-center text-white text-sm font-bold\">${initials}</div>`;\n                            }}\n                          />\n                        </div>\n                        <div className=\"absolute -bottom-1 -right-1 w-6 h-6 rounded-full bg-gradient-to-br from-red-500 via-rose-600 to-red-700 flex items-center justify-center shadow-md text-white text-xs font-bold border-2 border-white\">\n                          <span>{index + 1}</span>\n                        </div>\n                      </div>\n                      <div className=\"flex-1 min-w-0\">\n                        <p className=\"font-semibold text-slate-900 truncate group-hover:text-blue-600 transition-colors\" title={t.name}>{t.name}</p>\n                        <div className=\"flex gap-2 mt-2 overflow-x-auto no-scrollbar\">\n                          <Badge variant=\"secondary\" className=\"text-xs bg-blue-50 text-blue-700 border-blue-200 whitespace-nowrap\">\n                            {rankingMetric === 'conversion' ? `${formatNumber(t.totalNew || 0)} new` : `${formatNumber(t.totalSessions)} sessions`}\n                          </Badge>\n                          <Badge variant=\"outline\" className=\"text-xs border-green-200 text-green-700 whitespace-nowrap\">\n                            {rankingMetric === 'conversion' ? `${formatNumber(t.totalConverted || 0)} converted` : rankingMetric === 'fillRate' ? `${(t.fillRate ?? 0).toFixed(1)}% fill` : `Avg: ${(t.nonEmptySessions > 0 ? (t.totalCustomers / t.nonEmptySessions) : (t.totalSessions > 0 ? t.totalCustomers / t.totalSessions : 0)).toFixed(1)}`}\n                          </Badge>\n                          <Badge variant=\"outline\" className=\"text-xs border-purple-200 text-purple-700 whitespace-nowrap\">\n                            {rankingMetric === 'conversion' ? `${formatNumber(t.totalRetained || 0)} retained` : rankingMetric === 'fillRate' ? `${((t.nonEmptySessions / Math.max(t.totalSessions,1))*100).toFixed(1)}% utilization` : `${formatNumber(t.totalCustomers)} members`}\n                          </Badge>\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"text-right flex-shrink-0 ml-4\">\n                      <p className=\"font-bold text-xl text-slate-900 group-hover:text-blue-600 transition-colors whitespace-nowrap\">\n                        {rankingMetric === 'revenue' ? formatRevenue(t.totalRevenue)\n                          : rankingMetric === 'sessions' ? formatNumber(t.totalSessions)\n                          : rankingMetric === 'customers' ? formatNumber(t.totalCustomers)\n                          : rankingMetric === 'efficiency' ? formatRevenue(t.efficiency)\n                          : rankingMetric === 'classAvg' ? (t.classAvg).toFixed(1)\n                          : rankingMetric === 'fillRate' ? `${(t.fillRate ?? 0).toFixed(1)}%`\n                          : rankingMetric === 'conversion' ? `${t.conversionRate.toFixed(1)}%`\n                          : rankingMetric === 'retention' ? `${t.retentionRate.toFixed(1)}%`\n                          : formatNumber(t.emptySessions)}\n                      </p>\n                      <p className=\"text-sm text-slate-500 truncate\" title={t.location}>\n                        {rankingMetric === 'conversion' ? `${t.totalConverted || 0}/${t.totalNew || 0} converted` : t.location}\n                      </p>\n                    </div>\n                  </div>\n                ))}\n              </CardContent>\n            </Card>\n          </div>\n        </CardContent>\n      </Card>\n      \n\n      {/* Analysis Tabs */}\n      <Tabs value={selectedTab} onValueChange={setSelectedTab} className=\"space-y-4\">\n        <TabsList className=\"grid w-full grid-cols-4 bg-white border border-gray-200 p-1 rounded-xl shadow-sm h-14\">\n          <TabsTrigger\n            value=\"month-on-month\"\n            className=\"flex items-center gap-2 px-3 py-2 rounded-lg font-semibold text-xs transition-all duration-200 data-[state=active]:bg-black data-[state=active]:text-white data-[state=active]:shadow-md hover:bg-gray-50 data-[state=active]:hover:bg-gray-800\"\n          >\n            <Calendar className=\"w-4 h-4\" />\n            Month-on-Month\n          </TabsTrigger>\n          <TabsTrigger\n            value=\"year-on-year\"\n            className=\"flex items-center gap-2 px-3 py-2 rounded-lg font-semibold text-xs transition-all duration-200 data-[state=active]:bg-emerald-600 data-[state=active]:text-white data-[state=active]:shadow-md hover:bg-gray-50 data-[state=active]:hover:bg-emerald-700\"\n          >\n            <TrendingUp className=\"w-4 h-4\" />\n            Year-on-Year\n          </TabsTrigger>\n          <TabsTrigger\n            value=\"efficiency-analysis\"\n            className=\"flex items-center gap-2 px-3 py-2 rounded-lg font-semibold text-xs transition-all duration-200 data-[state=active]:bg-orange-600 data-[state=active]:text-white data-[state=active]:shadow-md hover:bg-gray-50 data-[state=active]:hover:bg-orange-700\"\n          >\n            <Target className=\"w-4 h-4\" />\n            Efficiency\n          </TabsTrigger>\n          <TabsTrigger\n            value=\"performance-detail\"\n            className=\"flex items-center gap-2 px-3 py-2 rounded-lg font-semibold text-xs transition-all duration-200 data-[state=active]:bg-purple-800 data-[state=active]:text-white data-[state=active]:shadow-md hover:bg-gray-50 data-[state=active]:hover:bg-purple-900\"\n          >\n            <Award className=\"w-4 h-4\" />\n            Performance\n          </TabsTrigger>\n        </TabsList>\n\n  <TabsContent value=\"month-on-month\" className=\"space-y-6\">\n          <div className=\"flex justify-end mb-4\">\n            <AdvancedExportButton \n              payrollData={processedDataNoMonth.map(p => ({\n                teacherName: p.trainerName,\n                location: p.location,\n                monthYear: p.monthYear,\n                totalSessions: p.totalSessions,\n                totalPaid: p.totalPaid,\n                totalCustomers: p.totalCustomers\n              })) || []}\n              defaultFileName=\"month-on-month-trainer-analysis\"\n              size=\"sm\"\n              variant=\"outline\"\n            />\n          </div>\n          <div className=\"flex items-center gap-2 -mt-2 flex-wrap\">\n            <Badge variant=\"outline\" className=\"text-xs text-amber-700 border-amber-200 bg-amber-50\">Ignoring Month Filter</Badge>\n            <button onClick={() => setFilters(prev => ({...prev, location: ''}))} className=\"rounded\">\n              <Badge variant=\"outline\" className=\"text-xs text-slate-700 border-slate-200 bg-slate-50 hover:bg-slate-100\">Location: {filters.location || selectedLocation || 'All Locations'}</Badge>\n            </button>\n            <button onClick={() => setFilters(prev => ({...prev, trainer: ''}))} className=\"rounded\">\n              <Badge variant=\"outline\" className=\"text-xs text-slate-700 border-slate-200 bg-slate-50 hover:bg-slate-100\">Trainer: {filters.trainer || 'All Trainers'}</Badge>\n            </button>\n          </div>\n          <MonthOnMonthTrainerTable\n            data={processedDataNoMonth}\n            defaultMetric=\"totalSessions\"\n            onRowClick={handleRowClick}\n          />\n        </TabsContent>\n\n  <TabsContent value=\"year-on-year\" className=\"space-y-6\">\n          <div className=\"flex justify-end mb-4\">\n            <AdvancedExportButton \n              payrollData={processedDataNoMonth.map(p => ({\n                teacherName: p.trainerName,\n                location: p.location,\n                monthYear: p.monthYear,\n                totalSessions: p.totalSessions,\n                totalPaid: p.totalPaid,\n                totalCustomers: p.totalCustomers\n              })) || []}\n              defaultFileName=\"year-on-year-trainer-analysis\"\n              size=\"sm\"\n              variant=\"outline\"\n            />\n          </div>\n          <div className=\"flex items-center gap-2 -mt-2 flex-wrap\">\n            <Badge variant=\"outline\" className=\"text-xs text-amber-700 border-amber-200 bg-amber-50\">Ignoring Month Filter</Badge>\n            <button onClick={() => setFilters(prev => ({...prev, location: ''}))} className=\"rounded\">\n              <Badge variant=\"outline\" className=\"text-xs text-slate-700 border-slate-200 bg-slate-50 hover:bg-slate-100\">Location: {filters.location || selectedLocation || 'All Locations'}</Badge>\n            </button>\n            <button onClick={() => setFilters(prev => ({...prev, trainer: ''}))} className=\"rounded\">\n              <Badge variant=\"outline\" className=\"text-xs text-slate-700 border-slate-200 bg-slate-50 hover:bg-slate-100\">Trainer: {filters.trainer || 'All Trainers'}</Badge>\n            </button>\n          </div>\n          \n          <TrainerYearOnYearTable\n            data={processedDataNoMonth}\n            onRowClick={handleRowClick}\n          />\n        </TabsContent>\n\n        <TabsContent value=\"efficiency-analysis\" className=\"space-y-6\">\n          <div className=\"flex justify-end mb-4\">\n            <AdvancedExportButton \n              payrollData={processedDataNoMonth.map(p => ({\n                teacherName: p.trainerName,\n                location: p.location,\n                monthYear: p.monthYear,\n                totalSessions: p.totalSessions,\n                totalPaid: p.totalPaid,\n                totalCustomers: p.totalCustomers\n              })) || []}\n              defaultFileName=\"trainer-efficiency-analysis\"\n              size=\"sm\"\n              variant=\"outline\"\n            />\n          </div>\n          \n          <TrainerEfficiencyAnalysisTable\n            data={processedDataNoMonth}\n            onRowClick={handleRowClick}\n          />\n        </TabsContent>\n\n        <TabsContent value=\"performance-detail\" className=\"space-y-6\">\n          <div className=\"flex justify-end mb-4\">\n            <AdvancedExportButton \n              payrollData={processedData.map(p => ({\n                teacherName: p.trainerName,\n                location: p.location,\n                monthYear: p.monthYear,\n                totalSessions: p.totalSessions,\n                totalPaid: p.totalPaid,\n                totalCustomers: p.totalCustomers\n              })) || []}\n              defaultFileName=\"trainer-performance-detail\"\n              size=\"sm\"\n              variant=\"outline\"\n            />\n          </div>\n          \n          <TrainerPerformanceDetailTable\n            data={processedData}\n            onRowClick={handleRowClick}\n          />\n        </TabsContent>\n      </Tabs>\n\n      {/* Comprehensive Trainer Drill Down */}\n      {selectedTrainer && drillDownData && (\n        <ComprehensiveTrainerDrillDown\n          isOpen={!!drillDownData}\n          onClose={closeDrillDown}\n          trainerName={selectedTrainer}\n          trainerData={drillDownData}\n          allPayrollData={processedDataNoMonth.map(p => ({\n            teacherName: p.trainerName,\n            location: p.location,\n            monthYear: p.monthYear,\n            totalSessions: p.totalSessions,\n            totalPaid: p.totalPaid,\n            totalCustomers: p.totalCustomers\n          })) || []}\n          allSessionsData={sessionsData || []}\n          filters={drillDownData.contextFilters || { location: selectedLocation, month: filters.month || '' }}\n        />\n      )}\n    </div>\n  );\n};\n","import React, { useEffect, useMemo, useState } from 'react';\nimport { useGlobalLoading } from '@/hooks/useGlobalLoading';\nimport { EnhancedTrainerPerformanceSection } from '@/components/dashboard/EnhancedTrainerPerformanceSection';\nimport { Footer } from '@/components/ui/footer';\nimport DashboardMotionHero from '@/components/ui/DashboardMotionHero';\nimport { usePayrollData } from '@/hooks/usePayrollData';\nimport { formatCurrency } from '@/utils/formatters';\n\nconst TrainerPerformance = () => {\n  const { data: payrollData, isLoading } = usePayrollData();\n  const { isLoading: globalLoading, setLoading } = useGlobalLoading();\n  const [isContentReady, setIsContentReady] = useState(false);\n\n  useEffect(() => {\n    // Keep loading active until both data is loaded and content is ready\n    const shouldLoad = isLoading || !isContentReady;\n    setLoading(shouldLoad, 'Analyzing trainer performance metrics and insights...');\n  }, [isLoading, isContentReady, setLoading]);\n\n  useEffect(() => {\n    // Mark content as ready once data is available\n    if (!isLoading && payrollData && payrollData.length > 0) {\n      const timer = setTimeout(() => {\n        setIsContentReady(true);\n      }, 150);\n      return () => clearTimeout(timer);\n    } else if (!isLoading && (!payrollData || payrollData.length === 0)) {\n      setIsContentReady(true);\n    }\n  }, [isLoading, payrollData]);\n\n  const heroMetrics = useMemo(() => {\n    if (!payrollData || payrollData.length === 0) return [];\n\n    const locations = [\n      { key: 'Kwality House, Kemps Corner', name: 'Kwality' },\n      { key: 'Supreme HQ, Bandra', name: 'Supreme' },\n      { key: 'Kenkere House', name: 'Kenkere' }\n    ];\n\n    return locations.map(location => {\n      const locationData = payrollData.filter(item => \n        location.key === 'Kenkere House' \n          ? item.location?.includes('Kenkere') || item.location === 'Kenkere House'\n          : item.location === location.key\n      );\n      \n      const totalTrainers = new Set(locationData.map(item => item.teacherName)).size;\n      const totalSessions = locationData.reduce((sum, item) => sum + (item.totalSessions || 0), 0);\n      const totalRevenue = locationData.reduce((sum, item) => sum + (item.totalPaid || 0), 0);\n      const avgRevenuePerTrainer = totalTrainers > 0 ? totalRevenue / totalTrainers : 0;\n      \n      return {\n        location: location.name,\n        label: `${totalTrainers} Trainers`,\n        value: formatCurrency(avgRevenuePerTrainer),\n        subtitle: `Avg ${(avgRevenuePerTrainer/1000).toFixed(0)}K/trainer`\n      };\n    });\n  }, [payrollData]);\n\n  if (globalLoading) {\n    return null; // Global loader will handle this\n  }\n\n  return (\n    <div className=\"min-h-screen bg-white relative overflow-hidden\">\n      {/* Enhanced Background Elements */}\n      <div className=\"absolute inset-0 overflow-hidden\">\n        <div className=\"absolute top-20 left-10 w-96 h-96 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-full floating-animation stagger-1\"></div>\n        <div className=\"absolute bottom-20 right-10 w-80 h-80 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-full floating-animation stagger-3\"></div>\n        <div className=\"absolute top-1/2 left-1/3 w-72 h-72 bg-gradient-to-r from-cyan-500/10 to-teal-500/10 rounded-full morph-shape stagger-2\"></div>\n      </div>\n      \n      <div className=\"relative z-10\">\n        <div className=\"bg-white text-slate-800 slide-in-from-left\">\n          <DashboardMotionHero \n            title=\"Trainer Performance Analytics\"\n            subtitle=\"Comprehensive trainer performance metrics, insights, and development opportunities\"\n            metrics={heroMetrics}\n            onExportClick={() => {}}\n          />\n        </div>\n\n        <div className=\"container mx-auto px-6 py-8 bg-white min-h-screen\">\n          <main className=\"space-y-8 slide-in-from-right stagger-1\">\n            <EnhancedTrainerPerformanceSection />\n          </main>\n        </div>\n        \n        <Footer />\n      </div>\n    </div>\n  );\n};\n\nexport default TrainerPerformance;"],"names":["ArrowDown","createLucideIcon","ArrowUp","Bike","CircleCheck","Music","_excluded","_typeof","o","_objectWithoutProperties","source","excluded","target","_objectWithoutPropertiesLoose","key","i","sourceSymbolKeys","_extends","ownKeys","e","r","t","_objectSpread","_defineProperty","obj","value","_toPropertyKey","_toPrimitive","getPolygonPath","radius","cx","cy","polarAngles","path","angle","point","polarToCartesian","PolarAngles","props","innerRadius","outerRadius","radialLines","polarAnglesProps","filterProps","React","entry","start","end","ConcentricCircle","index","concentricCircleProps","clsx","ConcentricPolygon","concentricPolygonProps","ConcentricPath","polarRadius","gridType","PolarGrid","_ref","_ref$cx","_ref$cy","_ref$innerRadius","_ref$outerRadius","_ref$gridType","_ref$radialLines","head","array","head_1","first","require$$0","_classCallCheck","instance","Constructor","_defineProperties","descriptor","_createClass","protoProps","staticProps","_callSuper","_getPrototypeOf","_possibleConstructorReturn","_isNativeReflectConstruct","self","call","_assertThisInitialized","_inherits","subClass","superClass","_setPrototypeOf","p","Radar","_PureComponent","_this","_len","args","_key","onAnimationEnd","isFunction","onAnimationStart","onMouseEnter","onMouseLeave","points","_this$props","dot","dataKey","baseProps","customDotProps","dots","dotProps","Layer","_this$props2","shape","isRange","baseLinePoints","connectNulls","radar","Polygon","_this2","_this$props3","isAnimationActive","animationBegin","animationDuration","animationEasing","animationId","prevPoints","Animate","prevPointsDiffFactor","stepData","prev","_interpolatorX","interpolateNumber","_interpolatorY","interpolatorX","interpolatorY","_this$props4","isEqual","_this$props5","hide","className","isAnimationFinished","layerClass","LabelList","nextProps","prevState","option","dotItem","Dot","PureComponent","Global","_ref2","radiusAxis","angleAxis","displayedData","bandSize","angleBandSize","name","getValueByDataKey","pointValue","last","isNil","baseValue","RadarChart","generateCategoricalChart","PolarAngleAxis","PolarRadiusAxis","formatAxisMap","TrainerYearOnYearTable","data","onRowClick","sortConfig","setSortConfig","useState","yearOnYearData","useMemo","currentYear","previousYear","trainerStats","acc","record","label","yearNum","parts","trainerKey","yearData","trainer","currentAvgClassSize","previousAvgClassSize","currentRevenuePerSession","previousRevenuePerSession","a","b","sortedYoY","rows","av","bv","handleSort","handleRowClick","rowData","columns","jsx","TooltipProvider","jsxs","Tooltip","TooltipTrigger","TooltipContent","row","TrainerNameCell","formatNumber","TrendingUp","TrendingDown","formatCurrency","sum","ModernTableWrapper","BarChart3","column","TrainerPerformanceDetailTable","processedTableData","records","totalSessions","s","nonEmptySessions","totalCustomers","capacity","totalNew","totalConverted","totalRetained","monthlySessions","avg","v","variance","stddev","sortedRecs","formatRevenues","aValue","bValue","Activity","Users","Badge","Target","UserCheck","TrainerEfficiencyAnalysisTable","efficiencyData","trainerEfficiency","rpsValues","rpsMax","monthly","mostRecentRecord","Zap","Clock","Award","summaryStats","avgEfficiency","topPerformers","avgCapacityUtilization","TrainerMetricTabs","onValueChange","Tabs","TabsList","TabsTrigger","processTrainerData","payrollData","parseMonth","monthStr","d","m","y","mi","yi","mon","monthKey","monthLabel","emptySessions","totalPaid","cycleSessions","barreSessions","strengthSessions","classAverageExclEmpty","classAverageInclEmpty","conversionRate","retentionRate","fillRate","utilizationRate","formatStats","topFormat","formatDistribution","revenuePerSession","revenuePerCustomer","growthRate","consistencyScore","getMetricValue","metric","MonthOnMonthTrainerTable","defaultMetric","selectedMetric","setSelectedMetric","expandedRows","setExpandedRows","processedData","trainerGroups","months","monthNames","now","currentMonth","year","endMonth","month","formatValue","getChangePercentage","current","previous","toggleRowExpansion","newExpanded","trainerData","recs","totalRevenue","lastRec","prevRec","previousSessions","previousRevenue","previousCustomers","location","monthlyTotals","totals","isClassAvg","isRate","numerator","denom","rec","sessions","customers","allValues","total","val","average","growth","containerRef","useRef","registry","useMetricsTablesRegistry","tableId","useEffect","el","getTextContent","table","text","headerCells","headers","cell","cells","c","generateAllTabsContent","allMetrics","metricLabel","lines","num","den","totalsAllValues","totalsGrowth","totalsOverall","totalsRow","values","CopyTableButton","Table","TableHeader","TableRow","TableHead","prevMonth","prevYear","previousMonthKey","isMainMonth","cn","Star","TableBody","TableCell","isExpanded","trainerTotal","Button","ChevronDown","ChevronRight","trainerMonthMap","payload","change","recsLocal","cyc","bar","str","Fragment","totRev","totSess","Info","COLORS","MetricCard","title","subtitle","Icon","trend","trendValue","color","size","colorClasses","TrendIcon","Minus","trendColor","PerformanceIndicator","score","getColor","CheckCircle2","AlertCircle","XCircle","ComprehensiveTrainerDrillDown","isOpen","onClose","trainerName","allPayrollData","allSessionsData","filters","activeTab","setActiveTab","locationMatches","recordLoc","filterLoc","rl","fl","trainerRecordsContext","trainerRecordsAllMonths","toMonthYear","dStr","tryNative","dt","out","iso","mdy","dmy","parsed","trainerSessionsAll","sessionMonthYear","nameMatch","locMatch","monthMatch","clickedCellSessions","avgClassSize","avgClassSizeExclEmpty","sessionMetrics","isCancelled","paid","attendees","split","type","gTotals","byFormat","f","byMonth","performanceScore","insights","radarData","Dialog","DialogContent","summary","DialogHeader","DialogTitle","DialogDescription","X","ScrollArea","getTrainerImage","getTrainerInitials","MapPin","Calendar","Card","CardContent","Progress","DollarSign","format","Sparkles","TabsContent","CardHeader","CardTitle","ResponsiveContainer","PieChartIcon","PieChart","Pie","Cell","CardDescription","BarChart","CartesianGrid","XAxis","YAxis","Legend","Bar","idx","fillPct","cancelled","cls","revenue","Dumbbell","AreaChart","Area","LineChart","Line","insight","TrainerFilterSection","onFiltersChange","isCollapsed","onToggleCollapse","setFilters","locations","item","trainers","monthShort","expectedMonth","matchingMonth","kwalityLocation","loc","defaultFilters","updateFilters","performanceLevels","classTypes","newFilters","updatedFilters","parentFilters","clearAllFilters","clearedFilters","hasActiveFilters","activeFilterCount","Filter","Label","Search","Input","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","User","level","displayValue","resetValue","EnhancedTrainerMetricCards","onCardClick","totalTrainers","avgRevenue","avgRevenuePerSession","totalNonEmptySessions","totalNewMembers","avgConversionRate","avgRetentionRate","metricCards","topTrainers","trainerRevenue","card","isPositive","detail","EnhancedTrainerPerformanceSection","isLoading","error","usePayrollData","sessionsData","useSessionsData","useCheckinsData","selectedTab","setSelectedTab","selectedTrainer","setSelectedTrainer","drillDownData","setDrillDownData","clickedMetric","setClickedMetric","isFiltersCollapsed","setIsFiltersCollapsed","selectedLocation","setSelectedLocation","isRendering","setIsRendering","baseProcessed","searchLower","sortedByRevenue","topQuartile","bottomQuartile","highPerformers","hp","lowPerformers","lp","mediumPerformers","mp","processedDataNoMonth","clickType","effectiveLocation","effectiveMonth","closeDrillDown","rankingMetric","setRankingMetric","rankingCount","setRankingCount","rankedTrainers","byTrainer","efficiency","classAvg","sortFn","topList","bottomList","chartData","monthlyData","timer","StudioLocationTabs","locationId","newLocation","prevFilters","Maximize2","Download","RotateCcw","n","initials","Crown","Trophy","Medal","formatRevenue","AdvancedExportButton","TrainerPerformance","globalLoading","setLoading","useGlobalLoading","isContentReady","setIsContentReady","heroMetrics","locationData","avgRevenuePerTrainer","DashboardMotionHero","Footer"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9]}