import{h as T,j as e,D as z,n as S,o as M,q as P,B as A,X as R,C as i,c as n,a as p,b as u}from"./index-Bm67KBkU.js";import{B as g,f as c,a as x}from"./index-DkD_C-d1.js";import{M as V}from"./ModernDataTable-Qj0casC7.js";import{C as B,D as I}from"./dollar-sign-CKqx8kbC.js";import{S as q}from"./SalesMotionHero-sGphstF2.js";import{U as v}from"./users-7Ku-1TDB.js";import{T as E}from"./target-BmxdxojS.js";import{A as O}from"./award-D0x2LQSI.js";import{C as U}from"./googleAuth-BGo8ElRc.js";import{P as H}from"./package-C0br8ACw.js";import"./table-DhXofKdS.js";import"./tableStyles-BJWvDwDQ.js";import"./CopyTableButton-Blm2CDq4.js";import"./dropdown-menu-B9zQ9u84.js";import"./chevron-right-CbIMR3DA.js";import"./file-text-DChZNHsM.js";import"./select-CM-Birqk.js";import"./index-BdQq_4o_.js";const oe=({isOpen:w,onClose:f,data:m})=>{if(!m)return null;const o=m.rawData||m.filteredTransactionData||[],d=T.useMemo(()=>{const a=o.reduce((t,r)=>t+r.paymentValue,0),s=o.length,b=new Set(o.map(t=>t.memberId)).size,N=s>0?a/s:0,y=b>0?a/b:0,h=o.reduce((t,r)=>{const l=new Date(r.paymentDate).toLocaleDateString("en-US",{month:"short",year:"numeric"});return t[l]||(t[l]={revenue:0,transactions:0,customers:new Set}),t[l].revenue+=r.paymentValue,t[l].transactions+=1,t[l].customers.add(r.memberId),t},{});Object.keys(h).forEach(t=>{h[t].uniqueCustomers=h[t].customers.size,delete h[t].customers});const k=o.reduce((t,r)=>{const l=`${r.customerName}`;return t[l]||(t[l]={name:r.customerName,revenue:0,transactions:0,email:r.customerEmail||"N/A",memberId:r.memberId}),t[l].revenue+=r.paymentValue,t[l].transactions+=1,t},{}),C=Object.values(k).sort((t,r)=>r.revenue-t.revenue).slice(0,10),D=o.reduce((t,r)=>{const l=r.paymentMethod||"Unknown";return t[l]=(t[l]||0)+r.paymentValue,t},{});return{totalRevenue:a,totalTransactions:s,uniqueCustomers:b,avgTransactionValue:N,avgRevenuePerCustomer:y,monthlyData:h,topCustomers:C,paymentMethods:D}},[o]),j=[{key:"customerName",header:"Customer",className:"min-w-[150px]",render:(a,s)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-slate-900",children:a}),e.jsx("div",{className:"text-xs text-slate-500",children:s.customerEmail})]})},{key:"cleanedProduct",header:"Product",className:"min-w-[120px]",render:(a,s)=>e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-slate-800",children:a}),e.jsx(g,{variant:"outline",className:"text-xs mt-1 bg-slate-100 text-slate-700 border-slate-300",children:s.cleanedCategory})]})},{key:"paymentValue",header:"Amount",align:"right",render:a=>e.jsx("span",{className:"font-bold bg-gradient-to-r from-slate-900 to-blue-950 bg-clip-text text-transparent",children:c(a)})},{key:"paymentDate",header:"Date",align:"center",render:a=>e.jsx("div",{className:"text-sm text-slate-700 font-medium",children:new Date(a).toLocaleDateString()})},{key:"paymentMethod",header:"Payment",align:"center",render:a=>e.jsx(g,{className:"bg-slate-100 text-slate-700 border-slate-300",children:a||"N/A"})},{key:"soldBy",header:"Sold By",className:"min-w-[100px]",render:a=>e.jsxs("div",{className:"text-sm text-slate-600 flex items-center gap-1 font-medium",children:[e.jsx(v,{className:"w-3 h-3"}),a]})}];return e.jsx(z,{open:w,onOpenChange:f,children:e.jsxs(S,{className:"max-w-7xl max-h-[95vh] flex flex-col bg-gradient-to-br from-slate-50 via-white to-slate-100 border border-slate-200/50 shadow-2xl backdrop-blur-xl rounded-2xl overflow-hidden",children:[e.jsxs(M,{className:"flex-shrink-0 pb-6 border-b border-slate-200/30 bg-gradient-to-r from-slate-900 via-blue-950 to-slate-900 -m-6 p-8 mb-0 relative overflow-hidden",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/10 via-blue-600/5 to-slate-900/20"}),e.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 25% 25%, rgba(59, 130, 246, 0.1) 0%, transparent 50%), radial-gradient(circle at 75% 75%, rgba(139, 92, 246, 0.1) 0%, transparent 50%)"}}),e.jsxs("div",{className:"flex items-center justify-between relative z-10",children:[e.jsxs(P,{className:"text-2xl font-bold text-white flex items-center gap-4",children:[e.jsx("div",{className:"p-3 bg-gradient-to-br from-white/20 to-white/10 rounded-xl backdrop-blur-md border border-white/20 shadow-lg",children:e.jsx(B,{className:"w-6 h-6 text-white"})}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx("span",{className:"bg-gradient-to-r from-white via-blue-100 to-white bg-clip-text text-transparent",children:m.title||m.name}),e.jsx(g,{className:"self-start bg-gradient-to-r from-blue-500/20 to-purple-500/20 text-white border border-white/20 backdrop-blur-md font-medium px-3 py-1 rounded-full text-xs",children:m.type})]})]}),e.jsx(A,{variant:"ghost",size:"sm",onClick:f,className:"text-white hover:bg-white/10 backdrop-blur-sm rounded-xl p-2 transition-all duration-200 hover:scale-105",children:e.jsx(R,{className:"w-5 h-5"})})]})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto p-6 lg:p-8 space-y-6 lg:space-y-8",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5 gap-4 lg:gap-6",children:[e.jsxs(i,{className:"bg-gradient-to-br from-slate-900 via-indigo-950 to-slate-900 border border-slate-700/50 shadow-xl hover:shadow-2xl transition-all duration-500 hover:scale-[1.03] hover:-translate-y-1 relative overflow-hidden group min-h-[120px]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/10 to-purple-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs(n,{className:"p-5 lg:p-6 relative z-10 h-full flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-300 mb-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-white/10 to-white/5 rounded-lg shrink-0",children:e.jsx(I,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),e.jsx("span",{className:"text-xs lg:text-sm font-medium tracking-wide",children:"Total Revenue"})]}),e.jsx("div",{className:"text-xl lg:text-2xl xl:text-3xl font-bold bg-gradient-to-r from-white via-blue-100 to-white bg-clip-text text-transparent leading-tight",children:c(d.totalRevenue)})]})]}),e.jsxs(i,{className:"bg-gradient-to-br from-white via-slate-50 to-white border border-slate-200/50 shadow-xl hover:shadow-2xl transition-all duration-500 hover:scale-[1.03] hover:-translate-y-1 relative overflow-hidden group backdrop-blur-sm min-h-[120px]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-500/5 to-emerald-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs(n,{className:"p-5 lg:p-6 relative z-10 h-full flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-600 mb-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-slate-100 to-slate-200 rounded-lg shrink-0",children:e.jsx(q,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),e.jsx("span",{className:"text-xs lg:text-sm font-medium tracking-wide",children:"Transactions"})]}),e.jsx("div",{className:"text-xl lg:text-2xl xl:text-3xl font-bold bg-gradient-to-r from-slate-900 via-indigo-950 to-slate-900 bg-clip-text text-transparent leading-tight",children:x(d.totalTransactions)})]})]}),e.jsxs(i,{className:"bg-gradient-to-br from-white via-slate-50 to-white border border-slate-200/50 shadow-xl hover:shadow-2xl transition-all duration-500 hover:scale-[1.03] hover:-translate-y-1 relative overflow-hidden group backdrop-blur-sm min-h-[120px]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-500/5 to-blue-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs(n,{className:"p-5 lg:p-6 relative z-10 h-full flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-600 mb-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-slate-100 to-slate-200 rounded-lg shrink-0",children:e.jsx(v,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),e.jsx("span",{className:"text-xs lg:text-sm font-medium tracking-wide",children:"Customers"})]}),e.jsx("div",{className:"text-xl lg:text-2xl xl:text-3xl font-bold bg-gradient-to-r from-slate-900 via-indigo-950 to-slate-900 bg-clip-text text-transparent leading-tight",children:x(d.uniqueCustomers)})]})]}),e.jsxs(i,{className:"bg-gradient-to-br from-white via-slate-50 to-white border border-slate-200/50 shadow-xl hover:shadow-2xl transition-all duration-500 hover:scale-[1.03] hover:-translate-y-1 relative overflow-hidden group backdrop-blur-sm min-h-[120px]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-purple-500/5 to-pink-500/5 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs(n,{className:"p-5 lg:p-6 relative z-10 h-full flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-slate-600 mb-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-slate-100 to-slate-200 rounded-lg shrink-0",children:e.jsx(E,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),e.jsx("span",{className:"text-xs lg:text-sm font-medium tracking-wide",children:"Avg Transaction"})]}),e.jsx("div",{className:"text-xl lg:text-2xl xl:text-3xl font-bold bg-gradient-to-r from-slate-900 via-indigo-950 to-slate-900 bg-clip-text text-transparent leading-tight",children:c(d.avgTransactionValue)})]})]}),e.jsxs(i,{className:"bg-gradient-to-br from-emerald-50 via-emerald-100 to-emerald-50 border border-emerald-200/70 shadow-xl hover:shadow-2xl transition-all duration-500 hover:scale-[1.03] hover:-translate-y-1 relative overflow-hidden group md:col-span-2 lg:col-span-1 min-h-[120px]",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-emerald-400/10 to-green-500/10 opacity-0 group-hover:opacity-100 transition-opacity duration-500"}),e.jsxs(n,{className:"p-5 lg:p-6 relative z-10 h-full flex flex-col justify-between",children:[e.jsxs("div",{className:"flex items-center gap-3 text-emerald-700 mb-3",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-emerald-200 to-emerald-300 rounded-lg shrink-0",children:e.jsx(O,{className:"w-4 h-4 lg:w-5 lg:h-5"})}),e.jsx("span",{className:"text-xs lg:text-sm font-medium tracking-wide",children:"Avg per Customer"})]}),e.jsx("div",{className:"text-xl lg:text-2xl xl:text-3xl font-bold bg-gradient-to-r from-emerald-900 via-emerald-800 to-emerald-900 bg-clip-text text-transparent leading-tight",children:c(d.avgRevenuePerCustomer)})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 lg:gap-8",children:[e.jsxs(i,{className:"bg-gradient-to-br from-white via-slate-50/50 to-white border border-slate-200/50 shadow-xl backdrop-blur-sm rounded-2xl overflow-hidden",children:[e.jsxs(p,{className:"bg-gradient-to-r from-slate-900 via-indigo-950 to-slate-900 border-b border-slate-700/30 relative overflow-hidden p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/10 via-purple-600/5 to-transparent"}),e.jsxs(u,{className:"text-lg lg:text-xl flex items-center gap-3 text-white relative z-10",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-white/20 to-white/10 rounded-xl backdrop-blur-md border border-white/20 shrink-0",children:e.jsx(U,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"bg-gradient-to-r from-white via-blue-100 to-white bg-clip-text text-transparent font-bold tracking-wide",children:"Monthly Performance"})]})]}),e.jsx(n,{className:"p-6",children:e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-slate-100",children:Object.entries(d.monthlyData).map(([a,s])=>e.jsxs("div",{className:"flex items-center justify-between p-4 lg:p-5 bg-gradient-to-r from-slate-50/80 via-white to-slate-50/80 rounded-xl border border-slate-200/50 hover:border-slate-300/70 transition-all duration-300 hover:shadow-lg hover:scale-[1.01] backdrop-blur-sm group",children:[e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-slate-900 text-base lg:text-lg group-hover:text-indigo-900 transition-colors truncate",children:a}),e.jsxs("div",{className:"text-xs lg:text-sm text-slate-600 mt-1 lg:mt-2 font-medium",children:[x(s.transactions)," transactions â€¢ ",x(s.uniqueCustomers)," customers"]})]}),e.jsx("div",{className:"text-right ml-4 shrink-0",children:e.jsx("div",{className:"font-bold text-lg lg:text-xl xl:text-2xl bg-gradient-to-r from-slate-900 via-indigo-950 to-slate-900 bg-clip-text text-transparent",children:c(s.revenue)})})]},a))})})]}),e.jsxs(i,{className:"bg-gradient-to-br from-white via-slate-50/50 to-white border border-slate-200/50 shadow-xl backdrop-blur-sm rounded-2xl overflow-hidden",children:[e.jsxs(p,{className:"bg-gradient-to-r from-slate-900 via-indigo-950 to-slate-900 border-b border-slate-700/30 relative overflow-hidden p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/10 via-purple-600/5 to-transparent"}),e.jsxs(u,{className:"text-lg lg:text-xl flex items-center gap-3 text-white relative z-10",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-white/20 to-white/10 rounded-xl backdrop-blur-md border border-white/20 shrink-0",children:e.jsx(v,{className:"w-5 h-5 text-white"})}),e.jsx("span",{className:"bg-gradient-to-r from-white via-blue-100 to-white bg-clip-text text-transparent font-bold tracking-wide",children:"Top Customers"})]})]}),e.jsx(n,{className:"p-6",children:e.jsx("div",{className:"space-y-4 max-h-80 overflow-y-auto scrollbar-thin scrollbar-thumb-slate-300 scrollbar-track-slate-100",children:d.topCustomers.map((a,s)=>e.jsxs("div",{className:"flex items-center gap-4 p-4 lg:p-5 bg-gradient-to-r from-slate-50/80 via-white to-slate-50/80 rounded-xl border border-slate-200/50 hover:border-slate-300/70 transition-all duration-300 hover:shadow-lg hover:scale-[1.01] backdrop-blur-sm group",children:[e.jsx("div",{className:"shrink-0",children:e.jsx("div",{className:"w-10 h-10 lg:w-12 lg:h-12 bg-gradient-to-br from-slate-900 via-indigo-950 to-slate-900 text-white rounded-xl flex items-center justify-center text-sm lg:text-lg font-bold shadow-lg group-hover:scale-105 transition-transform duration-300",children:s+1})}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("div",{className:"font-bold text-slate-900 text-base lg:text-lg group-hover:text-indigo-900 transition-colors truncate",children:a.name}),e.jsx("div",{className:"text-xs lg:text-sm text-slate-600 font-medium truncate",children:a.email})]}),e.jsxs("div",{className:"text-right shrink-0",children:[e.jsx("div",{className:"font-bold text-lg lg:text-xl xl:text-2xl bg-gradient-to-r from-slate-900 via-indigo-950 to-slate-900 bg-clip-text text-transparent",children:c(a.revenue)}),e.jsxs("div",{className:"text-xs lg:text-sm text-slate-600 mt-1 font-medium",children:[x(a.transactions)," orders"]})]})]},a.memberId))})})]})]}),e.jsx("div",{className:"w-full",children:e.jsxs(i,{className:"bg-gradient-to-br from-white via-slate-50/30 to-white border border-slate-200/50 shadow-xl backdrop-blur-sm rounded-2xl overflow-hidden",children:[e.jsxs(p,{className:"bg-gradient-to-r from-slate-900 via-indigo-950 to-slate-900 border-b border-slate-700/30 relative overflow-hidden p-6",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600/10 via-purple-600/5 to-transparent"}),e.jsxs(u,{className:"text-lg lg:text-xl flex items-center gap-3 text-white relative z-10",children:[e.jsx("div",{className:"p-2 bg-gradient-to-br from-white/20 to-white/10 rounded-xl backdrop-blur-md border border-white/20 shrink-0",children:e.jsx(H,{className:"w-5 h-5"})}),e.jsxs("div",{className:"flex items-center gap-3 flex-wrap",children:[e.jsx("span",{className:"bg-gradient-to-r from-white via-blue-100 to-white bg-clip-text text-transparent font-bold tracking-wide",children:"Transaction Details"}),e.jsxs(g,{className:"bg-gradient-to-r from-blue-500/20 to-purple-500/20 text-white border border-white/20 backdrop-blur-md font-medium px-3 py-1 rounded-full text-xs",children:[x(o.length)," records"]})]})]})]}),e.jsx(n,{className:"p-0",children:e.jsx("div",{className:"border-t border-slate-200/30 bg-white/50 backdrop-blur-sm",children:e.jsx("div",{className:"max-h-96 overflow-auto",children:e.jsx(V,{data:o,columns:j,headerGradient:"from-slate-900 via-indigo-950 to-slate-900",maxHeight:"none"})})})})]})})]})]})})};export{oe as SalesDrillDownModal};
//# sourceMappingURL=SalesDrillDownModal-BGCrQ8FL.js.map
