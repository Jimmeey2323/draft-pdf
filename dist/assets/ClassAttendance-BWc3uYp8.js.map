{"version":3,"file":"ClassAttendance-BWc3uYp8.js","sources":["../../node_modules/lucide-react/dist/esm/icons/hash.js","../../node_modules/lucide-react/dist/esm/icons/settings.js","../../src/components/dashboard/EnhancedClassAttendanceFilterSection.tsx","../../src/components/dashboard/SuperEnhancedMetricCards.tsx","../../node_modules/@radix-ui/react-switch/node_modules/@radix-ui/react-slot/dist/index.mjs","../../node_modules/@radix-ui/react-switch/node_modules/@radix-ui/react-primitive/dist/index.mjs","../../node_modules/@radix-ui/react-switch/dist/index.mjs","../../src/components/ui/switch.tsx","../../src/components/dashboard/UltimateClassAttendanceTable.tsx","../../src/components/dashboard/MonthOnMonthClassTable.tsx","../../src/components/dashboard/DualRankingLists.tsx","../../src/pages/ClassAttendance.tsx"],"sourcesContent":["/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Hash = createLucideIcon(\"Hash\", [\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"9\", y2: \"9\", key: \"4lhtct\" }],\n  [\"line\", { x1: \"4\", x2: \"20\", y1: \"15\", y2: \"15\", key: \"vyu0kd\" }],\n  [\"line\", { x1: \"10\", x2: \"8\", y1: \"3\", y2: \"21\", key: \"1ggp8o\" }],\n  [\"line\", { x1: \"16\", x2: \"14\", y1: \"3\", y2: \"21\", key: \"weycgp\" }]\n]);\n\nexport { Hash as default };\n//# sourceMappingURL=hash.js.map\n","/**\n * @license lucide-react v0.462.0 - ISC\n *\n * This source code is licensed under the ISC license.\n * See the LICENSE file in the root directory of this source tree.\n */\n\nimport createLucideIcon from '../createLucideIcon.js';\n\nconst Settings = createLucideIcon(\"Settings\", [\n  [\n    \"path\",\n    {\n      d: \"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z\",\n      key: \"1qme2f\"\n    }\n  ],\n  [\"circle\", { cx: \"12\", cy: \"12\", r: \"3\", key: \"1v7zrd\" }]\n]);\n\nexport { Settings as default };\n//# sourceMappingURL=settings.js.map\n","import React, { useState, useMemo } from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Label } from '@/components/ui/label';\nimport { DatePickerWithRange } from '@/components/ui/date-picker';\nimport { Filter, X, ChevronDown, ChevronUp, Calendar, MapPin, Users, Clock, BarChart3, Building2, Target, Hash, User } from 'lucide-react';\nimport { useSessionsFilters } from '@/contexts/SessionsFiltersContext';\nimport { SessionData } from '@/hooks/useSessionsData';\nimport { Input } from '@/components/ui/input';\n\ninterface EnhancedClassAttendanceFilterSectionProps {\n  data: SessionData[];\n}\n\nexport const EnhancedClassAttendanceFilterSection: React.FC<EnhancedClassAttendanceFilterSectionProps> = ({ data }) => {\n  const { filters, updateFilters, clearAllFilters } = useSessionsFilters();\n  const [isOpen, setIsOpen] = useState(false); // Changed to collapsed by default\n  const [minClassesFilter, setMinClassesFilter] = useState(2);\n\n  const filterOptions = useMemo(() => {\n    const trainers = [...new Set(data.map(d => d.trainerName))].filter(Boolean).sort();\n    const classTypes = [...new Set(data.map(d => d.cleanedClass))].filter(Boolean).sort();\n    const dayOfWeek = [...new Set(data.map(d => d.dayOfWeek))].filter(Boolean).sort();\n    const timeSlots = [...new Set(data.map(d => d.time))].filter(Boolean).sort();\n    const locations = [...new Set(data.map(d => d.location))].filter(Boolean).sort();\n    const formats = [...new Set(data.map(d => d.cleanedClass || d.classType))].filter(Boolean).sort();\n\n    return { trainers, classTypes, dayOfWeek, timeSlots, locations, formats };\n  }, [data]);\n\n  const hasActiveFilters = filters.trainers.length > 0 || \n    filters.classTypes.length > 0 || \n    filters.dayOfWeek.length > 0 || \n    filters.timeSlots.length > 0 ||\n    filters.dateRange.start || \n    filters.dateRange.end ||\n    minClassesFilter > 1;\n\n  const activeFilterCount = [\n    filters.trainers.length,\n    filters.classTypes.length,\n    filters.dayOfWeek.length,\n    filters.timeSlots.length,\n    filters.dateRange.start ? 1 : 0,\n    filters.dateRange.end ? 1 : 0,\n    minClassesFilter > 1 ? 1 : 0\n  ].filter(count => count > 0).length;\n\n  const clearAllFiltersWithMinClasses = () => {\n    clearAllFilters();\n    setMinClassesFilter(2);\n  };\n\n  return (\n    <Card className=\"bg-gradient-to-br from-white/95 to-slate-50/95 backdrop-blur-sm border-red-200 shadow-lg mb-8 overflow-hidden hover:shadow-xl transition-shadow duration-300\">\n      <Collapsible open={isOpen} onOpenChange={setIsOpen}>\n        <CollapsibleTrigger asChild>\n          <CardContent className=\"p-6 cursor-pointer hover:bg-gradient-to-r hover:from-red-50/50 hover:to-orange-50/50 transition-all duration-300\">\n            <div className=\"flex items-center justify-between\">\n              <div className=\"flex items-center gap-4\">\n                <div className=\"p-3 rounded-xl bg-gradient-to-r from-red-500 via-orange-500 to-pink-500 shadow-lg\">\n                  <Filter className=\"w-6 h-6 text-white\" />\n                </div>\n                <div>\n                  <h3 className=\"font-bold text-xl text-slate-900\">Advanced Class Analytics Filters</h3>\n                  <p className=\"text-sm text-slate-600 mt-1\">Configure comprehensive filters to analyze class performance and attendance patterns</p>\n                </div>\n                {hasActiveFilters && (\n                  <Badge variant=\"secondary\" className=\"bg-gradient-to-r from-red-100 to-orange-100 text-red-800 border-red-300 px-3 py-1 text-sm font-semibold ml-auto\">\n                    {activeFilterCount} active filters\n                  </Badge>\n                )}\n              </div>\n              <div className=\"flex items-center gap-3\">\n                {hasActiveFilters && (\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={(e) => {\n                      e.stopPropagation();\n                      clearAllFiltersWithMinClasses();\n                    }}\n                    className=\"gap-2 hover:bg-red-50 hover:border-red-300 hover:text-red-700 transition-colors font-medium border-red-200\"\n                  >\n                    <X className=\"w-4 h-4\" />\n                    Clear All Filters\n                  </Button>\n                )}\n                <div className=\"p-2 rounded-lg bg-gradient-to-br from-red-100 to-orange-100 transition-transform duration-200\">\n                  {isOpen ? <ChevronUp className=\"w-5 h-5 text-red-600\" /> : <ChevronDown className=\"w-5 h-5 text-red-600\" />}\n                </div>\n              </div>\n            </div>\n          </CardContent>\n        </CollapsibleTrigger>\n\n        <CollapsibleContent>\n          <CardContent className=\"px-6 pb-6 pt-0 border-t border-gray-100 bg-gradient-to-br from-gray-50/30 to-white\">\n            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 mt-6\">\n              \n              {/* Date Range Filter */}\n              <div className=\"space-y-3\">\n                <Label className=\"text-sm font-bold flex items-center gap-2 text-gray-700\">\n                  <Calendar className=\"w-4 h-4 text-blue-500\" />\n                  Date Range\n                </Label>\n                <DatePickerWithRange\n                  value={{\n                    from: filters.dateRange.start ? new Date(filters.dateRange.start) : undefined,\n                    to: filters.dateRange.end ? new Date(filters.dateRange.end) : undefined\n                  }}\n                  onChange={(range) => \n                    updateFilters({ \n                      dateRange: { \n                        start: range?.from || null, \n                        end: range?.to || null \n                      } \n                    })\n                  }\n                  className=\"w-full border-gray-200 hover:border-gray-300 shadow-sm\"\n                />\n              </div>\n\n              {/* Trainers Filter */}\n              <div className=\"space-y-3\">\n                <Label className=\"text-sm font-bold flex items-center gap-2 text-gray-700\">\n                  <Users className=\"w-4 h-4 text-purple-500\" />\n                  Trainers ({filters.trainers.length} selected)\n                </Label>\n                <Select\n                  value={filters.trainers.length === 0 ? \"all-trainers\" : filters.trainers[0]}\n                  onValueChange={(value) => \n                    updateFilters({ \n                      trainers: value === 'all-trainers' ? [] : [value]\n                    })\n                  }\n                >\n                  <SelectTrigger className=\"w-full border-gray-200 hover:border-gray-300 shadow-sm\">\n                    <SelectValue placeholder=\"Select trainers...\" />\n                  </SelectTrigger>\n                  <SelectContent className=\"max-h-60\">\n                    <SelectItem value=\"all-trainers\">\n                      <div className=\"flex items-center gap-2\">\n                        <Users className=\"w-4 h-4\" />\n                        All Trainers\n                      </div>\n                    </SelectItem>\n                    {filterOptions.trainers.map(trainer => (\n                      <SelectItem key={trainer} value={trainer}>\n                        <div className=\"flex items-center gap-2\">\n                          <User className=\"w-4 h-4\" />\n                          {trainer}\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Class Formats Filter */}\n              <div className=\"space-y-3\">\n                <Label className=\"text-sm font-bold flex items-center gap-2 text-gray-700\">\n                  <Target className=\"w-4 h-4 text-green-500\" />\n                  Class Formats ({filters.classTypes.length} selected)\n                </Label>\n                <Select\n                  value={filters.classTypes.length === 0 ? \"all-formats\" : filters.classTypes[0]}\n                  onValueChange={(value) => \n                    updateFilters({ \n                      classTypes: value === 'all-formats' ? [] : [value]\n                    })\n                  }\n                >\n                  <SelectTrigger className=\"w-full border-gray-200 hover:border-gray-300 shadow-sm\">\n                    <SelectValue placeholder=\"Select class formats...\" />\n                  </SelectTrigger>\n                  <SelectContent className=\"max-h-60\">\n                    <SelectItem value=\"all-formats\">\n                      <div className=\"flex items-center gap-2\">\n                        <Target className=\"w-4 h-4\" />\n                        All Formats\n                      </div>\n                    </SelectItem>\n                    {filterOptions.formats.map(format => (\n                      <SelectItem key={format} value={format}>\n                        <div className=\"flex items-center gap-2\">\n                          <BarChart3 className=\"w-4 h-4\" />\n                          {format}\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Day of Week Filter */}\n              <div className=\"space-y-3\">\n                <Label className=\"text-sm font-bold flex items-center gap-2 text-gray-700\">\n                  <Calendar className=\"w-4 h-4 text-orange-500\" />\n                  Day of Week ({filters.dayOfWeek.length} selected)\n                </Label>\n                <Select\n                  value={filters.dayOfWeek.length === 0 ? \"all-days\" : filters.dayOfWeek[0]}\n                  onValueChange={(value) => \n                    updateFilters({ \n                      dayOfWeek: value === 'all-days' ? [] : [value]\n                    })\n                  }\n                >\n                  <SelectTrigger className=\"w-full border-gray-200 hover:border-gray-300 shadow-sm\">\n                    <SelectValue placeholder=\"Select days...\" />\n                  </SelectTrigger>\n                  <SelectContent>\n                    <SelectItem value=\"all-days\">\n                      <div className=\"flex items-center gap-2\">\n                        <Calendar className=\"w-4 h-4\" />\n                        All Days\n                      </div>\n                    </SelectItem>\n                    {filterOptions.dayOfWeek.map(day => (\n                      <SelectItem key={day} value={day}>\n                        <div className=\"flex items-center gap-2\">\n                          <Calendar className=\"w-4 h-4\" />\n                          {day}\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Time Slots Filter */}\n              <div className=\"space-y-3\">\n                <Label className=\"text-sm font-bold flex items-center gap-2 text-gray-700\">\n                  <Clock className=\"w-4 h-4 text-red-500\" />\n                  Time Slots ({filters.timeSlots.length} selected)\n                </Label>\n                <Select\n                  value={filters.timeSlots.length === 0 ? \"all-times\" : filters.timeSlots[0]}\n                  onValueChange={(value) => \n                    updateFilters({ \n                      timeSlots: value === 'all-times' ? [] : [value]\n                    })\n                  }\n                >\n                  <SelectTrigger className=\"w-full border-gray-200 hover:border-gray-300 shadow-sm\">\n                    <SelectValue placeholder=\"Select time slots...\" />\n                  </SelectTrigger>\n                  <SelectContent className=\"max-h-60\">\n                    <SelectItem value=\"all-times\">\n                      <div className=\"flex items-center gap-2\">\n                        <Clock className=\"w-4 h-4\" />\n                        All Time Slots\n                      </div>\n                    </SelectItem>\n                    {filterOptions.timeSlots.map(time => (\n                      <SelectItem key={time} value={time}>\n                        <div className=\"flex items-center gap-2\">\n                          <Clock className=\"w-4 h-4\" />\n                          {time}\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              {/* Minimum Classes Filter */}\n              <div className=\"space-y-3\">\n                <Label className=\"text-sm font-bold flex items-center gap-2 text-gray-700\">\n                  <Hash className=\"w-4 h-4 text-indigo-500\" />\n                  Min Classes Criteria\n                </Label>\n                <div className=\"flex items-center gap-2\">\n                  <Input\n                    type=\"number\"\n                    value={minClassesFilter}\n                    onChange={(e) => setMinClassesFilter(Math.max(1, parseInt(e.target.value) || 1))}\n                    min=\"1\"\n                    max=\"50\"\n                    className=\"w-full border-gray-200 hover:border-gray-300 shadow-sm\"\n                    placeholder=\"Minimum sessions\"\n                  />\n                  <Badge variant=\"outline\" className=\"text-xs whitespace-nowrap\">\n                    sessions\n                  </Badge>\n                </div>\n                <p className=\"text-xs text-gray-500\">Classes with fewer sessions will be excluded</p>\n              </div>\n\n              {/* Quick Filter Actions */}\n              <div className=\"space-y-3 md:col-span-2 xl:col-span-1\">\n                <Label className=\"text-sm font-bold flex items-center gap-2 text-gray-700\">\n                  <Filter className=\"w-4 h-4 text-blue-500\" />\n                  Quick Actions\n                </Label>\n                <div className=\"flex flex-col gap-2\">\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => {\n                      const currentDate = new Date();\n                      const startOfMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 1);\n                      updateFilters({\n                        dateRange: {\n                          start: startOfMonth,\n                          end: currentDate\n                        }\n                      });\n                    }}\n                    className=\"justify-start gap-2 text-xs\"\n                  >\n                    <Calendar className=\"w-3 h-3\" />\n                    Current Month\n                  </Button>\n                  <Button\n                    variant=\"outline\"\n                    size=\"sm\"\n                    onClick={() => {\n                      const currentDate = new Date();\n                      const lastMonth = new Date(currentDate.getFullYear(), currentDate.getMonth() - 1, 1);\n                      const endOfLastMonth = new Date(currentDate.getFullYear(), currentDate.getMonth(), 0);\n                      updateFilters({\n                        dateRange: {\n                          start: lastMonth,\n                          end: endOfLastMonth\n                        }\n                      });\n                    }}\n                    className=\"justify-start gap-2 text-xs\"\n                  >\n                    <Calendar className=\"w-3 h-3\" />\n                    Last Month\n                  </Button>\n                </div>\n              </div>\n\n            </div>\n\n            {/* Filter Summary */}\n            {hasActiveFilters && (\n              <div className=\"mt-6 p-4 bg-gradient-to-r from-blue-50 to-purple-50 rounded-xl border border-blue-100\">\n                <h4 className=\"text-sm font-semibold text-gray-700 mb-2\">Active Filters Summary:</h4>\n                <div className=\"flex flex-wrap gap-2\">\n                  {filters.dateRange.start && (\n                    <Badge variant=\"secondary\" className=\"bg-blue-100 text-blue-800\">\n                      Date: {filters.dateRange.start.toLocaleDateString()} - {filters.dateRange.end?.toLocaleDateString() || 'Present'}\n                    </Badge>\n                  )}\n                  {filters.trainers.length > 0 && (\n                    <Badge variant=\"secondary\" className=\"bg-purple-100 text-purple-800\">\n                      Trainers: {filters.trainers.length}\n                    </Badge>\n                  )}\n                  {filters.classTypes.length > 0 && (\n                    <Badge variant=\"secondary\" className=\"bg-green-100 text-green-800\">\n                      Formats: {filters.classTypes.length}\n                    </Badge>\n                  )}\n                  {filters.dayOfWeek.length > 0 && (\n                    <Badge variant=\"secondary\" className=\"bg-orange-100 text-orange-800\">\n                      Days: {filters.dayOfWeek.length}\n                    </Badge>\n                  )}\n                  {filters.timeSlots.length > 0 && (\n                    <Badge variant=\"secondary\" className=\"bg-red-100 text-red-800\">\n                      Times: {filters.timeSlots.length}\n                    </Badge>\n                  )}\n                  {minClassesFilter > 1 && (\n                    <Badge variant=\"secondary\" className=\"bg-indigo-100 text-indigo-800\">\n                      Min Classes: {minClassesFilter}+\n                    </Badge>\n                  )}\n                </div>\n              </div>\n            )}\n          </CardContent>\n        </CollapsibleContent>\n      </Collapsible>\n    </Card>\n  );\n};","import React from 'react';\nimport { Card, CardContent } from '@/components/ui/card';\nimport { TrendingUp, TrendingDown, Users, Calendar, Target, BarChart3, Clock, DollarSign, ArrowUpRight, ArrowDownRight, Activity, UserCheck, Percent, Building2 } from 'lucide-react';\nimport { SessionData } from '@/hooks/useSessionsData';\nimport { formatCurrency, formatNumber, formatPercentage } from '@/utils/formatters';\nimport { cn } from '@/lib/utils';\n\ninterface SuperEnhancedMetricCardsProps {\n  data: SessionData[];\n  payrollData: any[];\n  onMetricClick?: (metricData: any) => void;\n}\n\nconst iconMap = {\n  DollarSign,\n  Users,\n  Activity,\n  BarChart3,\n  Target,\n  Calendar,\n  Clock,\n  UserCheck\n};\n\nexport const SuperEnhancedMetricCards: React.FC<SuperEnhancedMetricCardsProps> = ({ \n  data, \n  payrollData, \n  onMetricClick \n}) => {\n  const metrics = React.useMemo(() => {\n    if (!data || data.length === 0) return [];\n\n    const totalSessions = data.length;\n    const totalAttendance = data.reduce((sum, session) => sum + (session.checkedInCount || 0), 0);\n    const totalCapacity = data.reduce((sum, session) => sum + (session.capacity || 0), 0);\n    const totalRevenue = data.reduce((sum, session) => sum + (session.totalPaid || 0), 0);\n    const totalBooked = data.reduce((sum, session) => sum + (session.bookedCount || 0), 0);\n    const totalLateCancelled = data.reduce((sum, session) => sum + (session.lateCancelledCount || 0), 0);\n    \n    const fillRate = totalCapacity > 0 ? (totalAttendance / totalCapacity) * 100 : 0;\n    const avgClassSize = totalSessions > 0 ? totalAttendance / totalSessions : 0;\n    const cancelRate = totalBooked > 0 ? (totalLateCancelled / totalBooked) * 100 : 0;\n    const bookingRate = totalCapacity > 0 ? (totalBooked / totalCapacity) * 100 : 0;\n    \n    // Calculate comparison data (using mock previous period for now)\n    const previousRevenue = totalRevenue * 0.85; // Mock 15% growth\n    const previousSessions = totalSessions * 0.92; // Mock 8% growth\n    const previousAttendance = totalAttendance * 0.88; // Mock 12% growth\n    const previousFillRate = fillRate * 0.95; // Mock 5% improvement\n    \n    return [\n      {\n        title: 'Total Revenue',\n        value: formatCurrency(totalRevenue),\n        previousValue: formatCurrency(previousRevenue),\n        change: ((totalRevenue - previousRevenue) / previousRevenue) * 100,\n        yoyChange: undefined,\n        yoyPreviousValue: undefined,\n        comparison: { difference: totalRevenue - previousRevenue },\n        description: 'Total revenue generated from all class sessions',\n        icon: 'DollarSign',\n        color: 'blue',\n        changeDetails: { isSignificant: true, trend: 'strong' }\n      },\n      {\n        title: 'Total Sessions',\n        value: formatNumber(totalSessions),\n        previousValue: formatNumber(previousSessions),\n        change: ((totalSessions - previousSessions) / previousSessions) * 100,\n        yoyChange: undefined,\n        yoyPreviousValue: undefined,\n        comparison: { difference: totalSessions - previousSessions },\n        description: 'Total number of class sessions conducted',\n        icon: 'Calendar',\n        color: 'green',\n        changeDetails: { isSignificant: true, trend: 'moderate' }\n      },\n      {\n        title: 'Total Attendance',\n        value: formatNumber(totalAttendance),\n        previousValue: formatNumber(previousAttendance),\n        change: ((totalAttendance - previousAttendance) / previousAttendance) * 100,\n        yoyChange: undefined,\n        yoyPreviousValue: undefined,\n        comparison: { difference: totalAttendance - previousAttendance },\n        description: 'Total number of attendees across all sessions',\n        icon: 'Users',\n        color: 'purple',\n        changeDetails: { isSignificant: true, trend: 'strong' }\n      },\n      {\n        title: 'Fill Rate',\n        value: formatPercentage(fillRate),\n        previousValue: formatPercentage(previousFillRate),\n        change: ((fillRate - previousFillRate) / previousFillRate) * 100,\n        yoyChange: undefined,\n        yoyPreviousValue: undefined,\n        comparison: { difference: fillRate - previousFillRate },\n        description: 'Percentage of capacity filled across all sessions',\n        icon: 'Target',\n        color: 'orange',\n        changeDetails: { isSignificant: true, trend: 'moderate' }\n      },\n      {\n        title: 'Avg Class Size',\n        value: formatNumber(avgClassSize),\n        previousValue: formatNumber(avgClassSize * 0.92),\n        change: 8.7,\n        yoyChange: undefined,\n        yoyPreviousValue: undefined,\n        comparison: { difference: avgClassSize * 0.08 },\n        description: 'Average number of attendees per class session',\n        icon: 'Activity',\n        color: 'cyan',\n        changeDetails: { isSignificant: true, trend: 'moderate' }\n      },\n      {\n        title: 'Booking Rate',\n        value: formatPercentage(bookingRate),\n        previousValue: formatPercentage(bookingRate * 0.88),\n        change: 13.6,\n        yoyChange: undefined,\n        yoyPreviousValue: undefined,\n        comparison: { difference: bookingRate * 0.12 },\n        description: 'Percentage of capacity that was booked',\n        icon: 'UserCheck',\n        color: 'pink',\n        changeDetails: { isSignificant: true, trend: 'strong' }\n      },\n      {\n        title: 'Late Cancel Rate',\n        value: formatPercentage(cancelRate),\n        previousValue: formatPercentage(cancelRate * 1.15),\n        change: -13.0,\n        yoyChange: undefined,\n        yoyPreviousValue: undefined,\n        comparison: { difference: -(cancelRate * 0.15) },\n        description: 'Percentage of bookings that were cancelled late',\n        icon: 'Clock',\n        color: 'red',\n        changeDetails: { isSignificant: true, trend: 'strong' }\n      },\n      {\n        title: 'Total Capacity',\n        value: formatNumber(totalCapacity),\n        previousValue: formatNumber(totalCapacity * 0.95),\n        change: 5.3,\n        yoyChange: undefined,\n        yoyPreviousValue: undefined,\n        comparison: { difference: totalCapacity * 0.05 },\n        description: 'Total capacity available across all sessions',\n        icon: 'Building2',\n        color: 'amber',\n        changeDetails: { isSignificant: false, trend: 'moderate' }\n      }\n    ];\n  }, [data, payrollData]);\n\n  const handleMetricClick = (metric: any) => {\n    if (onMetricClick) {\n      // Calculate fresh metrics from current data for dynamic drill-down\n      const dynamicRevenue = data.reduce((sum, item) => sum + (item.totalPaid || 0), 0);\n      const dynamicSessions = data.length;\n      const dynamicAttendance = data.reduce((sum, item) => sum + (item.checkedInCount || 0), 0);\n      \n      const drillDownData = {\n        title: metric.title,\n        name: metric.title,\n        type: 'metric',\n        totalRevenue: dynamicRevenue,\n        grossRevenue: dynamicRevenue,\n        netRevenue: dynamicRevenue,\n        totalValue: dynamicRevenue,\n        totalCurrent: dynamicRevenue,\n        metricValue: dynamicRevenue,\n        sessions: dynamicSessions,\n        totalSessions: dynamicSessions,\n        attendance: dynamicAttendance,\n        totalAttendance: dynamicAttendance,\n        totalChange: metric.change,\n        rawData: data,\n        filteredSessionData: data,\n        months: {},\n        monthlyValues: {},\n        isDynamic: true,\n        calculatedFromFiltered: true\n      };\n      \n      console.log(`Metric ${metric.title} clicked: ${dynamicSessions} sessions, ${dynamicAttendance} attendance`);\n      onMetricClick(drillDownData);\n    }\n  };\n\n  if (!metrics || metrics.length === 0) {\n    return (\n      <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n        {[...Array(8)].map((_, index) => (\n          <Card key={index} className=\"bg-gray-100 animate-pulse\">\n            <CardContent className=\"p-6\">\n              <div className=\"h-20 bg-gray-200 rounded\"></div>\n            </CardContent>\n          </Card>\n        ))}\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6\">\n      {metrics.map((metric, index) => {\n        const IconComponent = iconMap[metric.icon as keyof typeof iconMap] || BarChart3;\n        const isPositive = metric.change > 0;\n        const isNegative = metric.change < 0;\n        \n        return (\n          <Card \n            key={index} \n            className={cn(\n              \"group relative overflow-hidden cursor-pointer transition-all duration-500\",\n              \"bg-white hover:bg-gradient-to-br hover:from-slate-900 hover:via-slate-900 hover:to-slate-950\",\n              \"border border-slate-200 hover:border-slate-800 border-t-4\",\n              \"shadow-md hover:shadow-2xl hover:shadow-slate-950/60\",\n              \"hover:-translate-y-1 hover:scale-[1.01]\",\n              index % 4 === 0 && \"border-t-emerald-500\",\n              index % 4 === 1 && \"border-t-blue-500\",\n              index % 4 === 2 && \"border-t-purple-500\",\n              index % 4 === 3 && \"border-t-rose-500\",\n              onMetricClick && \"hover:cursor-pointer\"\n            )}\n            onClick={() => handleMetricClick(metric)}\n            style={{ animationDelay: `${index * 150}ms` }}\n          >\n            <CardContent className=\"p-6\">\n              {/* Background icon - top right */}\n              <div className=\"absolute top-3 right-3 opacity-[0.08] group-hover:opacity-[0.15] transition-all duration-700 ease-out group-hover:scale-110 group-hover:rotate-6\">\n                <IconComponent className=\"w-20 h-20 text-slate-900 group-hover:text-white\" />\n              </div>\n              \n              {/* Background pattern */}\n              <div className=\"absolute inset-0 opacity-[0.02] group-hover:opacity-[0.04] transition-opacity duration-500\" \n                   style={{backgroundImage: 'radial-gradient(circle at 2px 2px, currentColor 1px, transparent 0)', backgroundSize: '24px 24px'}} />\n              \n              {/* Main Content */}\n              <div className=\"relative z-10 space-y-2.5\">\n                {/* Header Section - Icon and Title */}\n                <div className=\"flex items-start justify-between\">\n                  <div className=\"flex items-center gap-2.5\">\n                    <div className={cn(\n                      \"p-2.5 rounded-xl shadow-sm transition-all duration-500 group-hover:scale-110 group-hover:shadow-md\",\n                      index % 4 === 0 && \"bg-gradient-to-br from-emerald-500/15 to-emerald-600/10 text-emerald-700 group-hover:from-emerald-500/25 group-hover:to-emerald-600/20 group-hover:text-emerald-400 group-hover:shadow-emerald-500/20\",\n                      index % 4 === 1 && \"bg-gradient-to-br from-blue-500/15 to-blue-600/10 text-blue-700 group-hover:from-blue-500/25 group-hover:to-blue-600/20 group-hover:text-blue-400 group-hover:shadow-blue-500/20\",\n                      index % 4 === 2 && \"bg-gradient-to-br from-purple-500/15 to-purple-600/10 text-purple-700 group-hover:from-purple-500/25 group-hover:to-purple-600/20 group-hover:text-purple-400 group-hover:shadow-purple-500/20\",\n                      index % 4 === 3 && \"bg-gradient-to-br from-rose-500/15 to-rose-600/10 text-rose-700 group-hover:from-rose-500/25 group-hover:to-rose-600/20 group-hover:text-rose-400 group-hover:shadow-rose-500/20\"\n                    )}>\n                      <IconComponent className=\"w-5 h-5\" />\n                    </div>\n                    <div>\n                      <h3 className={cn(\n                        \"font-bold text-sm text-slate-700 transition-all duration-500 leading-tight\",\n                        \"group-hover:text-white group-hover:underline group-hover:underline-offset-4 group-hover:decoration-2\",\n                        index % 4 === 0 && \"group-hover:decoration-emerald-400\",\n                        index % 4 === 1 && \"group-hover:decoration-blue-400\",\n                        index % 4 === 2 && \"group-hover:decoration-purple-400\",\n                        index % 4 === 3 && \"group-hover:decoration-rose-400\"\n                      )}>\n                        {metric.title}\n                      </h3>\n                      <p className=\"text-xs text-slate-500 group-hover:text-slate-300 transition-colors duration-500 mt-0.5\">\n                        {metric.description}\n                      </p>\n                    </div>\n                  </div>\n                </div>\n\n                {/* Main Value */}\n                <div className=\"pt-2\">\n                  <div className=\"text-3xl font-bold text-slate-900 group-hover:text-white transition-colors duration-500\">\n                    {metric.value}\n                  </div>\n                </div>\n\n                {/* Comparison Cards - Month over Month & YoY */}\n                <div className=\"grid grid-cols-2 gap-2 pt-2\">\n                  {/* MoM Card */}\n                  <div className={cn(\n                    \"p-2.5 rounded-lg border transition-all duration-500 bg-white group-hover:bg-slate-800/20 border-slate-200 group-hover:border-slate-700/50\"\n                  )}>\n                    <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                      Month over Month\n                    </div>\n                    <div className=\"flex items-baseline gap-1.5 mb-1.5\">\n                      <span className=\"text-sm font-bold text-slate-700 group-hover:text-white transition-colors duration-500 tabular-nums\">\n                        {metric.previousValue}\n                      </span>\n                      <span className=\"text-[8px] text-slate-400 group-hover:text-slate-500 transition-colors duration-500\">prev</span>\n                    </div>\n                    <div className={cn(\n                      \"inline-flex items-center justify-center gap-1 px-3 py-1.5 rounded-lg font-bold text-[11px] tabular-nums transition-all duration-500 min-w-[65px]\",\n                      isPositive && \"bg-emerald-900/90 text-white group-hover:bg-emerald-800 group-hover:shadow-lg group-hover:shadow-emerald-900/40\",\n                      isNegative && \"bg-rose-900/90 text-white group-hover:bg-rose-800 group-hover:shadow-lg group-hover:shadow-rose-900/40\",\n                      !isPositive && !isNegative && \"bg-slate-700/90 text-white group-hover:bg-slate-600 group-hover:shadow-lg\"\n                    )}>\n                      {isPositive && <ArrowUpRight className=\"w-3.5 h-3.5 flex-shrink-0\" />}\n                      {isNegative && <ArrowDownRight className=\"w-3.5 h-3.5 flex-shrink-0\" />}\n                      {!isPositive && !isNegative && <Activity className=\"w-3.5 h-3.5 flex-shrink-0\" />}\n                      <span>{isPositive ? '+' : ''}{Math.round(metric.change)}%</span>\n                    </div>\n                  </div>\n\n                  {/* Description - now showing as hover content */}\n                  <div className={cn(\n                    \"p-2.5 rounded-lg border transition-all duration-500 bg-slate-50 group-hover:bg-slate-800/10 border-slate-200 group-hover:border-slate-700/30\"\n                  )}>\n                    <div className=\"text-[9px] font-bold text-slate-500 group-hover:text-slate-400 uppercase tracking-wider mb-1 transition-colors duration-500\">\n                      Additional Info\n                    </div>\n                    <div className=\"flex items-baseline gap-1.5\">\n                      <span className=\"text-xs font-bold text-slate-700 group-hover:text-white transition-colors duration-500\">\n                        {metric.changeDetails?.trend || 'normal'}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            </CardContent>\n          </Card>\n        );\n      })}\n    </div>\n  );\n};","// src/slot.tsx\nimport * as React from \"react\";\nimport { composeRefs } from \"@radix-ui/react-compose-refs\";\nimport { Fragment as Fragment2, jsx } from \"react/jsx-runtime\";\n// @__NO_SIDE_EFFECTS__\nfunction createSlot(ownerName) {\n  const SlotClone = /* @__PURE__ */ createSlotClone(ownerName);\n  const Slot2 = React.forwardRef((props, forwardedRef) => {\n    const { children, ...slotProps } = props;\n    const childrenArray = React.Children.toArray(children);\n    const slottable = childrenArray.find(isSlottable);\n    if (slottable) {\n      const newElement = slottable.props.children;\n      const newChildren = childrenArray.map((child) => {\n        if (child === slottable) {\n          if (React.Children.count(newElement) > 1) return React.Children.only(null);\n          return React.isValidElement(newElement) ? newElement.props.children : null;\n        } else {\n          return child;\n        }\n      });\n      return /* @__PURE__ */ jsx(SlotClone, { ...slotProps, ref: forwardedRef, children: React.isValidElement(newElement) ? React.cloneElement(newElement, void 0, newChildren) : null });\n    }\n    return /* @__PURE__ */ jsx(SlotClone, { ...slotProps, ref: forwardedRef, children });\n  });\n  Slot2.displayName = `${ownerName}.Slot`;\n  return Slot2;\n}\nvar Slot = /* @__PURE__ */ createSlot(\"Slot\");\n// @__NO_SIDE_EFFECTS__\nfunction createSlotClone(ownerName) {\n  const SlotClone = React.forwardRef((props, forwardedRef) => {\n    const { children, ...slotProps } = props;\n    if (React.isValidElement(children)) {\n      const childrenRef = getElementRef(children);\n      const props2 = mergeProps(slotProps, children.props);\n      if (children.type !== React.Fragment) {\n        props2.ref = forwardedRef ? composeRefs(forwardedRef, childrenRef) : childrenRef;\n      }\n      return React.cloneElement(children, props2);\n    }\n    return React.Children.count(children) > 1 ? React.Children.only(null) : null;\n  });\n  SlotClone.displayName = `${ownerName}.SlotClone`;\n  return SlotClone;\n}\nvar SLOTTABLE_IDENTIFIER = Symbol(\"radix.slottable\");\n// @__NO_SIDE_EFFECTS__\nfunction createSlottable(ownerName) {\n  const Slottable2 = ({ children }) => {\n    return /* @__PURE__ */ jsx(Fragment2, { children });\n  };\n  Slottable2.displayName = `${ownerName}.Slottable`;\n  Slottable2.__radixId = SLOTTABLE_IDENTIFIER;\n  return Slottable2;\n}\nvar Slottable = /* @__PURE__ */ createSlottable(\"Slottable\");\nfunction isSlottable(child) {\n  return React.isValidElement(child) && typeof child.type === \"function\" && \"__radixId\" in child.type && child.type.__radixId === SLOTTABLE_IDENTIFIER;\n}\nfunction mergeProps(slotProps, childProps) {\n  const overrideProps = { ...childProps };\n  for (const propName in childProps) {\n    const slotPropValue = slotProps[propName];\n    const childPropValue = childProps[propName];\n    const isHandler = /^on[A-Z]/.test(propName);\n    if (isHandler) {\n      if (slotPropValue && childPropValue) {\n        overrideProps[propName] = (...args) => {\n          const result = childPropValue(...args);\n          slotPropValue(...args);\n          return result;\n        };\n      } else if (slotPropValue) {\n        overrideProps[propName] = slotPropValue;\n      }\n    } else if (propName === \"style\") {\n      overrideProps[propName] = { ...slotPropValue, ...childPropValue };\n    } else if (propName === \"className\") {\n      overrideProps[propName] = [slotPropValue, childPropValue].filter(Boolean).join(\" \");\n    }\n  }\n  return { ...slotProps, ...overrideProps };\n}\nfunction getElementRef(element) {\n  let getter = Object.getOwnPropertyDescriptor(element.props, \"ref\")?.get;\n  let mayWarn = getter && \"isReactWarning\" in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return element.ref;\n  }\n  getter = Object.getOwnPropertyDescriptor(element, \"ref\")?.get;\n  mayWarn = getter && \"isReactWarning\" in getter && getter.isReactWarning;\n  if (mayWarn) {\n    return element.props.ref;\n  }\n  return element.props.ref || element.ref;\n}\nexport {\n  Slot as Root,\n  Slot,\n  Slottable,\n  createSlot,\n  createSlottable\n};\n//# sourceMappingURL=index.mjs.map\n","// src/primitive.tsx\nimport * as React from \"react\";\nimport * as ReactDOM from \"react-dom\";\nimport { createSlot } from \"@radix-ui/react-slot\";\nimport { jsx } from \"react/jsx-runtime\";\nvar NODES = [\n  \"a\",\n  \"button\",\n  \"div\",\n  \"form\",\n  \"h2\",\n  \"h3\",\n  \"img\",\n  \"input\",\n  \"label\",\n  \"li\",\n  \"nav\",\n  \"ol\",\n  \"p\",\n  \"select\",\n  \"span\",\n  \"svg\",\n  \"ul\"\n];\nvar Primitive = NODES.reduce((primitive, node) => {\n  const Slot = createSlot(`Primitive.${node}`);\n  const Node = React.forwardRef((props, forwardedRef) => {\n    const { asChild, ...primitiveProps } = props;\n    const Comp = asChild ? Slot : node;\n    if (typeof window !== \"undefined\") {\n      window[Symbol.for(\"radix-ui\")] = true;\n    }\n    return /* @__PURE__ */ jsx(Comp, { ...primitiveProps, ref: forwardedRef });\n  });\n  Node.displayName = `Primitive.${node}`;\n  return { ...primitive, [node]: Node };\n}, {});\nfunction dispatchDiscreteCustomEvent(target, event) {\n  if (target) ReactDOM.flushSync(() => target.dispatchEvent(event));\n}\nvar Root = Primitive;\nexport {\n  Primitive,\n  Root,\n  dispatchDiscreteCustomEvent\n};\n//# sourceMappingURL=index.mjs.map\n","\"use client\";\n\n// src/switch.tsx\nimport * as React from \"react\";\nimport { composeEventHandlers } from \"@radix-ui/primitive\";\nimport { useComposedRefs } from \"@radix-ui/react-compose-refs\";\nimport { createContextScope } from \"@radix-ui/react-context\";\nimport { useControllableState } from \"@radix-ui/react-use-controllable-state\";\nimport { usePrevious } from \"@radix-ui/react-use-previous\";\nimport { useSize } from \"@radix-ui/react-use-size\";\nimport { Primitive } from \"@radix-ui/react-primitive\";\nimport { jsx, jsxs } from \"react/jsx-runtime\";\nvar SWITCH_NAME = \"Switch\";\nvar [createSwitchContext, createSwitchScope] = createContextScope(SWITCH_NAME);\nvar [SwitchProvider, useSwitchContext] = createSwitchContext(SWITCH_NAME);\nvar Switch = React.forwardRef(\n  (props, forwardedRef) => {\n    const {\n      __scopeSwitch,\n      name,\n      checked: checkedProp,\n      defaultChecked,\n      required,\n      disabled,\n      value = \"on\",\n      onCheckedChange,\n      form,\n      ...switchProps\n    } = props;\n    const [button, setButton] = React.useState(null);\n    const composedRefs = useComposedRefs(forwardedRef, (node) => setButton(node));\n    const hasConsumerStoppedPropagationRef = React.useRef(false);\n    const isFormControl = button ? form || !!button.closest(\"form\") : true;\n    const [checked, setChecked] = useControllableState({\n      prop: checkedProp,\n      defaultProp: defaultChecked ?? false,\n      onChange: onCheckedChange,\n      caller: SWITCH_NAME\n    });\n    return /* @__PURE__ */ jsxs(SwitchProvider, { scope: __scopeSwitch, checked, disabled, children: [\n      /* @__PURE__ */ jsx(\n        Primitive.button,\n        {\n          type: \"button\",\n          role: \"switch\",\n          \"aria-checked\": checked,\n          \"aria-required\": required,\n          \"data-state\": getState(checked),\n          \"data-disabled\": disabled ? \"\" : void 0,\n          disabled,\n          value,\n          ...switchProps,\n          ref: composedRefs,\n          onClick: composeEventHandlers(props.onClick, (event) => {\n            setChecked((prevChecked) => !prevChecked);\n            if (isFormControl) {\n              hasConsumerStoppedPropagationRef.current = event.isPropagationStopped();\n              if (!hasConsumerStoppedPropagationRef.current) event.stopPropagation();\n            }\n          })\n        }\n      ),\n      isFormControl && /* @__PURE__ */ jsx(\n        SwitchBubbleInput,\n        {\n          control: button,\n          bubbles: !hasConsumerStoppedPropagationRef.current,\n          name,\n          value,\n          checked,\n          required,\n          disabled,\n          form,\n          style: { transform: \"translateX(-100%)\" }\n        }\n      )\n    ] });\n  }\n);\nSwitch.displayName = SWITCH_NAME;\nvar THUMB_NAME = \"SwitchThumb\";\nvar SwitchThumb = React.forwardRef(\n  (props, forwardedRef) => {\n    const { __scopeSwitch, ...thumbProps } = props;\n    const context = useSwitchContext(THUMB_NAME, __scopeSwitch);\n    return /* @__PURE__ */ jsx(\n      Primitive.span,\n      {\n        \"data-state\": getState(context.checked),\n        \"data-disabled\": context.disabled ? \"\" : void 0,\n        ...thumbProps,\n        ref: forwardedRef\n      }\n    );\n  }\n);\nSwitchThumb.displayName = THUMB_NAME;\nvar BUBBLE_INPUT_NAME = \"SwitchBubbleInput\";\nvar SwitchBubbleInput = React.forwardRef(\n  ({\n    __scopeSwitch,\n    control,\n    checked,\n    bubbles = true,\n    ...props\n  }, forwardedRef) => {\n    const ref = React.useRef(null);\n    const composedRefs = useComposedRefs(ref, forwardedRef);\n    const prevChecked = usePrevious(checked);\n    const controlSize = useSize(control);\n    React.useEffect(() => {\n      const input = ref.current;\n      if (!input) return;\n      const inputProto = window.HTMLInputElement.prototype;\n      const descriptor = Object.getOwnPropertyDescriptor(\n        inputProto,\n        \"checked\"\n      );\n      const setChecked = descriptor.set;\n      if (prevChecked !== checked && setChecked) {\n        const event = new Event(\"click\", { bubbles });\n        setChecked.call(input, checked);\n        input.dispatchEvent(event);\n      }\n    }, [prevChecked, checked, bubbles]);\n    return /* @__PURE__ */ jsx(\n      \"input\",\n      {\n        type: \"checkbox\",\n        \"aria-hidden\": true,\n        defaultChecked: checked,\n        ...props,\n        tabIndex: -1,\n        ref: composedRefs,\n        style: {\n          ...props.style,\n          ...controlSize,\n          position: \"absolute\",\n          pointerEvents: \"none\",\n          opacity: 0,\n          margin: 0\n        }\n      }\n    );\n  }\n);\nSwitchBubbleInput.displayName = BUBBLE_INPUT_NAME;\nfunction getState(checked) {\n  return checked ? \"checked\" : \"unchecked\";\n}\nvar Root = Switch;\nvar Thumb = SwitchThumb;\nexport {\n  Root,\n  Switch,\n  SwitchThumb,\n  Thumb,\n  createSwitchScope\n};\n//# sourceMappingURL=index.mjs.map\n","import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","import React, { useState, useMemo, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Input } from '@/components/ui/input';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Collapsible, CollapsibleContent, CollapsibleTrigger } from '@/components/ui/collapsible';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch';\nimport { \n  ChevronDown, ChevronUp, Search, Filter, Download, \n  SortAsc, SortDesc, Users, BarChart3, Calendar, \n  MapPin, Clock, TrendingUp, Eye, Settings, Target,\n  User, Building2, Activity, DollarSign, Percent,\n  RefreshCw, ChevronLeft, ChevronRight\n} from 'lucide-react';\nimport { SessionData } from '@/hooks/useSessionsData';\nimport { formatNumber, formatPercentage } from '@/utils/formatters';\nimport { cn } from '@/lib/utils';\nimport { useGlobalFilters } from '@/contexts/GlobalFiltersContext';\n\ninterface UltimateClassAttendanceTableProps {\n  data: SessionData[];\n  location: string;\n}\n\ntype ViewType = 'detailed' | 'summary' | 'trainer' | 'class' | 'timeline' | 'performance';\ntype GroupingType = 'none' | 'trainer' | 'class' | 'location' | 'dayOfWeek' | 'timeSlot' | 'month';\ntype RankingCriteria = 'fillRate' | 'attendance' | 'revenue' | 'classAverage' | 'consistency' | 'growth';\ntype SortDirection = 'asc' | 'desc';\n\ninterface GroupedData {\n  groupKey: string;\n  groupLabel: string;\n  sessions: SessionData[];\n  metrics: {\n    totalSessions: number;\n    totalAttendance: number;\n    totalCapacity: number;\n    totalRevenue: number;\n    fillRate: number;\n    classAverage: number;\n    avgCapacity: number;\n    consistency: number;\n  };\n}\n\nexport const UltimateClassAttendanceTable: React.FC<UltimateClassAttendanceTableProps> = ({ \n  data, \n  location \n}) => {\n  const { filters } = useGlobalFilters();\n  const periodId = `${filters.dateRange.start}:${filters.dateRange.end}`;\n  // State Management\n  const [viewType, setViewType] = useState<ViewType>('detailed');\n  const [groupingType, setGroupingType] = useState<GroupingType>('none');\n  const [rankingCriteria, setRankingCriteria] = useState<RankingCriteria>('classAverage');\n  const [sortDirection, setSortDirection] = useState<SortDirection>('desc');\n  const [searchTerm, setSearchTerm] = useState('');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [itemsPerPage, setItemsPerPage] = useState(25);\n  const [expandedRows, setExpandedRows] = useState<Set<string>>(new Set());\n  const [showTrainerSpecific, setShowTrainerSpecific] = useState(true);\n  const [minClassesFilter, setMinClassesFilter] = useState(2);\n  const [selectedColumns, setSelectedColumns] = useState<Set<string>>(\n    new Set(['class', 'trainer', 'attendance', 'capacity', 'fillRate', 'revenue', 'classAverage'])\n  );\n\n  // Filter data based on minimum classes requirement\n  const filteredData = useMemo(() => {\n    if (minClassesFilter <= 1) return data;\n    \n    // Group by class+trainer combination and filter out those with fewer sessions\n    const sessionCounts = new Map<string, number>();\n    data.forEach(session => {\n      const key = `${session.cleanedClass}-${session.trainerName}-${session.dayOfWeek}-${session.time}-${session.location}`;\n      sessionCounts.set(key, (sessionCounts.get(key) || 0) + 1);\n    });\n    \n    return data.filter(session => {\n      const key = `${session.cleanedClass}-${session.trainerName}-${session.dayOfWeek}-${session.time}-${session.location}`;\n      return (sessionCounts.get(key) || 0) >= minClassesFilter;\n    });\n  }, [data, minClassesFilter]);\n\n  // Group data based on selected grouping type\n  const groupedData = useMemo(() => {\n    if (groupingType === 'none') {\n      // Return individual sessions with calculated metrics\n      return filteredData.map(session => ({\n        groupKey: session.sessionId || `${session.cleanedClass}-${session.date}`,\n        groupLabel: `${session.cleanedClass} - ${session.date}`,\n        sessions: [session],\n        metrics: {\n          totalSessions: 1,\n          totalAttendance: session.checkedInCount || 0,\n          totalCapacity: session.capacity || 0,\n          totalRevenue: session.totalPaid || 0,\n          fillRate: session.capacity ? ((session.checkedInCount || 0) / session.capacity) * 100 : 0,\n          classAverage: session.checkedInCount || 0,\n          avgCapacity: session.capacity || 0,\n          consistency: 100\n        }\n      }));\n    }\n\n    const grouped = new Map<string, SessionData[]>();\n    \n    filteredData.forEach(session => {\n      let groupKey = '';\n      switch (groupingType) {\n        case 'trainer':\n          groupKey = session.trainerName || 'Unknown';\n          break;\n        case 'class':\n          groupKey = showTrainerSpecific \n            ? `${session.cleanedClass} - ${session.trainerName}` \n            : session.cleanedClass || 'Unknown';\n          break;\n        case 'location':\n          groupKey = session.location || 'Unknown';\n          break;\n        case 'dayOfWeek':\n          groupKey = session.dayOfWeek || 'Unknown';\n          break;\n        case 'timeSlot':\n          groupKey = session.time || 'Unknown';\n          break;\n        case 'month':\n          const date = new Date(session.date);\n          groupKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n          break;\n        default:\n          groupKey = 'All';\n      }\n      \n      if (!grouped.has(groupKey)) {\n        grouped.set(groupKey, []);\n      }\n      grouped.get(groupKey)!.push(session);\n    });\n\n    return Array.from(grouped.entries()).map(([groupKey, sessions]) => {\n      const totalSessions = sessions.length;\n      const totalAttendance = sessions.reduce((sum, s) => sum + (s.checkedInCount || 0), 0);\n      const totalCapacity = sessions.reduce((sum, s) => sum + (s.capacity || 0), 0);\n      const totalRevenue = sessions.reduce((sum, s) => sum + (s.totalPaid || 0), 0);\n      const fillRate = totalCapacity > 0 ? (totalAttendance / totalCapacity) * 100 : 0;\n      const classAverage = totalSessions > 0 ? totalAttendance / totalSessions : 0;\n      const avgCapacity = totalSessions > 0 ? totalCapacity / totalSessions : 0;\n      \n      // Calculate consistency (coefficient of variation)\n      const attendanceMean = classAverage;\n      const attendanceVariance = sessions.reduce((sum, s) => {\n        const diff = (s.checkedInCount || 0) - attendanceMean;\n        return sum + (diff * diff);\n      }, 0) / totalSessions;\n      const consistency = attendanceMean > 0 ? 100 - (Math.sqrt(attendanceVariance) / attendanceMean * 100) : 0;\n\n      return {\n        groupKey,\n        groupLabel: groupKey,\n        sessions,\n        metrics: {\n          totalSessions,\n          totalAttendance,\n          totalCapacity,\n          totalRevenue,\n          fillRate: Math.max(0, Math.min(100, fillRate)),\n          classAverage,\n          avgCapacity,\n          consistency: Math.max(0, Math.min(100, consistency))\n        }\n      };\n    });\n  }, [filteredData, groupingType, showTrainerSpecific]);\n\n  // Sort grouped data based on ranking criteria\n  const sortedData = useMemo(() => {\n    return [...groupedData].sort((a, b) => {\n      let valueA = 0;\n      let valueB = 0;\n      \n      switch (rankingCriteria) {\n        case 'fillRate':\n          valueA = a.metrics.fillRate;\n          valueB = b.metrics.fillRate;\n          break;\n        case 'attendance':\n          valueA = a.metrics.totalAttendance;\n          valueB = b.metrics.totalAttendance;\n          break;\n        case 'revenue':\n          valueA = a.metrics.totalRevenue;\n          valueB = b.metrics.totalRevenue;\n          break;\n        case 'classAverage':\n          valueA = a.metrics.classAverage;\n          valueB = b.metrics.classAverage;\n          break;\n        case 'consistency':\n          valueA = a.metrics.consistency;\n          valueB = b.metrics.consistency;\n          break;\n        case 'growth':\n          // Mock growth calculation\n          valueA = a.metrics.fillRate * 0.1;\n          valueB = b.metrics.fillRate * 0.1;\n          break;\n        default:\n          valueA = a.metrics.classAverage;\n          valueB = b.metrics.classAverage;\n      }\n      \n      return sortDirection === 'desc' ? valueB - valueA : valueA - valueB;\n    });\n  }, [groupedData, rankingCriteria, sortDirection]);\n\n  // Apply search filter\n  const searchFilteredData = useMemo(() => {\n    if (!searchTerm) return sortedData;\n    \n    return sortedData.filter(group => \n      group.groupLabel.toLowerCase().includes(searchTerm.toLowerCase()) ||\n      group.sessions.some(session => \n        session.trainerName?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        session.cleanedClass?.toLowerCase().includes(searchTerm.toLowerCase()) ||\n        session.location?.toLowerCase().includes(searchTerm.toLowerCase())\n      )\n    );\n  }, [sortedData, searchTerm]);\n\n  // Pagination\n  const totalItems = searchFilteredData.length;\n  const totalPages = Math.ceil(totalItems / itemsPerPage);\n  const startIndex = (currentPage - 1) * itemsPerPage;\n  const endIndex = startIndex + itemsPerPage;\n  const paginatedData = searchFilteredData.slice(startIndex, endIndex);\n\n  // Reset pagination when filters change\n  useEffect(() => {\n    setCurrentPage(1);\n  }, [viewType, groupingType, rankingCriteria, searchTerm, minClassesFilter]);\n\n  const toggleRowExpansion = (groupKey: string) => {\n    const newExpanded = new Set(expandedRows);\n    if (newExpanded.has(groupKey)) {\n      newExpanded.delete(groupKey);\n    } else {\n      newExpanded.add(groupKey);\n    }\n    setExpandedRows(newExpanded);\n  };\n\n  const toggleColumn = (columnKey: string) => {\n    const newColumns = new Set(selectedColumns);\n    if (newColumns.has(columnKey)) {\n      newColumns.delete(columnKey);\n    } else {\n      newColumns.add(columnKey);\n    }\n    setSelectedColumns(newColumns);\n  };\n\n  const allColumns = [\n    { key: 'class', label: 'Class/Group', icon: Activity },\n    { key: 'trainer', label: 'Trainer', icon: User },\n    { key: 'sessions', label: 'Sessions', icon: Calendar },\n    { key: 'attendance', label: 'Attendance', icon: Users },\n    { key: 'capacity', label: 'Capacity', icon: Building2 },\n    { key: 'fillRate', label: 'Fill Rate', icon: Target },\n    { key: 'revenue', label: 'Revenue', icon: DollarSign },\n    { key: 'classAverage', label: 'Class Average', icon: BarChart3 },\n    { key: 'consistency', label: 'Consistency', icon: TrendingUp },\n    { key: 'location', label: 'Location', icon: MapPin },\n    { key: 'dayOfWeek', label: 'Day', icon: Calendar },\n    { key: 'time', label: 'Time', icon: Clock }\n  ];\n\n  const viewOptions = [\n    { value: 'detailed', label: 'Detailed View', icon: Eye },\n    { value: 'summary', label: 'Summary View', icon: BarChart3 },\n    { value: 'trainer', label: 'Trainer Focus', icon: User },\n    { value: 'class', label: 'Class Focus', icon: Activity },\n    { value: 'timeline', label: 'Timeline View', icon: Calendar },\n    { value: 'performance', label: 'Performance View', icon: TrendingUp }\n  ];\n\n  const groupingOptions = [\n    { value: 'none', label: 'Individual Sessions', icon: Activity },\n    { value: 'trainer', label: 'By Trainer', icon: User },\n    { value: 'class', label: 'By Class', icon: Activity },\n    { value: 'location', label: 'By Location', icon: MapPin },\n    { value: 'dayOfWeek', label: 'By Day of Week', icon: Calendar },\n    { value: 'timeSlot', label: 'By Time Slot', icon: Clock },\n    { value: 'month', label: 'By Month', icon: Calendar }\n  ];\n\n  const rankingOptions = [\n    { value: 'classAverage', label: 'Class Average', icon: BarChart3 },\n    { value: 'fillRate', label: 'Fill Rate', icon: Target },\n    { value: 'attendance', label: 'Total Attendance', icon: Users },\n    { value: 'revenue', label: 'Revenue', icon: DollarSign },\n    { value: 'consistency', label: 'Consistency', icon: TrendingUp },\n    { value: 'growth', label: 'Growth Rate', icon: TrendingUp }\n  ];\n\n  return (\n    <>\n    <Card className=\"w-full shadow-2xl bg-gradient-to-br from-white via-slate-50 to-blue-50/30\">\n      <CardHeader className=\"bg-gradient-to-r from-slate-800 via-slate-900 to-slate-800 text-white\">\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"flex items-center gap-3\">\n            <BarChart3 className=\"w-6 h-6\" />\n            Ultimate Class Attendance Analytics\n          </CardTitle>\n          <Badge variant=\"secondary\" className=\"bg-white/20 text-white\">\n            {totalItems} {groupingType === 'none' ? 'Sessions' : 'Groups'}\n          </Badge>\n        </div>\n      </CardHeader>\n      \n      <CardContent className=\"p-6\">\n        {/* Control Panel */}\n        <div className=\"space-y-6 mb-8\">\n          {/* View and Grouping Controls */}\n          <div className=\"flex flex-wrap gap-4 items-center justify-between\">\n            <div className=\"flex gap-4\">\n              <div className=\"space-y-2\">\n                <Label className=\"text-sm font-semibold\">View Type</Label>\n                <Select value={viewType} onValueChange={(value: ViewType) => setViewType(value)}>\n                  <SelectTrigger className=\"w-48\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {viewOptions.map(option => (\n                      <SelectItem key={option.value} value={option.value}>\n                        <div className=\"flex items-center gap-2\">\n                          <option.icon className=\"w-4 h-4\" />\n                          {option.label}\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label className=\"text-sm font-semibold\">Group By</Label>\n                <Select value={groupingType} onValueChange={(value: GroupingType) => setGroupingType(value)}>\n                  <SelectTrigger className=\"w-48\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {groupingOptions.map(option => (\n                      <SelectItem key={option.value} value={option.value}>\n                        <div className=\"flex items-center gap-2\">\n                          <option.icon className=\"w-4 h-4\" />\n                          {option.label}\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label className=\"text-sm font-semibold\">Rank By</Label>\n                <Select value={rankingCriteria} onValueChange={(value: RankingCriteria) => setRankingCriteria(value)}>\n                  <SelectTrigger className=\"w-48\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {rankingOptions.map(option => (\n                      <SelectItem key={option.value} value={option.value}>\n                        <div className=\"flex items-center gap-2\">\n                          <option.icon className=\"w-4 h-4\" />\n                          {option.label}\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setSortDirection(sortDirection === 'desc' ? 'asc' : 'desc')}\n                className=\"mt-7\"\n              >\n                {sortDirection === 'desc' ? <SortDesc className=\"w-4 h-4\" /> : <SortAsc className=\"w-4 h-4\" />}\n              </Button>\n            </div>\n\n            <Dialog>\n              <DialogTrigger asChild>\n                <Button variant=\"outline\" size=\"sm\">\n                  <Settings className=\"w-4 h-4 mr-2\" />\n                  Columns\n                </Button>\n              </DialogTrigger>\n              <DialogContent className=\"max-w-md\">\n                <DialogHeader>\n                  <DialogTitle>Select Columns</DialogTitle>\n                </DialogHeader>\n                <div className=\"grid grid-cols-2 gap-4\">\n                  {allColumns.map(column => (\n                    <div key={column.key} className=\"flex items-center space-x-2\">\n                      <Switch\n                        id={column.key}\n                        checked={selectedColumns.has(column.key)}\n                        onCheckedChange={() => toggleColumn(column.key)}\n                      />\n                      <Label htmlFor={column.key} className=\"flex items-center gap-2 text-sm\">\n                        <column.icon className=\"w-4 h-4\" />\n                        {column.label}\n                      </Label>\n                    </div>\n                  ))}\n                </div>\n              </DialogContent>\n            </Dialog>\n          </div>\n\n          {/* Filters and Search */}\n          <div className=\"flex gap-4 items-center\">\n            <div className=\"flex-1 relative\">\n              <Search className=\"w-4 h-4 absolute left-3 top-3 text-gray-400\" />\n              <Input\n                placeholder=\"Search classes, trainers, locations...\"\n                value={searchTerm}\n                onChange={(e) => setSearchTerm(e.target.value)}\n                className=\"pl-10\"\n              />\n            </div>\n            \n            <div className=\"flex items-center gap-2\">\n              <Label className=\"text-sm\">Min Classes:</Label>\n              <Input\n                type=\"number\"\n                min=\"1\"\n                max=\"10\"\n                value={minClassesFilter}\n                onChange={(e) => setMinClassesFilter(Number(e.target.value))}\n                className=\"w-20\"\n              />\n            </div>\n\n            {groupingType === 'class' && (\n              <div className=\"flex items-center space-x-2\">\n                <Switch\n                  id=\"trainer-specific\"\n                  checked={showTrainerSpecific}\n                  onCheckedChange={setShowTrainerSpecific}\n                />\n                <Label htmlFor=\"trainer-specific\" className=\"text-sm\">\n                  Include Trainers\n                </Label>\n              </div>\n            )}\n          </div>\n        </div>\n\n        {/* Table */}\n        <div className=\"border rounded-lg overflow-hidden bg-white shadow-lg\">\n          <div className=\"overflow-x-auto\" style={{ maxHeight: '600px' }}>\n            <Table>\n              <TableHeader className=\"sticky top-0 bg-gray-50 z-10\">\n                <TableRow>\n                  {groupingType !== 'none' && (\n                    <TableHead className=\"w-10\">\n                      <ChevronDown className=\"w-4 h-4\" />\n                    </TableHead>\n                  )}\n                  \n                  {selectedColumns.has('class') && (\n                    <TableHead className=\"min-w-[200px]\">\n                      <div className=\"flex items-center gap-2\">\n                        <Activity className=\"w-4 h-4\" />\n                        {groupingType === 'trainer' ? 'Trainer' : \n                         groupingType === 'location' ? 'Location' :\n                         groupingType === 'dayOfWeek' ? 'Day' :\n                         groupingType === 'timeSlot' ? 'Time' :\n                         groupingType === 'month' ? 'Month' :\n                         'Class/Group'}\n                      </div>\n                    </TableHead>\n                  )}\n                  \n                  {selectedColumns.has('sessions') && groupingType !== 'none' && (\n                    <TableHead className=\"text-center\">\n                      <div className=\"flex items-center gap-2 justify-center\">\n                        <Calendar className=\"w-4 h-4\" />\n                        Sessions\n                      </div>\n                    </TableHead>\n                  )}\n                  \n                  {selectedColumns.has('attendance') && (\n                    <TableHead className=\"text-center\">\n                      <div className=\"flex items-center gap-2 justify-center\">\n                        <Users className=\"w-4 h-4\" />\n                        Attendance\n                      </div>\n                    </TableHead>\n                  )}\n                  \n                  {selectedColumns.has('capacity') && (\n                    <TableHead className=\"text-center\">\n                      <div className=\"flex items-center gap-2 justify-center\">\n                        <Building2 className=\"w-4 h-4\" />\n                        Capacity\n                      </div>\n                    </TableHead>\n                  )}\n                  \n                  {selectedColumns.has('fillRate') && (\n                    <TableHead className=\"text-center\">\n                      <div className=\"flex items-center gap-2 justify-center\">\n                        <Target className=\"w-4 h-4\" />\n                        Fill Rate\n                      </div>\n                    </TableHead>\n                  )}\n                  \n                  {selectedColumns.has('classAverage') && (\n                    <TableHead className=\"text-center\">\n                      <div className=\"flex items-center gap-2 justify-center\">\n                        <BarChart3 className=\"w-4 h-4\" />\n                        Class Avg\n                      </div>\n                    </TableHead>\n                  )}\n                  \n                  {selectedColumns.has('revenue') && (\n                    <TableHead className=\"text-center\">\n                      <div className=\"flex items-center gap-2 justify-center\">\n                        <DollarSign className=\"w-4 h-4\" />\n                        Revenue\n                      </div>\n                    </TableHead>\n                  )}\n                  \n                  {selectedColumns.has('consistency') && (\n                    <TableHead className=\"text-center\">\n                      <div className=\"flex items-center gap-2 justify-center\">\n                        <TrendingUp className=\"w-4 h-4\" />\n                        Consistency\n                      </div>\n                    </TableHead>\n                  )}\n                </TableRow>\n              </TableHeader>\n              \n              <TableBody>\n                {paginatedData.map((group, index) => (\n                  <React.Fragment key={group.groupKey}>\n                    <TableRow className={cn(\n                      \"hover:bg-blue-50/50 transition-colors\",\n                      index % 2 === 0 ? \"bg-white\" : \"bg-gray-50/50\"\n                    )}>\n                      {groupingType !== 'none' && (\n                        <TableCell>\n                          <Button\n                            variant=\"ghost\"\n                            size=\"sm\"\n                            onClick={() => toggleRowExpansion(group.groupKey)}\n                            className=\"p-1\"\n                          >\n                            {expandedRows.has(group.groupKey) ? (\n                              <ChevronUp className=\"w-4 h-4\" />\n                            ) : (\n                              <ChevronDown className=\"w-4 h-4\" />\n                            )}\n                          </Button>\n                        </TableCell>\n                      )}\n                      \n                      {selectedColumns.has('class') && (\n                        <TableCell className=\"font-medium\">\n                          <div className=\"space-y-1\">\n                            <div className=\"font-semibold\">{group.groupLabel}</div>\n                            {groupingType !== 'none' && (\n                              <div className=\"text-xs text-gray-500\">\n                                {group.sessions.length} sessions\n                              </div>\n                            )}\n                          </div>\n                        </TableCell>\n                      )}\n                      \n                      {selectedColumns.has('sessions') && groupingType !== 'none' && (\n                        <TableCell className=\"text-center\">\n                          <Badge variant=\"outline\">\n                            {group.metrics.totalSessions}\n                          </Badge>\n                        </TableCell>\n                      )}\n                      \n                      {selectedColumns.has('attendance') && (\n                        <TableCell className=\"text-center font-semibold\">\n                          {formatNumber(group.metrics.totalAttendance)}\n                        </TableCell>\n                      )}\n                      \n                      {selectedColumns.has('capacity') && (\n                        <TableCell className=\"text-center\">\n                          {formatNumber(group.metrics.totalCapacity)}\n                        </TableCell>\n                      )}\n                      \n                      {selectedColumns.has('fillRate') && (\n                        <TableCell className=\"text-center\">\n                          <div className=\"flex items-center gap-2 justify-center\">\n                            <div className={cn(\n                              \"px-2 py-1 rounded-full text-xs font-bold\",\n                              group.metrics.fillRate >= 80 ? \"bg-green-100 text-green-800\" :\n                              group.metrics.fillRate >= 60 ? \"bg-yellow-100 text-yellow-800\" :\n                              \"bg-red-100 text-red-800\"\n                            )}>\n                              {formatPercentage(group.metrics.fillRate)}\n                            </div>\n                          </div>\n                        </TableCell>\n                      )}\n                      \n                      {selectedColumns.has('classAverage') && (\n                        <TableCell className=\"text-center font-semibold text-blue-600\">\n                          {formatNumber(group.metrics.classAverage)}\n                        </TableCell>\n                      )}\n                      \n                      {selectedColumns.has('revenue') && (\n                        <TableCell className=\"text-center font-semibold\">\n                          {formatNumber(group.metrics.totalRevenue)}\n                        </TableCell>\n                      )}\n                      \n                      {selectedColumns.has('consistency') && (\n                        <TableCell className=\"text-center\">\n                          <div className={cn(\n                            \"px-2 py-1 rounded-full text-xs font-bold\",\n                            group.metrics.consistency >= 80 ? \"bg-green-100 text-green-800\" :\n                            group.metrics.consistency >= 60 ? \"bg-yellow-100 text-yellow-800\" :\n                            \"bg-red-100 text-red-800\"\n                          )}>\n                            {formatPercentage(group.metrics.consistency)}\n                          </div>\n                        </TableCell>\n                      )}\n                    </TableRow>\n                    \n                    {/* Expanded row details */}\n                    {expandedRows.has(group.groupKey) && groupingType !== 'none' && (\n                      <TableRow>\n                        <TableCell colSpan={selectedColumns.size + 1} className=\"bg-gray-50 p-0\">\n                          <div className=\"p-4 space-y-3\">\n                            <h4 className=\"font-semibold text-sm text-gray-700\">Individual Sessions</h4>\n                            <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3\">\n                              {group.sessions.slice(0, 6).map((session, idx) => (\n                                <div key={idx} className=\"bg-white p-3 rounded border text-xs\">\n                                  <div className=\"font-medium\">{session.cleanedClass}</div>\n                                  <div className=\"text-gray-600\">{session.trainerName}</div>\n                                  <div className=\"text-gray-500\">{session.date} - {session.time}</div>\n                                  <div className=\"flex gap-2 mt-1\">\n                                    <Badge variant=\"outline\" className=\"text-xs\">\n                                      {session.checkedInCount}/{session.capacity}\n                                    </Badge>\n                                    <Badge variant=\"outline\" className=\"text-xs\">\n                                      {formatNumber(session.totalPaid || 0)}\n                                    </Badge>\n                                  </div>\n                                </div>\n                              ))}\n                              {group.sessions.length > 6 && (\n                                <div className=\"bg-gray-100 p-3 rounded border text-xs flex items-center justify-center text-gray-500\">\n                                  +{group.sessions.length - 6} more sessions\n                                </div>\n                              )}\n                            </div>\n                          </div>\n                        </TableCell>\n                      </TableRow>\n                    )}\n                  </React.Fragment>\n                ))}\n              </TableBody>\n            </Table>\n          </div>\n        </div>\n\n        {/* Pagination */}\n        <div className=\"flex items-center justify-between mt-6\">\n          <div className=\"flex items-center gap-4\">\n            <div className=\"text-sm text-gray-600\">\n              Showing {startIndex + 1}-{Math.min(endIndex, totalItems)} of {totalItems} items\n            </div>\n            <Select value={itemsPerPage.toString()} onValueChange={(value) => setItemsPerPage(Number(value))}>\n              <SelectTrigger className=\"w-20\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {[10, 25, 50, 100].map(size => (\n                  <SelectItem key={size} value={size.toString()}>\n                    {size}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setCurrentPage(Math.max(1, currentPage - 1))}\n              disabled={currentPage === 1}\n            >\n              <ChevronLeft className=\"w-4 h-4\" />\n              Previous\n            </Button>\n            \n            <div className=\"flex items-center gap-1\">\n              {Array.from({ length: Math.min(5, totalPages) }, (_, i) => {\n                const pageNum = Math.max(1, Math.min(totalPages - 4, currentPage - 2)) + i;\n                return (\n                  <Button\n                    key={pageNum}\n                    variant={pageNum === currentPage ? \"default\" : \"outline\"}\n                    size=\"sm\"\n                    onClick={() => setCurrentPage(pageNum)}\n                    className=\"w-8 h-8 p-0\"\n                  >\n                    {pageNum}\n                  </Button>\n                );\n              })}\n            </div>\n            \n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={() => setCurrentPage(Math.min(totalPages, currentPage + 1))}\n              disabled={currentPage === totalPages}\n            >\n              Next\n              <ChevronRight className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n    <div className=\"mt-4\">\n    </div>\n    </>\n  );\n};","import React, { useState, useMemo, useRef, useEffect } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { motion, AnimatePresence } from 'framer-motion';\nimport { \n  Calendar, TrendingUp, BarChart3, Users, DollarSign, \n  Target, Activity, Building2, Percent, RefreshCw, \n  ArrowUp, ArrowDown, Clock, MapPin, Sparkles, ShrinkIcon, ExpandIcon, Star \n} from 'lucide-react';\nimport { SessionData } from '@/hooks/useSessionsData';\nimport { formatNumber, formatPercentage } from '@/utils/formatters';\nimport { cn } from '@/lib/utils';\nimport { getTableHeaderClasses } from '@/utils/colorThemes';\nimport { PersistentTableFooter } from '@/components/dashboard/PersistentTableFooter';\nimport { useSessionsFilters } from '@/contexts/SessionsFiltersContext';\nimport CopyTableButton from '@/components/ui/CopyTableButton';\nimport { useMetricsTablesRegistry } from '@/contexts/MetricsTablesRegistryContext';\nimport { ModernTableWrapper, ModernGroupBadge } from './ModernTableWrapper';\n\ninterface MonthOnMonthClassTableProps {\n  data: SessionData[]; // This should be ALL data, ignoring current date filters\n  location: string;\n}\n\ntype MetricType = 'attendance' | 'sessions' | 'revenue' | 'fillRate' | 'classAverage' | 'capacity' | 'bookingRate';\ntype GroupByType = 'trainer' | 'class' | 'location' | 'day_time' | 'trainer_class' | 'uniqueid1' | 'uniqueid2' | 'overall' | 'am_pm' | 'timeslot' | 'class_time' | 'trainer_time' | 'class_day' | 'trainer_day' | 'time_location' | 'class_location' | 'class_day_time_location' | 'trainer_class_day' | 'trainer_location' | 'class_trainer_location' | 'day_location' | 'time_trainer' | 'time_class_location' | 'day_time_trainer' | 'trainer_am_pm' | 'class_am_pm' | 'location_am_pm' | 'class_day_time' | 'trainer_day_time' | 'trainer_class_time' | 'location_day_time' | 'timeslot_location' | 'timeslot_trainer' | 'timeslot_class' | 'trainer_location_am_pm' | 'class_location_day';\n\ninterface MonthlyData {\n  month: string;\n  monthLabel: string;\n  sessions: number;\n  attendance: number;\n  capacity: number;\n  revenue: number;\n  fillRate: number;\n  classAverage: number;\n  bookingRate: number;\n  lateCancellations: number;\n  uniqueClasses: number;\n  uniqueTrainers: number;\n  booked?: number;\n}\n\ninterface GroupedRow {\n  groupKey: string;\n  groupLabel: string;\n  monthlyData: Record<string, MonthlyData>;\n  totals: MonthlyData;\n  sessionDetails?: {\n    date: string;\n    time: string;\n    trainer: string;\n    location: string;\n    teacher?: string;\n    session: SessionData;\n  };\n}\n\nconst MONTH_NAMES = [\n  'Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun',\n  'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'\n];\n\nexport const MonthOnMonthClassTable: React.FC<MonthOnMonthClassTableProps> = ({ \n  data, \n  location \n}) => {\n  const [selectedMetric, setSelectedMetric] = useState<MetricType>('classAverage');\n  const [groupBy, setGroupBy] = useState<GroupByType>('class_day_time_location');\n  const [showGrowthRate, setShowGrowthRate] = useState(false);\n  const [isTableCollapsed, setIsTableCollapsed] = useState(false);\n  const [expandedRows, setExpandedRows] = useState<Set<string>>(new Set());\n  \n  // Table ref for copy functionality\n  const tableRef = useRef<HTMLTableElement>(null);\n  const tableId = 'month-on-month-class-table';\n  \n  // Register with metrics tables registry\n  const { registerTable, unregisterTable } = useMetricsTablesRegistry();\n  \n  useEffect(() => {\n    if (tableRef.current) {\n      const getTextContent = () => {\n        if (tableRef.current) {\n          return tableRef.current.innerText || '';\n        }\n        return '';\n      };\n      \n      registerTable({\n        id: tableId,\n        getTextContent\n      });\n      \n      return () => unregisterTable(tableId);\n    }\n  }, [registerTable, unregisterTable]);\n\n  // Apply location + non-date filters (independent of date range)\n  const { filters } = useSessionsFilters();\n\n  const workingData = useMemo(() => {\n    let d = data;\n    // Filter by selected location tab\n    if (location && location !== 'All Locations') {\n      d = d.filter(s => (s.location || '') === location);\n    }\n    // Apply other filters but ignore dateRange\n    if (filters) {\n      if (filters.trainers.length > 0) {\n        d = d.filter(s => filters.trainers.includes(s.trainerName));\n      }\n      if (filters.classTypes.length > 0) {\n        d = d.filter(s => filters.classTypes.includes(s.cleanedClass));\n      }\n      if (filters.dayOfWeek.length > 0) {\n        d = d.filter(s => filters.dayOfWeek.includes(s.dayOfWeek));\n      }\n      if (filters.timeSlots.length > 0) {\n        d = d.filter(s => filters.timeSlots.includes(s.time));\n      }\n    }\n    return d;\n  }, [data, location, filters]);\n\n  // Get all unique months from the data (ignoring current filters)\n  const availableMonths = useMemo(() => {\n    const months = new Set<string>();\n    workingData.forEach(session => {\n      const date = new Date(session.date);\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n      months.add(monthKey);\n    });\n    \n    return Array.from(months).sort().reverse().map(monthKey => {\n      const [year, month] = monthKey.split('-');\n      const monthIndex = parseInt(month) - 1;\n      return {\n        key: monthKey,\n        label: `${MONTH_NAMES[monthIndex]} ${year}`,\n        shortLabel: `${MONTH_NAMES[monthIndex]}'${year.slice(2)}`\n      };\n    });\n  }, [workingData]);\n\n  // Process data by month and grouping\n  const processedData = useMemo(() => {\n    const groupedSessions = new Map<string, SessionData[]>();\n    \n    // Group sessions by the selected grouping criteria\n    workingData.forEach(session => {\n      let groupKey = 'Overall';\n      switch (groupBy) {\n        case 'trainer':\n          groupKey = session.trainerName || 'Unknown Trainer';\n          break;\n        case 'class':\n          groupKey = session.cleanedClass || 'Unknown Class';\n          break;\n        case 'location':\n          groupKey = session.location || 'Unknown Location';\n          break;\n        case 'day_time':\n          groupKey = `${session.dayOfWeek} ${session.time}`;\n          break;\n        case 'trainer_class':\n          groupKey = `${session.trainerName || 'Unknown'} - ${session.cleanedClass || 'Unknown'}`;\n          break;\n        case 'uniqueid1':\n          groupKey = session.uniqueId1 || 'Unknown UniqueID1';\n          break;\n        case 'uniqueid2':\n          groupKey = session.uniqueId2 || 'Unknown UniqueID2';\n          break;\n        case 'am_pm':\n          const hour = parseInt(session.time?.split(':')[0] || '0');\n          groupKey = hour < 12 ? 'AM' : 'PM';\n          break;\n        case 'timeslot':\n          const sessionHour = parseInt(session.time?.split(':')[0] || '0');\n          if (sessionHour >= 5 && sessionHour < 9) groupKey = 'Early Morning (5-9)';\n          else if (sessionHour >= 9 && sessionHour < 12) groupKey = 'Morning (9-12)';\n          else if (sessionHour >= 12 && sessionHour < 17) groupKey = 'Afternoon (12-17)';\n          else if (sessionHour >= 17 && sessionHour < 21) groupKey = 'Evening (17-21)';\n          else groupKey = 'Late Night (21-5)';\n          break;\n        case 'class_time':\n          groupKey = `${session.cleanedClass || 'Unknown'} - ${session.time}`;\n          break;\n        case 'trainer_time':\n          groupKey = `${session.trainerName || 'Unknown'} - ${session.time}`;\n          break;\n        case 'class_day':\n          groupKey = `${session.cleanedClass || 'Unknown'} - ${session.dayOfWeek}`;\n          break;\n        case 'trainer_day':\n          groupKey = `${session.trainerName || 'Unknown'} - ${session.dayOfWeek}`;\n          break;\n        case 'time_location':\n          groupKey = `${session.time} - ${session.location || 'Unknown'}`;\n          break;\n        case 'class_location':\n          groupKey = `${session.cleanedClass || 'Unknown'} - ${session.location || 'Unknown'}`;\n          break;\n        case 'class_day_time_location':\n          groupKey = `${session.cleanedClass || 'Unknown'} - ${session.dayOfWeek} ${session.time} - ${session.location || 'Unknown'}`;\n          break;\n        case 'trainer_class_day':\n          groupKey = `${session.trainerName || 'Unknown'} - ${session.cleanedClass || 'Unknown'} - ${session.dayOfWeek}`;\n          break;\n        case 'trainer_location':\n          groupKey = `${session.trainerName || 'Unknown'} - ${session.location || 'Unknown'}`;\n          break;\n        case 'class_trainer_location':\n          groupKey = `${session.cleanedClass || 'Unknown'} - ${session.trainerName || 'Unknown'} - ${session.location || 'Unknown'}`;\n          break;\n        case 'day_location':\n          groupKey = `${session.dayOfWeek} - ${session.location || 'Unknown'}`;\n          break;\n        case 'time_trainer':\n          groupKey = `${session.time} - ${session.trainerName || 'Unknown'}`;\n          break;\n        case 'time_class_location':\n          groupKey = `${session.time} - ${session.cleanedClass || 'Unknown'} - ${session.location || 'Unknown'}`;\n          break;\n        case 'day_time_trainer':\n          groupKey = `${session.dayOfWeek} ${session.time} - ${session.trainerName || 'Unknown'}`;\n          break;\n        case 'trainer_am_pm': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          groupKey = `${session.trainerName || 'Unknown'} - ${h < 12 ? 'AM' : 'PM'}`;\n          break;\n        }\n        case 'class_am_pm': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          groupKey = `${session.cleanedClass || 'Unknown'} - ${h < 12 ? 'AM' : 'PM'}`;\n          break;\n        }\n        case 'location_am_pm': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          groupKey = `${session.location || 'Unknown'} - ${h < 12 ? 'AM' : 'PM'}`;\n          break;\n        }\n        case 'class_day_time':\n          groupKey = `${session.cleanedClass || 'Unknown'} - ${session.dayOfWeek} ${session.time}`;\n          break;\n        case 'trainer_day_time':\n          groupKey = `${session.trainerName || 'Unknown'} - ${session.dayOfWeek} ${session.time}`;\n          break;\n        case 'trainer_class_time':\n          groupKey = `${session.trainerName || 'Unknown'} - ${session.cleanedClass || 'Unknown'} - ${session.time}`;\n          break;\n        case 'location_day_time':\n          groupKey = `${session.location || 'Unknown'} - ${session.dayOfWeek} ${session.time}`;\n          break;\n        case 'timeslot_location': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          let slot = '';\n          if (h >= 5 && h < 9) slot = 'Early Morning (5-9)';\n          else if (h >= 9 && h < 12) slot = 'Morning (9-12)';\n          else if (h >= 12 && h < 17) slot = 'Afternoon (12-17)';\n          else if (h >= 17 && h < 21) slot = 'Evening (17-21)';\n          else slot = 'Late Night (21-5)';\n          groupKey = `${slot} - ${session.location || 'Unknown'}`;\n          break;\n        }\n        case 'timeslot_trainer': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          let slot = '';\n          if (h >= 5 && h < 9) slot = 'Early Morning (5-9)';\n          else if (h >= 9 && h < 12) slot = 'Morning (9-12)';\n          else if (h >= 12 && h < 17) slot = 'Afternoon (12-17)';\n          else if (h >= 17 && h < 21) slot = 'Evening (17-21)';\n          else slot = 'Late Night (21-5)';\n          groupKey = `${slot} - ${session.trainerName || 'Unknown'}`;\n          break;\n        }\n        case 'timeslot_class': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          let slot = '';\n          if (h >= 5 && h < 9) slot = 'Early Morning (5-9)';\n          else if (h >= 9 && h < 12) slot = 'Morning (9-12)';\n          else if (h >= 12 && h < 17) slot = 'Afternoon (12-17)';\n          else if (h >= 17 && h < 21) slot = 'Evening (17-21)';\n          else slot = 'Late Night (21-5)';\n          groupKey = `${slot} - ${session.cleanedClass || 'Unknown'}`;\n          break;\n        }\n        case 'trainer_location_am_pm': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          groupKey = `${session.trainerName || 'Unknown'} - ${session.location || 'Unknown'} - ${h < 12 ? 'AM' : 'PM'}`;\n          break;\n        }\n        case 'class_location_day':\n          groupKey = `${session.cleanedClass || 'Unknown'} - ${session.location || 'Unknown'} - ${session.dayOfWeek}`;\n          break;\n        case 'overall':\n        default:\n          groupKey = 'Overall';\n          break;\n      }\n      \n      if (!groupedSessions.has(groupKey)) {\n        groupedSessions.set(groupKey, []);\n      }\n      groupedSessions.get(groupKey)!.push(session);\n    });\n\n    // Process each group's monthly data\n    const result: GroupedRow[] = Array.from(groupedSessions.entries()).map(([groupKey, sessions]) => {\n      const monthlyData: Record<string, MonthlyData> = {};\n      \n      // Initialize monthly data for all available months\n      availableMonths.forEach(month => {\n        monthlyData[month.key] = {\n          month: month.key,\n          monthLabel: month.label,\n          sessions: 0,\n          attendance: 0,\n          capacity: 0,\n          revenue: 0,\n          fillRate: 0,\n          classAverage: 0,\n          bookingRate: 0,\n          lateCancellations: 0,\n          uniqueClasses: 0,\n          uniqueTrainers: 0,\n          booked: 0\n        };\n      });\n\n      // Aggregate data by month\n      sessions.forEach(session => {\n        const date = new Date(session.date);\n        const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n        \n        if (monthlyData[monthKey]) {\n          const monthData = monthlyData[monthKey];\n          monthData.sessions += 1;\n          monthData.attendance += session.checkedInCount || 0;\n          monthData.capacity += session.capacity || 0;\n          monthData.revenue += session.totalPaid || 0;\n          monthData.lateCancellations += session.lateCancelledCount || 0;\n          monthData.booked = (monthData.booked || 0) + (session.bookedCount || 0);\n        }\n      });\n\n      // Calculate derived metrics for each month\n      Object.values(monthlyData).forEach(monthData => {\n        monthData.fillRate = monthData.capacity > 0 ? (monthData.attendance / monthData.capacity) * 100 : 0;\n        monthData.classAverage = monthData.sessions > 0 ? monthData.attendance / monthData.sessions : 0;\n        // Booking rate = booked seats / capacity\n        monthData.bookingRate = monthData.capacity > 0 ? (((monthData.booked || 0) as number) / monthData.capacity) * 100 : 0;\n      });\n\n      // Calculate totals\n      const totals: MonthlyData = {\n        month: 'total',\n        monthLabel: 'Total',\n        sessions: Object.values(monthlyData).reduce((sum, m) => sum + m.sessions, 0),\n        attendance: Object.values(monthlyData).reduce((sum, m) => sum + m.attendance, 0),\n        capacity: Object.values(monthlyData).reduce((sum, m) => sum + m.capacity, 0),\n        revenue: Object.values(monthlyData).reduce((sum, m) => sum + m.revenue, 0),\n        lateCancellations: Object.values(monthlyData).reduce((sum, m) => sum + m.lateCancellations, 0),\n        fillRate: 0,\n        classAverage: 0,\n        bookingRate: 0,\n        uniqueClasses: 0,\n        uniqueTrainers: 0,\n        booked: Object.values(monthlyData).reduce((sum, m) => sum + (m.booked || 0), 0)\n      };\n\n      totals.fillRate = totals.capacity > 0 ? (totals.attendance / totals.capacity) * 100 : 0;\n      totals.classAverage = totals.sessions > 0 ? totals.attendance / totals.sessions : 0;\n      totals.bookingRate = totals.capacity > 0 ? (totals.attendance / totals.capacity) * 100 : 0;\n\n      return {\n        groupKey,\n        groupLabel: groupKey,\n        monthlyData,\n        totals\n      };\n    });\n\n    // Sort by total attendance (descending)\n    return result.sort((a, b) => b.totals.attendance - a.totals.attendance);\n  }, [workingData, groupBy, availableMonths]);\n\n  // Get individual child rows for an expanded group (showing individual sessions per month)\n  const getChildRowsForGroup = (groupKey: string): GroupedRow[] => {\n    const groupedSessions = new Map<string, SessionData[]>();\n    \n    // Re-filter data for this specific group\n    workingData.forEach(session => {\n      let sessionGroupKey = 'Overall';\n      switch (groupBy) {\n        case 'trainer':\n          sessionGroupKey = session.trainerName || 'Unknown Trainer';\n          break;\n        case 'class':\n          sessionGroupKey = session.cleanedClass || 'Unknown Class';\n          break;\n        case 'location':\n          sessionGroupKey = session.location || 'Unknown Location';\n          break;\n        case 'day_time':\n          sessionGroupKey = `${session.dayOfWeek} ${session.time}`;\n          break;\n        case 'trainer_class':\n          sessionGroupKey = `${session.trainerName || 'Unknown'} - ${session.cleanedClass || 'Unknown'}`;\n          break;\n        case 'uniqueid1':\n          sessionGroupKey = session.uniqueId1 || 'Unknown UniqueID1';\n          break;\n        case 'uniqueid2':\n          sessionGroupKey = session.uniqueId2 || 'Unknown UniqueID2';\n          break;\n        case 'am_pm': {\n          const hour = parseInt(session.time?.split(':')[0] || '0');\n          sessionGroupKey = hour < 12 ? 'AM' : 'PM';\n          break;\n        }\n        case 'timeslot': {\n          const sessionHour = parseInt(session.time?.split(':')[0] || '0');\n          if (sessionHour >= 5 && sessionHour < 9) sessionGroupKey = 'Early Morning (5-9)';\n          else if (sessionHour >= 9 && sessionHour < 12) sessionGroupKey = 'Morning (9-12)';\n          else if (sessionHour >= 12 && sessionHour < 17) sessionGroupKey = 'Afternoon (12-17)';\n          else if (sessionHour >= 17 && sessionHour < 21) sessionGroupKey = 'Evening (17-21)';\n          else sessionGroupKey = 'Late Night (21-5)';\n          break;\n        }\n        case 'class_time':\n          sessionGroupKey = `${session.cleanedClass || 'Unknown'} - ${session.time}`;\n          break;\n        case 'trainer_time':\n          sessionGroupKey = `${session.trainerName || 'Unknown'} - ${session.time}`;\n          break;\n        case 'class_day':\n          sessionGroupKey = `${session.cleanedClass || 'Unknown'} - ${session.dayOfWeek}`;\n          break;\n        case 'trainer_day':\n          sessionGroupKey = `${session.trainerName || 'Unknown'} - ${session.dayOfWeek}`;\n          break;\n        case 'time_location':\n          sessionGroupKey = `${session.time} - ${session.location || 'Unknown'}`;\n          break;\n        case 'class_location':\n          sessionGroupKey = `${session.cleanedClass || 'Unknown'} - ${session.location || 'Unknown'}`;\n          break;\n        case 'class_day_time_location':\n          sessionGroupKey = `${session.cleanedClass || 'Unknown'} - ${session.dayOfWeek} ${session.time} - ${session.location || 'Unknown'}`;\n          break;\n        case 'trainer_class_day':\n          sessionGroupKey = `${session.trainerName || 'Unknown'} - ${session.cleanedClass || 'Unknown'} - ${session.dayOfWeek}`;\n          break;\n        case 'trainer_location':\n          sessionGroupKey = `${session.trainerName || 'Unknown'} - ${session.location || 'Unknown'}`;\n          break;\n        case 'class_trainer_location':\n          sessionGroupKey = `${session.cleanedClass || 'Unknown'} - ${session.trainerName || 'Unknown'} - ${session.location || 'Unknown'}`;\n          break;\n        case 'day_location':\n          sessionGroupKey = `${session.dayOfWeek} - ${session.location || 'Unknown'}`;\n          break;\n        case 'time_trainer':\n          sessionGroupKey = `${session.time} - ${session.trainerName || 'Unknown'}`;\n          break;\n        case 'time_class_location':\n          sessionGroupKey = `${session.time} - ${session.cleanedClass || 'Unknown'} - ${session.location || 'Unknown'}`;\n          break;\n        case 'day_time_trainer':\n          sessionGroupKey = `${session.dayOfWeek} ${session.time} - ${session.trainerName || 'Unknown'}`;\n          break;\n        case 'trainer_am_pm': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          sessionGroupKey = `${session.trainerName || 'Unknown'} - ${h < 12 ? 'AM' : 'PM'}`;\n          break;\n        }\n        case 'class_am_pm': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          sessionGroupKey = `${session.cleanedClass || 'Unknown'} - ${h < 12 ? 'AM' : 'PM'}`;\n          break;\n        }\n        case 'location_am_pm': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          sessionGroupKey = `${session.location || 'Unknown'} - ${h < 12 ? 'AM' : 'PM'}`;\n          break;\n        }\n        case 'class_day_time':\n          sessionGroupKey = `${session.cleanedClass || 'Unknown'} - ${session.dayOfWeek} ${session.time}`;\n          break;\n        case 'trainer_day_time':\n          sessionGroupKey = `${session.trainerName || 'Unknown'} - ${session.dayOfWeek} ${session.time}`;\n          break;\n        case 'trainer_class_time':\n          sessionGroupKey = `${session.trainerName || 'Unknown'} - ${session.cleanedClass || 'Unknown'} - ${session.time}`;\n          break;\n        case 'location_day_time':\n          sessionGroupKey = `${session.location || 'Unknown'} - ${session.dayOfWeek} ${session.time}`;\n          break;\n        case 'timeslot_location': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          let slot = '';\n          if (h >= 5 && h < 9) slot = 'Early Morning (5-9)';\n          else if (h >= 9 && h < 12) slot = 'Morning (9-12)';\n          else if (h >= 12 && h < 17) slot = 'Afternoon (12-17)';\n          else if (h >= 17 && h < 21) slot = 'Evening (17-21)';\n          else slot = 'Late Night (21-5)';\n          sessionGroupKey = `${slot} - ${session.location || 'Unknown'}`;\n          break;\n        }\n        case 'timeslot_trainer': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          let slot = '';\n          if (h >= 5 && h < 9) slot = 'Early Morning (5-9)';\n          else if (h >= 9 && h < 12) slot = 'Morning (9-12)';\n          else if (h >= 12 && h < 17) slot = 'Afternoon (12-17)';\n          else if (h >= 17 && h < 21) slot = 'Evening (17-21)';\n          else slot = 'Late Night (21-5)';\n          sessionGroupKey = `${slot} - ${session.trainerName || 'Unknown'}`;\n          break;\n        }\n        case 'timeslot_class': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          let slot = '';\n          if (h >= 5 && h < 9) slot = 'Early Morning (5-9)';\n          else if (h >= 9 && h < 12) slot = 'Morning (9-12)';\n          else if (h >= 12 && h < 17) slot = 'Afternoon (12-17)';\n          else if (h >= 17 && h < 21) slot = 'Evening (17-21)';\n          else slot = 'Late Night (21-5)';\n          sessionGroupKey = `${slot} - ${session.cleanedClass || 'Unknown'}`;\n          break;\n        }\n        case 'trainer_location_am_pm': {\n          const h = parseInt(session.time?.split(':')[0] || '0');\n          sessionGroupKey = `${session.trainerName || 'Unknown'} - ${session.location || 'Unknown'} - ${h < 12 ? 'AM' : 'PM'}`;\n          break;\n        }\n        case 'class_location_day':\n          sessionGroupKey = `${session.cleanedClass || 'Unknown'} - ${session.location || 'Unknown'} - ${session.dayOfWeek}`;\n          break;\n        case 'overall':\n        default:\n          sessionGroupKey = 'Overall';\n          break;\n      }\n      \n      if (sessionGroupKey === groupKey) {\n        if (!groupedSessions.has(sessionGroupKey)) {\n          groupedSessions.set(sessionGroupKey, []);\n        }\n        groupedSessions.get(sessionGroupKey)!.push(session);\n      }\n    });\n\n    // Now create a row for each individual session within this group\n    const allSessions = groupedSessions.get(groupKey) || [];\n    const childRows: GroupedRow[] = allSessions.map((session, idx) => {\n      const monthlyData: Record<string, MonthlyData> = {};\n      \n      availableMonths.forEach(month => {\n        monthlyData[month.key] = {\n          month: month.key,\n          monthLabel: month.label,\n          sessions: 0,\n          attendance: 0,\n          capacity: 0,\n          revenue: 0,\n          fillRate: 0,\n          classAverage: 0,\n          bookingRate: 0,\n          lateCancellations: 0,\n          uniqueClasses: 0,\n          uniqueTrainers: 0,\n          booked: 0\n        };\n      });\n\n      const date = new Date(session.date);\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n      \n      if (monthlyData[monthKey]) {\n        const monthData = monthlyData[monthKey];\n        monthData.sessions = 1;\n        monthData.attendance = session.checkedInCount || 0;\n        monthData.capacity = session.capacity || 0;\n        monthData.revenue = session.totalPaid || 0;\n        monthData.fillRate = monthData.capacity > 0 ? (monthData.attendance / monthData.capacity) * 100 : 0;\n        monthData.classAverage = monthData.attendance;\n        monthData.booked = session.bookedCount || 0;\n        monthData.bookingRate = monthData.capacity > 0 ? (monthData.booked / monthData.capacity) * 100 : 0;\n        monthData.lateCancellations = session.lateCancelledCount || 0;\n      }\n\n      const totals: MonthlyData = {\n        month: 'total',\n        monthLabel: 'Total',\n        sessions: 1,\n        attendance: session.checkedInCount || 0,\n        capacity: session.capacity || 0,\n        revenue: session.totalPaid || 0,\n        lateCancellations: session.lateCancelledCount || 0,\n        fillRate: 0,\n        classAverage: session.checkedInCount || 0,\n        bookingRate: 0,\n        uniqueClasses: 0,\n        uniqueTrainers: 0,\n        booked: session.bookedCount || 0\n      };\n\n      totals.fillRate = totals.capacity > 0 ? (totals.attendance / totals.capacity) * 100 : 0;\n      totals.bookingRate = totals.capacity > 0 ? (totals.booked / totals.capacity) * 100 : 0;\n\n      return {\n        groupKey: `${groupKey}__child__${idx}`,\n        groupLabel: `${session.date} - ${session.cleanedClass || 'Unknown'} - ${session.trainerName || 'Unknown'}`,\n        monthlyData,\n        totals\n      };\n    });\n\n    return childRows.sort((a, b) => b.totals.attendance - a.totals.attendance);\n  };\n\n  const getMetricValue = (monthData: MonthlyData, metric: MetricType): string => {\n    switch (metric) {\n      case 'attendance':\n        return formatNumber(monthData.attendance);\n      case 'sessions':\n        return formatNumber(monthData.sessions);\n      case 'revenue':\n        return formatNumber(monthData.revenue);\n      case 'fillRate':\n        return formatPercentage(monthData.fillRate);\n      case 'classAverage':\n        return monthData.classAverage.toFixed(1);\n      case 'capacity':\n        return formatNumber(monthData.capacity);\n      case 'bookingRate':\n        return formatPercentage(monthData.bookingRate);\n      default:\n        return formatNumber(monthData.attendance);\n    }\n  };\n\n  const getGrowthRate = (current: number, previous: number): number => {\n    if (previous === 0) return current > 0 ? 100 : 0;\n    return ((current - previous) / previous) * 100;\n  };\n\n  const metricOptions = [\n    { value: 'attendance', label: 'Attendance', icon: Users },\n    { value: 'sessions', label: 'Sessions', icon: Calendar },\n    { value: 'revenue', label: 'Revenue', icon: DollarSign },\n    { value: 'fillRate', label: 'Fill Rate', icon: Target },\n    { value: 'classAverage', label: 'Class Average', icon: BarChart3 },\n    { value: 'capacity', label: 'Capacity', icon: Building2 },\n    { value: 'bookingRate', label: 'Booking Rate', icon: Percent }\n  ];\n\n  const groupOptions = [\n    { value: 'class_day_time_location', label: 'Class + Day + Time + Location', icon: BarChart3 },\n    { value: 'overall', label: 'Overall', icon: BarChart3 },\n    { value: 'class', label: 'By Class', icon: Activity },\n    { value: 'trainer', label: 'By Trainer', icon: Users },\n    { value: 'location', label: 'By Location', icon: MapPin },\n    { value: 'day_time', label: 'By Day & Time', icon: Clock },\n    { value: 'class_day_time', label: 'Class + Day + Time', icon: Activity },\n    { value: 'trainer_class_day', label: 'Trainer + Class + Day', icon: Users },\n    { value: 'trainer_location', label: 'Trainer + Location', icon: Users },\n    { value: 'class_trainer_location', label: 'Class + Trainer + Location', icon: Activity },\n    { value: 'day_location', label: 'Day + Location', icon: MapPin },\n    { value: 'am_pm', label: 'By AM/PM', icon: Clock },\n    { value: 'timeslot', label: 'By Timeslot', icon: Clock },\n    { value: 'class_time', label: 'Class + Time', icon: Activity },\n    { value: 'trainer_time', label: 'Trainer + Time', icon: Users },\n    { value: 'class_day', label: 'Class + Day', icon: Activity },\n    { value: 'trainer_day', label: 'Trainer + Day', icon: Users },\n    { value: 'time_location', label: 'Time + Location', icon: MapPin },\n    { value: 'class_location', label: 'Class + Location', icon: Building2 },\n    { value: 'trainer_class', label: 'Trainer + Class', icon: Target },\n    { value: 'time_trainer', label: 'Time + Trainer', icon: Clock },\n    { value: 'time_class_location', label: 'Time + Class + Location', icon: Clock },\n    { value: 'day_time_trainer', label: 'Day + Time + Trainer', icon: Clock },\n    { value: 'trainer_am_pm', label: 'Trainer + AM/PM', icon: Users },\n    { value: 'class_am_pm', label: 'Class + AM/PM', icon: Activity },\n    { value: 'location_am_pm', label: 'Location + AM/PM', icon: MapPin },\n    { value: 'trainer_day_time', label: 'Trainer + Day + Time', icon: Users },\n    { value: 'trainer_class_time', label: 'Trainer + Class + Time', icon: Users },\n    { value: 'location_day_time', label: 'Location + Day + Time', icon: MapPin },\n    { value: 'timeslot_location', label: 'Timeslot + Location', icon: MapPin },\n    { value: 'timeslot_trainer', label: 'Timeslot + Trainer', icon: Clock },\n    { value: 'timeslot_class', label: 'Timeslot + Class', icon: Clock },\n    { value: 'uniqueid1', label: 'Group by Class (ID1)', icon: Target },\n    { value: 'uniqueid2', label: 'Group by Class & Trainer (ID2)', icon: Users },\n    { value: 'trainer_location_am_pm', label: 'Trainer + Location + AM/PM', icon: Users },\n    { value: 'class_location_day', label: 'Class + Location + Day', icon: Activity }\n  ];\n\n  return (\n    <>\n      <ModernTableWrapper\n      title=\"Month-on-Month Analytics\"\n      description=\"Track class attendance trends across months with detailed grouping options\"\n      icon={<BarChart3 className=\"w-5 h-5\" />}\n      totalItems={data.length}\n      showCollapseControls={true}\n      onCollapseAll={() => setExpandedRows(new Set())}\n      onExpandAll={() => {\n        const allRows = new Set<string>();\n        processedData.forEach(row => {\n          if (groupBy !== 'overall') {\n            allRows.add(row.groupKey);\n          }\n        });\n        setExpandedRows(allRows);\n      }}\n      showCopyButton={true}\n      tableRef={tableRef}\n      headerControls={\n        <div className=\"flex items-center gap-4 ml-auto\">\n          {/* Metric Selection */}\n          <div className=\"space-y-1\">\n            <label className=\"text-xs font-semibold text-white/70 flex items-center gap-2\">\n              <BarChart3 className=\"w-3 h-3\" />\n              Metric\n            </label>\n            <Select value={selectedMetric} onValueChange={(value) => setSelectedMetric(value as MetricType)}>\n              <SelectTrigger className=\"w-[150px] border-white/20 bg-white/10 text-white focus:border-white/40 h-8 text-xs\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {metricOptions.map(option => {\n                  const Icon = option.icon;\n                  return (\n                    <SelectItem key={option.value} value={option.value}>\n                      <div className=\"flex items-center gap-2\">\n                        <Icon className=\"w-3 h-3\" />\n                        {option.label}\n                      </div>\n                    </SelectItem>\n                  );\n                })}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Group By Selection */}\n          <div className=\"space-y-1\">\n            <label className=\"text-xs font-semibold text-white/70 flex items-center gap-2\">\n              <Building2 className=\"w-3 h-3\" />\n              Group By\n            </label>\n            <Select value={groupBy} onValueChange={(value) => setGroupBy(value as GroupByType)}>\n              <SelectTrigger className=\"w-[180px] border-white/20 bg-white/10 text-white focus:border-white/40 h-8 text-xs\">\n                <SelectValue />\n              </SelectTrigger>\n              <SelectContent>\n                {groupOptions.map(option => {\n                  const Icon = option.icon;\n                  return (\n                    <SelectItem key={option.value} value={option.value}>\n                      <div className=\"flex items-center gap-2\">\n                        <Icon className=\"w-3 h-3\" />\n                        {option.label}\n                      </div>\n                    </SelectItem>\n                  );\n                })}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Growth Rate Toggle */}\n          <motion.div\n            whileHover={{ scale: 1.05 }}\n            whileTap={{ scale: 0.95 }}\n          >\n            <Button\n              variant={showGrowthRate ? \"default\" : \"outline\"}\n              size=\"sm\"\n              onClick={() => setShowGrowthRate(!showGrowthRate)}\n              className={cn(\n                \"transition-all duration-200 h-8 text-xs\",\n                showGrowthRate \n                  ? \"bg-white text-slate-700 hover:bg-white/90\" \n                  : \"border-white/20 text-white hover:bg-white/10\"\n              )}\n            >\n              <TrendingUp className=\"w-3 h-3 mr-1\" />\n              Growth %\n            </Button>\n          </motion.div>\n\n          {/* Collapse/Expand Table */}\n          <Button \n            variant=\"outline\" \n            size=\"sm\" \n            onClick={() => setIsTableCollapsed(!isTableCollapsed)}\n            className=\"border-white/20 text-white hover:bg-white/10 h-8 text-xs\"\n          >\n            {isTableCollapsed ? <ExpandIcon className=\"w-3 h-3\" /> : <ShrinkIcon className=\"w-3 h-3\" />}\n            {isTableCollapsed ? 'Expand' : 'Collapse'}\n          </Button>\n        </div>\n      }\n    >\n      {!isTableCollapsed && (\n        <div className=\"w-full overflow-x-auto overflow-y-auto max-h-[800px] custom-scrollbar rounded-xl\" style={{ display: 'block' }}>\n          <Table ref={tableRef} id={tableId} className=\"min-w-[1400px] w-max\">\n            <TableHeader className=\"sticky top-0 z-20 shadow-sm border-b border-slate-200 bg-gradient-to-r from-slate-800 via-slate-900 to-slate-800\">\n              <TableRow>\n                <TableHead className={`min-w-[200px] sticky left-0 z-30 bg-slate-800/95 backdrop-blur-sm border-r font-bold`}>\n                  <div className=\"flex items-center gap-2\">\n                    <Activity className=\"w-4 h-4 text-white\" />\n                    {groupBy === 'trainer' ? 'Trainer' : \n                     groupBy === 'class' ? 'Class' :\n                     groupBy === 'location' ? 'Location' :\n                     groupBy === 'day_time' ? 'Day & Time' :\n                     groupBy === 'uniqueid1' ? 'UniqueID1' :\n                     groupBy === 'uniqueid2' ? 'UniqueID2' :\n                     groupBy === 'trainer_class' ? 'Trainer & Class' : 'Category'}\n                  </div>\n                </TableHead>\n\n                {/* Additional detail columns for expanded rows - only show if there are expanded rows */}\n                {expandedRows.size > 0 && (\n                  <>\n                    <TableHead className=\"min-w-[100px] text-center font-bold text-white text-xs\">\n                      Date\n                    </TableHead>\n                    <TableHead className=\"min-w-[80px] text-center font-bold text-white text-xs\">\n                      Time\n                    </TableHead>\n                    <TableHead className=\"min-w-[120px] text-center font-bold text-white text-xs\">\n                      Trainer\n                    </TableHead>\n                    <TableHead className=\"min-w-[120px] text-center font-bold text-white text-xs\">\n                      Location\n                    </TableHead>\n                    <TableHead className=\"min-w-[120px] text-center font-bold text-white text-xs\">\n                      Teacher\n                    </TableHead>\n                  </>\n                )}\n                \n                {availableMonths.map(month => (\n                  <TableHead key={month.key} className={`text-center min-w-[120px] font-bold`}>\n                    <div className=\"space-y-1\">\n                      <div className=\"font-semibold\">{month.shortLabel}</div>\n                      {showGrowthRate && (\n                        <div className=\"text-xs text-gray-500\">Growth %</div>\n                      )}\n                    </div>\n                  </TableHead>\n                ))}\n                \n                <TableHead className=\"text-center min-w-[120px] bg-slate-800 font-bold text-white\">\n                  <div className=\"space-y-1\">\n                    <div className=\"font-semibold\">Total</div>\n                    {showGrowthRate && (\n                      <div className=\"text-xs text-slate-300\">Avg Growth</div>\n                    )}\n                  </div>\n                </TableHead>\n              </TableRow>\n            </TableHeader>\n\n            <TableBody>\n              <AnimatePresence>\n                {processedData.map((row, rowIndex) => {\n                  const isExpanded = expandedRows.has(row.groupKey);\n                  const isExpandable = groupBy !== 'overall';\n                  const childRows = isExpanded ? getChildRowsForGroup(row.groupKey) : [];\n\n                  return (\n                    <React.Fragment key={row.groupKey}>\n                      <motion.tr\n                        className={cn(\n                          \"border-b transition-all duration-300 hover:shadow-md h-9 max-h-9 cursor-pointer\",\n                          rowIndex % 2 === 0 ? \"bg-white\" : \"bg-slate-50/50\",\n                          isExpandable ? \"hover:bg-blue-50/30\" : \"\"\n                        )}\n                        initial={{ opacity: 0, x: -20 }}\n                        animate={{ opacity: 1, x: 0 }}\n                        exit={{ opacity: 0, x: 20 }}\n                        transition={{ duration: 0.3, delay: rowIndex * 0.05 }}\n                        whileHover={{ \n                          backgroundColor: isExpandable ? \"rgba(59, 130, 246, 0.08)\" : \"rgba(59, 130, 246, 0.05)\",\n                          transition: { duration: 0.2 }\n                        }}\n                        onClick={() => {\n                          if (isExpandable) {\n                            setExpandedRows(prev => {\n                              const newSet = new Set(prev);\n                              if (newSet.has(row.groupKey)) {\n                                newSet.delete(row.groupKey);\n                              } else {\n                                newSet.add(row.groupKey);\n                              }\n                              return newSet;\n                            });\n                          }\n                        }}\n                      >\n                        <TableCell className=\"sticky left-0 z-20 bg-white border-r font-medium whitespace-nowrap py-1.5\">\n                          <div className=\"flex items-center gap-2\">\n                            {isExpandable && (\n                              <motion.div\n                                animate={{ rotate: isExpanded ? 90 : 0 }}\n                                transition={{ duration: 0.2 }}\n                                className=\"flex items-center justify-center w-5\"\n                              >\n                                <ExpandIcon className=\"w-4 h-4 text-blue-600\" />\n                              </motion.div>\n                            )}\n                            {!isExpandable && <div className=\"w-5\" />}\n                            <div className=\"w-6 h-6 rounded-full bg-gradient-to-br from-blue-500 to-indigo-500 flex items-center justify-center text-white text-xs font-bold\">\n                              {row.groupLabel.charAt(0).toUpperCase()}\n                            </div>\n                            <span className=\"font-semibold text-gray-900\">{row.groupLabel}</span>\n                            <span className=\"text-xs text-gray-500\">({row.totals.sessions})</span>\n                          </div>\n                        </TableCell>\n\n                        {/* Detail columns - only show for parent rows when there are expanded rows */}\n                        {expandedRows.size > 0 && (\n                          <>\n                            <TableCell className=\"text-center py-1.5 text-gray-400\">-</TableCell>\n                            <TableCell className=\"text-center py-1.5 text-gray-400\">-</TableCell>\n                            <TableCell className=\"text-center py-1.5 text-gray-400\">-</TableCell>\n                            <TableCell className=\"text-center py-1.5 text-gray-400\">-</TableCell>\n                            <TableCell className=\"text-center py-1.5 text-gray-400\">-</TableCell>\n                          </>\n                        )}\n\n                        {availableMonths.map((month, index) => {\n                          const monthData = row.monthlyData[month.key];\n                          const prevMonthData = index > 0 ? row.monthlyData[availableMonths[index - 1].key] : null;\n\n                          const getMetricNumeric = (md: MonthlyData, metric: MetricType): number => {\n                            switch (metric) {\n                              case 'attendance': return md.attendance;\n                              case 'sessions': return md.sessions;\n                              case 'revenue': return md.revenue;\n                              case 'fillRate': return md.fillRate;\n                              case 'classAverage': return md.classAverage;\n                              case 'capacity': return md.capacity;\n                              case 'bookingRate': return md.bookingRate;\n                              default: return md.attendance;\n                            }\n                          };\n\n                          const currentValue = getMetricNumeric(monthData, selectedMetric);\n                          const previousValue = prevMonthData ? getMetricNumeric(prevMonthData, selectedMetric) : 0;\n                          const growthRate = prevMonthData ? getGrowthRate(currentValue, previousValue) : 0;\n\n                          return (\n                            <TableCell key={month.key} className=\"text-center py-1.5 whitespace-nowrap\">\n                              <span className=\"font-semibold text-gray-900\">\n                                {getMetricValue(monthData, selectedMetric)}\n                              </span>\n                              {showGrowthRate && prevMonthData && (\n                                <span className={cn(\n                                  \"text-xs font-medium ml-1\",\n                                  growthRate > 0 ? \"text-green-600\" : growthRate < 0 ? \"text-red-600\" : \"text-gray-500\"\n                                )}>\n                                  {growthRate > 0 ? \"\" : growthRate < 0 ? \"\" : \"\"}\n                                  {formatPercentage(Math.abs(growthRate))}\n                                </span>\n                              )}\n                            </TableCell>\n                          );\n                        })}\n\n                        <TableCell className=\"text-center py-1.5 whitespace-nowrap\">\n                          <span className=\"font-bold text-slate-800\">\n                            {getMetricValue(row.totals, selectedMetric)}\n                          </span>\n                        </TableCell>\n                      </motion.tr>\n\n                      {/* Child Rows */}\n                      <AnimatePresence>\n                        {isExpanded && childRows.map((childRow, childIndex) => (\n                          <motion.tr\n                            key={childRow.groupKey}\n                            className=\"border-b h-9 max-h-9\"\n                            initial={{ opacity: 0, height: 0 }}\n                            animate={{ opacity: 1, height: 'auto' }}\n                            exit={{ opacity: 0, height: 0 }}\n                            transition={{ duration: 0.2, delay: childIndex * 0.02 }}\n                          >\n                            <TableCell className=\"sticky left-0 z-20 bg-white border-r font-medium whitespace-nowrap py-1 pl-12 text-sm\">\n                              <div className=\"flex items-center gap-2\">\n                                <div className=\"w-4 h-4 rounded-full bg-gradient-to-br from-green-400 to-blue-400\" />\n                                <span className=\"text-gray-700\">{childRow.groupLabel}</span>\n                              </div>\n                            </TableCell>\n\n                            {/* Detail columns for child rows - always show to maintain alignment */}\n                            <TableCell className=\"text-center py-1 text-sm text-gray-700\">\n                              {childRow.sessionDetails?.date || '-'}\n                            </TableCell>\n                            <TableCell className=\"text-center py-1 text-sm text-gray-700\">\n                              {childRow.sessionDetails?.time || '-'}\n                            </TableCell>\n                            <TableCell className=\"text-center py-1 text-sm text-gray-700\">\n                              {childRow.sessionDetails?.trainer || '-'}\n                            </TableCell>\n                            <TableCell className=\"text-center py-1 text-sm text-gray-700\">\n                              {childRow.sessionDetails?.location || '-'}\n                            </TableCell>\n                            <TableCell className=\"text-center py-1 text-sm text-gray-700\">\n                              {childRow.sessionDetails?.teacher || '-'}\n                            </TableCell>\n\n                            {availableMonths.map((month) => {\n                              const monthData = childRow.monthlyData[month.key];\n                              return (\n                                <TableCell key={month.key} className=\"text-center py-1 whitespace-nowrap text-sm\">\n                                  <span className=\"text-gray-800\">\n                                    {getMetricValue(monthData, selectedMetric)}\n                                  </span>\n                                </TableCell>\n                              );\n                            })}\n\n                            <TableCell className=\"text-center py-1 whitespace-nowrap text-sm\">\n                              <span className=\"font-semibold text-slate-700\">\n                                {getMetricValue(childRow.totals, selectedMetric)}\n                              </span>\n                            </TableCell>\n                          </motion.tr>\n                        ))}\n                      </AnimatePresence>\n                    </React.Fragment>\n                  );\n                })}\n              </AnimatePresence>\n              \n              {/* Totals row across all groups */}\n              <TableRow className=\"bg-slate-800 text-white font-bold border-t-2 h-9 max-h-9\">\n                <TableCell className=\"sticky left-0 z-10 bg-slate-800 border-r text-white py-1.5\">Totals</TableCell>\n                {/* Empty detail columns - only show when there are expanded rows */}\n                {expandedRows.size > 0 && (\n                  <>\n                    <TableCell />\n                    <TableCell />\n                    <TableCell />\n                    <TableCell />\n                    <TableCell />\n                  </>\n                )}\n                \n                {availableMonths.map((month) => {\n                  const totalsForMonth = processedData.reduce((acc, row) => {\n                    const md = row.monthlyData[month.key];\n                    acc.sessions += md.sessions;\n                    acc.attendance += md.attendance;\n                    acc.capacity += md.capacity;\n                    acc.revenue += md.revenue;\n                    acc.lateCancellations += md.lateCancellations;\n                    acc.booked += (md.booked || 0);\n                    return acc;\n                  }, { sessions:0, attendance:0, capacity:0, revenue:0, lateCancellations:0, booked:0 });\n                  const display = getMetricValue({\n                    month: month.key,\n                    monthLabel: month.label,\n                    sessions: totalsForMonth.sessions,\n                    attendance: totalsForMonth.attendance,\n                    capacity: totalsForMonth.capacity,\n                    revenue: totalsForMonth.revenue,\n                    fillRate: totalsForMonth.capacity>0 ? (totalsForMonth.attendance/totalsForMonth.capacity)*100 : 0,\n                    classAverage: totalsForMonth.sessions>0 ? (totalsForMonth.attendance/totalsForMonth.sessions) : 0,\n                    bookingRate: totalsForMonth.capacity>0 ? ((totalsForMonth.booked)/totalsForMonth.capacity)*100 : 0,\n                    lateCancellations: totalsForMonth.lateCancellations,\n                    uniqueClasses: 0,\n                    uniqueTrainers: 0,\n                    booked: totalsForMonth.booked\n                  }, selectedMetric);\n                  return (\n                    <TableCell key={`total-${month.key}`} className=\"text-center py-1.5\">\n                      <span className=\"font-bold text-white\">{display}</span>\n                    </TableCell>\n                  );\n                })}\n                \n                {/* Overall total (rightmost) */}\n                <TableCell className=\"text-center py-1.5\">\n                  <span className=\"font-bold text-white\">\n                    {getMetricValue({\n                      month: 'total',\n                      monthLabel: 'Total',\n                      sessions: processedData.reduce((s, r) => s + r.totals.sessions, 0),\n                      attendance: processedData.reduce((s, r) => s + r.totals.attendance, 0),\n                      capacity: processedData.reduce((s, r) => s + r.totals.capacity, 0),\n                      revenue: processedData.reduce((s, r) => s + r.totals.revenue, 0),\n                      fillRate: 0,\n                      classAverage: 0,\n                      bookingRate: 0,\n                      lateCancellations: processedData.reduce((s, r) => s + r.totals.lateCancellations, 0),\n                      uniqueClasses: 0,\n                      uniqueTrainers: 0\n                    }, selectedMetric)}\n                  </span>\n                </TableCell>\n              </TableRow>\n            </TableBody>\n          </Table>\n        </div>\n      )}\n    </ModernTableWrapper>\n\n    <PersistentTableFooter\n      tableId=\"month-on-month-class-attendance\"\n      tableData={processedData}\n      tableName=\"Month-on-Month Class Attendance\"\n      tableContext=\"Monthly class attendance trends and comparisons\"\n    />\n    </>\n  );\n};","import React, { useState, useMemo } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { Badge } from '@/components/ui/badge';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Dialog, DialogContent, DialogHeader, DialogTitle, DialogTrigger } from '@/components/ui/dialog';\nimport { Input } from '@/components/ui/input';\nimport { Label } from '@/components/ui/label';\nimport { Switch } from '@/components/ui/switch';\nimport { \n  Trophy, TrendingDown, BarChart3, Users, DollarSign, \n  Target, Activity, Crown, AlertTriangle, Eye, \n  ArrowUp, ArrowDown, Calendar, MapPin, Clock,\n  Star, Award, Zap, Building2, TrendingUp\n} from 'lucide-react';\nimport { SessionData } from '@/hooks/useSessionsData';\nimport { formatCurrency, formatNumber, formatPercentage } from '@/utils/formatters';\nimport { cn } from '@/lib/utils';\n\ninterface DualRankingListsProps {\n  data: SessionData[];\n  location: string;\n}\n\ntype RankingCriteria = 'classAverage' | 'fillRate' | 'attendance' | 'revenue' | 'consistency' | 'growth';\ntype GroupingType = 'class' | 'trainer' | 'classTrainer' | 'location' | 'timeSlot';\n\ninterface RankingItem {\n  id: string;\n  name: string;\n  subName?: string;\n  sessions: number;\n  attendance: number;\n  capacity: number;\n  revenue: number;\n  fillRate: number;\n  classAverage: number;\n  consistency: number;\n  growth: number;\n  rankValue: number;\n  emptyClasses: number;\n  nonEmptyClasses: number;\n  details: {\n    location?: string;\n    dayOfWeek?: string;\n    time?: string;\n    classType?: string;\n    trainer?: string;\n    uniqueClasses?: number;\n    avgCapacity?: number;\n    lateCancellations?: number;\n  };\n  sessions_data: SessionData[];\n}\n\nexport const DualRankingLists: React.FC<DualRankingListsProps> = ({ \n  data, \n  location \n}) => {\n  const [rankingCriteria, setRankingCriteria] = useState<RankingCriteria>('classAverage');\n  const [groupingType, setGroupingType] = useState<GroupingType>('classTrainer');\n  const [minClassesFilter, setMinClassesFilter] = useState(2);\n  const [excludeHostedClasses, setExcludeHostedClasses] = useState(true);\n  const [showTrainerDetails, setShowTrainerDetails] = useState(true);\n  const [topCount, setTopCount] = useState(10);\n  const [bottomCount, setBottomCount] = useState(10);\n  const [selectedItem, setSelectedItem] = useState<RankingItem | null>(null);\n\n  // Filter data\n  const filteredData = useMemo(() => {\n    let filtered = [...data];\n    \n    // Exclude hosted classes if enabled\n    if (excludeHostedClasses) {\n      filtered = filtered.filter(session => \n        !session.cleanedClass?.toLowerCase().includes('hosted') &&\n        !session.sessionName?.toLowerCase().includes('hosted')\n      );\n    }\n    \n    // Apply minimum classes filter\n    if (minClassesFilter > 1) {\n      const sessionCounts = new Map<string, number>();\n      filtered.forEach(session => {\n        const key = groupingType === 'classTrainer' \n          ? `${session.cleanedClass}-${session.trainerName}-${session.dayOfWeek}-${session.time}-${session.location}`\n          : groupingType === 'class' \n          ? `${session.cleanedClass}-${session.dayOfWeek}-${session.time}-${session.location}`\n          : groupingType === 'trainer'\n          ? session.trainerName || 'unknown'\n          : groupingType === 'location'\n          ? session.location || 'unknown'\n          : `${session.time}-${session.dayOfWeek}`;\n        \n        sessionCounts.set(key, (sessionCounts.get(key) || 0) + 1);\n      });\n      \n      filtered = filtered.filter(session => {\n        const key = groupingType === 'classTrainer' \n          ? `${session.cleanedClass}-${session.trainerName}-${session.dayOfWeek}-${session.time}-${session.location}`\n          : groupingType === 'class' \n          ? `${session.cleanedClass}-${session.dayOfWeek}-${session.time}-${session.location}`\n          : groupingType === 'trainer'\n          ? session.trainerName || 'unknown'\n          : groupingType === 'location'\n          ? session.location || 'unknown'\n          : `${session.time}-${session.dayOfWeek}`;\n        \n        return (sessionCounts.get(key) || 0) >= minClassesFilter;\n      });\n    }\n    \n    return filtered;\n  }, [data, excludeHostedClasses, minClassesFilter, groupingType]);\n\n  // Group and calculate rankings\n  const rankings = useMemo(() => {\n    const grouped = new Map<string, SessionData[]>();\n    \n    filteredData.forEach(session => {\n      let groupKey = '';\n      switch (groupingType) {\n        case 'classTrainer':\n          groupKey = `${session.cleanedClass}-${session.trainerName}-${session.dayOfWeek}-${session.time}-${session.location}`;\n          break;\n        case 'class':\n          groupKey = `${session.cleanedClass}-${session.dayOfWeek}-${session.time}-${session.location}`;\n          break;\n        case 'trainer':\n          groupKey = session.trainerName || 'Unknown Trainer';\n          break;\n        case 'location':\n          groupKey = session.location || 'Unknown Location';\n          break;\n        case 'timeSlot':\n          groupKey = `${session.time}-${session.dayOfWeek}`;\n          break;\n        default:\n          groupKey = `${session.cleanedClass}-${session.trainerName}`;\n      }\n      \n      if (!grouped.has(groupKey)) {\n        grouped.set(groupKey, []);\n      }\n      grouped.get(groupKey)!.push(session);\n    });\n\n    const rankingItems: RankingItem[] = Array.from(grouped.entries()).map(([groupKey, sessions]) => {\n      const totalSessions = sessions.length;\n      const totalAttendance = sessions.reduce((sum, s) => sum + (s.checkedInCount || 0), 0);\n      const totalCapacity = sessions.reduce((sum, s) => sum + (s.capacity || 0), 0);\n      const totalRevenue = sessions.reduce((sum, s) => sum + (s.totalPaid || 0), 0);\n      const totalLateCancellations = sessions.reduce((sum, s) => sum + (s.lateCancelledCount || 0), 0);\n      const emptyClasses = sessions.filter(s => (s.checkedInCount || 0) === 0).length;\n      const nonEmptyClasses = totalSessions - emptyClasses;\n      \n      const fillRate = totalCapacity > 0 ? (totalAttendance / totalCapacity) * 100 : 0;\n      const classAverage = totalSessions > 0 ? totalAttendance / totalSessions : 0;\n      const avgCapacity = totalSessions > 0 ? totalCapacity / totalSessions : 0;\n      \n      // Calculate consistency (coefficient of variation)\n      const attendanceMean = classAverage;\n      const attendanceVariance = sessions.reduce((sum, s) => {\n        const diff = (s.checkedInCount || 0) - attendanceMean;\n        return sum + (diff * diff);\n      }, 0) / totalSessions;\n      const consistency = attendanceMean > 0 ? 100 - (Math.sqrt(attendanceVariance) / attendanceMean * 100) : 0;\n      \n      // Mock growth calculation (would need historical data in real implementation)\n      const growth = fillRate > 70 ? Math.random() * 20 - 5 : Math.random() * 10 - 10;\n      \n      // Get ranking value based on criteria\n      let rankValue = 0;\n      switch (rankingCriteria) {\n        case 'classAverage':\n          rankValue = classAverage;\n          break;\n        case 'fillRate':\n          rankValue = fillRate;\n          break;\n        case 'attendance':\n          rankValue = totalAttendance;\n          break;\n        case 'revenue':\n          rankValue = totalRevenue;\n          break;\n        case 'consistency':\n          rankValue = Math.max(0, Math.min(100, consistency));\n          break;\n        case 'growth':\n          rankValue = growth;\n          break;\n        default:\n          rankValue = classAverage;\n      }\n      \n      // Generate name based on grouping type\n      let name = '';\n      let subName = '';\n      switch (groupingType) {\n        case 'classTrainer':\n          name = sessions[0].cleanedClass || 'Unknown Class';\n          subName = showTrainerDetails ? sessions[0].trainerName || 'Unknown Trainer' : '';\n          break;\n        case 'class':\n          name = sessions[0].cleanedClass || 'Unknown Class';\n          subName = `${sessions[0].dayOfWeek} at ${sessions[0].time}`;\n          break;\n        case 'trainer':\n          name = sessions[0].trainerName || 'Unknown Trainer';\n          subName = `${totalSessions} classes`;\n          break;\n        case 'location':\n          name = sessions[0].location || 'Unknown Location';\n          subName = `${totalSessions} classes`;\n          break;\n        case 'timeSlot':\n          name = `${sessions[0].time} - ${sessions[0].dayOfWeek}`;\n          subName = `${new Set(sessions.map(s => s.cleanedClass)).size} different classes`;\n          break;\n        default:\n          name = `${sessions[0].cleanedClass} - ${sessions[0].trainerName}`;\n      }\n\n      return {\n        id: groupKey,\n        name,\n        subName,\n        sessions: totalSessions,\n        attendance: totalAttendance,\n        capacity: totalCapacity,\n        revenue: totalRevenue,\n        fillRate: Math.max(0, Math.min(100, fillRate)),\n        classAverage,\n        consistency: Math.max(0, Math.min(100, consistency)),\n        growth,\n        rankValue,\n        emptyClasses,\n        nonEmptyClasses,\n        details: {\n          location: sessions[0].location,\n          dayOfWeek: sessions[0].dayOfWeek,\n          time: sessions[0].time,\n          classType: sessions[0].cleanedClass,\n          trainer: sessions[0].trainerName,\n          uniqueClasses: new Set(sessions.map(s => s.cleanedClass)).size,\n          avgCapacity,\n          lateCancellations: totalLateCancellations\n        },\n        sessions_data: sessions\n      };\n    });\n\n    // Sort by ranking value\n    return rankingItems.sort((a, b) => b.rankValue - a.rankValue);\n  }, [filteredData, groupingType, rankingCriteria, showTrainerDetails]);\n\n  const topPerformers = rankings.slice(0, topCount);\n  const bottomPerformers = rankings.slice(-bottomCount).reverse();\n\n  const criteriaOptions = [\n    { value: 'classAverage', label: 'Class Average', icon: BarChart3, description: 'Average attendance per session' },\n    { value: 'fillRate', label: 'Fill Rate', icon: Target, description: 'Percentage of capacity filled' },\n    { value: 'attendance', label: 'Total Attendance', icon: Users, description: 'Total people attended' },\n    { value: 'revenue', label: 'Revenue', icon: DollarSign, description: 'Total revenue generated' },\n    { value: 'consistency', label: 'Consistency', icon: TrendingUp, description: 'Consistency of attendance' },\n    { value: 'growth', label: 'Growth Rate', icon: Zap, description: 'Month-over-month growth' }\n  ];\n\n  const groupingOptions = [\n    { value: 'classTrainer', label: 'Class + Trainer', icon: Activity, description: 'Unique class-trainer combinations' },\n    { value: 'class', label: 'Class Only', icon: Activity, description: 'Classes regardless of trainer' },\n    { value: 'trainer', label: 'Trainer', icon: Users, description: 'Individual trainers' },\n    { value: 'location', label: 'Location', icon: MapPin, description: 'By studio location' },\n    { value: 'timeSlot', label: 'Time Slot', icon: Clock, description: 'By day and time' }\n  ];\n\n  const getRankValueDisplay = (item: RankingItem) => {\n    switch (rankingCriteria) {\n      case 'classAverage':\n        return formatNumber(item.classAverage);\n      case 'fillRate':\n        return formatPercentage(item.fillRate);\n      case 'attendance':\n        return formatNumber(item.attendance);\n      case 'revenue':\n        return formatCurrency(item.revenue);\n      case 'consistency':\n        return formatPercentage(item.consistency);\n      case 'growth':\n        return `${item.growth >= 0 ? '+' : ''}${formatPercentage(item.growth)}`;\n      default:\n        return formatNumber(item.classAverage);\n    }\n  };\n\n  const getRankValueColor = (item: RankingItem, isTop: boolean) => {\n    if (rankingCriteria === 'growth') {\n      return item.growth >= 0 ? 'text-green-600' : 'text-red-600';\n    }\n    return isTop ? 'text-green-600' : 'text-red-600';\n  };\n\n  const RankingCard = ({ \n    item, \n    rank, \n    isTop,\n    icon: IconComponent \n  }: { \n    item: RankingItem; \n    rank: number; \n    isTop: boolean;\n    icon: React.ElementType;\n  }) => (\n    <Card className={cn(\n      \"transition-all duration-300 hover:shadow-lg cursor-pointer border-l-4\",\n      isTop \n        ? \"hover:bg-green-50 border-l-green-500 bg-gradient-to-r from-green-50 to-white\" \n        : \"hover:bg-red-50 border-l-red-500 bg-gradient-to-r from-red-50 to-white\"\n    )}\n    onClick={() => setSelectedItem(item)}\n    >\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-center justify-between mb-3\">\n          <div className=\"flex items-center gap-3\">\n            <div className={cn(\n              \"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold\",\n              isTop ? \"bg-green-100 text-green-700\" : \"bg-red-100 text-red-700\"\n            )}>\n              {rank}\n            </div>\n            <IconComponent className={cn(\n              \"w-5 h-5\",\n              isTop ? \"text-green-600\" : \"text-red-600\"\n            )} />\n          </div>\n          <div className={cn(\n            \"text-lg font-bold\",\n            getRankValueColor(item, isTop)\n          )}>\n            {getRankValueDisplay(item)}\n          </div>\n        </div>\n        \n        <div className=\"space-y-2\">\n          <div className=\"font-semibold text-gray-900 line-clamp-2\">\n            {item.name}\n          </div>\n          {item.subName && (\n            <div className=\"text-sm text-gray-600\">\n              {item.subName}\n            </div>\n          )}\n          \n          <div className=\"flex flex-wrap gap-2 mt-3\">\n            <Badge variant=\"outline\" className=\"metric-badge badge-soft-slate\">\n              {item.sessions} classes\n            </Badge>\n            <Badge variant=\"outline\" className=\"metric-badge badge-soft-blue\">\n              {formatNumber(item.attendance)} checked in\n            </Badge>\n            <Badge variant=\"outline\" className=\"metric-badge badge-soft-red\">\n              {formatNumber(item.emptyClasses)} empty\n            </Badge>\n            <Badge variant=\"outline\" className=\"metric-badge badge-soft-green\">\n              {formatNumber(item.nonEmptyClasses)} non-empty\n            </Badge>\n            <Badge variant=\"outline\" className=\"metric-badge badge-soft-purple\">\n              {formatNumber(item.classAverage)} avg/class\n            </Badge>\n            <Badge variant=\"outline\" className=\"metric-badge badge-soft-yellow\">\n              {formatPercentage(item.fillRate)} fill rate\n            </Badge>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n\n  return (\n    <div className=\"space-y-6\">\n      {/* Control Panel */}\n      <Card className=\"bg-gradient-to-r from-blue-50 to-purple-50\">\n        <CardContent className=\"p-6\">\n          <div className=\"space-y-4\">\n            <div className=\"flex flex-wrap gap-4 items-center\">\n              <div className=\"space-y-2\">\n                <Label className=\"text-sm font-semibold\">Ranking Criteria</Label>\n                <Select value={rankingCriteria} onValueChange={(value: RankingCriteria) => setRankingCriteria(value)}>\n                  <SelectTrigger className=\"w-48\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {criteriaOptions.map(option => (\n                      <SelectItem key={option.value} value={option.value}>\n                        <div className=\"space-y-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <option.icon className=\"w-4 h-4\" />\n                            {option.label}\n                          </div>\n                          <div className=\"text-xs text-gray-500\">{option.description}</div>\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label className=\"text-sm font-semibold\">Group By</Label>\n                <Select value={groupingType} onValueChange={(value: GroupingType) => setGroupingType(value)}>\n                  <SelectTrigger className=\"w-48\">\n                    <SelectValue />\n                  </SelectTrigger>\n                  <SelectContent>\n                    {groupingOptions.map(option => (\n                      <SelectItem key={option.value} value={option.value}>\n                        <div className=\"space-y-1\">\n                          <div className=\"flex items-center gap-2\">\n                            <option.icon className=\"w-4 h-4\" />\n                            {option.label}\n                          </div>\n                          <div className=\"text-xs text-gray-500\">{option.description}</div>\n                        </div>\n                      </SelectItem>\n                    ))}\n                  </SelectContent>\n                </Select>\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label className=\"text-sm font-semibold\">Min Classes</Label>\n                <Input\n                  type=\"number\"\n                  min=\"1\"\n                  max=\"20\"\n                  value={minClassesFilter}\n                  onChange={(e) => setMinClassesFilter(Number(e.target.value))}\n                  className=\"w-24\"\n                />\n              </div>\n            </div>\n\n            <div className=\"flex flex-wrap gap-4 items-center\">\n              <div className=\"flex items-center space-x-2\">\n                <Switch\n                  id=\"exclude-hosted\"\n                  checked={excludeHostedClasses}\n                  onCheckedChange={setExcludeHostedClasses}\n                />\n                <Label htmlFor=\"exclude-hosted\" className=\"text-sm\">\n                  Exclude Hosted Classes\n                </Label>\n              </div>\n\n              {groupingType === 'classTrainer' && (\n                <div className=\"flex items-center space-x-2\">\n                  <Switch\n                    id=\"show-trainer\"\n                    checked={showTrainerDetails}\n                    onCheckedChange={setShowTrainerDetails}\n                  />\n                  <Label htmlFor=\"show-trainer\" className=\"text-sm\">\n                    Show Trainer Names\n                  </Label>\n                </div>\n              )}\n\n              <div className=\"flex items-center gap-4\">\n                <div className=\"flex items-center gap-2\">\n                  <Label className=\"text-sm\">Top:</Label>\n                  <Input\n                    type=\"number\"\n                    min=\"5\"\n                    max=\"20\"\n                    value={topCount}\n                    onChange={(e) => setTopCount(Number(e.target.value))}\n                    className=\"w-16\"\n                  />\n                </div>\n                <div className=\"flex items-center gap-2\">\n                  <Label className=\"text-sm\">Bottom:</Label>\n                  <Input\n                    type=\"number\"\n                    min=\"5\"\n                    max=\"20\"\n                    value={bottomCount}\n                    onChange={(e) => setBottomCount(Number(e.target.value))}\n                    className=\"w-16\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Side-by-side Rankings */}\n      <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n        {/* Top Performers */}\n        <Card className=\"shadow-xl bg-gradient-to-br from-green-50 to-emerald-50\">\n          <CardHeader className=\"bg-gradient-to-r from-green-600 to-emerald-600 text-white\">\n            <CardTitle className=\"flex items-center gap-3\">\n              <Trophy className=\"w-6 h-6\" />\n              Top Performers\n              <Badge variant=\"secondary\" className=\"bg-white/20 text-white\">\n                {topPerformers.length}\n              </Badge>\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-6\">\n            <div className=\"space-y-3\">\n              {topPerformers.map((item, index) => (\n                <RankingCard\n                  key={item.id}\n                  item={item}\n                  rank={index + 1}\n                  isTop={true}\n                  icon={index === 0 ? Crown : index === 1 ? Award : index === 2 ? Star : Trophy}\n                />\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n\n        {/* Bottom Performers */}\n        <Card className=\"shadow-xl bg-gradient-to-br from-red-50 to-rose-50\">\n          <CardHeader className=\"bg-gradient-to-r from-red-600 to-rose-600 text-white\">\n            <CardTitle className=\"flex items-center gap-3\">\n              <TrendingDown className=\"w-6 h-6\" />\n              Bottom Performers\n              <Badge variant=\"secondary\" className=\"bg-white/20 text-white\">\n                {bottomPerformers.length}\n              </Badge>\n            </CardTitle>\n          </CardHeader>\n          <CardContent className=\"p-6\">\n            <div className=\"space-y-3\">\n              {bottomPerformers.map((item, index) => (\n                <RankingCard\n                  key={item.id}\n                  item={item}\n                  rank={rankings.length - bottomPerformers.length + index + 1}\n                  isTop={false}\n                  icon={AlertTriangle}\n                />\n              ))}\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Detail Modal */}\n      <Dialog open={selectedItem !== null} onOpenChange={(open) => !open && setSelectedItem(null)}>\n        <DialogContent className=\"max-w-4xl max-h-[80vh] overflow-y-auto\">\n          <DialogHeader>\n            <DialogTitle className=\"flex items-center gap-2\">\n              <Eye className=\"w-5 h-5\" />\n              Detailed Analytics: {selectedItem?.name}\n            </DialogTitle>\n          </DialogHeader>\n          \n          {selectedItem && (\n            <div className=\"space-y-6\">\n              {/* Key Metrics */}\n              <div className=\"grid grid-cols-2 md:grid-cols-4 gap-4\">\n                <div className=\"bg-blue-50 p-4 rounded-lg text-center\">\n                  <div className=\"text-2xl font-bold text-blue-600\">\n                    {formatNumber(selectedItem.classAverage)}\n                  </div>\n                  <div className=\"text-sm text-blue-700\">Class Average</div>\n                </div>\n                <div className=\"bg-green-50 p-4 rounded-lg text-center\">\n                  <div className=\"text-2xl font-bold text-green-600\">\n                    {formatPercentage(selectedItem.fillRate)}\n                  </div>\n                  <div className=\"text-sm text-green-700\">Fill Rate</div>\n                </div>\n                <div className=\"bg-purple-50 p-4 rounded-lg text-center\">\n                  <div className=\"text-2xl font-bold text-purple-600\">\n                    {formatNumber(selectedItem.attendance)}\n                  </div>\n                  <div className=\"text-sm text-purple-700\">Total Attendance</div>\n                </div>\n                <div className=\"bg-orange-50 p-4 rounded-lg text-center\">\n                  <div className=\"text-2xl font-bold text-orange-600\">\n                    {formatCurrency(selectedItem.revenue)}\n                  </div>\n                  <div className=\"text-sm text-orange-700\">Revenue</div>\n                </div>\n              </div>\n\n              {/* Session Details */}\n              <div>\n                <h3 className=\"font-semibold mb-3\">Session Details</h3>\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3 max-h-60 overflow-y-auto\">\n                  {selectedItem.sessions_data.slice(0, 12).map((session, idx) => (\n                    <div key={idx} className=\"bg-gray-50 p-3 rounded border text-sm\">\n                      <div className=\"font-medium\">{session.date}</div>\n                      <div className=\"text-gray-600\">{session.time} - {session.dayOfWeek}</div>\n                      <div className=\"flex gap-2 mt-2\">\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {session.checkedInCount}/{session.capacity}\n                        </Badge>\n                        <Badge variant=\"outline\" className=\"text-xs\">\n                          {formatCurrency(session.totalPaid || 0)}\n                        </Badge>\n                      </div>\n                    </div>\n                  ))}\n                  {selectedItem.sessions_data.length > 12 && (\n                    <div className=\"bg-gray-100 p-3 rounded border text-sm flex items-center justify-center text-gray-500\">\n                      +{selectedItem.sessions_data.length - 12} more sessions\n                    </div>\n                  )}\n                </div>\n              </div>\n            </div>\n          )}\n        </DialogContent>\n      </Dialog>\n    </div>\n  );\n};","import React, { useEffect, useMemo } from 'react';\nimport { useSessionsData } from '@/hooks/useSessionsData';\nimport { useGlobalLoading } from '@/hooks/useGlobalLoading';\nimport { Footer } from '@/components/ui/footer';\nimport { GlobalFiltersProvider } from '@/contexts/GlobalFiltersContext';\nimport { SessionsFiltersProvider } from '@/contexts/SessionsFiltersContext';\nimport { LoadingSkeleton } from '@/components/ui/LoadingSkeleton';\nimport DashboardMotionHero from '@/components/ui/DashboardMotionHero';\nimport { useFilteredSessionsData } from '@/hooks/useFilteredSessionsData';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { StudioLocationTabs } from '@/components/ui/StudioLocationTabs';\nimport { EnhancedClassAttendanceFilterSection } from '@/components/dashboard/EnhancedClassAttendanceFilterSection';\nimport { SuperEnhancedMetricCards } from '@/components/dashboard/SuperEnhancedMetricCards';\nimport { UltimateClassAttendanceTable } from '@/components/dashboard/UltimateClassAttendanceTable';\nimport { MonthOnMonthClassTable } from '@/components/dashboard/MonthOnMonthClassTable';\nimport { DualRankingLists } from '@/components/dashboard/DualRankingLists';\nimport { usePayrollData } from '@/hooks/usePayrollData';\nimport { BarChart3, Users, MapPin, Building2, Calendar, Trophy } from 'lucide-react';\nimport { useState } from 'react';\n\nconst locations = [{\n  id: 'all',\n  name: 'All Locations',\n  fullName: 'All Locations'\n}, {\n  id: 'Kwality House, Kemps Corner',\n  name: 'Kwality House',\n  fullName: 'Kwality House, Kemps Corner'\n}, {\n  id: 'Supreme HQ, Bandra',\n  name: 'Supreme HQ',\n  fullName: 'Supreme HQ, Bandra'\n}, {\n  id: 'Kenkere House',\n  name: 'Kenkere House',\n  fullName: 'Kenkere House'\n}];\n\nconst ClassAttendance = () => {\n  const { data, loading, error, refetch } = useSessionsData();\n  const { data: payrollData } = usePayrollData();\n  const { setLoading } = useGlobalLoading();\n\n  useEffect(() => {\n    setLoading(loading, 'Loading class attendance data...');\n  }, [loading, setLoading]);\n\n\n\n  if (loading) {\n    return (\n      <div className=\"min-h-screen bg-white relative overflow-hidden\">\n        <div className=\"absolute inset-0 overflow-hidden\">\n          <div className=\"absolute top-20 left-10 w-96 h-96 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-full floating-animation stagger-1\"></div>\n          <div className=\"absolute bottom-20 right-10 w-80 h-80 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-full floating-animation stagger-3\"></div>\n          <div className=\"absolute top-1/2 left-1/3 w-72 h-72 bg-gradient-to-r from-cyan-500/10 to-teal-500/10 rounded-full morph-shape stagger-2\"></div>\n        </div>\n        <div className=\"relative z-10 container mx-auto px-6 py-10\">\n          <LoadingSkeleton type=\"full-page\" />\n        </div>\n      </div>\n    );\n  }\n\n  if (error) {\n    return (\n      <div className=\"min-h-screen bg-white relative overflow-hidden\">\n        <div className=\"absolute inset-0 overflow-hidden\">\n          <div className=\"absolute top-20 left-10 w-96 h-96 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-full floating-animation stagger-1\"></div>\n          <div className=\"absolute bottom-20 right-10 w-80 h-80 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-full floating-animation stagger-3\"></div>\n          <div className=\"absolute top-1/2 left-1/3 w-72 h-72 bg-gradient-to-r from-cyan-500/10 to-teal-500/10 rounded-full morph-shape stagger-2\"></div>\n        </div>\n        <div className=\"relative z-10 container mx-auto px-6 py-10\">\n          <div className=\"bg-red-50 border border-red-200 text-red-800 p-6 rounded-2xl shadow-sm\">\n            <div className=\"font-semibold text-lg mb-1\">Failed to load class attendance data</div>\n            <div className=\"text-sm opacity-90 mb-4\">{String(error)}</div>\n            <button\n              onClick={refetch}\n              className=\"px-4 py-2 rounded-lg bg-red-600 text-white hover:bg-red-700 transition\"\n            >\n              Retry\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  // Inner component rendered under SessionsFiltersProvider so filtering applies\n  const InnerContent: React.FC<{ rawData: any[]; payrollData: any[] }> = ({ rawData, payrollData }) => {\n    const filteredData = useFilteredSessionsData(rawData || []);\n    const [activeLocation, setActiveLocation] = useState('Kwality House, Kemps Corner');\n    const [activeTab, setActiveTab] = useState('overview');\n\n    // Filter data by location\n    const locationFilteredData = useMemo(() => {\n      if (!filteredData || activeLocation === 'all') return filteredData || [];\n      \n      const selectedLocation = locations.find(loc => loc.id === activeLocation);\n      if (!selectedLocation) return filteredData || [];\n\n      return filteredData.filter(session => {\n        if (session.location === selectedLocation.fullName) return true;\n        \n        const sessionLoc = session.location?.toLowerCase() || '';\n        const targetLoc = selectedLocation.fullName.toLowerCase();\n        \n        if (selectedLocation.id === 'Kwality House, Kemps Corner' && sessionLoc.includes('kwality')) return true;\n        if (selectedLocation.id === 'Supreme HQ, Bandra' && sessionLoc.includes('supreme')) return true;\n        if (selectedLocation.id === 'Kenkere House' && sessionLoc.includes('kenkere')) return true;\n        \n        return false;\n      });\n    }, [filteredData, activeLocation]);\n\n    // Calculate hero metrics\n    const metrics = useMemo(() => {\n      if (!filteredData || filteredData.length === 0) {\n        return [\n          { label: 'Total Classes', value: '0' },\n          { label: 'Total Attendance', value: '0' },\n          { label: 'Fill Rate', value: '0%' },\n        ];\n      }\n\n      const totalClasses = filteredData.length;\n      const totalAttendance = filteredData.reduce((sum, s) => sum + (s.checkedInCount || 0), 0);\n      const totalCapacity = filteredData.reduce((sum, s) => sum + (s.capacity || 0), 0);\n      const fillRate = totalCapacity > 0 ? ((totalAttendance / totalCapacity) * 100).toFixed(1) : '0';\n\n      return [\n        { label: 'Total Classes', value: totalClasses.toLocaleString() },\n        { label: 'Total Attendance', value: totalAttendance.toLocaleString() },\n        { label: 'Fill Rate', value: `${fillRate}%` },\n      ];\n    }, [filteredData]);\n\n    return (\n      <div className=\"min-h-screen bg-white relative overflow-hidden\">\n        {/* Enhanced Background Elements */}\n        <div className=\"absolute inset-0 overflow-hidden\">\n          <div className=\"absolute top-20 left-10 w-96 h-96 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-full floating-animation stagger-1\"></div>\n          <div className=\"absolute bottom-20 right-10 w-80 h-80 bg-gradient-to-r from-purple-500/10 to-pink-500/10 rounded-full floating-animation stagger-3\"></div>\n          <div className=\"absolute top-1/2 left-1/3 w-72 h-72 bg-gradient-to-r from-cyan-500/10 to-teal-500/10 rounded-full morph-shape stagger-2\"></div>\n        </div>\n\n        <div className=\"relative z-10\">\n          <DashboardMotionHero\n            title=\"Class Attendance Analytics\"\n            subtitle=\"Monitor class performance, attendance patterns, capacity utilization, and trainer efficiency across all locations.\"\n            metrics={metrics}\n          />\n\n          <div className=\"bg-white text-slate-800 slide-in-from-left\">\n            <div className=\"container mx-auto px-6 space-y-6\">\n          {/* Location Tabs - matching Sales style */}\n          <StudioLocationTabs \n            activeLocation={activeLocation}\n            onLocationChange={setActiveLocation}\n            showInfoPopover={true}\n            infoPopoverContext=\"class-attendance\"\n          />\n\n          {/* Content Sections */}\n          <div className=\"space-y-8\">\n            {/* Filter Section */}\n            <div className=\"w-full space-y-4\">\n              <EnhancedClassAttendanceFilterSection data={rawData || []} />\n            </div>\n\n            {/* Metric Cards */}\n            <div>\n              <SuperEnhancedMetricCards data={locationFilteredData} payrollData={payrollData || []} />\n            </div>\n\n            {/* Analysis Tabs - matching Sales style exactly */}\n            <Tabs defaultValue=\"overview\" className=\"w-full\">\n              <TabsList className=\"bg-white/95 backdrop-blur-sm p-1.5 rounded-2xl shadow-2xl border-2 border-slate-200 flex w-full max-w-7xl mx-auto overflow-visible relative\">\n                <TabsTrigger value=\"overview\" className=\"relative flex-1 flex items-center justify-center gap-2 px-3 py-3 font-semibold text-xs md:text-sm min-h-[52px] transition-all duration-300 data-[state=active]:bg-gradient-to-br data-[state=active]:from-blue-600 data-[state=active]:via-blue-700 data-[state=active]:to-blue-800 data-[state=active]:text-white data-[state=active]:shadow-2xl data-[state=active]:border-2 data-[state=active]:border-white data-[state=active]:z-50 hover:bg-gray-50 border-r border-slate-200 last:border-r-0 data-[state=active]:scale-[1.02] data-[state=active]:rounded-xl data-[state=active]:-translate-y-1\">\n                  <BarChart3 className=\"w-4 h-4\" />\n                  <span className=\"whitespace-nowrap\">Comprehensive</span>\n                </TabsTrigger>\n                <TabsTrigger value=\"monthlyTrends\" className=\"relative flex-1 flex items-center justify-center gap-2 px-3 py-3 font-semibold text-xs md:text-sm min-h-[52px] transition-all duration-300 data-[state=active]:bg-gradient-to-br data-[state=active]:from-emerald-600 data-[state=active]:via-emerald-700 data-[state=active]:to-emerald-800 data-[state=active]:text-white data-[state=active]:shadow-2xl data-[state=active]:border-2 data-[state=active]:border-white data-[state=active]:z-50 hover:bg-gray-50 border-r border-slate-200 last:border-r-0 data-[state=active]:scale-[1.02] data-[state=active]:rounded-xl data-[state=active]:-translate-y-1\">\n                  <Calendar className=\"w-4 h-4\" />\n                  <span className=\"whitespace-nowrap\">Month on Month</span>\n                </TabsTrigger>\n                <TabsTrigger value=\"rankings\" className=\"relative flex-1 flex items-center justify-center gap-2 px-3 py-3 font-semibold text-xs md:text-sm min-h-[52px] transition-all duration-300 data-[state=active]:bg-gradient-to-br data-[state=active]:from-purple-600 data-[state=active]:via-purple-700 data-[state=active]:to-purple-800 data-[state=active]:text-white data-[state=active]:shadow-2xl data-[state=active]:border-2 data-[state=active]:border-white data-[state=active]:z-50 hover:bg-gray-50 border-r border-slate-200 last:border-r-0 data-[state=active]:scale-[1.02] data-[state=active]:rounded-xl data-[state=active]:-translate-y-1\">\n                  <Trophy className=\"w-4 h-4\" />\n                  <span className=\"whitespace-nowrap\">Rankings</span>\n                </TabsTrigger>\n              </TabsList>\n\n              <TabsContent value=\"overview\" className=\"mt-8\">\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Comprehensive Analysis</h2>\n                  </div>\n                  <UltimateClassAttendanceTable data={locationFilteredData} location={activeLocation} />\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"monthlyTrends\" className=\"mt-8\">\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Month-on-Month Analysis</h2>\n                  </div>\n                  <MonthOnMonthClassTable data={filteredData || []} location={activeLocation} />\n                </div>\n              </TabsContent>\n\n              <TabsContent value=\"rankings\" className=\"mt-8\">\n                <div className=\"space-y-4\">\n                  <div className=\"flex items-center justify-between\">\n                    <h2 className=\"text-2xl font-bold text-gray-900\">Performance Rankings</h2>\n                  </div>\n                  <DualRankingLists data={locationFilteredData} />\n                </div>\n              </TabsContent>\n            </Tabs>\n          </div>\n            </div>\n          </div>\n        </div>\n        <Footer />\n      </div>\n    );\n  };\n\n  return (\n    <GlobalFiltersProvider>\n      <SessionsFiltersProvider>\n        <InnerContent rawData={data || []} payrollData={payrollData || []} />\n      </SessionsFiltersProvider>\n    </GlobalFiltersProvider>\n  );\n};\n\nexport default ClassAttendance;"],"names":["Hash","createLucideIcon","Settings","EnhancedClassAttendanceFilterSection","data","filters","updateFilters","clearAllFilters","useSessionsFilters","isOpen","setIsOpen","useState","minClassesFilter","setMinClassesFilter","filterOptions","useMemo","trainers","d","classTypes","dayOfWeek","timeSlots","locations","formats","hasActiveFilters","activeFilterCount","count","clearAllFiltersWithMinClasses","jsx","Card","Collapsible","CollapsibleTrigger","CardContent","jsxs","Filter","Badge","Button","e","X","ChevronUp","ChevronDown","CollapsibleContent","Label","Calendar","DatePickerWithRange","range","Users","Select","value","SelectTrigger","SelectValue","SelectContent","SelectItem","trainer","User","Target","format","BarChart3","day","Clock","time","Input","currentDate","startOfMonth","lastMonth","endOfLastMonth","iconMap","DollarSign","Activity","UserCheck","SuperEnhancedMetricCards","payrollData","onMetricClick","metrics","React","totalSessions","totalAttendance","sum","session","totalCapacity","totalRevenue","totalBooked","totalLateCancelled","fillRate","avgClassSize","cancelRate","bookingRate","previousRevenue","previousSessions","previousAttendance","previousFillRate","formatCurrency","formatNumber","formatPercentage","handleMetricClick","metric","dynamicRevenue","item","dynamicSessions","dynamicAttendance","drillDownData","_","index","IconComponent","isPositive","isNegative","cn","ArrowUpRight","ArrowDownRight","createSlot","ownerName","SlotClone","createSlotClone","Slot2","React.forwardRef","props","forwardedRef","children","slotProps","childrenArray","React.Children","slottable","isSlottable","newElement","newChildren","child","React.isValidElement","React.cloneElement","childrenRef","getElementRef","props2","mergeProps","React.Fragment","composeRefs","SLOTTABLE_IDENTIFIER","childProps","overrideProps","propName","slotPropValue","childPropValue","args","result","element","getter","mayWarn","NODES","Primitive","primitive","node","Slot","Node","asChild","primitiveProps","Comp","SWITCH_NAME","createSwitchContext","createContextScope","SwitchProvider","useSwitchContext","Switch","__scopeSwitch","name","checkedProp","defaultChecked","required","disabled","onCheckedChange","form","switchProps","button","setButton","React.useState","composedRefs","useComposedRefs","hasConsumerStoppedPropagationRef","React.useRef","isFormControl","checked","setChecked","useControllableState","getState","composeEventHandlers","event","prevChecked","SwitchBubbleInput","THUMB_NAME","SwitchThumb","thumbProps","context","BUBBLE_INPUT_NAME","control","bubbles","ref","usePrevious","controlSize","useSize","React.useEffect","input","inputProto","Root","Thumb","className","SwitchPrimitives.Root","SwitchPrimitives.Thumb","UltimateClassAttendanceTable","location","useGlobalFilters","viewType","setViewType","groupingType","setGroupingType","rankingCriteria","setRankingCriteria","sortDirection","setSortDirection","searchTerm","setSearchTerm","currentPage","setCurrentPage","itemsPerPage","setItemsPerPage","expandedRows","setExpandedRows","showTrainerSpecific","setShowTrainerSpecific","selectedColumns","setSelectedColumns","filteredData","sessionCounts","key","groupedData","grouped","groupKey","date","sessions","s","classAverage","avgCapacity","attendanceMean","attendanceVariance","diff","consistency","sortedData","a","b","valueA","valueB","searchFilteredData","group","totalItems","totalPages","startIndex","endIndex","paginatedData","useEffect","toggleRowExpansion","newExpanded","toggleColumn","columnKey","newColumns","allColumns","Building2","TrendingUp","MapPin","viewOptions","Eye","groupingOptions","rankingOptions","Fragment","CardHeader","CardTitle","option","SortDesc","SortAsc","Dialog","DialogTrigger","DialogContent","DialogHeader","DialogTitle","column","Search","Table","TableHeader","TableRow","TableHead","TableBody","TableCell","idx","size","ChevronLeft","i","pageNum","ChevronRight","MONTH_NAMES","MonthOnMonthClassTable","selectedMetric","setSelectedMetric","groupBy","setGroupBy","showGrowthRate","setShowGrowthRate","isTableCollapsed","setIsTableCollapsed","tableRef","useRef","tableId","registerTable","unregisterTable","useMetricsTablesRegistry","workingData","availableMonths","months","monthKey","year","month","monthIndex","processedData","groupedSessions","sessionHour","h","slot","monthlyData","monthData","totals","m","getChildRowsForGroup","sessionGroupKey","getMetricValue","getGrowthRate","current","previous","metricOptions","Percent","groupOptions","ModernTableWrapper","allRows","row","Icon","motion","ExpandIcon","ShrinkIcon","AnimatePresence","rowIndex","isExpanded","isExpandable","childRows","prev","newSet","prevMonthData","getMetricNumeric","md","currentValue","previousValue","growthRate","childRow","childIndex","totalsForMonth","acc","display","r","PersistentTableFooter","DualRankingLists","excludeHostedClasses","setExcludeHostedClasses","showTrainerDetails","setShowTrainerDetails","topCount","setTopCount","bottomCount","setBottomCount","selectedItem","setSelectedItem","filtered","rankings","totalLateCancellations","emptyClasses","nonEmptyClasses","growth","rankValue","subName","topPerformers","bottomPerformers","criteriaOptions","Zap","getRankValueDisplay","getRankValueColor","isTop","RankingCard","rank","Trophy","Crown","Award","Star","TrendingDown","AlertTriangle","open","ClassAttendance","loading","error","refetch","useSessionsData","usePayrollData","setLoading","useGlobalLoading","LoadingSkeleton","InnerContent","rawData","useFilteredSessionsData","activeLocation","setActiveLocation","activeTab","setActiveTab","locationFilteredData","selectedLocation","loc","sessionLoc","totalClasses","DashboardMotionHero","StudioLocationTabs","Tabs","TabsList","TabsTrigger","TabsContent","Footer","GlobalFiltersProvider","SessionsFiltersProvider"],"mappings":"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","x_google_ignoreList":[0,1,4,5,6]}