{"version":3,"file":"LateCancellations-DCdRkoMT.js","sources":["../../src/components/dashboard/LateCancellationsInteractiveCharts.tsx","../../src/components/dashboard/EnhancedLateCancellationsTopBottomLists.tsx","../../src/components/dashboard/EnhancedLateCancellationsDataTables.tsx","../../src/components/dashboard/EnhancedLateCancellationsFilterSection.tsx","../../src/pages/LateCancellations.tsx"],"sourcesContent":["import React, { useMemo, useState, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Button } from '@/components/ui/button';\nimport { LateCancellationsData } from '@/types/dashboard';\nimport { formatNumber } from '@/utils/formatters';\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, PieChart, Pie, Cell, LineChart, Line } from 'recharts';\nimport { TrendingUp, BarChart3, PieChart as PieChartIcon, LineChart as LineChartIcon, Calendar } from 'lucide-react';\n\ninterface LateCancellationsInteractiveChartsProps {\n  data: LateCancellationsData[];\n}\n\nexport const LateCancellationsInteractiveCharts: React.FC<LateCancellationsInteractiveChartsProps> = ({ data }) => {\n  const [timeRange, setTimeRange] = useState('6m');\n  const [activeChart, setActiveChart] = useState('monthly');\n  const [chartMetric, setChartMetric] = useState('count');\n\n  // Filter data based on time range\n  const filteredData = useMemo(() => {\n    if (!data || data.length === 0) return [];\n    \n    const now = new Date();\n    let startDate = new Date();\n    \n    switch (timeRange) {\n      case '1m':\n        startDate.setMonth(now.getMonth() - 1);\n        break;\n      case '3m':\n        startDate.setMonth(now.getMonth() - 3);\n        break;\n      case '6m':\n        startDate.setMonth(now.getMonth() - 6);\n        break;\n      case '1y':\n        startDate.setFullYear(now.getFullYear() - 1);\n        break;\n      default:\n        return data;\n    }\n    \n    return data.filter(item => {\n      if (!item.dateIST) return false;\n      const itemDate = new Date(item.dateIST);\n      return itemDate >= startDate && itemDate <= now;\n    });\n  }, [data, timeRange]);\n\n  // Monthly cancellations trend data\n  const monthlyData = useMemo(() => {\n    if (!filteredData.length) return [];\n    \n    const monthlyGroups = filteredData.reduce((acc, item) => {\n      if (!item.dateIST) return acc;\n      const date = new Date(item.dateIST);\n      const monthKey = `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(2, '0')}`;\n      \n      if (!acc[monthKey]) {\n        acc[monthKey] = {\n          month: date.toLocaleDateString('en', { month: 'short', year: 'numeric' }),\n          count: 0,\n          members: new Set(),\n          locations: new Set()\n        };\n      }\n      \n      acc[monthKey].count += 1;\n      acc[monthKey].members.add(item.memberId);\n      acc[monthKey].locations.add(item.location);\n      \n      return acc;\n    }, {} as Record<string, any>);\n    \n    return Object.values(monthlyGroups).map((group: any) => ({\n      ...group,\n      members: group.members.size,\n      locations: group.locations.size\n    })).sort((a: any, b: any) => a.month.localeCompare(b.month));\n  }, [filteredData]);\n\n  // Top locations data\n  const topLocationsData = useMemo(() => {\n    if (!filteredData.length) return [];\n    \n    const locationGroups = filteredData.reduce((acc, item) => {\n      const location = item.location || 'Unknown Location';\n      \n      if (!acc[location]) {\n        acc[location] = {\n          name: location,\n          count: 0,\n          members: new Set(),\n          classes: new Set()\n        };\n      }\n      \n      acc[location].count += 1;\n      acc[location].members.add(item.memberId);\n      acc[location].classes.add(item.cleanedClass);\n      \n      return acc;\n    }, {} as Record<string, any>);\n    \n    const locations = Object.values(locationGroups).map((location: any) => ({\n      ...location,\n      members: location.members.size,\n      classes: location.classes.size\n    }));\n    \n    return locations.sort((a: any, b: any) => b.count - a.count).slice(0, 10);\n  }, [filteredData]);\n\n  // Class type distribution data\n  const classTypeData = useMemo(() => {\n    if (!filteredData.length) return [];\n    \n    const classGroups = filteredData.reduce((acc, item) => {\n      const classType = item.cleanedClass || 'Unknown Class';\n      \n      if (!acc[classType]) {\n        acc[classType] = 0;\n      }\n      \n      acc[classType] += 1;\n      \n      return acc;\n    }, {} as Record<string, number>);\n    \n    return Object.entries(classGroups)\n      .map(([name, value]) => ({ name, value }))\n      .sort((a, b) => b.value - a.value)\n      .slice(0, 8);\n  }, [filteredData]);\n\n  // Day of week data\n  const dayOfWeekData = useMemo(() => {\n    if (!filteredData.length) return [];\n    \n    const dayGroups = filteredData.reduce((acc, item) => {\n      const day = item.dayOfWeek || 'Unknown';\n      \n      if (!acc[day]) {\n        acc[day] = 0;\n      }\n      \n      acc[day] += 1;\n      \n      return acc;\n    }, {} as Record<string, number>);\n    \n    const dayOrder = ['Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', 'Sunday'];\n    \n    return dayOrder.map(day => ({\n      day,\n      count: dayGroups[day] || 0\n    }));\n  }, [filteredData]);\n\n  const COLORS = ['#dc2626', '#ea580c', '#d97706', '#ca8a04', '#65a30d', '#16a34a', '#059669', '#0891b2'];\n\n  const formatTooltipValue = (value: any, name: string) => {\n    return formatNumber(Number(value));\n  };\n\n  const handleTimeRangeChange = useCallback((newRange: string) => {\n    setTimeRange(newRange);\n  }, []);\n\n  const handleChartChange = useCallback((newChart: string) => {\n    setActiveChart(newChart);\n  }, []);\n\n  const handleMetricChange = useCallback((newMetric: string) => {\n    setChartMetric(newMetric);\n  }, []);\n\n  if (!data || data.length === 0) {\n    return (\n      <Card className=\"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl\">\n        <CardHeader>\n          <CardTitle className=\"text-lg font-bold text-slate-800 flex items-center gap-2\">\n            <BarChart3 className=\"w-5 h-5 text-red-600\" />\n            Interactive Late Cancellations Charts\n          </CardTitle>\n        </CardHeader>\n        <CardContent className=\"flex items-center justify-center h-64\">\n          <p className=\"text-slate-600\">No data available for charts</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  const renderChart = () => {\n    switch (activeChart) {\n      case 'monthly':\n        return (\n          <div className=\"space-y-4\">\n            <div className=\"flex gap-2 flex-wrap\">\n              <Button\n                variant={chartMetric === 'count' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => handleMetricChange('count')}\n              >\n                Cancellations\n              </Button>\n              <Button\n                variant={chartMetric === 'members' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => handleMetricChange('members')}\n              >\n                Unique Members\n              </Button>\n              <Button\n                variant={chartMetric === 'locations' ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => handleMetricChange('locations')}\n              >\n                Locations\n              </Button>\n            </div>\n            <ResponsiveContainer width=\"100%\" height={400}>\n              <LineChart data={monthlyData}>\n                <CartesianGrid strokeDasharray=\"3 3\" />\n                <XAxis dataKey=\"month\" />\n                <YAxis tickFormatter={formatNumber} />\n                <Tooltip formatter={formatTooltipValue} />\n                <Line \n                  type=\"monotone\" \n                  dataKey={chartMetric} \n                  stroke=\"#dc2626\" \n                  strokeWidth={3}\n                  dot={{ fill: '#dc2626', strokeWidth: 2, r: 4 }}\n                />\n              </LineChart>\n            </ResponsiveContainer>\n          </div>\n        );\n      \n      case 'locations':\n        return (\n          <ResponsiveContainer width=\"100%\" height={400}>\n            <BarChart data={topLocationsData} margin={{ left: 20, right: 20, top: 20, bottom: 60 }}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis \n                dataKey=\"name\" \n                angle={-45}\n                textAnchor=\"end\"\n                height={100}\n                interval={0}\n              />\n              <YAxis tickFormatter={formatNumber} />\n              <Tooltip formatter={formatTooltipValue} />\n              <Bar dataKey=\"count\" fill=\"#dc2626\" />\n            </BarChart>\n          </ResponsiveContainer>\n        );\n      \n      case 'classes':\n        return (\n          <ResponsiveContainer width=\"100%\" height={400}>\n            <PieChart>\n              <Pie\n                data={classTypeData}\n                cx=\"50%\"\n                cy=\"50%\"\n                labelLine={false}\n                label={({ name, percent }) => `${name} ${(percent * 100).toFixed(0)}%`}\n                outerRadius={120}\n                fill=\"#8884d8\"\n                dataKey=\"value\"\n              >\n                {classTypeData.map((entry, index) => (\n                  <Cell key={`cell-${index}`} fill={COLORS[index % COLORS.length]} />\n                ))}\n              </Pie>\n              <Tooltip formatter={formatTooltipValue} />\n            </PieChart>\n          </ResponsiveContainer>\n        );\n\n      case 'dayofweek':\n        return (\n          <ResponsiveContainer width=\"100%\" height={400}>\n            <BarChart data={dayOfWeekData}>\n              <CartesianGrid strokeDasharray=\"3 3\" />\n              <XAxis dataKey=\"day\" />\n              <YAxis tickFormatter={formatNumber} />\n              <Tooltip formatter={formatTooltipValue} />\n              <Bar dataKey=\"count\" fill=\"#ea580c\" />\n            </BarChart>\n          </ResponsiveContainer>\n        );\n      \n      default:\n        return null;\n    }\n  };\n\n  return (\n    <Card className=\"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl\">\n      <CardHeader className=\"pb-4\">\n        <div className=\"flex flex-col gap-4\">\n          <div className=\"flex justify-between items-start\">\n            <CardTitle className=\"text-lg font-bold text-slate-800 flex items-center gap-2\">\n              <BarChart3 className=\"w-5 h-5 text-red-600\" />\n              Interactive Late Cancellations Charts\n            </CardTitle>\n          </div>\n          \n          {/* Time Range Buttons */}\n          <div className=\"flex gap-2 flex-wrap\">\n            <span className=\"text-sm font-medium text-gray-700 flex items-center gap-1\">\n              <Calendar className=\"w-4 h-4\" />\n              Time Range:\n            </span>\n            {[\n              { key: '1m', label: 'Last Month' },\n              { key: '3m', label: 'Last 3 Months' },\n              { key: '6m', label: 'Last 6 Months' },\n              { key: '1y', label: 'Last Year' }\n            ].map(({ key, label }) => (\n              <Button\n                key={key}\n                variant={timeRange === key ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => handleTimeRangeChange(key)}\n              >\n                {label}\n              </Button>\n            ))}\n          </div>\n          \n          {/* Chart Type Buttons */}\n          <div className=\"flex gap-2 flex-wrap\">\n            <span className=\"text-sm font-medium text-gray-700 flex items-center gap-1\">\n              <TrendingUp className=\"w-4 h-4\" />\n              Chart Type:\n            </span>\n            <Button\n              variant={activeChart === 'monthly' ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => handleChartChange('monthly')}\n              className=\"flex items-center gap-1\"\n            >\n              <LineChartIcon className=\"w-4 h-4\" />\n              Monthly Trend\n            </Button>\n            <Button\n              variant={activeChart === 'locations' ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => handleChartChange('locations')}\n              className=\"flex items-center gap-1\"\n            >\n              <BarChart3 className=\"w-4 h-4\" />\n              By Location\n            </Button>\n            <Button\n              variant={activeChart === 'classes' ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => handleChartChange('classes')}\n              className=\"flex items-center gap-1\"\n            >\n              <PieChartIcon className=\"w-4 h-4\" />\n              By Class Type\n            </Button>\n            <Button\n              variant={activeChart === 'dayofweek' ? 'default' : 'outline'}\n              size=\"sm\"\n              onClick={() => handleChartChange('dayofweek')}\n              className=\"flex items-center gap-1\"\n            >\n              <BarChart3 className=\"w-4 h-4\" />\n              By Day of Week\n            </Button>\n          </div>\n        </div>\n      </CardHeader>\n\n      <CardContent>\n        {renderChart()}\n      </CardContent>\n    </Card>\n  );\n};","import React, { useMemo, useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { LateCancellationsData } from '@/types/dashboard';\nimport { formatNumber } from '@/utils/formatters';\nimport { TrendingUp, TrendingDown, Award, Users, MapPin, Calendar, User, Package, Crown, Trophy, Medal, Star, ArrowDownCircle, ThumbsDown, AlertCircle } from 'lucide-react';\nimport { cn } from '@/lib/utils';\n\ninterface EnhancedLateCancellationsTopBottomListsProps {\n  data: LateCancellationsData[];\n}\n\nexport const EnhancedLateCancellationsTopBottomLists: React.FC<EnhancedLateCancellationsTopBottomListsProps> = ({ data }) => {\n  const [activeType, setActiveType] = useState<'members' | 'locations' | 'classes' | 'trainers' | 'memberships'>('members');\n  const [showMore, setShowMore] = useState(false);\n\n  const getGroupedData = useMemo(() => {\n    if (!data || data.length === 0) return [];\n\n    const grouped = data.reduce((acc, item) => {\n      let key = '';\n      let name = '';\n      \n      switch (activeType) {\n        case 'members':\n          key = item.memberId;\n          name = `${item.firstName || ''} ${item.lastName || ''}`.trim() || 'Unknown';\n          break;\n        case 'locations':\n          key = item.location || 'Unknown';\n          name = item.location || 'Unknown';\n          break;\n        case 'classes':\n          key = item.cleanedClass || 'Unknown';\n          name = item.cleanedClass || 'Unknown';\n          break;\n        case 'trainers':\n          key = item.teacherName || 'Unknown';\n          name = item.teacherName || 'Unknown';\n          break;\n        case 'memberships':\n          key = item.cleanedProduct || 'Unknown';\n          name = item.cleanedProduct || 'Unknown';\n          break;\n      }\n      \n      if (!acc[key]) {\n        acc[key] = {\n          name,\n          totalCancellations: 0,\n          uniqueMembers: new Set(),\n          uniqueLocations: new Set(),\n          uniqueClasses: new Set(),\n          uniqueTrainers: new Set(),\n        };\n      }\n      \n      acc[key].totalCancellations += 1;\n      acc[key].uniqueMembers.add(item.memberId);\n      acc[key].uniqueLocations.add(item.location);\n      acc[key].uniqueClasses.add(item.cleanedClass);\n      acc[key].uniqueTrainers.add(item.teacherName);\n      \n      return acc;\n    }, {} as Record<string, any>);\n    \n    Object.values(grouped).forEach((item: any) => {\n      item.uniqueMembersCount = item.uniqueMembers.size;\n      item.uniqueLocationsCount = item.uniqueLocations.size;\n      item.uniqueClassesCount = item.uniqueClasses.size;\n      item.uniqueTrainersCount = item.uniqueTrainers.size;\n      delete item.uniqueMembers;\n      delete item.uniqueLocations;\n      delete item.uniqueClasses;\n      delete item.uniqueTrainers;\n    });\n    \n    return Object.values(grouped).sort((a: any, b: any) => b.totalCancellations - a.totalCancellations);\n  }, [data, activeType]);\n\n  const getTypeConfig = (type: string) => {\n    switch (type) {\n      case 'members':\n        return { icon: Users, label: 'Members', description: 'Individual member cancellation patterns' };\n      case 'locations':\n        return { icon: MapPin, label: 'Locations', description: 'Studio location cancellation rates' };\n      case 'classes':\n        return { icon: Calendar, label: 'Classes', description: 'Class type cancellation trends' };\n      case 'trainers':\n        return { icon: User, label: 'Trainers', description: 'Trainer-specific cancellation data' };\n      case 'memberships':\n        return { icon: Package, label: 'Memberships', description: 'Membership type cancellation rates' };\n      default:\n        return { icon: Users, label: 'Members', description: 'Cancellation data' };\n    }\n  };\n\n  const renderRankingCard = () => {\n    const config = getTypeConfig(activeType);\n    const displayCount = showMore ? 10 : 5;\n    const topItems = getGroupedData.slice(0, displayCount);\n    const bottomItems = getGroupedData.slice(-displayCount).reverse();\n\n    const getRankIcon = (index: number, isTop: boolean) => {\n      if (isTop) {\n        if (index === 0) return <Crown className=\"w-5 h-5 text-white\" />;\n        if (index === 1) return <Trophy className=\"w-5 h-5 text-white\" />;\n        if (index === 2) return <Medal className=\"w-5 h-5 text-white\" />;\n        if (index === 3) return <Star className=\"w-5 h-5 text-white\" />;\n        return <span className=\"text-white font-bold text-sm\">{index + 1}</span>;\n      } else {\n        if (index === 0) return <ArrowDownCircle className=\"w-5 h-5 text-white\" />;\n        if (index === 1) return <TrendingDown className=\"w-5 h-5 text-white\" />;\n        if (index === 2) return <ThumbsDown className=\"w-5 h-5 text-white\" />;\n        return <AlertCircle className=\"w-5 h-5 text-white\" />;\n      }\n    };\n\n    return (\n      <Card className=\"bg-gradient-to-br from-white via-slate-50/50 to-white border-0 shadow-xl hover:shadow-2xl transition-all duration-500\">\n        <CardHeader className=\"pb-4\">\n          <div className=\"flex items-center justify-between\">\n            <CardTitle className=\"text-xl font-bold text-slate-800 flex items-center gap-3\">\n              <div className=\"p-2 rounded-full bg-gradient-to-r from-purple-500 to-pink-500\">\n                {React.createElement(config.icon, { className: \"w-5 h-5 text-white\" })}\n              </div>\n              <div>\n                <span className=\"bg-gradient-to-r from-purple-600 to-pink-600 bg-clip-text text-transparent\">\n                  {config.label} Cancellation Analysis\n                </span>\n                <p className=\"text-sm text-slate-600 font-normal mt-1\">{config.description}</p>\n              </div>\n            </CardTitle>\n          </div>\n        </CardHeader>\n        <CardContent className=\"space-y-6\">\n          <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-6\">\n            {/* Most Cancellations (Top) */}\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"p-2 rounded-full bg-gradient-to-r from-red-500 to-rose-600\">\n                  <TrendingUp className=\"w-5 h-5 text-white\" />\n                </div>\n                <div>\n                  <h3 className=\"text-lg font-semibold bg-gradient-to-r from-red-600 to-rose-600 bg-clip-text text-transparent\">\n                    Most Cancellations\n                  </h3>\n                  <p className=\"text-xs text-slate-500\">High cancellation rate - needs attention</p>\n                </div>\n              </div>\n              \n              <div className=\"space-y-2\">\n                {topItems.map((item, index) => (\n                  <div \n                    key={item.name} \n                    className=\"group flex items-center justify-between p-4 rounded-xl bg-white shadow-sm border hover:shadow-md transition-all duration-300 cursor-pointer hover:border-red-200/70\"\n                  >\n                    <div className=\"flex items-center gap-3 flex-1\">\n                      <div className=\"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-r from-red-500 to-rose-600 text-white shadow-md shrink-0\">\n                        {getRankIcon(index, true)}\n                      </div>\n                      <div className=\"min-w-0 flex-1\">\n                        <p className=\"font-semibold text-slate-900 truncate\" title={item.name}>\n                          {item.name}\n                        </p>\n                        <div className=\"flex items-center gap-2 mt-1 flex-wrap\">\n                          <Badge variant=\"secondary\" className=\"bg-blue-50 text-blue-700 text-xs\">\n                            <Users className=\"w-3 h-3 mr-1\" />\n                            {formatNumber(item.uniqueMembersCount)} members\n                          </Badge>\n                          {activeType !== 'locations' && (\n                            <Badge variant=\"secondary\" className=\"bg-purple-50 text-purple-700 text-xs\">\n                              <MapPin className=\"w-3 h-3 mr-1\" />\n                              {formatNumber(item.uniqueLocationsCount)} locations\n                            </Badge>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"ml-3 text-right shrink-0\">\n                      <p className=\"text-2xl font-bold text-red-600\">\n                        {formatNumber(item.totalCancellations)}\n                      </p>\n                      <p className=\"text-xs text-slate-500\">cancellations</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n\n            {/* Least Cancellations (Bottom) */}\n            <div className=\"space-y-4\">\n              <div className=\"flex items-center gap-3 mb-4\">\n                <div className=\"p-2 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600\">\n                  <TrendingDown className=\"w-5 h-5 text-white\" />\n                </div>\n                <div>\n                  <h3 className=\"text-lg font-semibold bg-gradient-to-r from-emerald-600 to-teal-600 bg-clip-text text-transparent\">\n                    Least Cancellations\n                  </h3>\n                  <p className=\"text-xs text-slate-500\">Low cancellation rate - performing well</p>\n                </div>\n              </div>\n              \n              <div className=\"space-y-2\">\n                {bottomItems.map((item, index) => (\n                  <div \n                    key={item.name} \n                    className=\"group flex items-center justify-between p-4 rounded-xl bg-white shadow-sm border hover:shadow-md transition-all duration-300 cursor-pointer hover:border-emerald-200/70\"\n                  >\n                    <div className=\"flex items-center gap-3 flex-1\">\n                      <div className=\"flex items-center justify-center w-10 h-10 rounded-full bg-gradient-to-r from-emerald-500 to-teal-600 text-white shadow-md shrink-0\">\n                        {getRankIcon(index, false)}\n                      </div>\n                      <div className=\"min-w-0 flex-1\">\n                        <p className=\"font-semibold text-slate-900 truncate\" title={item.name}>\n                          {item.name}\n                        </p>\n                        <div className=\"flex items-center gap-2 mt-1 flex-wrap\">\n                          <Badge variant=\"secondary\" className=\"bg-blue-50 text-blue-700 text-xs\">\n                            <Users className=\"w-3 h-3 mr-1\" />\n                            {formatNumber(item.uniqueMembersCount)} members\n                          </Badge>\n                          {activeType !== 'locations' && (\n                            <Badge variant=\"secondary\" className=\"bg-purple-50 text-purple-700 text-xs\">\n                              <MapPin className=\"w-3 h-3 mr-1\" />\n                              {formatNumber(item.uniqueLocationsCount)} locations\n                            </Badge>\n                          )}\n                        </div>\n                      </div>\n                    </div>\n                    <div className=\"ml-3 text-right shrink-0\">\n                      <p className=\"text-2xl font-bold text-emerald-600\">\n                        {formatNumber(item.totalCancellations)}\n                      </p>\n                      <p className=\"text-xs text-slate-500\">cancellations</p>\n                    </div>\n                  </div>\n                ))}\n              </div>\n            </div>\n          </div>\n\n          {getGroupedData.length > 5 && (\n            <div className=\"flex justify-center pt-4\">\n              <Button\n                variant=\"outline\"\n                size=\"sm\"\n                onClick={() => setShowMore(!showMore)}\n                className=\"text-slate-700 hover:bg-slate-50\"\n              >\n                {showMore ? 'Show Less' : 'Show More'}\n              </Button>\n            </div>\n          )}\n        </CardContent>\n      </Card>\n    );\n  };\n\n  if (!data || data.length === 0) {\n    return (\n      <Card className=\"bg-gradient-to-br from-white via-slate-50/50 to-white border-0 shadow-xl\">\n        <CardContent className=\"flex items-center justify-center h-64\">\n          <p className=\"text-slate-600\">No cancellation data available</p>\n        </CardContent>\n      </Card>\n    );\n  }\n\n  return (\n    <div className=\"space-y-6\">\n      <Tabs value={activeType} onValueChange={(value) => setActiveType(value as typeof activeType)} className=\"w-full\">\n        <TabsList className=\"bg-white/90 backdrop-blur-sm p-2 rounded-2xl shadow-xl border-0 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-5 gap-3 w-full max-w-5xl mx-auto\">\n          <TabsTrigger value=\"members\" className=\"relative rounded-xl px-4 py-3 font-semibold text-sm w-full justify-center min-h-[48px] data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50\">\n            <Users className=\"w-4 h-4 mr-2\" />\n            Members\n          </TabsTrigger>\n          <TabsTrigger value=\"locations\" className=\"relative rounded-xl px-4 py-3 font-semibold text-sm w-full justify-center min-h-[48px] data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50\">\n            <MapPin className=\"w-4 h-4 mr-2\" />\n            Locations\n          </TabsTrigger>\n          <TabsTrigger value=\"classes\" className=\"relative rounded-xl px-4 py-3 font-semibold text-sm w-full justify-center min-h-[48px] data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50\">\n            <Calendar className=\"w-4 h-4 mr-2\" />\n            Classes\n          </TabsTrigger>\n          <TabsTrigger value=\"trainers\" className=\"relative rounded-xl px-4 py-3 font-semibold text-sm w-full justify-center min-h-[48px] data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50\">\n            <User className=\"w-4 h-4 mr-2\" />\n            Trainers\n          </TabsTrigger>\n          <TabsTrigger value=\"memberships\" className=\"relative rounded-xl px-4 py-3 font-semibold text-sm w-full justify-center min-h-[48px] data-[state=active]:bg-gradient-to-r data-[state=active]:from-purple-600 data-[state=active]:to-pink-600 data-[state=active]:text-white data-[state=active]:shadow-lg hover:bg-gray-50\">\n            <Package className=\"w-4 h-4 mr-2\" />\n            Memberships\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value={activeType} className=\"mt-6\">\n          {renderRankingCard()}\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n};\n","import React, { useState, useMemo, useRef, useCallback } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';\nimport { Badge } from '@/components/ui/badge';\nimport { Button } from '@/components/ui/button';\nimport { Table, TableBody, TableCell, TableHead, TableHeader, TableRow } from '@/components/ui/table';\nimport { LateCancellationsData } from '@/types/dashboard';\nimport { formatNumber, formatCurrency, formatRevenue } from '@/utils/formatters';\nimport { AlertTriangle, Users, Calendar, Package, MapPin, ChevronLeft, ChevronRight } from 'lucide-react';\nimport { PersistentTableFooter } from '@/components/dashboard/PersistentTableFooter';\nimport CopyTableButton from '@/components/ui/CopyTableButton';\nimport { useMetricsTablesRegistry } from '@/contexts/MetricsTablesRegistryContext';\n\ninterface EnhancedLateCancellationsDataTablesProps {\n  data: LateCancellationsData[];\n  // New: all checkins (unfiltered) to compute true check-ins and bookings per day\n  allCheckins?: any[];\n  onDrillDown?: (data: any) => void;\n}\n\nconst ITEMS_PER_PAGE = 100;\n\nexport const EnhancedLateCancellationsDataTables: React.FC<EnhancedLateCancellationsDataTablesProps> = ({ data, allCheckins = [], onDrillDown }) => {\n  // Registry for global copy-all aggregation\n  const metricsRegistry = useMetricsTablesRegistry();\n  // Refs for each table tab\n  const multipleDayTableRef = useRef<HTMLDivElement>(null);\n  const membersTableRef = useRef<HTMLDivElement>(null);\n  const checkinsTableRef = useRef<HTMLDivElement>(null);\n  const bookingsTableRef = useRef<HTMLDivElement>(null);\n  const classTableRef = useRef<HTMLDivElement>(null);\n  const membershipTableRef = useRef<HTMLDivElement>(null);\n  const trainerTableRef = useRef<HTMLDivElement>(null);\n  const locationTableRef = useRef<HTMLDivElement>(null);\n  const topCancellersTableRef = useRef<HTMLDivElement>(null);\n\n  // Shared table card wrapper to match Sales tab styling\n  const TableContainer: React.FC<{ children: React.ReactNode; tableRef?: React.RefObject<HTMLDivElement> }> = ({ children, tableRef }) => (\n    <div ref={tableRef} className=\"bg-white/90 backdrop-blur-sm border border-slate-200 rounded-2xl shadow-sm overflow-hidden\">\n      {children}\n    </div>\n  );\n  const [activeTab, setActiveTab] = useState('multiple-day');\n  const [currentPage, setCurrentPage] = useState(1);\n  const [isDescending, setIsDescending] = useState(true);\n\n  // Members cancelling more than 1 class per day\n  const multipleCancellationsPerDay = useMemo(() => {\n    if (!data || data.length === 0) return [];\n    \n    const memberDayGroups = data.reduce((acc, item) => {\n      if (!item.dateIST || !item.memberId) return acc;\n      \n      const key = `${item.memberId}-${item.dateIST}`;\n      \n      if (!acc[key]) {\n        acc[key] = {\n          memberId: item.memberId,\n          memberName: `${item.firstName || ''} ${item.lastName || ''}`.trim(),\n          email: item.email,\n          date: item.dateIST,\n          cancellations: [],\n          count: 0,\n          locations: new Set(),\n          classes: new Set(), // formats bucket\n          specificClasses: new Set(), // class + day + time\n          trainers: new Set()\n        };\n      }\n      \n      acc[key].cancellations.push({\n        sessionName: item.sessionName,\n        time: item.time,\n        location: item.location,\n        teacherName: item.teacherName,\n        cleanedClass: item.cleanedClass,\n        cleanedProduct: item.cleanedProduct\n      });\n      acc[key].count += 1;\n      acc[key].locations.add(item.location);\n      acc[key].classes.add(item.cleanedClass);\n      acc[key].specificClasses.add(`${item.cleanedClass || 'Unknown'}|${item.dayOfWeek || 'Unknown'}|${item.time || 'Unknown'}`);\n      acc[key].trainers.add(item.teacherName);\n      \n      return acc;\n    }, {} as Record<string, any>);\n    \n    const arr = Object.values(memberDayGroups)\n      .filter((group: any) => group.count > 1)\n      .map((group: any) => ({\n        ...group,\n        uniqueLocations: group.locations.size,\n        uniqueClasses: group.classes.size,\n        uniqueTrainers: group.trainers.size,\n        uniqueSpecificClasses: group.specificClasses.size\n      }));\n    return arr.sort((a: any, b: any) => isDescending ? b.count - a.count : a.count - b.count);\n  }, [data, isDescending]);\n\n  // Enhanced checkins per day calculation\n  const multipleCheckinsPerDay = useMemo(() => {\n    if (!allCheckins || allCheckins.length === 0) return [];\n    \n    // Group by member and date and only count rows with Checked in = TRUE\n    const memberDayStats = allCheckins.reduce((acc, item) => {\n      if (!item.dateIST || !item.memberId) return acc;\n      const isCheckedIn = (item.checkedIn || '').toString().toUpperCase() === 'TRUE';\n      if (!isCheckedIn) return acc;\n      \n      const key = `${item.memberId}-${item.dateIST}`;\n      \n      if (!acc[key]) {\n        acc[key] = {\n          memberId: item.memberId,\n          memberName: `${item.firstName || ''} ${item.lastName || ''}`.trim(),\n          email: item.email,\n          date: item.dateIST,\n          totalSessions: 0,\n          cancellations: 0, // tracked separately if needed\n          sessionDetails: []\n        };\n      }\n      \n      acc[key].totalSessions += 1; // true check-ins\n      acc[key].sessionDetails.push({\n        sessionName: item.sessionName,\n        time: item.time,\n        location: item.location,\n        teacherName: item.teacherName,\n        status: 'checked-in'\n      });\n      \n      return acc;\n    }, {} as Record<string, any>);\n    \n    const arr = Object.values(memberDayStats)\n      .filter((member: any) => member.totalSessions > 1);\n    return arr.sort((a: any, b: any) => isDescending ? b.totalSessions - a.totalSessions : a.totalSessions - b.totalSessions);\n  }, [allCheckins, isDescending]);\n\n  // New: Bookings per day irrespective of checked-in (TRUE or FALSE)\n  const multipleBookingsPerDay = useMemo(() => {\n    if (!allCheckins || allCheckins.length === 0) return [];\n    const memberDayStats = allCheckins.reduce((acc, item) => {\n      if (!item.dateIST || !item.memberId) return acc;\n      const key = `${item.memberId}-${item.dateIST}`;\n      if (!acc[key]) {\n        acc[key] = {\n          memberId: item.memberId,\n          memberName: `${item.firstName || ''} ${item.lastName || ''}`.trim(),\n          email: item.email,\n          date: item.dateIST,\n          totalBookings: 0,\n          sessionDetails: []\n        };\n      }\n      acc[key].totalBookings += 1;\n      acc[key].sessionDetails.push({\n        sessionName: item.sessionName,\n        time: item.time,\n        location: item.location,\n        teacherName: item.teacherName,\n        status: (item.checkedIn || '').toString().toUpperCase() === 'TRUE' ? 'checked-in' : 'booked'\n      });\n      return acc;\n    }, {} as Record<string, any>);\n    const arr = Object.values(memberDayStats).filter((member: any) => member.totalBookings > 1);\n    return arr.sort((a: any, b: any) => isDescending ? b.totalBookings - a.totalBookings : a.totalBookings - b.totalBookings);\n  }, [allCheckins, isDescending]);\n\n  // Daily aggregates: Check-ins per day (all members), grouped by date\n  const checkinsPerDay = useMemo(() => {\n    if (!allCheckins || allCheckins.length === 0) return [] as any[];\n    const map = allCheckins.reduce((acc, item) => {\n      const isCheckedIn = (item.checkedIn || '').toString().toUpperCase() === 'TRUE';\n      if (!isCheckedIn) return acc;\n      const day = item.dateIST ? new Date(item.dateIST).toISOString().slice(0, 10) : 'Unknown';\n      if (!acc[day]) {\n        acc[day] = {\n          date: day,\n          count: 0,\n          members: new Set<string>(),\n          locations: new Set<string>(),\n          formats: new Set<string>(),\n          revenue: 0\n        };\n      }\n      acc[day].count += 1;\n      item.memberId && acc[day].members.add(item.memberId);\n      item.location && acc[day].locations.add(item.location);\n      item.cleanedClass && acc[day].formats.add(item.cleanedClass);\n      acc[day].revenue += item.paidAmount || 0;\n      return acc;\n    }, {} as Record<string, any>);\n    return Object.values(map)\n      .map((g: any) => ({\n        ...g,\n        uniqueMembers: g.members.size,\n        uniqueLocations: g.locations.size,\n        uniqueFormats: g.formats.size\n      }))\n      .sort((a: any, b: any) => (a.date < b.date ? 1 : -1));\n  }, [allCheckins]);\n\n  // Daily aggregates: Bookings per day (regardless of checked-in), grouped by date\n  const bookingsPerDay = useMemo(() => {\n    if (!allCheckins || allCheckins.length === 0) return [] as any[];\n    const map = allCheckins.reduce((acc, item) => {\n      const day = item.dateIST ? new Date(item.dateIST).toISOString().slice(0, 10) : 'Unknown';\n      if (!acc[day]) {\n        acc[day] = {\n          date: day,\n          count: 0,\n          members: new Set<string>(),\n          locations: new Set<string>(),\n          formats: new Set<string>(),\n          revenue: 0\n        };\n      }\n      acc[day].count += 1;\n      item.memberId && acc[day].members.add(item.memberId);\n      item.location && acc[day].locations.add(item.location);\n      item.cleanedClass && acc[day].formats.add(item.cleanedClass);\n      acc[day].revenue += item.paidAmount || 0;\n      return acc;\n    }, {} as Record<string, any>);\n    return Object.values(map)\n      .map((g: any) => ({\n        ...g,\n        uniqueMembers: g.members.size,\n        uniqueLocations: g.locations.size,\n        uniqueFormats: g.formats.size\n      }))\n      .sort((a: any, b: any) => (a.date < b.date ? 1 : -1));\n  }, [allCheckins]);\n\n  const renderDailyAggregationTable = (rows: any[], title: string, tableId: string) => {\n    const pageRows = getPaginatedData(rows);\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center gap-2 justify-between px-4\">\n          <div className=\"flex items-center gap-2\">\n            <Users className=\"w-5 h-5 text-slate-600\" />\n            <h3 className=\"text-lg font-semibold\">{title}</h3>\n            <Badge variant=\"outline\" className=\"bg-slate-50 text-slate-700 min-w-[120px] justify-center\">{formatNumber(rows.length)} days</Badge>\n          </div>\n        </div>\n        {pageRows.length > 0 ? (\n          <>\n            <TableContainer>\n            <Table>\n              <TableHeader className=\"bg-gradient-to-r from-red-600 to-orange-600 text-white\">\n                <TableRow className=\"h-[35px]\">\n                  <TableHead className=\"text-white font-bold\">Date</TableHead>\n                  <TableHead className=\"text-white font-bold\">Sessions</TableHead>\n                  <TableHead className=\"text-white font-bold\">Members</TableHead>\n                  <TableHead className=\"text-white font-bold\">Locations</TableHead>\n                  <TableHead className=\"text-white font-bold\">Formats</TableHead>\n                  <TableHead className=\"text-white font-bold\">Revenue</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {pageRows.map((r: any, idx: number) => (\n                  <TableRow key={idx} className=\"h-[35px] hover:bg-red-50/30 transition-colors\">\n                    <TableCell className=\"font-medium\">{(() => { const d = new Date(r.date); return isNaN(d.getTime()) ? '—' : d.toLocaleDateString(); })()}</TableCell>\n                    <TableCell><Badge variant=\"outline\" className=\"min-w-[70px] justify-center bg-red-50 text-red-700 border-red-200\">{formatNumber(r.count)}</Badge></TableCell>\n                    <TableCell><Badge variant=\"outline\" className=\"min-w-[70px] justify-center bg-orange-50 text-orange-700 border-orange-200\">{formatNumber(r.uniqueMembers)}</Badge></TableCell>\n                    <TableCell><Badge variant=\"outline\" className=\"min-w-[70px] justify-center bg-red-50 text-red-700 border-red-200\">{formatNumber(r.uniqueLocations)}</Badge></TableCell>\n                    <TableCell><Badge variant=\"outline\" className=\"min-w-[70px] justify-center bg-orange-50 text-orange-700 border-orange-200\">{formatNumber(r.uniqueFormats)}</Badge></TableCell>\n                    <TableCell className=\"text-slate-700 font-semibold\">{formatCurrency(r.revenue)}</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n            </TableContainer>\n            <PaginationControls />\n            <PersistentTableFooter\n              tableId={tableId}\n              tableName={title}\n              tableContext={`${title} within selected filters`}\n              tableData={pageRows}\n              tableColumns={[\n                { header: 'Date', key: 'date', type: 'date' },\n                { header: 'Sessions', key: 'count', type: 'number' },\n                { header: 'Members', key: 'uniqueMembers', type: 'number' },\n                { header: 'Locations', key: 'uniqueLocations', type: 'number' },\n                { header: 'Formats', key: 'uniqueFormats', type: 'number' },\n                { header: 'Revenue', key: 'revenue', type: 'currency' }\n              ] as any}\n            />\n          </>\n        ) : (\n          <p className=\"text-gray-500 text-center py-8\">No data available</p>\n        )}\n      </div>\n    );\n  };\n\n  // Enhanced Visit Frequency by membership and format\n  const visitFrequencyBreakdowns = useMemo(() => {\n    if (!data || data.length === 0) return { byFormat: [], byMembership: [] } as any;\n    // per member total visits\n    const memberTotals = data.reduce((acc, item) => {\n      const id = item.memberId || item.email || 'unknown';\n      acc[id] = (acc[id] || 0) + 1;\n      return acc;\n    }, {} as Record<string, number>);\n\n    // Buckets\n    const buckets = [\n      { label: '1', min: 1, max: 1 },\n      { label: '2–3', min: 2, max: 3 },\n      { label: '4–7', min: 4, max: 7 },\n      { label: '8–15', min: 8, max: 15 },\n      { label: '16+', min: 16, max: Infinity }\n    ];\n\n    const byFormatMap: Record<string, any> = {};\n    const byMembershipMap: Record<string, any> = {};\n\n    Object.entries(memberTotals).forEach(([memberId, total]) => {\n      const memberRows = data.filter(r => (r.memberId || r.email || 'unknown') === memberId);\n      const formats = new Set(memberRows.map(r => r.cleanedClass || 'Unknown'));\n      const products = new Set(memberRows.map(r => r.cleanedProduct || 'Unknown'));\n      const revenue = memberRows.reduce((s, r) => s + (r.paidAmount || 0), 0);\n      const bucket = buckets.find(b => total >= b.min && total <= b.max)?.label || '1';\n\n      formats.forEach(fmt => {\n        byFormatMap[fmt] = byFormatMap[fmt] || { format: fmt, buckets: {}, members: 0, revenue: 0 };\n        byFormatMap[fmt].buckets[bucket] = (byFormatMap[fmt].buckets[bucket] || 0) + 1;\n        byFormatMap[fmt].members += 1;\n        byFormatMap[fmt].revenue += revenue;\n      });\n\n      products.forEach(prod => {\n        byMembershipMap[prod] = byMembershipMap[prod] || { membership: prod, buckets: {}, members: 0, revenue: 0 };\n        byMembershipMap[prod].buckets[bucket] = (byMembershipMap[prod].buckets[bucket] || 0) + 1;\n        byMembershipMap[prod].members += 1;\n        byMembershipMap[prod].revenue += revenue;\n      });\n    });\n\n    const toRows = (obj: Record<string, any>, key: 'format' | 'membership') => Object.values(obj).map((v: any) => ({\n      [key]: v[key],\n      members: v.members,\n      revenue: v.revenue,\n      ...buckets.reduce((acc, b) => ({ ...acc, [b.label]: v.buckets[b.label] || 0 }), {})\n    }));\n\n    return {\n      byFormat: toRows(byFormatMap, 'format'),\n      byMembership: toRows(byMembershipMap, 'membership'),\n      buckets\n    };\n  }, [data]);\n\n  // Cancellations by class type with enhanced analytics\n  const cancellationsByClass = useMemo(() => {\n    if (!data || data.length === 0) return [];\n    \n    const classGroups = data.reduce((acc, item) => {\n      const classType = item.cleanedClass || 'Unknown Class';\n      \n      if (!acc[classType]) {\n        acc[classType] = {\n          className: classType,\n          category: item.cleanedCategory || 'Unknown',\n          count: 0,\n          members: new Set(),\n          locations: new Set(),\n          trainers: new Set(),\n          totalDuration: 0,\n          totalRevenue: 0,\n          peakTimes: {},\n          daysOfWeek: {}\n        };\n      }\n      \n      acc[classType].count += 1;\n      acc[classType].members.add(item.memberId);\n      acc[classType].locations.add(item.location);\n      acc[classType].trainers.add(item.teacherName);\n      acc[classType].totalDuration += item.duration || 0;\n      acc[classType].totalRevenue += item.paidAmount || 0;\n      \n      // Track peak times\n      if (item.time) {\n        const hour = parseInt(item.time.split(':')[0]);\n        const timeSlot = hour < 12 ? 'Morning' : hour < 17 ? 'Afternoon' : 'Evening';\n        acc[classType].peakTimes[timeSlot] = (acc[classType].peakTimes[timeSlot] || 0) + 1;\n      }\n      \n      // Track days of week\n      if (item.dayOfWeek) {\n        acc[classType].daysOfWeek[item.dayOfWeek] = (acc[classType].daysOfWeek[item.dayOfWeek] || 0) + 1;\n      }\n      \n      return acc;\n    }, {} as Record<string, any>);\n    \n    const arr = Object.values(classGroups)\n      .map((group: any) => {\n        const peakTime = Object.entries(group.peakTimes).reduce((a, b) => \n          group.peakTimes[a[0]] > group.peakTimes[b[0]] ? a : b, ['N/A', 0]\n        )[0];\n        \n        const peakDay = Object.entries(group.daysOfWeek).reduce((a, b) => \n          group.daysOfWeek[a[0]] > group.daysOfWeek[b[0]] ? a : b, ['N/A', 0]\n        )[0];\n        \n        return {\n          ...group,\n          uniqueMembers: group.members.size,\n          uniqueLocations: group.locations.size,\n          uniqueTrainers: group.trainers.size,\n          avgDuration: group.count > 0 ? Math.round(group.totalDuration / group.count) : 0,\n          avgRevenue: group.count > 0 ? group.totalRevenue / group.count : 0,\n          peakTime,\n          peakDay\n        };\n      });\n    return arr.sort((a: any, b: any) => isDescending ? b.count - a.count : a.count - b.count);\n  }, [data, isDescending]);\n\n  // Enhanced cancellations by membership type\n  const cancellationsByMembership = useMemo(() => {\n    if (!data || data.length === 0) return [];\n    \n    const membershipGroups = data.reduce((acc, item) => {\n      const membershipType = item.cleanedProduct || 'Unknown Membership';\n      \n      if (!acc[membershipType]) {\n        acc[membershipType] = {\n          membershipType,\n          category: item.cleanedCategory || 'Unknown',\n          count: 0,\n          members: new Set(),\n          revenue: 0,\n          locations: new Set(),\n          classes: new Set(),\n          avgCancellationsPerMember: 0\n        };\n      }\n      \n      acc[membershipType].count += 1;\n      acc[membershipType].members.add(item.memberId);\n      acc[membershipType].revenue += item.paidAmount || 0;\n      acc[membershipType].locations.add(item.location);\n      acc[membershipType].classes.add(item.cleanedClass);\n      \n      return acc;\n    }, {} as Record<string, any>);\n    \n    const arr = Object.values(membershipGroups)\n      .map((group: any) => ({\n        ...group,\n        uniqueMembers: group.members.size,\n        uniqueLocations: group.locations.size,\n        uniqueClasses: group.classes.size,\n        avgRevenuePerCancellation: group.count > 0 ? group.revenue / group.count : 0,\n        avgCancellationsPerMember: group.uniqueMembers > 0 ? group.count / group.uniqueMembers : 0\n      }));\n    return arr.sort((a: any, b: any) => isDescending ? b.count - a.count : a.count - b.count);\n  }, [data, isDescending]);\n\n  // New: Top cancellers across the selected timeframe (not per-day)\n  const topCancellersByMember = useMemo(() => {\n    if (!data || data.length === 0) return [] as any[];\n    const map = data.reduce((acc, item) => {\n      const id = item.memberId || item.email || 'unknown';\n      if (!acc[id]) {\n        acc[id] = {\n          memberId: item.memberId,\n          memberName: `${item.firstName || ''} ${item.lastName || ''}`.trim(),\n          email: item.email,\n          date: 'Multiple',\n          count: 0,\n          cancellations: [],\n          locations: new Set<string>(),\n          classes: new Set<string>(),\n          trainers: new Set<string>()\n        };\n      }\n      acc[id].count += 1;\n      acc[id].cancellations.length < 10 && acc[id].cancellations.push({\n        sessionName: item.sessionName,\n        time: item.time,\n        location: item.location,\n        teacherName: item.teacherName,\n        cleanedClass: item.cleanedClass,\n        cleanedProduct: item.cleanedProduct\n      });\n      acc[id].locations.add(item.location || '');\n      acc[id].classes.add(item.cleanedClass || '');\n      acc[id].trainers.add(item.teacherName || '');\n      return acc;\n    }, {} as Record<string, any>);\n    const arr = Object.values(map).map((g: any) => ({\n      ...g,\n      uniqueLocations: g.locations.size,\n      uniqueClasses: g.classes.size,\n      uniqueTrainers: g.trainers.size\n    }));\n    return arr.sort((a: any, b: any) => isDescending ? b.count - a.count : a.count - b.count);\n  }, [data, isDescending]);\n\n  // Pagination logic\n  const getPaginatedData = (tableData: any[]) => {\n    const startIndex = (currentPage - 1) * ITEMS_PER_PAGE;\n    const endIndex = startIndex + ITEMS_PER_PAGE;\n    return tableData.slice(startIndex, endIndex);\n  };\n\n  const getTotalPages = (tableData: any[]) => {\n    return Math.ceil(tableData.length / ITEMS_PER_PAGE);\n  };\n\n  const getCurrentData = () => {\n    switch (activeTab) {\n      case 'multiple-day':\n        return multipleCancellationsPerDay;\n      case 'multiple-checkins':\n        return multipleCheckinsPerDay;\n      case 'multiple-bookings':\n        return multipleBookingsPerDay;\n      case 'by-class':\n        return cancellationsByClass;\n      case 'by-membership':\n        return cancellationsByMembership;\n      case 'top-cancellers':\n        return topCancellersByMember;\n      default:\n        return [];\n    }\n  };\n\n  const currentData = getCurrentData();\n  const paginatedData = getPaginatedData(currentData);\n  const totalPages = getTotalPages(currentData);\n\n  // Reset page when tab changes\n  React.useEffect(() => {\n    setCurrentPage(1);\n  }, [activeTab]);\n\n  const PaginationControls = () => (\n    <div className=\"flex items-center justify-between px-4 py-3 border-t border-gray-200\">\n      <div className=\"flex items-center gap-2 text-sm text-gray-600\">\n        <span>\n          Showing {((currentPage - 1) * ITEMS_PER_PAGE) + 1} to {Math.min(currentPage * ITEMS_PER_PAGE, currentData.length)} of {currentData.length} results\n        </span>\n      </div>\n      \n      <div className=\"flex items-center gap-2\">\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => setCurrentPage(prev => Math.max(1, prev - 1))}\n          disabled={currentPage === 1}\n          className=\"gap-1\"\n        >\n          <ChevronLeft className=\"w-4 h-4\" />\n          Previous\n        </Button>\n        \n        <div className=\"flex items-center gap-1\">\n          {[...Array(Math.min(5, totalPages))].map((_, i) => {\n            const pageNum = Math.max(1, Math.min(totalPages - 4, currentPage - 2)) + i;\n            if (pageNum > totalPages) return null;\n            \n            return (\n              <Button\n                key={pageNum}\n                variant={pageNum === currentPage ? 'default' : 'outline'}\n                size=\"sm\"\n                onClick={() => setCurrentPage(pageNum)}\n                className=\"w-8 h-8 p-0\"\n              >\n                {pageNum}\n              </Button>\n            );\n          })}\n        </div>\n        \n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          onClick={() => setCurrentPage(prev => Math.min(totalPages, prev + 1))}\n          disabled={currentPage === totalPages}\n          className=\"gap-1\"\n        >\n          Next\n          <ChevronRight className=\"w-4 h-4\" />\n        </Button>\n      </div>\n    </div>\n  );\n\n  const renderMultipleCancellationsTable = (tableData: any[], title: string, tabType: string) => (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center gap-2 justify-between px-4\">\n        <div className=\"flex items-center gap-2\">\n          <AlertTriangle className=\"w-5 h-5 text-orange-500\" />\n          <h3 className=\"text-lg font-semibold\">{title}</h3>\n          <Badge variant=\"outline\" className=\"bg-orange-50 text-orange-700 min-w-[90px] justify-center\">\n            {currentData.length} total members\n          </Badge>\n        </div>\n        <div className=\"flex items-center gap-2 text-xs\">\n          <span className=\"text-gray-500\">Sort by count</span>\n          <Button size=\"sm\" variant=\"outline\" onClick={() => setIsDescending(prev => !prev)}>\n            {isDescending ? 'Desc' : 'Asc'}\n          </Button>\n        </div>\n      </div>\n      \n      {Array.isArray(tableData) && tableData.length > 0 ? (\n        <>\n          <TableContainer>\n          <Table>\n            <TableHeader>\n              <TableRow>\n                <TableHead>Member</TableHead>\n                <TableHead>Email</TableHead>\n                <TableHead>Date</TableHead>\n                <TableHead>Count</TableHead>\n                <TableHead>Details</TableHead>\n                <TableHead>Sessions</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {tableData.map((member, index) => (\n                <TableRow \n                  key={index} \n                  className=\"h-[35px] max-h-[35px] hover:bg-gray-50 cursor-pointer transition-colors\"\n                  onClick={() => {\n                    try {\n                      if (onDrillDown && member) {\n                        // Filter all data for this specific member using multiple field matches\n                        const memberData = data.filter(item => {\n                          // Check various ways the member could be identified\n                          const memberName = member.memberName || `${member.firstName || ''} ${member.lastName || ''}`.trim();\n                          const itemMemberName = item.memberName || `${item.firstName || ''} ${item.lastName || ''}`.trim();\n                          \n                          return (\n                            (item.memberName && member.memberName && item.memberName === member.memberName) ||\n                            (item.memberId && member.memberId && item.memberId === member.memberId) ||\n                            (item.email && member.email && item.email === member.email) ||\n                            (memberName && itemMemberName && memberName === itemMemberName)\n                          );\n                        });\n                        \n                        console.log('Member data found:', memberData.length, 'items for', member);\n                        \n                        onDrillDown({\n                          type: 'member',\n                          title: `Member: ${member.memberName || `${member.firstName || ''} ${member.lastName || ''}`.trim() || 'Unknown'} (${memberData.length} cancellations)`,\n                          data: member,\n                          rawData: memberData\n                        });\n                      }\n                    } catch (error) {\n                      console.error('Error in drill down:', error);\n                    }\n                  }}\n                >\n                  <TableCell className=\"font-medium h-[35px] py-2\">\n                    <div className=\"flex items-center gap-2\">\n                      <div className=\"w-8 h-8 bg-gradient-to-r from-red-500 to-pink-500 rounded-full flex items-center justify-center text-white text-xs font-bold\">\n                        {member.memberName ? member.memberName.charAt(0).toUpperCase() : 'U'}\n                      </div>\n                      <div>\n                        <p className=\"font-semibold text-sm truncate max-w-[150px]\">{member.memberName}</p>\n                        <p className=\"text-xs text-gray-500\">ID: {member.memberId}</p>\n                      </div>\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">\n                    <span className=\"text-sm truncate max-w-[200px] block\">{member.email}</span>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">\n                    <Badge variant=\"outline\" className=\"text-xs min-w-[90px] justify-center\">\n                      {(() => {\n                        const d = new Date(member.date);\n                        return isNaN(d.getTime()) ? '—' : d.toLocaleDateString();\n                      })()}\n                    </Badge>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">\n                    <Badge variant=\"destructive\" className=\"text-xs min-w-[70px] justify-center\">\n                      {(tabType === 'multiple-day' ? member.count : tabType === 'multiple-checkins' ? member.totalSessions : member.totalBookings)} {tabType === 'multiple-day' ? 'cancellations' : 'sessions'}\n                    </Badge>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">\n                    <div className=\"flex gap-1\">\n                      {member.uniqueLocations && (\n                        <Badge variant=\"outline\" className=\"text-xs min-w-[60px] justify-center\">\n                          {member.uniqueLocations} loc\n                        </Badge>\n                      )}\n                      {member.uniqueClasses && (\n                        <Badge variant=\"outline\" className=\"text-xs min-w-[80px] justify-center\">\n                          {member.uniqueClasses} formats\n                        </Badge>\n                      )}\n                      {member.uniqueSpecificClasses && (\n                        <Badge variant=\"outline\" className=\"text-xs min-w-[100px] justify-center\">\n                          {member.uniqueSpecificClasses} classes\n                        </Badge>\n                      )}\n                    </div>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">\n                    <div className=\"text-xs text-gray-600 max-w-[200px]\">\n                      {Array.isArray(tabType === 'multiple-day' ? member.cancellations : member.sessionDetails) ? \n                        `${(tabType === 'multiple-day' ? member.cancellations : member.sessionDetails).length} sessions` :\n                        'No data'\n                      }\n                    </div>\n                  </TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          </TableContainer>\n          <PaginationControls />\n          <PersistentTableFooter\n            tableId={`late-cancel-${tabType}`}\n            tableName={title}\n            tableContext={tabType === 'multiple-day' ? 'Members with multiple same-day late cancellations' : tabType === 'multiple-checkins' ? 'Members with multiple same-day check-ins' : 'Members with multiple same-day bookings'}\n            tableData={tableData}\n            tableColumns={[\n              { header: 'Member', key: 'memberName', type: 'text' },\n              { header: 'Email', key: 'email', type: 'text' },\n              { header: 'Date', key: 'date', type: 'date' },\n              { header: 'Count', key: (tabType === 'multiple-day' ? 'count' : tabType === 'multiple-checkins' ? 'totalSessions' : 'totalBookings') as any, type: 'number' }\n            ] as any}\n          />\n        </>\n      ) : (\n        <p className=\"text-gray-500 text-center py-8\">No data available</p>\n      )}\n    </div>\n  );\n\n  const renderClassTypeTable = () => (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center gap-2 justify-between px-4\">\n        <div className=\"flex items-center gap-2\">\n          <Calendar className=\"w-5 h-5 text-blue-500\" />\n          <h3 className=\"text-lg font-semibold\">Cancellations by Format</h3>\n          <Badge variant=\"outline\" className=\"bg-blue-50 text-blue-700 min-w-[90px] justify-center\">\n            {currentData.length} class types\n          </Badge>\n        </div>\n      </div>\n      \n      {paginatedData.length > 0 ? (\n        <>\n          <TableContainer>\n          <Table>\n            <TableHeader>\n              <TableRow className=\"h-[35px]\">\n                <TableHead>Format</TableHead>\n                <TableHead>Category</TableHead>\n                <TableHead>Cancellations</TableHead>\n                <TableHead>Members</TableHead>\n                <TableHead>Locations</TableHead>\n                <TableHead>Peak Time</TableHead>\n                <TableHead>Peak Day</TableHead>\n                <TableHead>Avg Duration</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n            {paginatedData.map((classType, index) => (\n              <TableRow \n                key={index} \n                className=\"h-[35px] max-h-[35px] hover:bg-gray-50 cursor-pointer transition-colors\"\n                onClick={() => {\n                  try {\n                    if (onDrillDown && classType) {\n                      onDrillDown({\n                        type: 'class',\n                        title: `Format: ${classType.className || 'Unknown'}`,\n                        data: classType,\n                        rawData: data.filter(item => item.cleanedClass === classType.className) || []\n                      });\n                    }\n                  } catch (error) {\n                    console.error('Error in class drill down:', error);\n                  }\n                }}\n              >\n                <TableCell className=\"font-medium h-[35px] py-2\">\n                  <span className=\"truncate max-w-[150px] block\">{classType.className}</span>\n                </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">\n                    <Badge variant=\"secondary\">{classType.category}</Badge>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">\n                    <Badge variant=\"destructive\" className=\"min-w-[70px] justify-center\">\n                      {formatNumber(classType.count)}\n                    </Badge>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">{formatNumber(classType.uniqueMembers)}</TableCell>\n                  <TableCell className=\"h-[35px] py-2\">{formatNumber(classType.uniqueLocations)}</TableCell>\n                  <TableCell className=\"h-[35px] py-2\">\n                    <Badge variant=\"outline\" className=\"min-w-[70px] justify-center\">{classType.peakTime}</Badge>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">\n                    <Badge variant=\"outline\" className=\"min-w-[70px] justify-center\">{classType.peakDay}</Badge>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">{classType.avgDuration} min</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          </TableContainer>\n          <PaginationControls />\n          <PersistentTableFooter\n            tableId=\"late-cancel-by-class\"\n            tableName=\"Cancellations by Class Type\"\n            tableContext=\"Late cancellations grouped by class type and category\"\n            tableData={paginatedData}\n            tableColumns={[\n              { header: 'Class Type', key: 'className', type: 'text' },\n              { header: 'Category', key: 'category', type: 'text' },\n              { header: 'Cancellations', key: 'count', type: 'number' },\n              { header: 'Members', key: 'uniqueMembers', type: 'number' },\n              { header: 'Locations', key: 'uniqueLocations', type: 'number' },\n              { header: 'Peak Time', key: 'peakTime', type: 'text' },\n              { header: 'Peak Day', key: 'peakDay', type: 'text' },\n              { header: 'Avg Duration', key: 'avgDuration', type: 'number' }\n            ] as any}\n          />\n        </>\n      ) : (\n        <p className=\"text-gray-500 text-center py-8\">No class type data available</p>\n      )}\n    </div>\n  );\n\n  // New: Separate By Class table (combined class/day/time)\n  const renderBySpecificClassTable = () => {\n    const rows = useMemo(() => {\n      if (!data || data.length === 0) return [] as any[];\n      const map = data.reduce((acc, item) => {\n        const key = `${item.cleanedClass || 'Unknown'}|${item.dayOfWeek || 'Unknown'}|${item.time || 'Unknown'}`;\n        if (!acc[key]) {\n          acc[key] = {\n            classKey: key,\n            className: item.cleanedClass || 'Unknown',\n            dayOfWeek: item.dayOfWeek || 'Unknown',\n            time: item.time || 'Unknown',\n            count: 0,\n            locations: new Set<string>(),\n            trainers: new Set<string>()\n          };\n        }\n        acc[key].count += 1;\n        item.location && acc[key].locations.add(item.location);\n        item.teacherName && acc[key].trainers.add(item.teacherName);\n        return acc;\n      }, {} as Record<string, any>);\n      return Object.values(map)\n        .map((g: any) => ({\n          ...g,\n          uniqueLocations: g.locations.size,\n          uniqueTrainers: g.trainers.size\n        }))\n        .sort((a: any, b: any) => isDescending ? b.count - a.count : a.count - b.count);\n    }, [data, isDescending]);\n\n    const pageRows = getPaginatedData(rows);\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center gap-2 justify-between px-4\">\n          <div className=\"flex items-center gap-2\">\n            <Calendar className=\"w-5 h-5 text-slate-600\" />\n            <h3 className=\"text-lg font-semibold\">Cancellations by Class (Specific)</h3>\n            <Badge variant=\"outline\" className=\"bg-slate-50 text-slate-700 min-w-[90px] justify-center\">{rows.length} classes</Badge>\n          </div>\n        </div>\n        {pageRows.length > 0 ? (\n          <>\n            <TableContainer>\n            <Table>\n              <TableHeader>\n                <TableRow className=\"h-[35px]\">\n                  <TableHead>Class</TableHead>\n                  <TableHead>Day</TableHead>\n                  <TableHead>Time</TableHead>\n                  <TableHead>Cancellations</TableHead>\n                  <TableHead>Locations</TableHead>\n                  <TableHead>Trainers</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {pageRows.map((r: any, idx: number) => (\n                  <TableRow key={idx} className=\"h-[35px] hover:bg-gray-50\">\n                    <TableCell className=\"font-medium\">{r.className}</TableCell>\n                    <TableCell>{r.dayOfWeek}</TableCell>\n                    <TableCell>{r.time}</TableCell>\n                    <TableCell>\n                      <Badge variant=\"destructive\" className=\"min-w-[70px] justify-center\">{formatNumber(r.count)}</Badge>\n                    </TableCell>\n                    <TableCell><Badge variant=\"outline\" className=\"min-w-[60px] justify-center\">{r.uniqueLocations}</Badge></TableCell>\n                    <TableCell><Badge variant=\"outline\" className=\"min-w-[60px] justify-center\">{r.uniqueTrainers}</Badge></TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n            </TableContainer>\n            <PaginationControls />\n            <PersistentTableFooter\n              tableId=\"late-cancel-by-specific-class\"\n              tableName=\"Cancellations by Specific Class\"\n              tableContext=\"Late cancellations grouped by specific class (class + day + time)\"\n              tableData={pageRows}\n              tableColumns={[\n                { header: 'Class', key: 'className', type: 'text' },\n                { header: 'Day', key: 'dayOfWeek', type: 'text' },\n                { header: 'Time', key: 'time', type: 'text' },\n                { header: 'Cancellations', key: 'count', type: 'number' },\n                { header: 'Locations', key: 'uniqueLocations', type: 'number' },\n                { header: 'Trainers', key: 'uniqueTrainers', type: 'number' }\n              ] as any}\n            />\n          </>\n        ) : (\n          <p className=\"text-gray-500 text-center py-8\">No specific class data</p>\n        )}\n      </div>\n    );\n  };\n\n  const renderMembershipTypeTable = () => (\n    <div className=\"space-y-4\">\n      <div className=\"flex items-center gap-2 justify-between px-4\">\n        <div className=\"flex items-center gap-2\">\n          <Package className=\"w-5 h-5 text-purple-500\" />\n          <h3 className=\"text-lg font-semibold\">Cancellations by Membership Type</h3>\n          <Badge variant=\"outline\" className=\"bg-purple-50 text-purple-700\">\n            {currentData.length} membership types\n          </Badge>\n        </div>\n      </div>\n      \n      {paginatedData.length > 0 ? (\n        <>\n          <TableContainer>\n          <Table>\n            <TableHeader>\n              <TableRow className=\"h-[35px]\">\n                <TableHead>Membership Type</TableHead>\n                <TableHead>Category</TableHead>\n                <TableHead>Cancellations</TableHead>\n                <TableHead>Members</TableHead>\n                <TableHead>Locations</TableHead>\n                <TableHead>Avg per Member</TableHead>\n                <TableHead>Revenue Impact</TableHead>\n              </TableRow>\n            </TableHeader>\n            <TableBody>\n              {paginatedData.map((membership, index) => (\n                <TableRow \n                  key={index} \n                  className=\"h-[35px] max-h-[35px] hover:bg-gray-50 cursor-pointer transition-colors\"\n                  onClick={() => {\n                    try {\n                      if (onDrillDown && membership) {\n                        onDrillDown({\n                          type: 'membership',\n                          title: `Membership: ${membership.membershipType || 'Unknown'}`,\n                          data: membership,\n                          rawData: data.filter(item => item.cleanedProduct === membership.membershipType) || []\n                        });\n                      }\n                    } catch (e) {\n                      console.error('Error in membership drilldown', e);\n                    }\n                  }}\n                >\n                  <TableCell className=\"font-medium h-[35px] py-2\">\n                    <span className=\"truncate max-w-[200px] block\">{membership.membershipType}</span>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">\n                    <Badge variant=\"secondary\">{membership.category}</Badge>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">\n                    <Badge variant=\"destructive\">\n                      {formatNumber(membership.count)}\n                    </Badge>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">{formatNumber(membership.uniqueMembers)}</TableCell>\n                  <TableCell className=\"h-[35px] py-2\">{formatNumber(membership.uniqueLocations)}</TableCell>\n                  <TableCell className=\"h-[35px] py-2\">\n                    <Badge variant=\"outline\">\n                      {(membership.avgCancellationsPerMember || 0).toFixed(1)}\n                    </Badge>\n                  </TableCell>\n                  <TableCell className=\"h-[35px] py-2\">{formatCurrency(membership.revenue || 0)}</TableCell>\n                </TableRow>\n              ))}\n            </TableBody>\n          </Table>\n          </TableContainer>\n            <PaginationControls />\n            <PersistentTableFooter\n              tableId=\"late-cancel-by-membership\"\n              tableName=\"Cancellations by Membership Type\"\n              tableContext=\"Late cancellations grouped by membership type\"\n              tableData={paginatedData}\n              tableColumns={[\n                { header: 'Membership Type', key: 'membershipType', type: 'text' },\n                { header: 'Category', key: 'category', type: 'text' },\n                { header: 'Cancellations', key: 'count', type: 'number' },\n                { header: 'Members', key: 'uniqueMembers', type: 'number' },\n                { header: 'Locations', key: 'uniqueLocations', type: 'number' },\n                { header: 'Avg per Member', key: 'avgCancellationsPerMember', type: 'number' },\n                { header: 'Revenue Impact', key: 'revenue', type: 'currency' }\n              ] as any}\n            />\n        </>\n      ) : (\n        <p className=\"text-gray-500 text-center py-8\">No membership type data available</p>\n      )}\n    </div>\n  );\n\n  // Additional tables for comprehensive analysis\n  const renderTrainerAnalysisTable = () => {\n    const trainerData = useMemo(() => {\n      if (!data || data.length === 0) return [];\n      \n      const trainerGroups = data.reduce((acc, item) => {\n        const trainer = item.teacherName || 'Unknown Trainer';\n        \n        if (!acc[trainer]) {\n          acc[trainer] = {\n            trainerName: trainer,\n            count: 0,\n            members: new Set(),\n            locations: new Set(),\n            classes: new Set(),\n            revenue: 0,\n            avgCancellationsPerSession: 0,\n            totalSessions: 0\n          };\n        }\n        \n        acc[trainer].count += 1;\n        acc[trainer].members.add(item.memberId);\n        acc[trainer].locations.add(item.location);\n        acc[trainer].classes.add(item.cleanedClass);\n        acc[trainer].revenue += item.paidAmount || 0;\n        acc[trainer].totalSessions += 1; // Approximate\n        \n        return acc;\n      }, {} as Record<string, any>);\n      \n      return Object.values(trainerGroups)\n        .map((group: any) => ({\n          ...group,\n          uniqueMembers: group.members.size,\n          uniqueLocations: group.locations.size,\n          uniqueClasses: group.classes.size,\n          avgCancellationsPerSession: group.totalSessions > 0 ? group.count / group.totalSessions : 0\n        }))\n        .sort((a: any, b: any) => b.count - a.count);\n    }, [data]);\n\n    const paginatedTrainerData = getPaginatedData(trainerData);\n\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center gap-2 justify-between px-4\">\n          <div className=\"flex items-center gap-2\">\n            <Users className=\"w-5 h-5 text-green-500\" />\n            <h3 className=\"text-lg font-semibold\">Cancellations by Trainer</h3>\n            <Badge variant=\"outline\" className=\"bg-green-50 text-green-700\">\n              {trainerData.length} trainers\n            </Badge>\n          </div>\n        </div>\n        \n        {paginatedTrainerData.length > 0 ? (\n          <>\n            <TableContainer>\n            <Table>\n              <TableHeader>\n                <TableRow className=\"h-[35px]\">\n                  <TableHead>Trainer Name</TableHead>\n                  <TableHead>Cancellations</TableHead>\n                  <TableHead>Affected Members</TableHead>\n                  <TableHead>Classes</TableHead>\n                  <TableHead>Locations</TableHead>\n                  <TableHead>Revenue Impact</TableHead>\n                  <TableHead>Avg per Session</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {paginatedTrainerData.map((trainer, index) => (\n                  <TableRow \n                    key={index} \n                    className=\"h-[35px] max-h-[35px] hover:bg-gray-50 cursor-pointer\"\n                    onClick={() => {\n                      try {\n                        if (onDrillDown && trainer) {\n                          onDrillDown({\n                            type: 'trainer',\n                            title: `Trainer: ${trainer.trainerName}`,\n                            data: trainer,\n                            rawData: data.filter(item => item.teacherName === trainer.trainerName) || []\n                          });\n                        }\n                      } catch (e) {\n                        console.error('Error in trainer drilldown', e);\n                      }\n                    }}\n                  >\n                    <TableCell className=\"font-medium h-[35px] py-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <div className=\"w-8 h-8 bg-gradient-to-r from-green-500 to-emerald-500 rounded-full flex items-center justify-center text-white text-xs font-bold\">\n                          {trainer.trainerName.split(' ').map((n: string) => n[0]).join('').slice(0, 2)}\n                        </div>\n                        <span className=\"truncate max-w-[120px]\">{trainer.trainerName}</span>\n                      </div>\n                    </TableCell>\n                    <TableCell className=\"h-[35px] py-2\">\n                      <Badge variant=\"destructive\">\n                        {formatNumber(trainer.count)}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"h-[35px] py-2\">{formatNumber(trainer.uniqueMembers)}</TableCell>\n                    <TableCell className=\"h-[35px] py-2\">{formatNumber(trainer.uniqueClasses)}</TableCell>\n                    <TableCell className=\"h-[35px] py-2\">{formatNumber(trainer.uniqueLocations)}</TableCell>\n                    <TableCell className=\"h-[35px] py-2\">{formatRevenue(trainer.revenue || 0)}</TableCell>\n                    <TableCell className=\"h-[35px] py-2\">\n                      <span className=\"font-medium text-slate-700\">\n                        {trainer.avgCancellationsPerSession.toFixed(1)}\n                      </span>\n                    </TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n            </TableContainer>\n            <PaginationControls />\n            <PersistentTableFooter\n              tableId=\"late-cancel-by-trainer\"\n              tableName=\"Cancellations by Trainer\"\n              tableContext=\"Late cancellations grouped by trainer with member and class counts\"\n              tableData={paginatedTrainerData}\n              tableColumns={[\n                { header: 'Trainer', key: 'trainerName', type: 'text' },\n                { header: 'Cancellations', key: 'count', type: 'number' },\n                { header: 'Members', key: 'uniqueMembers', type: 'number' },\n                { header: 'Classes', key: 'uniqueClasses', type: 'number' },\n                { header: 'Locations', key: 'uniqueLocations', type: 'number' },\n                { header: 'Revenue Impact', key: 'revenue', type: 'currency' },\n                { header: 'Avg per Session', key: 'avgCancellationsPerSession', type: 'number' }\n              ] as any}\n            />\n          </>\n        ) : (\n          <p className=\"text-gray-500 text-center py-8\">No trainer data available</p>\n        )}\n      </div>\n    );\n  };\n\n  const renderLocationAnalysisTable = () => {\n    const locationData = useMemo(() => {\n      if (!data || data.length === 0) return [];\n      \n      const locationGroups = data.reduce((acc, item) => {\n        const location = item.location || 'Unknown Location';\n        \n        if (!acc[location]) {\n          acc[location] = {\n            locationName: location,\n            count: 0,\n            members: new Set(),\n            trainers: new Set(),\n            classes: new Set(),\n            revenue: 0,\n            peakDays: {},\n            peakTimes: {}\n          };\n        }\n        \n        acc[location].count += 1;\n        acc[location].members.add(item.memberId);\n        acc[location].trainers.add(item.teacherName);\n        acc[location].classes.add(item.cleanedClass);\n        acc[location].revenue += item.paidAmount || 0;\n        \n        // Track peak days and times\n        if (item.dayOfWeek) {\n          acc[location].peakDays[item.dayOfWeek] = (acc[location].peakDays[item.dayOfWeek] || 0) + 1;\n        }\n        if (item.time) {\n          const hour = parseInt(item.time.split(':')[0]);\n          const timeSlot = hour < 12 ? 'Morning' : hour < 17 ? 'Afternoon' : 'Evening';\n          acc[location].peakTimes[timeSlot] = (acc[location].peakTimes[timeSlot] || 0) + 1;\n        }\n        \n        return acc;\n      }, {} as Record<string, any>);\n      \n      return Object.values(locationGroups)\n        .map((group: any) => {\n          const peakDay = Object.entries(group.peakDays).reduce((a, b) => \n            group.peakDays[a[0]] > group.peakDays[b[0]] ? a : b, ['N/A', 0]\n          )[0];\n          \n          const peakTime = Object.entries(group.peakTimes).reduce((a, b) => \n            group.peakTimes[a[0]] > group.peakTimes[b[0]] ? a : b, ['N/A', 0]\n          )[0];\n          \n          return {\n            ...group,\n            uniqueMembers: group.members.size,\n            uniqueTrainers: group.trainers.size,\n            uniqueClasses: group.classes.size,\n            peakDay,\n            peakTime,\n            avgRevenuePerCancellation: group.count > 0 ? group.revenue / group.count : 0\n          };\n        })\n        .sort((a: any, b: any) => b.count - a.count);\n    }, [data]);\n\n    const paginatedLocationData = getPaginatedData(locationData);\n\n    return (\n      <div className=\"space-y-4\">\n        <div className=\"flex items-center gap-2 justify-between px-4\">\n          <div className=\"flex items-center gap-2\">\n            <MapPin className=\"w-5 h-5 text-indigo-500\" />\n            <h3 className=\"text-lg font-semibold\">Cancellations by Location</h3>\n            <Badge variant=\"outline\" className=\"bg-indigo-50 text-indigo-700\">\n              {locationData.length} locations\n            </Badge>\n          </div>\n        </div>\n        \n        {paginatedLocationData.length > 0 ? (\n          <>\n            <TableContainer>\n            <Table>\n              <TableHeader>\n                <TableRow className=\"h-[35px]\">\n                  <TableHead>Location</TableHead>\n                  <TableHead>Cancellations</TableHead>\n                  <TableHead>Members</TableHead>\n                  <TableHead>Trainers</TableHead>\n                  <TableHead>Classes</TableHead>\n                  <TableHead>Peak Day</TableHead>\n                  <TableHead>Peak Time</TableHead>\n                  <TableHead>Revenue Impact</TableHead>\n                </TableRow>\n              </TableHeader>\n              <TableBody>\n                {paginatedLocationData.map((location, index) => (\n                  <TableRow \n                    key={index} \n                    className=\"h-[35px] max-h-[35px] hover:bg-gray-50 cursor-pointer\"\n                    onClick={() => {\n                      try {\n                        if (onDrillDown && location) {\n                          onDrillDown({\n                            type: 'location',\n                            title: `Location: ${location.locationName}`,\n                            data: location,\n                            rawData: data.filter(item => item.location === location.locationName) || []\n                          });\n                        }\n                      } catch (e) {\n                        console.error('Error in location drilldown', e);\n                      }\n                    }}\n                  >\n                    <TableCell className=\"font-medium h-[35px] py-2\">\n                      <div className=\"flex items-center gap-2\">\n                        <MapPin className=\"w-4 h-4 text-indigo-600\" />\n                        <span className=\"truncate max-w-[150px]\">{location.locationName}</span>\n                      </div>\n                    </TableCell>\n                    <TableCell className=\"h-[35px] py-2\">\n                      <Badge variant=\"destructive\">\n                        {formatNumber(location.count)}\n                      </Badge>\n                    </TableCell>\n                    <TableCell className=\"h-[35px] py-2\">{formatNumber(location.uniqueMembers)}</TableCell>\n                    <TableCell className=\"h-[35px] py-2\">{formatNumber(location.uniqueTrainers)}</TableCell>\n                    <TableCell className=\"h-[35px] py-2\">{formatNumber(location.uniqueClasses)}</TableCell>\n                    <TableCell className=\"h-[35px] py-2\">\n                      <Badge variant=\"outline\">{location.peakDay}</Badge>\n                    </TableCell>\n                    <TableCell className=\"h-[35px] py-2\">\n                      <Badge variant=\"outline\">{location.peakTime}</Badge>\n                    </TableCell>\n                    <TableCell className=\"h-[35px] py-2\">{formatCurrency(location.revenue || 0)}</TableCell>\n                  </TableRow>\n                ))}\n              </TableBody>\n            </Table>\n            </TableContainer>\n            <PaginationControls />\n            <PersistentTableFooter\n              tableId=\"late-cancel-by-location\"\n              tableName=\"Cancellations by Location\"\n              tableContext=\"Late cancellations grouped by studio location\"\n              tableData={paginatedLocationData}\n              tableColumns={[\n                { header: 'Location', key: 'locationName', type: 'text' },\n                { header: 'Cancellations', key: 'count', type: 'number' },\n                { header: 'Members', key: 'uniqueMembers', type: 'number' },\n                { header: 'Trainers', key: 'uniqueTrainers', type: 'number' },\n                { header: 'Classes', key: 'uniqueClasses', type: 'number' },\n                { header: 'Peak Day', key: 'peakDay', type: 'text' },\n                { header: 'Peak Time', key: 'peakTime', type: 'text' },\n                { header: 'Revenue Impact', key: 'revenue', type: 'currency' }\n              ] as any}\n            />\n          </>\n        ) : (\n          <p className=\"text-gray-500 text-center py-8\">No location data available</p>\n        )}\n      </div>\n    );\n  };\n\n  // Build aggregated text for ALL internal analysis tabs (not just active)\n  // Derived data sets reused in export aggregation\n  const trainerAnalysis = useMemo(() => {\n    // Mirror logic inside renderTrainerAnalysisTable for consistency\n    const trainerGroups = data.reduce((acc, item) => {\n      const trainer = item.teacherName || 'Unknown Trainer';\n      if (!acc[trainer]) {\n        acc[trainer] = {\n          trainerName: trainer,\n          count: 0,\n          members: new Set(),\n          locations: new Set(),\n          classes: new Set(),\n          revenue: 0\n        };\n      }\n      acc[trainer].count += 1;\n      acc[trainer].members.add(item.memberId);\n      acc[trainer].locations.add(item.location);\n      acc[trainer].classes.add(item.cleanedClass);\n      acc[trainer].revenue += item.paidAmount || 0;\n      return acc;\n    }, {} as Record<string, any>);\n    return Object.values(trainerGroups).map((g: any) => ({\n      trainerName: g.trainerName,\n      count: g.count,\n      uniqueMembers: g.members.size,\n      uniqueLocations: g.locations.size,\n      uniqueClasses: g.classes.size,\n      revenue: g.revenue\n    })).sort((a:any,b:any)=>b.count-a.count);\n  }, [data]);\n\n  const locationAnalysis = useMemo(() => {\n    const locationGroups = data.reduce((acc, item) => {\n      const location = item.location || 'Unknown Location';\n      if (!acc[location]) {\n        acc[location] = {\n          locationName: location,\n          count: 0,\n          members: new Set(),\n          trainers: new Set(),\n          classes: new Set(),\n          revenue: 0,\n          peakDays: {} as Record<string, number>,\n          peakTimes: {} as Record<string, number>\n        };\n      }\n      acc[location].count += 1;\n      acc[location].members.add(item.memberId);\n      acc[location].trainers.add(item.teacherName);\n      acc[location].classes.add(item.cleanedClass);\n      acc[location].revenue += item.paidAmount || 0;\n      if (item.dayOfWeek) acc[location].peakDays[item.dayOfWeek] = (acc[location].peakDays[item.dayOfWeek] || 0) + 1;\n      if (item.time) {\n        const hour = parseInt(item.time.split(':')[0]);\n        const slot = hour < 12 ? 'Morning' : hour < 17 ? 'Afternoon' : 'Evening';\n        acc[location].peakTimes[slot] = (acc[location].peakTimes[slot] || 0) + 1;\n      }\n      return acc;\n    }, {} as Record<string, any>);\n    return Object.values(locationGroups).map((g: any) => {\n      const peakDay = Object.entries(g.peakDays).reduce((a,b)=> g.peakDays[a[0]]>g.peakDays[b[0]]?a:b, ['N/A',0] as any)[0];\n      const peakTime = Object.entries(g.peakTimes).reduce((a,b)=> g.peakTimes[a[0]]>g.peakTimes[b[0]]?a:b, ['N/A',0] as any)[0];\n      return {\n        locationName: g.locationName,\n        count: g.count,\n        uniqueMembers: g.members.size,\n        uniqueTrainers: g.trainers.size,\n        uniqueClasses: g.classes.size,\n        peakDay,\n        peakTime,\n        revenue: g.revenue\n      };\n    }).sort((a:any,b:any)=>b.count-a.count);\n  }, [data]);\n\n  const generateAllTabsContent = useCallback((): string => {\n    const sections: string[] = [];\n    const stamp = new Date().toLocaleString();\n    sections.push(`Enhanced Late Cancellations Analysis - All Tabs Export\\nExported: ${stamp}`);\n    sections.push('='.repeat(80));\n\n    // Helper to serialize a simple rows array with headers\n    const serialize = (title: string, headers: string[], rows: (string | number)[][]) => {\n      sections.push(`\\n=== ${title} ===`);\n      sections.push(headers.join('\\t'));\n      sections.push(headers.map(() => '---').join('\\t'));\n      rows.forEach(r => sections.push(r.map(v => (v === undefined || v === null) ? '' : String(v)).join('\\t')));\n    };\n\n    // 1. Multiple cancellations per day\n    if (multipleCancellationsPerDay.length) {\n      serialize(\n        'Members with Multiple Same-Day Late Cancellations',\n        ['Member', 'Email', 'Date', 'Cancellation Count', 'Unique Locations', 'Unique Formats', 'Unique Specific Classes', 'Unique Trainers'],\n        multipleCancellationsPerDay.map(m => [\n          m.memberName,\n          m.email,\n          m.date,\n          m.count,\n          m.uniqueLocations,\n          m.uniqueClasses,\n          m.uniqueSpecificClasses,\n          m.uniqueTrainers\n        ])\n      );\n    }\n\n    // 2. Multiple check-ins per day\n    if (multipleCheckinsPerDay.length) {\n      serialize(\n        'Members with Multiple Same-Day Check-ins',\n        ['Member', 'Email', 'Date', 'Check-ins'],\n        multipleCheckinsPerDay.map(m => [\n          (m as any).memberName,\n          (m as any).email,\n          (m as any).date,\n          (m as any).totalSessions\n        ])\n      );\n    }\n\n    // 3. Multiple bookings per day\n    if (multipleBookingsPerDay.length) {\n      serialize(\n        'Members with Multiple Same-Day Bookings',\n        ['Member', 'Email', 'Date', 'Bookings'],\n        multipleBookingsPerDay.map(m => [\n          (m as any).memberName,\n          (m as any).email,\n          (m as any).date,\n          (m as any).totalBookings\n        ])\n      );\n    }\n\n    // 4. Cancellations by Class\n    if (cancellationsByClass.length) {\n      serialize(\n        'Cancellations by Class Format',\n        ['Class', 'Category', 'Cancellations', 'Unique Members', 'Unique Locations', 'Unique Trainers', 'Avg Duration', 'Avg Revenue', 'Peak Day', 'Peak Time'],\n        cancellationsByClass.map(c => [\n          c.className,\n          c.category,\n          c.count,\n          c.uniqueMembers,\n          c.uniqueLocations,\n          c.uniqueTrainers,\n          c.avgDuration,\n          c.avgRevenue?.toFixed?.(2) ?? c.avgRevenue,\n          c.peakDay,\n          c.peakTime\n        ])\n      );\n    }\n\n    // 5. Cancellations by Membership\n    if (cancellationsByMembership.length) {\n      serialize(\n        'Cancellations by Membership Type',\n        ['Membership', 'Category', 'Cancellations', 'Unique Members', 'Unique Locations', 'Unique Classes', 'Revenue Impact', 'Avg Revenue/Cancellation', 'Avg Cancellations/Member'],\n        cancellationsByMembership.map(m => [\n          m.membershipType,\n          m.category,\n          m.count,\n          m.uniqueMembers,\n          m.uniqueLocations,\n          m.uniqueClasses,\n          m.revenue?.toFixed?.(2) ?? m.revenue,\n          m.avgRevenuePerCancellation?.toFixed?.(2) ?? m.avgRevenuePerCancellation,\n          m.avgCancellationsPerMember?.toFixed?.(2) ?? m.avgCancellationsPerMember\n        ])\n      );\n    }\n\n    // 6. Cancellations by Trainer\n    if (trainerAnalysis.length) {\n      serialize(\n        'Cancellations by Trainer',\n        ['Trainer', 'Cancellations', 'Unique Members', 'Unique Locations', 'Unique Classes', 'Revenue Impact'],\n        trainerAnalysis.map(t => [\n          (t as any).trainerName,\n          (t as any).count,\n          (t as any).uniqueMembers,\n          (t as any).uniqueLocations,\n          (t as any).uniqueClasses,\n          (t as any).revenue?.toFixed?.(2) ?? (t as any).revenue\n        ])\n      );\n    }\n\n    // 7. Cancellations by Location\n    if (locationAnalysis.length) {\n      serialize(\n        'Cancellations by Location',\n        ['Location', 'Cancellations', 'Unique Members', 'Unique Trainers', 'Unique Classes', 'Peak Day', 'Peak Time', 'Revenue Impact'],\n        locationAnalysis.map(l => [\n          l.locationName,\n          l.count,\n          l.uniqueMembers,\n          l.uniqueTrainers,\n          l.uniqueClasses,\n          l.peakDay,\n          l.peakTime,\n          l.revenue?.toFixed?.(2) ?? l.revenue\n        ])\n      );\n    }\n\n    // 8. Top Cancellers (overall timeframe)\n    if (topCancellersByMember.length) {\n      serialize(\n        'Top Repeat Cancellers (Members)',\n        ['Member', 'Email', 'Cancellations', 'Unique Locations', 'Unique Classes', 'Unique Trainers'],\n        topCancellersByMember.map(m => [\n          m.memberName,\n          m.email,\n          m.count,\n          m.uniqueLocations,\n          m.uniqueClasses,\n          m.uniqueTrainers\n        ])\n      );\n    }\n\n    // 9. Visit Frequency Buckets\n    const { buckets = [], byFormat = [], byMembership = [] } = visitFrequencyBreakdowns || {};\n    if (buckets.length) {\n      // Overall buckets\n      const memberTotals = data.reduce((acc, item) => {\n        const id = item.memberId || item.email || 'unknown';\n        acc[id] = (acc[id] || 0) + 1;\n        return acc;\n      }, {} as Record<string, number>);\n      const bucketRows = buckets.map(b => [\n        b.label,\n        Object.values(memberTotals).filter(v => v >= b.min && v <= b.max).length\n      ]);\n      serialize('Visit Frequency Buckets (Overall)', ['Bucket', 'Members'], bucketRows);\n\n      if (byFormat.length) {\n        serialize(\n          'Visit Frequency by Format',\n          ['Format', 'Members', 'Revenue', ...buckets.map(b => b.label)],\n          byFormat.map(r => [\n            r.format,\n            r.members,\n            r.revenue?.toFixed?.(2) ?? r.revenue,\n            ...buckets.map(b => r[b.label] || 0)\n          ])\n        );\n      }\n      if (byMembership.length) {\n        serialize(\n          'Visit Frequency by Membership',\n          ['Membership', 'Members', 'Revenue', ...buckets.map(b => b.label)],\n          byMembership.map(r => [\n            r.membership,\n            r.members,\n            r.revenue?.toFixed?.(2) ?? r.revenue,\n            ...buckets.map(b => r[b.label] || 0)\n          ])\n        );\n      }\n    }\n\n    return sections.join('\\n');\n  }, [\n    multipleCancellationsPerDay,\n    multipleCheckinsPerDay,\n    multipleBookingsPerDay,\n    cancellationsByClass,\n    cancellationsByMembership,\n    trainerAnalysis,\n    locationAnalysis,\n    topCancellersByMember,\n    visitFrequencyBreakdowns,\n    data\n  ]);\n\n  // Auto-register with metrics registry so global Copy All Tabs includes this aggregate\n  React.useEffect(() => {\n    if (!metricsRegistry) return;\n    metricsRegistry.register({ id: 'Enhanced Late Cancellations Analysis (All Tabs)', getTextContent: generateAllTabsContent });\n    return () => metricsRegistry.unregister('Enhanced Late Cancellations Analysis (All Tabs)');\n  }, [metricsRegistry, generateAllTabsContent]);\n\n  return (\n    <Card className=\"bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-xl\">\n      <CardHeader>\n        <div className=\"flex items-center justify-between\">\n          <CardTitle className=\"text-lg font-bold text-slate-800 flex items-center gap-2\">\n            <Users className=\"w-5 h-5 text-red-600\" />\n            Enhanced Late Cancellations Analysis\n            <Badge variant=\"outline\" className=\"bg-blue-50 text-blue-700 min-w-[180px] justify-center\">\n              Multiple analysis views with 35px row height\n            </Badge>\n          </CardTitle>\n          <CopyTableButton\n            tableRef={multipleDayTableRef as any}\n            tableName=\"Enhanced Late Cancellations (Active Tab)\"\n            size=\"sm\"\n            onCopyAllTabs={async () => generateAllTabsContent()}\n          />\n        </div>\n      </CardHeader>\n      <CardContent className=\"p-0\">\n        <Tabs value={activeTab} onValueChange={setActiveTab}>\n          <div className=\"px-6\">\n            {/* Match Sales tabs style */}\n            <TabsList className=\"bg-white/90 backdrop-blur-sm p-2 rounded-2xl shadow-xl border-0 grid grid-cols-9 w-full max-w-7xl min-h-16 overflow-hidden mb-6\">\n              <TabsTrigger value=\"multiple-day\" className=\"flex items-center gap-2\">\n                <AlertTriangle className=\"h-4 w-4\" />\n                Multiple/Day\n              </TabsTrigger>\n              <TabsTrigger value=\"multiple-checkins\" className=\"flex items-center gap-2\">\n                <Users className=\"h-4 w-4\" />\n                Check-ins/Day\n              </TabsTrigger>\n              <TabsTrigger value=\"multiple-bookings\" className=\"flex items-center gap-2\">\n                <Users className=\"h-4 w-4\" />\n                Bookings/Day\n              </TabsTrigger>\n              <TabsTrigger value=\"by-class\" className=\"flex items-center gap-2\">\n                <Calendar className=\"h-4 w-4\" />\n                By Format\n              </TabsTrigger>\n              <TabsTrigger value=\"by-membership\" className=\"flex items-center gap-2\">\n                <Package className=\"h-4 w-4\" />\n                By Membership\n              </TabsTrigger>\n              <TabsTrigger value=\"by-trainer\" className=\"flex items-center gap-2\">\n                <Users className=\"h-4 w-4\" />\n                By Trainer\n              </TabsTrigger>\n              <TabsTrigger value=\"by-location\" className=\"flex items-center gap-2\">\n                <MapPin className=\"h-4 w-4\" />\n                By Location\n              </TabsTrigger>\n              <TabsTrigger value=\"top-cancellers\" className=\"flex items-center gap-2\">\n                <AlertTriangle className=\"h-4 w-4\" />\n                Top Cancellers\n              </TabsTrigger>\n              <TabsTrigger value=\"visit-frequency\" className=\"flex items-center gap-2\">\n                <Users className=\"h-4 w-4\" />\n                Visit Frequency\n              </TabsTrigger>\n              <TabsTrigger value=\"by-specific-class\" className=\"flex items-center gap-2\">\n                <Calendar className=\"h-4 w-4\" />\n                By Class (Specific)\n              </TabsTrigger>\n            </TabsList>\n          </div>\n\n          <TabsContent value=\"multiple-day\" className=\"mt-0\">\n            {renderMultipleCancellationsTable(paginatedData, \"Members with Multiple Late Cancellations per Day\", \"multiple-day\")}\n          </TabsContent>\n\n          <TabsContent value=\"multiple-checkins\" className=\"mt-0\">\n            {renderDailyAggregationTable(checkinsPerDay, 'Check-ins per Day', 'late-cancel-checkins-per-day')}\n          </TabsContent>\n\n          <TabsContent value=\"multiple-bookings\" className=\"mt-0\">\n            {renderDailyAggregationTable(bookingsPerDay, 'Bookings per Day', 'late-cancel-bookings-per-day')}\n          </TabsContent>\n\n          <TabsContent value=\"by-class\" className=\"mt-0\">\n            {renderClassTypeTable()}\n          </TabsContent>\n\n          <TabsContent value=\"by-membership\" className=\"mt-0\">\n            {renderMembershipTypeTable()}\n          </TabsContent>\n\n          <TabsContent value=\"by-trainer\" className=\"mt-0\">\n            {renderTrainerAnalysisTable()}\n          </TabsContent>\n\n          <TabsContent value=\"by-location\" className=\"mt-0\">\n            {renderLocationAnalysisTable()}\n          </TabsContent>\n\n          {/* New: Top/Bottom cancellers and visit frequency buckets */}\n          <TabsContent value=\"top-cancellers\" className=\"mt-0\">\n            {renderMultipleCancellationsTable(paginatedData, 'Top Repeat Cancellers (Members)', 'top-cancellers')}\n          </TabsContent>\n\n          <TabsContent value=\"visit-frequency\" className=\"mt-0\">\n            {(() => {\n              const { buckets = [], byFormat = [], byMembership = [] } = visitFrequencyBreakdowns || {};\n              const totalMembers = (list: any[]) => list.reduce((s, r) => s + r.members, 0);\n              return (\n                <div className=\"space-y-10\">\n                  {/* Overall Buckets */}\n                  {(() => {\n                    const memberTotals = data.reduce((acc, item) => {\n                      const id = item.memberId || item.email || 'unknown';\n                      acc[id] = (acc[id] || 0) + 1;\n                      return acc;\n                    }, {} as Record<string, number>);\n                    const rows = buckets.map(b => ({\n                      bucket: b.label,\n                      members: Object.values(memberTotals).filter(v => v >= b.min && v <= b.max).length\n                    }));\n                    return (\n                      <div className=\"space-y-4\">\n                        <div className=\"flex items-center gap-2 justify-between px-4\">\n                          <div className=\"flex items-center gap-2\">\n                            <Users className=\"w-5 h-5 text-slate-600\" />\n                            <h3 className=\"text-lg font-semibold\">Visit Frequency Buckets</h3>\n                            <Badge variant=\"outline\" className=\"bg-slate-50 text-slate-700 min-w-[140px] justify-center\">\n                              {rows.reduce((s, r) => s + r.members, 0)} members\n                            </Badge>\n                          </div>\n                        </div>\n                        <TableContainer>\n                        <Table>\n                          <TableHeader>\n                            <TableRow>\n                              <TableHead>Visits (per period)</TableHead>\n                              <TableHead>Members</TableHead>\n                            </TableRow>\n                          </TableHeader>\n                          <TableBody>\n                            {rows.map((r, idx) => (\n                              <TableRow key={idx}>\n                                <TableCell className=\"font-medium\">{r.bucket}</TableCell>\n                                <TableCell>{formatNumber(r.members)}</TableCell>\n                              </TableRow>\n                            ))}\n                          </TableBody>\n                        </Table>\n                        </TableContainer>\n                        <PersistentTableFooter\n                          tableId=\"late-cancel-visit-frequency\"\n                          tableName=\"Visit Frequency Buckets\"\n                          tableContext=\"Distribution of member late cancellations by visit count within the selected timeframe\"\n                          tableData={rows}\n                          tableColumns={[\n                            { header: 'Bucket', key: 'bucket', type: 'text' },\n                            { header: 'Members', key: 'members', type: 'number' }\n                          ] as any}\n                        />\n                      </div>\n                    );\n                  })()}\n\n                  {/* Breakdown by Format */}\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center gap-2 justify-between px-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <Calendar className=\"w-5 h-5 text-blue-500\" />\n                        <h3 className=\"text-lg font-semibold\">Visit Frequency by Format</h3>\n                        <Badge variant=\"outline\" className=\"bg-blue-50 text-blue-700 min-w-[140px] justify-center\">{totalMembers(byFormat)} members</Badge>\n                      </div>\n                    </div>\n                    <TableContainer>\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          <TableHead>Format</TableHead>\n                          {buckets.map(b => (<TableHead key={b.label}>{b.label}</TableHead>))}\n                          <TableHead>Total Members</TableHead>\n                          <TableHead>Total Revenue</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {byFormat.map((r: any, idx: number) => (\n                          <TableRow key={idx}>\n                            <TableCell className=\"font-medium\">{r.format}</TableCell>\n                            {buckets.map(b => (<TableCell key={b.label}>{formatNumber(r[b.label] || 0)}</TableCell>))}\n                            <TableCell>{formatNumber(r.members)}</TableCell>\n                            <TableCell>{formatCurrency(r.revenue || 0)}</TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                    </TableContainer>\n                    <PersistentTableFooter\n                      tableId=\"late-cancel-visit-frequency-format\"\n                      tableName=\"Visit Frequency by Format\"\n                      tableContext=\"Members bucketed by visit frequency grouped by class format\"\n                      tableData={byFormat}\n                      tableColumns={[{ header: 'Format', key: 'format', type: 'text' }, ...buckets.map(b => ({ header: b.label, key: b.label, type: 'number' })), { header: 'Members', key: 'members', type: 'number' }, { header: 'Revenue', key: 'revenue', type: 'currency' }] as any}\n                    />\n                  </div>\n\n                  {/* Breakdown by Membership */}\n                  <div className=\"space-y-4\">\n                    <div className=\"flex items-center gap-2 justify-between px-4\">\n                      <div className=\"flex items-center gap-2\">\n                        <Package className=\"w-5 h-5 text-purple-500\" />\n                        <h3 className=\"text-lg font-semibold\">Visit Frequency by Membership</h3>\n                        <Badge variant=\"outline\" className=\"bg-purple-50 text-purple-700 min-w-[140px] justify-center\">{totalMembers(byMembership)} members</Badge>\n                      </div>\n                    </div>\n                    <TableContainer>\n                    <Table>\n                      <TableHeader>\n                        <TableRow>\n                          <TableHead>Membership</TableHead>\n                          {buckets.map(b => (<TableHead key={b.label}>{b.label}</TableHead>))}\n                          <TableHead>Total Members</TableHead>\n                          <TableHead>Total Revenue</TableHead>\n                        </TableRow>\n                      </TableHeader>\n                      <TableBody>\n                        {byMembership.map((r: any, idx: number) => (\n                          <TableRow key={idx}>\n                            <TableCell className=\"font-medium\">{r.membership}</TableCell>\n                            {buckets.map(b => (<TableCell key={b.label}>{formatNumber(r[b.label] || 0)}</TableCell>))}\n                            <TableCell>{formatNumber(r.members)}</TableCell>\n                            <TableCell>{formatCurrency(r.revenue || 0)}</TableCell>\n                          </TableRow>\n                        ))}\n                      </TableBody>\n                    </Table>\n                    </TableContainer>\n                    <PersistentTableFooter\n                      tableId=\"late-cancel-visit-frequency-membership\"\n                      tableName=\"Visit Frequency by Membership\"\n                      tableContext=\"Members bucketed by visit frequency grouped by membership type\"\n                      tableData={byMembership}\n                      tableColumns={[{ header: 'Membership', key: 'membership', type: 'text' }, ...buckets.map(b => ({ header: b.label, key: b.label, type: 'number' })), { header: 'Members', key: 'members', type: 'number' }, { header: 'Revenue', key: 'revenue', type: 'currency' }] as any}\n                    />\n                  </div>\n                </div>\n              );\n            })()}\n          </TabsContent>\n\n          <TabsContent value=\"by-specific-class\" className=\"mt-0\">\n            {renderBySpecificClassTable()}\n          </TabsContent>\n        </Tabs>\n      </CardContent>\n    </Card>\n  );\n};","import React, { useState } from 'react';\nimport { Card, CardContent, CardHeader, CardTitle } from '@/components/ui/card';\nimport { Select, SelectContent, SelectItem, SelectTrigger, SelectValue } from '@/components/ui/select';\nimport { Label } from '@/components/ui/label';\nimport { Button } from '@/components/ui/button';\nimport { Input } from '@/components/ui/input';\nimport { Badge } from '@/components/ui/badge';\nimport { Calendar, MapPin, User, Clock, Package, Filter, X, ChevronDown, ChevronUp } from 'lucide-react';\nimport { LateCancellationsData } from '@/types/dashboard';\n\ninterface EnhancedLateCancellationsFilterSectionProps {\n  selectedLocation: string;\n  onLocationChange: (location: string) => void;\n  selectedTimeframe: string;\n  onTimeframeChange: (timeframe: string) => void;\n  selectedTrainer: string;\n  onTrainerChange: (trainer: string) => void;\n  selectedClass: string;\n  onClassChange: (classType: string) => void;\n  selectedProduct: string;\n  onProductChange: (product: string) => void;\n  selectedTimeSlot: string;\n  onTimeSlotChange: (timeSlot: string) => void;\n  dateRange: { start: string; end: string };\n  onDateRangeChange: (range: { start: string; end: string }) => void;\n  data: LateCancellationsData[];\n  onClearFilters: () => void;\n}\n\nexport function EnhancedLateCancellationsFilterSection({\n  selectedLocation,\n  onLocationChange,\n  selectedTimeframe,\n  onTimeframeChange,\n  selectedTrainer,\n  onTrainerChange,\n  selectedClass,\n  onClassChange,\n  selectedProduct,\n  onProductChange,\n  selectedTimeSlot,\n  onTimeSlotChange,\n  dateRange,\n  onDateRangeChange,\n  data,\n  onClearFilters\n}: EnhancedLateCancellationsFilterSectionProps) {\n  const [isExpanded, setIsExpanded] = useState(false);\n  \n  // Extract unique values for dropdowns\n  const locations = React.useMemo(() => \n    Array.from(new Set(data.map(item => item.location).filter(Boolean))), [data]\n  );\n\n  const trainers = React.useMemo(() => \n    Array.from(new Set(data.map(item => item.teacherName).filter(Boolean))), [data]\n  );\n\n  const classes = React.useMemo(() => \n    Array.from(new Set(data.map(item => item.cleanedClass).filter(Boolean))), [data]\n  );\n\n  const products = React.useMemo(() => \n    Array.from(new Set(data.map(item => item.cleanedProduct).filter(Boolean))), [data]\n  );\n\n  const timeframes = [\n    { value: 'all', label: 'All Time' },\n    { value: 'prev-month', label: 'Previous Month' },\n    { value: '1w', label: 'Last Week' },\n    { value: '2w', label: 'Last 2 Weeks' },\n    { value: '1m', label: 'Last Month' },\n    { value: '3m', label: 'Last 3 Months' },\n    { value: '6m', label: 'Last 6 Months' },\n    { value: '1y', label: 'Last 12 Months' },\n    { value: 'custom', label: 'Custom Range' }\n  ];\n\n  const timeSlots = [\n    { value: 'all', label: 'All Time Slots' },\n    { value: 'morning', label: 'Morning (6-12)' },\n    { value: 'afternoon', label: 'Afternoon (12-17)' },\n    { value: 'evening', label: 'Evening (17-22)' },\n    { value: 'late', label: 'Late Night (22+)' }\n  ];\n\n  const activeFiltersCount = [\n    selectedLocation !== 'all',\n    selectedTimeframe !== 'all',\n    selectedTrainer !== 'all',\n    selectedClass !== 'all',\n    selectedProduct !== 'all',\n    selectedTimeSlot !== 'all',\n    dateRange.start || dateRange.end\n  ].filter(Boolean).length;\n\n  if (!isExpanded) {\n    return (\n      <Card className=\"bg-gradient-to-br from-white via-red-50/30 to-white border-0 shadow-xl\">\n        <CardContent className=\"p-6\">\n          <div className=\"flex items-center justify-between\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"p-2 bg-gradient-to-r from-red-500 to-orange-500 rounded-lg\">\n                <Filter className=\"w-5 h-5 text-white\" />\n              </div>\n              <div>\n                <h3 className=\"font-bold text-slate-800\">Advanced Filters</h3>\n                <p className=\"text-sm text-slate-600\">Refine your late cancellations analysis</p>\n              </div>\n              {activeFiltersCount > 0 && (\n                <Badge className=\"bg-gradient-to-r from-red-600 to-orange-600 text-white\">\n                  {activeFiltersCount} active\n                </Badge>\n              )}\n            </div>\n            <Button\n              variant=\"outline\"\n              onClick={() => setIsExpanded(true)}\n              className=\"gap-2 border-red-200 text-red-700 hover:bg-red-50\"\n            >\n              <ChevronDown className=\"w-4 h-4\" />\n              Expand Filters\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n    );\n  }\n  return (\n    <Card className=\"bg-gradient-to-br from-white via-red-50/30 to-white border-0 shadow-xl overflow-hidden\">\n      <CardHeader className=\"bg-gradient-to-r from-red-600 to-orange-600 text-white\">\n        <CardTitle className=\"flex items-center justify-between\">\n          <div className=\"flex items-center gap-3\">\n            <Filter className=\"w-6 h-6\" />\n            <div>\n              <h3 className=\"text-xl font-bold\">Advanced Filters</h3>\n              <p className=\"text-red-100 text-sm\">Customize your late cancellations analysis</p>\n            </div>\n            <Badge className=\"bg-white/20 text-white border-white/30\">\n              {activeFiltersCount} Active\n            </Badge>\n          </div>\n          <div className=\"flex items-center gap-2\">\n            <Button\n              variant=\"outline\"\n              size=\"sm\"\n              onClick={onClearFilters}\n              disabled={activeFiltersCount === 0}\n              className=\"bg-white/10 border-white/30 text-white hover:bg-white/20\"\n            >\n              <X className=\"w-4 h-4 mr-1\" />\n              Reset\n            </Button>\n            <Button\n              variant=\"ghost\"\n              size=\"sm\"\n              onClick={() => setIsExpanded(false)}\n              className=\"text-white hover:bg-white/20\"\n            >\n              <ChevronUp className=\"w-4 h-4\" />\n            </Button>\n          </div>\n        </CardTitle>\n      </CardHeader>\n      \n      <CardContent className=\"p-8 space-y-6\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <h4 className=\"text-lg font-semibold text-slate-800\">Filter Options</h4>\n        </div>\n\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4\">\n          {/* Location Filter */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"location-select\" className=\"text-slate-700 flex items-center gap-2\">\n              <MapPin className=\"w-4 h-4\" />\n              Location\n            </Label>\n            <Select value={selectedLocation} onValueChange={onLocationChange}>\n              <SelectTrigger id=\"location-select\" className=\"bg-white border-slate-200\">\n                <SelectValue placeholder=\"Select location\" />\n              </SelectTrigger>\n              <SelectContent className=\"bg-white border-slate-200\">\n                <SelectItem value=\"all\">All Locations</SelectItem>\n                {locations.map(location => (\n                  <SelectItem key={location} value={location}>\n                    {location}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Timeframe Filter */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"timeframe-select\" className=\"text-slate-700 flex items-center gap-2\">\n              <Calendar className=\"w-4 h-4\" />\n              Timeframe\n            </Label>\n            <Select value={selectedTimeframe} onValueChange={onTimeframeChange}>\n              <SelectTrigger id=\"timeframe-select\" className=\"bg-white border-slate-200\">\n                <SelectValue placeholder=\"Select timeframe\" />\n              </SelectTrigger>\n              <SelectContent className=\"bg-white border-slate-200\">\n                {timeframes.map(timeframe => (\n                  <SelectItem key={timeframe.value} value={timeframe.value}>\n                    {timeframe.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Trainer Filter */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"trainer-select\" className=\"text-slate-700 flex items-center gap-2\">\n              <User className=\"w-4 h-4\" />\n              Trainer\n            </Label>\n            <Select value={selectedTrainer} onValueChange={onTrainerChange}>\n              <SelectTrigger id=\"trainer-select\" className=\"bg-white border-slate-200\">\n                <SelectValue placeholder=\"Select trainer\" />\n              </SelectTrigger>\n              <SelectContent className=\"bg-white border-slate-200\">\n                <SelectItem value=\"all\">All Trainers</SelectItem>\n                {trainers.map(trainer => (\n                  <SelectItem key={trainer} value={trainer}>\n                    {trainer}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Class Type Filter */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"class-select\" className=\"text-slate-700 flex items-center gap-2\">\n              <Package className=\"w-4 h-4\" />\n              Class Type\n            </Label>\n            <Select value={selectedClass} onValueChange={onClassChange}>\n              <SelectTrigger id=\"class-select\" className=\"bg-white border-slate-200\">\n                <SelectValue placeholder=\"Select class\" />\n              </SelectTrigger>\n              <SelectContent className=\"bg-white border-slate-200\">\n                <SelectItem value=\"all\">All Classes</SelectItem>\n                {classes.map(classType => (\n                  <SelectItem key={classType} value={classType}>\n                    {classType}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Product Filter */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"product-select\" className=\"text-slate-300 flex items-center gap-2\">\n              <Package className=\"w-4 h-4\" />\n              Product Type\n            </Label>\n            <Select value={selectedProduct} onValueChange={onProductChange}>\n              <SelectTrigger id=\"product-select\" className=\"bg-slate-800 border-slate-600 text-white\">\n                <SelectValue placeholder=\"Select product\" />\n              </SelectTrigger>\n              <SelectContent className=\"bg-slate-800 border-slate-600\">\n                <SelectItem value=\"all\" className=\"text-white hover:bg-slate-700\">All Products</SelectItem>\n                {products.map(product => (\n                  <SelectItem key={product} value={product} className=\"text-white hover:bg-slate-700\">\n                    {product}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Time Slot Filter */}\n          <div className=\"space-y-2\">\n            <Label htmlFor=\"timeslot-select\" className=\"text-slate-300 flex items-center gap-2\">\n              <Clock className=\"w-4 h-4\" />\n              Time Slot\n            </Label>\n            <Select value={selectedTimeSlot} onValueChange={onTimeSlotChange}>\n              <SelectTrigger id=\"timeslot-select\" className=\"bg-slate-800 border-slate-600 text-white\">\n                <SelectValue placeholder=\"Select time slot\" />\n              </SelectTrigger>\n              <SelectContent className=\"bg-slate-800 border-slate-600\">\n                {timeSlots.map(timeSlot => (\n                  <SelectItem key={timeSlot.value} value={timeSlot.value} className=\"text-white hover:bg-slate-700\">\n                    {timeSlot.label}\n                  </SelectItem>\n                ))}\n              </SelectContent>\n            </Select>\n          </div>\n\n          {/* Custom Date Range */}\n          {selectedTimeframe === 'custom' && (\n            <>\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"start-date\" className=\"text-slate-700\">Start Date</Label>\n                <Input\n                  id=\"start-date\"\n                  type=\"date\"\n                  value={dateRange.start}\n                  onChange={(e) => onDateRangeChange({ ...dateRange, start: e.target.value })}\n                  className=\"bg-white border-slate-200\"\n                />\n              </div>\n\n              <div className=\"space-y-2\">\n                <Label htmlFor=\"end-date\" className=\"text-slate-700\">End Date</Label>\n                <Input\n                  id=\"end-date\"\n                  type=\"date\"\n                  value={dateRange.end}\n                  onChange={(e) => onDateRangeChange({ ...dateRange, end: e.target.value })}\n                  className=\"bg-white border-slate-200\"\n                />\n              </div>\n            </>\n          )}\n        </div>\n      </CardContent>\n    </Card>\n  );\n}","import React, { useEffect, useState, useMemo } from 'react';\nimport { useNavigate } from 'react-router-dom';\nimport { useLateCancellationsData } from '@/hooks/useLateCancellationsData';\nimport { useGlobalLoading } from '@/hooks/useGlobalLoading';\nimport { LateCancellationsMetricCards } from '@/components/dashboard/LateCancellationsMetricCards';\nimport { LateCancellationsInteractiveCharts } from '@/components/dashboard/LateCancellationsInteractiveCharts';\nimport { EnhancedLateCancellationsTopBottomLists } from '@/components/dashboard/EnhancedLateCancellationsTopBottomLists';\nimport { EnhancedLateCancellationsDataTables } from '@/components/dashboard/EnhancedLateCancellationsDataTables';\nimport { EnhancedLateCancellationsFilterSection } from '@/components/dashboard/EnhancedLateCancellationsFilterSection';\nimport { LateCancellationsMonthOnMonthTable } from '@/components/dashboard/LateCancellationsMonthOnMonthTable';\nimport { Button } from '@/components/ui/button';\nimport { Home, XCircle } from 'lucide-react';\nimport { Footer } from '@/components/ui/footer';\nimport { AdvancedExportButton } from '@/components/ui/AdvancedExportButton';\nimport { InfoPopover } from '@/components/ui/InfoSidebar';\nimport { LateCancellationsDrillDownModal } from '@/components/dashboard/LateCancellationsDrillDownModal';\nimport DashboardMotionHero from '@/components/ui/DashboardMotionHero';\nimport { formatNumber } from '@/utils/formatters';\nimport '@/components/dashboard/trainer-performance-styles.css';\nimport { StudioLocationTabs } from '@/components/ui/StudioLocationTabs';\n\nconst LateCancellations = () => {\n  const { data: lateCancellationsData, allCheckins, loading } = useLateCancellationsData();\n  const { isLoading, setLoading } = useGlobalLoading();\n  const navigate = useNavigate();\n  \n  // Location tabs state\n  const [activeLocation, setActiveLocation] = useState('kwality');\n  \n  // Enhanced filter states - Default to previous month\n  const [selectedTimeframe, setSelectedTimeframe] = useState('prev-month');\n  const [selectedTrainer, setSelectedTrainer] = useState('all');\n  const [selectedClass, setSelectedClass] = useState('all');\n  const [selectedProduct, setSelectedProduct] = useState('all');\n  const [selectedTimeSlot, setSelectedTimeSlot] = useState('all');\n  const [dateRange, setDateRange] = useState({ start: '', end: '' });\n  \n  // Drill down modal state\n  const [drillDownData, setDrillDownData] = useState<any>(null);\n  const [isDrillDownOpen, setIsDrillDownOpen] = useState(false);\n  \n  // Get unique locations for tabs - use allCheckins if no late cancellations data\n  const locations = useMemo(() => {\n    const dataToCheck = Array.isArray(lateCancellationsData) && lateCancellationsData.length > 0 \n      ? lateCancellationsData \n      : (Array.isArray(allCheckins) ? allCheckins : []);\n    \n    if (dataToCheck.length === 0) {\n      // Always show default locations even if no data\n      return [\n        { id: 'all', name: 'All Locations' },\n        { id: 'kwality', name: 'Kwality House' },\n        { id: 'supreme', name: 'Supreme HQ' },\n        { id: 'kenkere', name: 'Kenkere House' }\n      ];\n    }\n    \n    const uniqueLocations = Array.from(new Set(dataToCheck.map(item => item?.location).filter(Boolean)));\n      return [\n        { id: 'all', name: 'All Locations' },\n        { id: 'kwality', name: 'Kwality House' },\n        { id: 'supreme', name: 'Supreme HQ' },\n        { id: 'kenkere', name: 'Kenkere House' },\n        { id: 'popup', name: 'Pop-up' }\n      ].filter(loc => loc.id === 'all' || uniqueLocations.some(ul => \n      loc.id === 'kwality' ? ul.includes('Kwality') :\n      loc.id === 'supreme' ? ul.includes('Supreme') :\n      loc.id === 'kenkere' ? ul.includes('Kenkere') :\n      loc.id === 'popup' ? (ul.includes('Pop') || ul.includes('Pop-up') || ul.includes('Popup')) : false\n    ));\n  }, [lateCancellationsData, allCheckins]);\n  \n  // Helper functions for consistent date parsing\n  const parseItemDate = (dateStr: string): Date | null => {\n    if (!dateStr) return null;\n    \n    let parsedDate: Date;\n    \n    if (dateStr.includes('-')) {\n      // ISO format: YYYY-MM-DD\n      parsedDate = new Date(dateStr);\n    } else if (dateStr.includes('/')) {\n      const parts = dateStr.split('/');\n      if (parts.length === 3) {\n        // DD/MM/YYYY format\n        parsedDate = new Date(parseInt(parts[2]), parseInt(parts[1]) - 1, parseInt(parts[0]));\n      } else {\n        return null;\n      }\n    } else {\n      return null;\n    }\n    \n    // Normalize to start of day in local timezone for consistent comparison\n    parsedDate.setHours(0, 0, 0, 0);\n    return parsedDate;\n  };\n  \n  // Helper function to normalize date to start of day\n  const normalizeDate = (date: Date): Date => {\n    const normalized = new Date(date);\n    normalized.setHours(0, 0, 0, 0);\n    return normalized;\n  };\n  \n  // Enhanced filter data based on all selected filters\n  const filteredData = useMemo(() => {\n    if (!Array.isArray(lateCancellationsData)) return [];\n    \n    let filtered = lateCancellationsData;\n    \n    // Location tab filter\n    if (activeLocation !== 'all') {\n      filtered = filtered.filter(item => {\n        const location = (item?.location || '').toString().toLowerCase();\n        if (activeLocation === 'kwality') return location.includes('kwality') || location.includes('kemps');\n        if (activeLocation === 'supreme') return location.includes('supreme') || location.includes('bandra');\n        if (activeLocation === 'kenkere') return location.includes('kenkere');\n        if (activeLocation === 'popup') return location.includes('pop') || location.includes('popup') || location.includes('pop-up');\n        return true;\n      });\n    }\n    \n    // Trainer filter\n    if (selectedTrainer !== 'all') {\n      filtered = filtered.filter(item => item?.teacherName === selectedTrainer);\n    }\n    \n    // Class filter\n    if (selectedClass !== 'all') {\n      filtered = filtered.filter(item => item?.cleanedClass === selectedClass);\n    }\n    \n    // Product filter\n    if (selectedProduct !== 'all') {\n      filtered = filtered.filter(item => item?.cleanedProduct === selectedProduct);\n    }\n    \n    // Time slot filter\n    if (selectedTimeSlot !== 'all') {\n      filtered = filtered.filter(item => {\n        if (!item?.time) return false;\n        const hour = parseInt(item.time.split(':')[0]);\n        switch (selectedTimeSlot) {\n          case 'morning':\n            return hour >= 6 && hour < 12;\n          case 'afternoon':\n            return hour >= 12 && hour < 17;\n          case 'evening':\n            return hour >= 17 && hour < 22;\n          case 'late':\n            return hour >= 22 || hour < 6;\n          default:\n            return true;\n        }\n      });\n    }\n    \n    // Timeframe filter\n    if (selectedTimeframe !== 'all') {\n      const now = new Date();\n      let startDate = new Date();\n      let endDate = new Date();\n      \n      switch (selectedTimeframe) {\n        case '1w':\n          startDate.setDate(now.getDate() - 7);\n          startDate = normalizeDate(startDate);\n          endDate = normalizeDate(now);\n          break;\n        case '2w':\n          startDate.setDate(now.getDate() - 14);\n          startDate = normalizeDate(startDate);\n          endDate = normalizeDate(now);\n          break;\n        case '1m':\n          startDate.setMonth(now.getMonth() - 1);\n          startDate = normalizeDate(startDate);\n          endDate = normalizeDate(now);\n          break;\n        case 'prev-month':\n          // Previous complete month - first day to last day\n          startDate = new Date(now.getFullYear(), now.getMonth() - 1, 1);\n          startDate.setHours(0, 0, 0, 0);\n          endDate = new Date(now.getFullYear(), now.getMonth(), 0);\n          endDate.setHours(0, 0, 0, 0);\n          filtered = filtered.filter(item => {\n            const itemDate = parseItemDate(item?.dateIST);\n            if (!itemDate) return false;\n            return itemDate >= startDate && itemDate <= endDate;\n          });\n          return filtered;\n        case '3m':\n          startDate.setMonth(now.getMonth() - 3);\n          startDate = normalizeDate(startDate);\n          endDate = normalizeDate(now);\n          break;\n        case '6m':\n          startDate.setMonth(now.getMonth() - 6);\n          startDate = normalizeDate(startDate);\n          endDate = normalizeDate(now);\n          break;\n        case '1y':\n          startDate.setFullYear(now.getFullYear() - 1);\n          startDate = normalizeDate(startDate);\n          endDate = normalizeDate(now);\n          break;\n        case 'custom':\n          if (dateRange.start || dateRange.end) {\n            const customStart = dateRange.start ? normalizeDate(new Date(dateRange.start)) : new Date('2020-01-01');\n            const customEnd = dateRange.end ? normalizeDate(new Date(dateRange.end)) : normalizeDate(now);\n            filtered = filtered.filter(item => {\n              const itemDate = parseItemDate(item?.dateIST);\n              if (!itemDate) return false;\n              return itemDate >= customStart && itemDate <= customEnd;\n            });\n          }\n          return filtered;\n        default:\n          return filtered;\n      }\n      \n      filtered = filtered.filter(item => {\n        const itemDate = parseItemDate(item?.dateIST);\n        if (!itemDate) return false;\n        return itemDate >= startDate && itemDate <= endDate;\n      });\n    }\n    \n    return filtered;\n  }, [lateCancellationsData, activeLocation, selectedTimeframe, selectedTrainer, selectedClass, selectedProduct, selectedTimeSlot, dateRange]);\n\n  // Clear all filters function\n  const clearAllFilters = () => {\n    setSelectedTimeframe('prev-month');\n    setSelectedTrainer('all');\n    setSelectedClass('all');\n    setSelectedProduct('all');\n    setSelectedTimeSlot('all');\n    setDateRange({ start: '', end: '' });\n  };\n\n  // Handle drill down click\n  const handleDrillDownClick = (data: any) => {\n    setDrillDownData(data);\n    setIsDrillDownOpen(true);\n  };\n\n  // Filter data for charts (exempt from date range)\n  const chartData = useMemo(() => {\n    if (!Array.isArray(lateCancellationsData)) return [];\n    \n    let filtered = lateCancellationsData;\n    \n    // Apply all filters except timeframe for charts\n    if (activeLocation !== 'all') {\n      filtered = filtered.filter(item => {\n        const location = (item?.location || '').toString().toLowerCase();\n        if (activeLocation === 'kwality') return location.includes('kwality') || location.includes('kemps');\n        if (activeLocation === 'supreme') return location.includes('supreme') || location.includes('bandra');\n        if (activeLocation === 'kenkere') return location.includes('kenkere');\n        if (activeLocation === 'popup') return location.includes('pop') || location.includes('popup') || location.includes('pop-up');\n        return true;\n      });\n    }\n    \n    if (selectedTrainer !== 'all') {\n      filtered = filtered.filter(item => item?.teacherName === selectedTrainer);\n    }\n    \n    if (selectedClass !== 'all') {\n      filtered = filtered.filter(item => item?.cleanedClass === selectedClass);\n    }\n    \n    if (selectedProduct !== 'all') {\n      filtered = filtered.filter(item => item?.cleanedProduct === selectedProduct);\n    }\n    \n    if (selectedTimeSlot !== 'all') {\n      filtered = filtered.filter(item => {\n        if (!item?.time) return false;\n        const hour = parseInt(item.time.split(':')[0]);\n        switch (selectedTimeSlot) {\n          case 'morning':\n            return hour >= 6 && hour < 12;\n          case 'afternoon':\n            return hour >= 12 && hour < 17;\n          case 'evening':\n            return hour >= 17 && hour < 22;\n          case 'late':\n            return hour >= 22 || hour < 6;\n          default:\n            return true;\n        }\n      });\n    }\n    \n    return filtered;\n  }, [lateCancellationsData, activeLocation, selectedTrainer, selectedClass, selectedProduct, selectedTimeSlot]);\n\n  // Apply the same filters to allCheckins for global consistency, including timeframe\n  const filteredCheckins = useMemo(() => {\n    if (!Array.isArray(allCheckins)) return [] as any[];\n    let filtered: any[] = allCheckins;\n\n    // Location filter\n    if (activeLocation !== 'all') {\n      filtered = filtered.filter(item => {\n        const location = item?.location || '';\n        return activeLocation === 'kwality' ? location.includes('Kwality') :\n               activeLocation === 'supreme' ? location.includes('Supreme') :\n               activeLocation === 'kenkere' ? location.includes('Kenkere') : true;\n      });\n    }\n\n    // Trainer filter\n    if (selectedTrainer !== 'all') {\n      filtered = filtered.filter(item => item?.teacherName === selectedTrainer);\n    }\n\n    // Class filter\n    if (selectedClass !== 'all') {\n      filtered = filtered.filter(item => item?.cleanedClass === selectedClass);\n    }\n\n    // Product filter\n    if (selectedProduct !== 'all') {\n      filtered = filtered.filter(item => item?.cleanedProduct === selectedProduct);\n    }\n\n    // Time slot filter\n    if (selectedTimeSlot !== 'all') {\n      filtered = filtered.filter(item => {\n        if (!item?.time) return false;\n        const hour = parseInt(item.time.split(':')[0]);\n        switch (selectedTimeSlot) {\n          case 'morning':\n            return hour >= 6 && hour < 12;\n          case 'afternoon':\n            return hour >= 12 && hour < 17;\n          case 'evening':\n            return hour >= 17 && hour < 22;\n          case 'late':\n            return hour >= 22 || hour < 6;\n          default:\n            return true;\n        }\n      });\n    }\n\n    // Timeframe filter mirrors cancellations\n    if (selectedTimeframe !== 'all') {\n      const now = new Date();\n      let startDate = new Date();\n      let endDate = new Date();\n      switch (selectedTimeframe) {\n        case '1w':\n          startDate.setDate(now.getDate() - 7);\n          startDate = normalizeDate(startDate);\n          endDate = normalizeDate(now);\n          break;\n        case '2w':\n          startDate.setDate(now.getDate() - 14);\n          startDate = normalizeDate(startDate);\n          endDate = normalizeDate(now);\n          break;\n        case '1m':\n          startDate.setMonth(now.getMonth() - 1);\n          startDate = normalizeDate(startDate);\n          endDate = normalizeDate(now);\n          break;\n        case 'prev-month': {\n          startDate = new Date(now.getFullYear(), now.getMonth() - 1, 1);\n          startDate.setHours(0, 0, 0, 0);\n          endDate = new Date(now.getFullYear(), now.getMonth(), 0);\n          endDate.setHours(0, 0, 0, 0);\n          filtered = filtered.filter(item => {\n            const itemDate = parseItemDate(item?.dateIST);\n            if (!itemDate) return false;\n            return itemDate >= startDate && itemDate <= endDate;\n          });\n          return filtered;\n        }\n        case '3m':\n          startDate.setMonth(now.getMonth() - 3);\n          startDate = normalizeDate(startDate);\n          endDate = normalizeDate(now);\n          break;\n        case '6m':\n          startDate.setMonth(now.getMonth() - 6);\n          startDate = normalizeDate(startDate);\n          endDate = normalizeDate(now);\n          break;\n        case '1y':\n          startDate.setFullYear(now.getFullYear() - 1);\n          startDate = normalizeDate(startDate);\n          endDate = normalizeDate(now);\n          break;\n        case 'custom': {\n          if (dateRange.start || dateRange.end) {\n            const customStart = dateRange.start ? normalizeDate(new Date(dateRange.start)) : new Date('2020-01-01');\n            const customEnd = dateRange.end ? normalizeDate(new Date(dateRange.end)) : normalizeDate(now);\n            filtered = filtered.filter(item => {\n              const itemDate = parseItemDate(item?.dateIST);\n              if (!itemDate) return false;\n              return itemDate >= customStart && itemDate <= customEnd;\n\n            });\n          }\n          return filtered;\n        }\n        default:\n          break;\n      }\n      filtered = filtered.filter(item => {\n        const itemDate = parseItemDate(item?.dateIST);\n        if (!itemDate) return false;\n        return itemDate >= startDate && itemDate <= endDate;\n      });\n    }\n    return filtered;\n  }, [allCheckins, activeLocation, selectedTrainer, selectedClass, selectedProduct, selectedTimeSlot, selectedTimeframe, dateRange]);\n\n  const heroMetrics = useMemo(() => {\n    // If no late cancellations, show total checkins across locations\n    if (!filteredData || filteredData.length === 0) {\n      if (!filteredCheckins || filteredCheckins.length === 0) {\n        return [{ location: 'No Data', label: 'Available', value: '—' }];\n      }\n      \n      const locations = [\n        { key: 'Kwality', name: 'Kwality' },\n        { key: 'Supreme', name: 'Supreme' },\n        { key: 'Kenkere', name: 'Kenkere' }\n      ];\n\n      return locations.map(location => {\n        const locationData = filteredCheckins.filter(item => \n          item.location?.includes(location.key)\n        );\n        \n        return {\n          location: location.name,\n          label: 'Total Checkins',\n          value: formatNumber(locationData.length)\n        };\n      });\n    }\n\n    const locations = [\n      { key: 'Kwality', name: 'Kwality' },\n      { key: 'Supreme', name: 'Supreme' },\n      { key: 'Kenkere', name: 'Kenkere' }\n    ];\n\n    return locations.map(location => {\n      const locationData = filteredData.filter(item => \n        item.location?.includes(location.key)\n      );\n      \n      const totalCancellations = locationData.length;\n      \n      return {\n        location: location.name,\n        label: 'Late Cancellations',\n        value: formatNumber(totalCancellations)\n      };\n    });\n  }, [filteredData, filteredCheckins]);\n\n  useEffect(() => {\n    setLoading(loading, 'Loading late cancellations data...');\n  }, [loading, setLoading]);\n\n  // Remove individual loader - rely on global loader only\n\n  const exportButton = (\n    <AdvancedExportButton \n      lateCancellationsData={filteredData}\n      defaultFileName={`late-cancellations-${activeLocation}`}\n      size=\"sm\"\n      variant=\"ghost\"\n      buttonClassName=\"rounded-xl border border-white/30 text-white hover:border-white/50\"\n    />\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-slate-50 via-purple-50/30 to-pink-50/20\">\n      <DashboardMotionHero \n        title=\"Late Cancellations\"\n        subtitle=\"Comprehensive analysis of late cancellation patterns across locations, classes, trainers, and products\"\n        metrics={heroMetrics}\n        extra={exportButton}\n      />\n\n      {/* Main Content */}\n      <div className=\"relative\">\n        <div className=\"container mx-auto px-6 py-8\">\n          {/* Location Tabs - New Animated Component */}\n          <StudioLocationTabs\n            activeLocation={activeLocation}\n            onLocationChange={setActiveLocation}\n            className=\"mb-8\"\n          />\n\n          {/* Content for Selected Location */}\n          <div className=\"space-y-8\">\n            {/* No Data Message */}\n            {lateCancellationsData.length === 0 && (\n              <div className=\"bg-blue-50 border border-blue-200 rounded-lg p-6 text-center\">\n                <p className=\"text-blue-900 font-medium\">\n                  No late cancellations recorded in the selected period.\n                </p>\n                <p className=\"text-blue-700 text-sm mt-2\">\n                  Showing all checkins for reference. Adjust filters to view different date ranges.\n                </p>\n              </div>\n            )}\n            \n            {/* Enhanced Filter Section */}\n            <EnhancedLateCancellationsFilterSection\n              selectedLocation=\"all\"\n              onLocationChange={() => {}}\n              selectedTimeframe={selectedTimeframe}\n              onTimeframeChange={setSelectedTimeframe}\n              selectedTrainer={selectedTrainer}\n              onTrainerChange={setSelectedTrainer}\n              selectedClass={selectedClass}\n              onClassChange={setSelectedClass}\n              selectedProduct={selectedProduct}\n              onProductChange={setSelectedProduct}\n              selectedTimeSlot={selectedTimeSlot}\n              onTimeSlotChange={setSelectedTimeSlot}\n              dateRange={dateRange}\n              onDateRangeChange={setDateRange}\n              data={lateCancellationsData}\n              onClearFilters={clearAllFilters}\n            />\n            \n            {/* Metric Cards */}\n            <LateCancellationsMetricCards data={filteredData} onMetricClick={handleDrillDownClick} />\n            \n            {/* Interactive Charts */}\n            <LateCancellationsInteractiveCharts data={chartData} />\n            \n            {/* Enhanced Top/Bottom Lists */}\n            <EnhancedLateCancellationsTopBottomLists data={filteredData} />\n            \n            {/* Month on Month Analysis Table */}\n            <LateCancellationsMonthOnMonthTable \n              data={chartData} \n              onRowClick={handleDrillDownClick} \n            />\n            \n            {/* Enhanced Detailed Data Tables with Pagination */}\n            <EnhancedLateCancellationsDataTables data={filteredData} allCheckins={filteredCheckins} onDrillDown={handleDrillDownClick} />\n          </div>\n        </div>\n      </div>\n      \n      {/* Drill Down Modal */}\n      <LateCancellationsDrillDownModal\n        isOpen={isDrillDownOpen}\n        onClose={() => setIsDrillDownOpen(false)}\n        data={drillDownData}\n      />\n      \n      <Footer />\n    </div>\n  );\n};\n\nexport default LateCancellations;\n"],"names":["LateCancellationsInteractiveCharts","data","timeRange","setTimeRange","useState","activeChart","setActiveChart","chartMetric","setChartMetric","filteredData","useMemo","now","startDate","item","itemDate","monthlyData","monthlyGroups","acc","date","monthKey","group","a","b","topLocationsData","locationGroups","location","classTypeData","classGroups","classType","name","value","dayOfWeekData","dayGroups","day","COLORS","formatTooltipValue","formatNumber","handleTimeRangeChange","useCallback","newRange","handleChartChange","newChart","handleMetricChange","newMetric","jsxs","Card","jsx","CardHeader","CardTitle","BarChart3","CardContent","renderChart","Button","ResponsiveContainer","LineChart","CartesianGrid","XAxis","YAxis","Tooltip","Line","BarChart","Bar","PieChart","Pie","percent","entry","index","Cell","Calendar","key","label","TrendingUp","LineChartIcon","PieChartIcon","EnhancedLateCancellationsTopBottomLists","activeType","setActiveType","showMore","setShowMore","getGroupedData","grouped","getTypeConfig","type","Users","MapPin","User","Package","renderRankingCard","config","displayCount","topItems","bottomItems","getRankIcon","isTop","Crown","Trophy","Medal","Star","ArrowDownCircle","TrendingDown","ThumbsDown","AlertCircle","React","Badge","Tabs","TabsList","TabsTrigger","TabsContent","ITEMS_PER_PAGE","EnhancedLateCancellationsDataTables","allCheckins","onDrillDown","metricsRegistry","useMetricsTablesRegistry","multipleDayTableRef","useRef","TableContainer","children","tableRef","activeTab","setActiveTab","currentPage","setCurrentPage","isDescending","setIsDescending","multipleCancellationsPerDay","memberDayGroups","multipleCheckinsPerDay","memberDayStats","member","multipleBookingsPerDay","checkinsPerDay","map","g","bookingsPerDay","renderDailyAggregationTable","rows","title","tableId","pageRows","getPaginatedData","Fragment","Table","TableHeader","TableRow","TableHead","TableBody","r","idx","TableCell","d","formatCurrency","PaginationControls","PersistentTableFooter","visitFrequencyBreakdowns","memberTotals","id","buckets","byFormatMap","byMembershipMap","memberId","total","memberRows","formats","products","revenue","s","bucket","fmt","prod","toRows","obj","v","cancellationsByClass","hour","timeSlot","peakTime","peakDay","cancellationsByMembership","membershipGroups","membershipType","topCancellersByMember","tableData","startIndex","endIndex","getTotalPages","currentData","paginatedData","totalPages","prev","ChevronLeft","_","i","pageNum","ChevronRight","renderMultipleCancellationsTable","tabType","AlertTriangle","memberData","memberName","itemMemberName","renderClassTypeTable","renderBySpecificClassTable","renderMembershipTypeTable","membership","renderTrainerAnalysisTable","trainerData","trainerGroups","trainer","paginatedTrainerData","n","renderLocationAnalysisTable","locationData","paginatedLocationData","trainerAnalysis","locationAnalysis","slot","generateAllTabsContent","sections","stamp","serialize","headers","m","c","t","l","byFormat","byMembership","bucketRows","CopyTableButton","totalMembers","list","EnhancedLateCancellationsFilterSection","selectedLocation","onLocationChange","selectedTimeframe","onTimeframeChange","selectedTrainer","onTrainerChange","selectedClass","onClassChange","selectedProduct","onProductChange","selectedTimeSlot","onTimeSlotChange","dateRange","onDateRangeChange","onClearFilters","isExpanded","setIsExpanded","locations","trainers","classes","timeframes","timeSlots","activeFiltersCount","Filter","X","ChevronUp","Label","Select","SelectTrigger","SelectValue","SelectContent","SelectItem","timeframe","product","Clock","Input","e","ChevronDown","LateCancellations","lateCancellationsData","loading","useLateCancellationsData","isLoading","setLoading","useGlobalLoading","useNavigate","activeLocation","setActiveLocation","setSelectedTimeframe","setSelectedTrainer","setSelectedClass","setSelectedProduct","setSelectedTimeSlot","setDateRange","drillDownData","setDrillDownData","isDrillDownOpen","setIsDrillDownOpen","dataToCheck","uniqueLocations","loc","ul","parseItemDate","dateStr","parsedDate","parts","normalizeDate","normalized","filtered","endDate","customStart","customEnd","clearAllFilters","handleDrillDownClick","chartData","filteredCheckins","heroMetrics","totalCancellations","useEffect","exportButton","AdvancedExportButton","DashboardMotionHero","StudioLocationTabs","LateCancellationsMetricCards","LateCancellationsMonthOnMonthTable","LateCancellationsDrillDownModal","Footer"],"mappings":"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"}