import{j as e,D as $,n as F,o as M,q as O,B as U,C as o,a as x,b as m,c as d}from"./index-Bm67KBkU.js";import{B as h,f as u,a as g,b as C}from"./index-DkD_C-d1.js";import{T as V,a as B,b as N,c as b}from"./tabs-BTrhdLSC.js";import{S as H}from"./star-qy423-d6.js";import{T as y}from"./googleAuth-BGo8ElRc.js";import{C as T,D as q}from"./dollar-sign-CKqx8kbC.js";import{Z as G}from"./zap-IfyovFNW.js";import{U as D}from"./users-7Ku-1TDB.js";import{S as L}from"./SalesMotionHero-sGphstF2.js";import{T as Z}from"./trending-down-B5K1omnR.js";import{A as K}from"./activity-CeUP9h5f.js";import{T as J}from"./target-BmxdxojS.js";const ce=({isOpen:R,onClose:w,data:t,type:c})=>{if(!t)return null;const S=Array.isArray(t)&&t.length>0&&t[0].hasOwnProperty("status"),A=()=>{if(!S)return null;const a=t,r=a.filter(n=>n.status==="Active").length,l=a.filter(n=>n.status==="Churned").length,i=a.filter(n=>n.status==="Frozen").length;return e.jsxs(o,{className:"bg-gradient-to-br from-slate-50 to-slate-100 border-slate-200",children:[e.jsx(x,{children:e.jsxs(m,{className:"flex items-center gap-2 text-slate-800",children:[e.jsx(D,{className:"w-5 h-5"}),"Member Details (",a.length," total)"]})}),e.jsxs(d,{children:[e.jsxs("div",{className:"grid grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:r}),e.jsx("div",{className:"text-sm text-green-600",children:"Active"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:l}),e.jsx("div",{className:"text-sm text-red-600",children:"Churned"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-yellow-600",children:i}),e.jsx("div",{className:"text-sm text-yellow-600",children:"Frozen"})]})]}),e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:a.slice(0,50).map((n,f)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"font-medium text-slate-800",children:[n.firstName," ",n.lastName]}),e.jsxs("div",{className:"text-sm text-slate-600",children:[n.email," • ",n.membershipName]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:`text-sm font-medium ${n.status==="Active"?"text-green-600":n.status==="Churned"?"text-red-600":"text-yellow-600"}`,children:n.status}),e.jsxs("div",{className:"text-xs text-slate-500",children:["End: ",n.endDate]})]})]},f))})]})]})},j=(a,r=0)=>{const l=Number(a);return isNaN(l)?r:l},s=(()=>{const a=t.filteredTransactionData||t.rawData||t.transactionData||[];if((c==="class"||c==="class-drill")&&(Array.isArray(t.sessionsFiltered)||Array.isArray(t.checkinsFiltered))){const r=t.sessionsFiltered||[],l=t.checkinsFiltered||[],i=r.length,n=r.reduce((v,p)=>v+(p.totalPaid||p.revenue||0),0),f=r.reduce((v,p)=>v+(p.checkedInCount||0),0);return{...t,filteredData:r,sessions:r,checkins:l,specificRevenue:t.specificRevenue||n,specificTransactions:t.specificTransactions||i,specificCustomers:t.specificCustomers||f}}if(c==="product"&&t.name){const r=t.name;let l=a;return!t.filteredTransactionData&&a.length>0&&(l=a.filter(i=>i.productName===r||i.membershipName===r||i.itemName===r||i.cleanedProduct===r||i.paymentItem===r)),{...t,filteredData:l,specificRevenue:t.specificRevenue||l.reduce((i,n)=>i+(n.paymentValue||0),0),specificTransactions:t.specificTransactions||l.length,specificCustomers:t.specificCustomers||new Set(l.map(i=>i.memberId||i.customerEmail)).size}}if(c==="category"&&t.name){const r=t.name;let l=a;return!t.filteredTransactionData&&a.length>0&&(l=a.filter(i=>i.cleanedCategory===r||i.category===r)),{...t,filteredData:l,specificRevenue:t.specificRevenue||l.reduce((i,n)=>i+(n.paymentValue||0),0),specificTransactions:t.specificTransactions||l.length,specificCustomers:t.specificCustomers||new Set(l.map(i=>i.memberId||i.customerEmail)).size}}return c==="trainer"&&t.teacherName?{name:t.teacherName,location:t.location,classType:t.classType||"Mixed",totalSessions:t.sessions||t.totalSessions||0,totalRevenue:t.revenue||t.totalPaid||0,totalCustomers:t.customers||t.totalCustomers||0,utilization:t.utilization||0,avgCheckedIn:t.avgCheckedIn||0,cancellationRate:t.cancellationRate||0}:{...t,filteredData:a,specificRevenue:t.specificRevenue,specificTransactions:t.specificTransactions,specificCustomers:t.specificCustomers}})(),P=()=>{const a=j(s.specificRevenue||s.totalRevenue||s.revenue||s.grossRevenue),r=j(s.specificTransactions||s.transactions||s.totalTransactions),l=j(s.specificCustomers||s.uniqueMembers||s.totalCustomers||s.customers),i=j(s.totalChange||s.change||s.growth);return e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsx(o,{className:"bg-gradient-to-br from-blue-500 to-blue-600 text-white border-0 shadow-lg",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(q,{className:"w-5 h-5 text-blue-100"}),e.jsx(h,{className:"bg-white/20 text-white border-0",children:"Revenue"})]}),e.jsx("div",{className:"text-2xl font-bold",children:u(a)}),e.jsx("div",{className:"text-blue-100 text-sm",children:"Total Revenue"})]})}),e.jsx(o,{className:"bg-gradient-to-br from-green-500 to-green-600 text-white border-0 shadow-lg",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(D,{className:"w-5 h-5 text-green-100"}),e.jsx(h,{className:"bg-white/20 text-white border-0",children:"Customers"})]}),e.jsx("div",{className:"text-2xl font-bold",children:g(l)}),e.jsx("div",{className:"text-green-100 text-sm",children:"Unique Customers"})]})}),e.jsx(o,{className:"bg-gradient-to-br from-purple-500 to-purple-600 text-white border-0 shadow-lg",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(L,{className:"w-5 h-5 text-purple-100"}),e.jsx(h,{className:"bg-white/20 text-white border-0",children:"Volume"})]}),e.jsx("div",{className:"text-2xl font-bold",children:g(r)}),e.jsx("div",{className:"text-purple-100 text-sm",children:"Transactions"})]})}),e.jsx(o,{className:"bg-gradient-to-br from-orange-500 to-orange-600 text-white border-0 shadow-lg",children:e.jsxs(d,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i>=0?e.jsx(y,{className:"w-5 h-5 text-orange-100"}):e.jsx(Z,{className:"w-5 h-5 text-orange-100"}),e.jsx(h,{className:"bg-white/20 text-white border-0",children:"Growth"})]}),e.jsx("div",{className:"text-2xl font-bold",children:i!==0?`${i>0?"+":""}${i.toFixed(1)}%`:"N/A"}),e.jsx("div",{className:"text-orange-100 text-sm",children:"Performance"})]})})]})},I=()=>c!=="trainer"?null:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(o,{className:"bg-gradient-to-br from-slate-50 to-slate-100 border-slate-200",children:[e.jsx(x,{children:e.jsxs(m,{className:"flex items-center gap-2 text-slate-800",children:[e.jsx(K,{className:"w-5 h-5"}),"Class Performance"]})}),e.jsx(d,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Total Sessions"}),e.jsx("div",{className:"text-xl font-bold text-slate-800",children:g(s.totalSessions)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Avg Check-in"}),e.jsx("div",{className:"text-xl font-bold text-blue-600",children:g(s.avgCheckedIn)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Utilization"}),e.jsx("div",{className:`text-xl font-bold ${s.utilization>=80?"text-green-600":"text-orange-600"}`,children:C(s.utilization/100)})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border",children:[e.jsx("div",{className:"text-sm text-slate-600",children:"Cancellation Rate"}),e.jsx("div",{className:`text-xl font-bold ${s.cancellationRate<=10?"text-green-600":"text-red-600"}`,children:C(s.cancellationRate/100)})]})]})})]}),e.jsxs(o,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsx(x,{children:e.jsxs(m,{className:"flex items-center gap-2 text-blue-800",children:[e.jsx(J,{className:"w-5 h-5"}),"Performance Insights"]})}),e.jsxs(d,{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border-l-4 border-blue-400",children:[e.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Class Type"}),e.jsx("div",{className:"text-blue-600",children:s.classType})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border-l-4 border-green-400",children:[e.jsx("div",{className:"text-sm font-medium text-green-800",children:"Revenue/Session"}),e.jsx("div",{className:"text-green-600",children:u(s.totalSessions>0?s.totalRevenue/s.totalSessions:0)})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border-l-4 border-purple-400",children:[e.jsx("div",{className:"text-sm font-medium text-purple-800",children:"Customer/Session"}),e.jsx("div",{className:"text-purple-600",children:(s.totalSessions>0?s.totalCustomers/s.totalSessions:0).toFixed(1)})]})]})]})]}),k=()=>{const a=s.filteredData||s.rawData||[];return a.length===0?null:e.jsxs(o,{className:"bg-gradient-to-br from-slate-50 to-slate-100",children:[e.jsx(x,{children:e.jsxs(m,{className:"flex items-center gap-2 text-slate-800",children:[e.jsx(T,{className:"w-5 h-5"}),"Transaction Details"]})}),e.jsxs(d,{children:[e.jsx("div",{className:"max-h-96 overflow-y-auto space-y-2",children:a.slice(0,20).map((r,l)=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-white rounded-lg border hover:bg-slate-50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-slate-800",children:r.membershipName||r.productName||r.itemName||"Transaction"}),e.jsxs("div",{className:"text-sm text-slate-600",children:[r.customerEmail||r.memberId," • ",r.date||"N/A"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold text-slate-800",children:u(r.paymentValue||r.amount||0)}),e.jsx("div",{className:"text-sm text-slate-600",children:r.paymentMethod||"N/A"})]})]},l))}),a.length>20&&e.jsxs("div",{className:"mt-4 text-center text-sm text-slate-600",children:["Showing 20 of ",a.length," transactions"]})]})]})},z=()=>c==="trainer"?`${s.name} - Trainer Performance`:c==="product"?`${s.name} - Product Analysis`:c==="class"?`${s.classType||"Class"} - Detailed Analytics`:`${s.name||"Item"} - Performance Analysis`,E=()=>c==="trainer"?`${s.location} • ${s.classType} Classes`:c==="product"?"Comprehensive product performance and customer insights":"Detailed performance breakdown and analytics";return e.jsx($,{open:R,onOpenChange:w,children:e.jsxs(F,{className:"max-w-7xl max-h-[95vh] overflow-y-auto bg-gradient-to-br from-white via-slate-50/30 to-white border-0 shadow-2xl",children:[e.jsx(M,{className:"pb-6 border-b border-slate-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(O,{className:"text-3xl font-bold bg-gradient-to-r from-slate-800 via-blue-600 to-purple-600 bg-clip-text text-transparent",children:z()}),e.jsx("p",{className:"text-slate-600 mt-2 text-lg",children:E()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(h,{className:"bg-blue-100 text-blue-800 border-0",children:c==="trainer"?"Trainer":c==="product"?"Product":"Analytics"}),e.jsx(U,{variant:"outline",onClick:w,children:"Close"})]})]})}),e.jsxs("div",{className:"pt-6 space-y-8",children:[P(),e.jsxs(V,{defaultValue:"overview",className:"w-full",children:[e.jsxs(B,{className:"grid w-full grid-cols-4 bg-slate-100",children:[e.jsxs(N,{value:"overview",className:"gap-2",children:[e.jsx(H,{className:"w-4 h-4"}),"Overview"]}),e.jsxs(N,{value:"performance",className:"gap-2",children:[e.jsx(y,{className:"w-4 h-4"}),"Performance"]}),e.jsxs(N,{value:"details",className:"gap-2",children:[e.jsx(T,{className:"w-4 h-4"}),"Details"]}),e.jsxs(N,{value:"insights",className:"gap-2",children:[e.jsx(G,{className:"w-4 h-4"}),"Insights"]})]}),e.jsxs(b,{value:"overview",className:"space-y-6",children:[A(),I(),e.jsxs(o,{className:"bg-gradient-to-br from-indigo-50 to-indigo-100 border-indigo-200",children:[e.jsx(x,{children:e.jsx(m,{className:"text-indigo-800",children:"Summary Statistics"})}),e.jsx(d,{children:e.jsxs("div",{className:"grid grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-indigo-600",children:u(s.specificRevenue||s.totalRevenue||0)}),e.jsx("div",{className:"text-sm text-indigo-600",children:"Total Revenue"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:g(s.specificTransactions||s.transactions||0)}),e.jsx("div",{className:"text-sm text-green-600",children:"Transactions"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:g(s.specificCustomers||s.customers||0)}),e.jsx("div",{className:"text-sm text-purple-600",children:"Customers"})]}),e.jsxs("div",{className:"text-center p-4 bg-white rounded-lg border",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:u((s.specificTransactions||s.transactions)>0?(s.specificRevenue||s.totalRevenue||0)/(s.specificTransactions||s.transactions||1):0)}),e.jsx("div",{className:"text-sm text-orange-600",children:"Avg Transaction"})]})]})})]})]}),e.jsx(b,{value:"performance",className:"space-y-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs(o,{className:"bg-gradient-to-br from-green-50 to-green-100 border-green-200",children:[e.jsx(x,{children:e.jsx(m,{className:"text-green-800",children:"Performance Metrics"})}),e.jsxs(d,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg",children:[e.jsx("span",{className:"text-green-700",children:"Revenue Growth"}),e.jsxs(h,{className:"bg-green-200 text-green-800",children:[s.totalChange>0?"+":"",s.totalChange?.toFixed(1)||0,"%"]})]}),e.jsxs("div",{className:"flex justify-between items-center p-3 bg-white rounded-lg",children:[e.jsx("span",{className:"text-green-700",children:"Performance Rating"}),e.jsx(h,{className:"bg-green-200 text-green-800",children:(s.specificRevenue||s.totalRevenue||0)>5e4?"Excellent":"Good"})]})]})]}),e.jsxs(o,{className:"bg-gradient-to-br from-blue-50 to-blue-100 border-blue-200",children:[e.jsx(x,{children:e.jsx(m,{className:"text-blue-800",children:"Key Insights"})}),e.jsxs(d,{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-white rounded-lg border-l-4 border-blue-400",children:[e.jsx("div",{className:"text-sm font-medium text-blue-800",children:"Market Position"}),e.jsx("div",{className:"text-blue-600",children:"Strong performer in category"})]}),e.jsxs("div",{className:"p-3 bg-white rounded-lg border-l-4 border-green-400",children:[e.jsx("div",{className:"text-sm font-medium text-green-800",children:"Customer Loyalty"}),e.jsx("div",{className:"text-green-600",children:"High retention rate"})]})]})]})]})}),e.jsx(b,{value:"details",children:k()}),e.jsx(b,{value:"insights",children:e.jsxs(o,{className:"bg-gradient-to-br from-purple-50 to-purple-100 border-purple-200",children:[e.jsx(x,{children:e.jsx(m,{className:"text-purple-800",children:"AI-Powered Insights"})}),e.jsx(d,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"p-4 bg-white rounded-lg border-l-4 border-purple-400",children:[e.jsx("h4",{className:"font-medium text-purple-800 mb-2",children:"Strengths"}),e.jsxs("ul",{className:"text-sm text-purple-600 space-y-1",children:[e.jsx("li",{children:"• Consistent revenue performance"}),e.jsx("li",{children:"• Strong customer engagement"}),e.jsx("li",{children:"• Effective conversion rates"})]})]}),e.jsxs("div",{className:"p-4 bg-white rounded-lg border-l-4 border-orange-400",children:[e.jsx("h4",{className:"font-medium text-orange-800 mb-2",children:"Opportunities"}),e.jsxs("ul",{className:"text-sm text-orange-600 space-y-1",children:[e.jsx("li",{children:"• Expand successful programs"}),e.jsx("li",{children:"• Optimize capacity utilization"}),e.jsx("li",{children:"• Enhance retention strategies"})]})]})]})})]})})]})]})]})})};export{ce as ModernDrillDownModal};
//# sourceMappingURL=ModernDrillDownModal-NFZuytV_.js.map
