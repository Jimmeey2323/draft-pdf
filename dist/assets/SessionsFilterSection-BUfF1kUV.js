import{r as j,j as e,C as $,a as z,b as L,B as r,X as C,c as A,Y as E,Z as I,$ as M,a0 as U,a1 as V,a2 as G,f as H,S as X}from"./index-Bm67KBkU.js";import{B as x}from"./index-DkD_C-d1.js";import{T as Y,a as Z,b,c as w}from"./tabs-BTrhdLSC.js";import{F as _,P as f,a as v,f as S,b as N,c as k}from"./select-CM-Birqk.js";import{u as q}from"./useFilteredSessionsData-DTLVtyFE.js";import{U as J}from"./users-7Ku-1TDB.js";import{A as Q}from"./activity-CeUP9h5f.js";import{C as c}from"./googleAuth-BGo8ElRc.js";import{C as K}from"./clock-BP1BFskn.js";import{C as R}from"./chevron-right-CbIMR3DA.js";const oe=({data:i,defaultCollapsed:F=!1})=>{const{filters:a,updateFilters:h,clearFilters:T}=q(),[P,O]=j.useState(null),[p,B]=j.useState(F),d=j.useMemo(()=>{const s=[...new Set(i.map(l=>l.trainerName).filter(Boolean))].sort(),t=[...new Set(i.map(l=>l.cleanedClass).filter(Boolean))].sort(),n=[...new Set(i.map(l=>l.dayOfWeek).filter(Boolean))].sort(),m=[...new Set(i.map(l=>l.time).filter(Boolean))].sort();return{trainers:s,classTypes:t,daysOfWeek:n,timeSlots:m}},[i]),g=[{key:"trainers",label:"Trainers",icon:J,options:d.trainers,values:a.trainers,description:"Filter by class instructors"},{key:"classTypes",label:"Class Types",icon:Q,options:d.classTypes,values:a.classTypes,description:"Filter by class formats"},{key:"dayOfWeek",label:"Days of Week",icon:c,options:d.daysOfWeek,values:a.dayOfWeek,description:"Filter by day of week"},{key:"timeSlots",label:"Time Slots",icon:K,options:d.timeSlots,values:a.timeSlots,description:"Filter by class times"}],y=(s,t)=>{const n=[...a[s]],m=n.indexOf(t);m>-1?n.splice(m,1):n.push(t),h({[s]:n})},o=(s,t)=>{h({dateRange:{...a.dateRange,[s]:t}})},D=s=>{h({[s]:[]})},u=g.reduce((s,t)=>s+t.values.length,0)+(a.dateRange.start?1:0)+(a.dateRange.end?1:0),W=({config:s})=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(s.icon,{className:"w-4 h-4 text-muted-foreground"}),e.jsx("label",{className:"font-medium text-sm",children:s.label}),s.values.length>0&&e.jsx(x,{variant:"secondary",className:"text-xs min-w-[20px] text-center",children:s.values.length})]}),s.values.length>0&&e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>D(s.key),className:"h-6 px-2 text-xs text-muted-foreground hover:text-foreground",children:"Clear"})]}),e.jsxs(f,{open:P===s.key,onOpenChange:t=>O(t?s.key:null),children:[e.jsx(v,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:"w-full justify-between text-left font-normal h-9",size:"sm",children:[e.jsx("span",{className:"truncate",children:s.values.length>0?`${s.values.length} selected`:`Select ${s.label.toLowerCase()}`}),e.jsx(R,{className:"h-4 w-4 opacity-50"})]})}),e.jsx(N,{className:"w-80 p-0",align:"start",children:e.jsxs(E,{children:[e.jsx(I,{placeholder:`Search ${s.label.toLowerCase()}...`}),e.jsxs(M,{children:[e.jsxs(U,{children:["No ",s.label.toLowerCase()," found."]}),e.jsx(V,{children:s.options.map(t=>e.jsx(G,{onSelect:()=>y(s.key,t),className:"cursor-pointer",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:H("flex h-4 w-4 items-center justify-center rounded-sm border border-primary",s.values.includes(t)?"bg-primary text-primary-foreground":"opacity-50 [&_svg]:invisible"),children:e.jsx(X,{className:"h-3 w-3"})}),e.jsx("span",{children:t})]})},t))})]})]})})]}),s.values.length>0&&e.jsxs("div",{className:"flex flex-wrap gap-1 mt-2",children:[s.values.slice(0,3).map(t=>e.jsxs(x,{variant:"secondary",className:"text-xs cursor-pointer hover:bg-destructive/10 min-w-[60px] max-w-[120px] truncate text-center",onClick:()=>y(s.key,t),children:[e.jsx("span",{className:"truncate",children:t}),e.jsx(C,{className:"h-3 w-3 ml-1 flex-shrink-0"})]},t)),s.values.length>3&&e.jsxs(x,{variant:"outline",className:"text-xs min-w-[60px] text-center",children:["+",s.values.length-3," more"]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:s.description})]});return e.jsxs($,{className:"bg-background shadow-sm border",children:[e.jsx(z,{className:"border-b pb-4 cursor-pointer",onClick:()=>B(!p),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(L,{className:"flex items-center gap-2",children:[e.jsx(_,{className:"w-5 h-5 text-primary"}),"Session Filters",e.jsx(R,{className:`w-4 h-4 transition-transform ${p?"rotate-180":""}`})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[u>0&&e.jsxs(x,{className:"bg-primary text-primary-foreground min-w-[60px] text-center",children:[u," Active"]}),e.jsxs(r,{variant:"outline",size:"sm",onClick:T,disabled:u===0,className:"gap-1 h-8",children:[e.jsx(C,{className:"h-4 w-4"}),"Clear All"]})]})]})}),!p&&e.jsx(A,{className:"p-6",children:e.jsxs(Y,{defaultValue:"filters",className:"w-full",children:[e.jsxs(Z,{className:"grid w-full grid-cols-2 mb-6",children:[e.jsx(b,{value:"filters",children:"Filter Options"}),e.jsx(b,{value:"dateRange",children:"Date Range"})]}),e.jsx(w,{value:"filters",className:"space-y-6",children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:g.map(s=>e.jsx(W,{config:s},s.key))})}),e.jsx(w,{value:"dateRange",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"font-medium text-sm flex items-center gap-2",children:[e.jsx(c,{className:"w-4 h-4"}),"Start Date"]}),a.dateRange.start&&e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>o("start",null),className:"h-6 px-2 text-xs",children:"Clear"})]}),e.jsxs(f,{children:[e.jsx(v,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:"w-full justify-start text-left font-normal h-9",children:[e.jsx(c,{className:"mr-2 h-4 w-4"}),a.dateRange.start?S(a.dateRange.start,"PPP"):"Select start date"]})}),e.jsx(N,{className:"w-auto p-0",align:"start",children:e.jsx(k,{mode:"single",selected:a.dateRange.start||void 0,onSelect:s=>o("start",s||null),disabled:s=>a.dateRange.end?s>a.dateRange.end:!1,initialFocus:!0})})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("label",{className:"font-medium text-sm flex items-center gap-2",children:[e.jsx(c,{className:"w-4 h-4"}),"End Date"]}),a.dateRange.end&&e.jsx(r,{variant:"ghost",size:"sm",onClick:()=>o("end",null),className:"h-6 px-2 text-xs",children:"Clear"})]}),e.jsxs(f,{children:[e.jsx(v,{asChild:!0,children:e.jsxs(r,{variant:"outline",className:"w-full justify-start text-left font-normal h-9",children:[e.jsx(c,{className:"mr-2 h-4 w-4"}),a.dateRange.end?S(a.dateRange.end,"PPP"):"Select end date"]})}),e.jsx(N,{className:"w-auto p-0",align:"start",children:e.jsx(k,{mode:"single",selected:a.dateRange.end||void 0,onSelect:s=>o("end",s||null),disabled:s=>a.dateRange.start?s<a.dateRange.start:!1,initialFocus:!0})})]})]})]})})]})})]})};export{oe as S};
//# sourceMappingURL=SessionsFilterSection-BUfF1kUV.js.map
