import{i as I,t as B,r as x,x as O,j as e,f as b}from"./index-Bm67KBkU.js";import{P as R,a as D,b as H}from"./select-CM-Birqk.js";const V=I("Navigation",[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]]);function J({title:S="On this page",position:k="right",className:_,collapseOnMobile:T=!0}){const{sections:p,jumpTo:N}=B(),[C,M]=x.useState(null),[c,f]=x.useState(null),{resolvedTheme:v}=O(),E=x.useRef(!1);if(x.useEffect(()=>{const t=()=>{try{const d=getComputedStyle(document.documentElement).getPropertyValue("--background").trim().split(/\s+/);if(d.length>=3){const s=parseFloat(d[0]),z=parseFloat(d[1].replace("%",""))/100,L=parseFloat(d[2].replace("%",""))/100,g=(1-Math.abs(2*L-1))*z,h=g*(1-Math.abs(s/60%2-1)),w=L-g/2;let i=0,a=0,l=0;0<=s&&s<60?(i=g,a=h,l=0):60<=s&&s<120?(i=h,a=g,l=0):120<=s&&s<180?(i=0,a=g,l=h):180<=s&&s<240?(i=0,a=h,l=g):240<=s&&s<300?(i=h,a=0,l=g):(i=g,a=0,l=h),i=i+w,a=a+w,l=l+w;const y=[i,a,l].map(j=>j<=.03928?j/12.92:Math.pow((j+.055)/1.055,2.4)),F=.2126*y[0]+.7152*y[1]+.0722*y[2];f(F>.6)}else f(v==="dark"?!1:v==="light"?!0:!document.documentElement.classList.contains("dark"))}catch{f(v==="dark"?!1:v==="light"?!0:!document.documentElement.classList.contains("dark"))}};t();const o=new MutationObserver(m=>{for(const r of m)r.type==="attributes"&&(r.attributeName==="class"||r.attributeName==="style")&&t()});o.observe(document.documentElement,{attributes:!0,attributeFilter:["class","style"]});const u=window.matchMedia("(prefers-color-scheme: dark)"),n=()=>t();try{u.addEventListener("change",n)}catch{u.addListener(n)}return()=>{o.disconnect();try{u.removeEventListener("change",n)}catch{u.removeListener(n)}}},[v]),x.useEffect(()=>{if(!p.length)return;const t=p.map(n=>({id:n.id,el:n.getElement?.()||document.getElementById(n.id)})).filter(n=>!!n.el),o=()=>{if(!E.current)return;const n=t.map(({id:r,el:d})=>({id:r,rect:d.getBoundingClientRect()})).sort((r,d)=>r.rect.top-d.rect.top);let m=n[0]?.id??null;for(const r of n)if(r.rect.top<=window.innerHeight*.3)m=r.id;else break;M(m)},u=setTimeout(()=>{E.current=!0,o()},250);return window.addEventListener("scroll",o,{passive:!0}),window.addEventListener("resize",o),()=>{clearTimeout(u),window.removeEventListener("scroll",o),window.removeEventListener("resize",o)}},[p]),!p.length)return null;const P=k==="right"?"right-3":"left-3",A=T?"sm:block":"block";return e.jsxs("nav",{"aria-label":"Section timeline",className:b(A,"group fixed z-20",P,"top-28","w-6","pointer-events-none",_),children:[e.jsx("div",{className:"relative h-auto pointer-events-auto",children:e.jsxs("ol",{className:"relative ml-3 py-4 pr-2",children:[e.jsx("div",{className:"absolute left-1 top-4 bottom-4 w-px bg-gradient-to-b from-transparent via-foreground/20 to-transparent"}),p.map(t=>{const o=t.id===C,u=c===null?"ring-blue-500/40":c?"ring-blue-600/40":"ring-blue-400/50",n=c===null?"hover:ring-blue-500/20":c?"hover:ring-blue-600/20":"hover:ring-blue-400/30",m=c===!1?"bg-white/80 hover:bg-white":"bg-foreground/70 hover:bg-foreground",r=c===!1?"bg-white shadow-[0_0_0_2px_rgba(255,255,255,0.25)]":"bg-blue-600 shadow-[0_0_0_2px_rgba(37,99,235,0.18)]";return e.jsx("li",{className:"relative pl-6 py-5",children:e.jsx("button",{type:"button",onClick:()=>N(t.id),title:t.label,"aria-label":t.label,"aria-current":o?"location":void 0,className:b("absolute left-[-13px] top-0.5 w-6 h-6 rounded-full transition-transform","outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-600 focus:ring-offset-background",o?b("scale-105 ring-2",u):b("hover:ring-1",n)),children:e.jsx("span",{className:b("block m-auto rounded-full","w-2.5 h-2.5",o?r:m)})})},t.id)})]})}),e.jsx("div",{className:b("fixed",k==="right"?"right-3":"left-3","bottom-6 z-30"),style:{pointerEvents:"auto"},children:e.jsxs(R,{children:[e.jsx(D,{asChild:!0,children:e.jsx("button",{type:"button","aria-label":"Open section navigator",className:b("h-10 w-10 rounded-full transition flex items-center justify-center","shadow-lg hover:shadow-xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 focus-visible:ring-offset-background",c===null?"bg-primary text-primary-foreground ring-1 ring-primary/30 focus-visible:ring-primary":c?"bg-foreground text-background ring-1 ring-foreground/20 focus-visible:ring-foreground":"bg-background text-foreground ring-1 ring-foreground/20 focus-visible:ring-foreground"),children:e.jsx(V,{className:"w-5 h-5"})})}),e.jsxs(H,{align:"end",className:"w-64 p-2",children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide p-2",children:S}),e.jsx("ul",{className:"max-h-80 overflow-auto",children:p.map(t=>e.jsx("li",{children:e.jsx("button",{type:"button",className:"w-full text-left text-sm px-2 py-2 rounded hover:bg-accent",onClick:()=>N(t.id),children:t.label})},t.id))})]})]})})]})}export{J as S};
//# sourceMappingURL=SectionTimelineNav-aY20sFWr.js.map
